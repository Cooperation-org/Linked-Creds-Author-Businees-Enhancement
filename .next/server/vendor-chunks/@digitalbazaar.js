"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@digitalbazaar";
exports.ids = ["vendor-chunks/@digitalbazaar"];
exports.modules = {

/***/ "(ssr)/./node_modules/@digitalbazaar/lru-memoize/node_modules/lru-cache/index.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/lru-memoize/node_modules/lru-cache/index.js ***!
  \*********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = __webpack_require__(/*! yallist */ \"(ssr)/./node_modules/yallist/yallist.js\")\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvbHJ1LW1lbW9pemUvbm9kZV9tb2R1bGVzL2xydS1jYWNoZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBWTs7QUFFWjtBQUNBLGdCQUFnQixtQkFBTyxDQUFDLHdEQUFTOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7O0FBRTVCLGtCQUFrQjtBQUNsQixxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQSwyQ0FBMkMsZ0JBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxnQkFBZ0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2xydS1tZW1vaXplL25vZGVfbW9kdWxlcy9scnUtY2FjaGUvaW5kZXguanM/ZjJmMyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuLy8gQSBsaW5rZWQgbGlzdCB0byBrZWVwIHRyYWNrIG9mIHJlY2VudGx5LXVzZWQtbmVzc1xuY29uc3QgWWFsbGlzdCA9IHJlcXVpcmUoJ3lhbGxpc3QnKVxuXG5jb25zdCBNQVggPSBTeW1ib2woJ21heCcpXG5jb25zdCBMRU5HVEggPSBTeW1ib2woJ2xlbmd0aCcpXG5jb25zdCBMRU5HVEhfQ0FMQ1VMQVRPUiA9IFN5bWJvbCgnbGVuZ3RoQ2FsY3VsYXRvcicpXG5jb25zdCBBTExPV19TVEFMRSA9IFN5bWJvbCgnYWxsb3dTdGFsZScpXG5jb25zdCBNQVhfQUdFID0gU3ltYm9sKCdtYXhBZ2UnKVxuY29uc3QgRElTUE9TRSA9IFN5bWJvbCgnZGlzcG9zZScpXG5jb25zdCBOT19ESVNQT1NFX09OX1NFVCA9IFN5bWJvbCgnbm9EaXNwb3NlT25TZXQnKVxuY29uc3QgTFJVX0xJU1QgPSBTeW1ib2woJ2xydUxpc3QnKVxuY29uc3QgQ0FDSEUgPSBTeW1ib2woJ2NhY2hlJylcbmNvbnN0IFVQREFURV9BR0VfT05fR0VUID0gU3ltYm9sKCd1cGRhdGVBZ2VPbkdldCcpXG5cbmNvbnN0IG5haXZlTGVuZ3RoID0gKCkgPT4gMVxuXG4vLyBscnVMaXN0IGlzIGEgeWFsbGlzdCB3aGVyZSB0aGUgaGVhZCBpcyB0aGUgeW91bmdlc3Rcbi8vIGl0ZW0sIGFuZCB0aGUgdGFpbCBpcyB0aGUgb2xkZXN0LiAgdGhlIGxpc3QgY29udGFpbnMgdGhlIEhpdFxuLy8gb2JqZWN0cyBhcyB0aGUgZW50cmllcy5cbi8vIEVhY2ggSGl0IG9iamVjdCBoYXMgYSByZWZlcmVuY2UgdG8gaXRzIFlhbGxpc3QuTm9kZS4gIFRoaXNcbi8vIG5ldmVyIGNoYW5nZXMuXG4vL1xuLy8gY2FjaGUgaXMgYSBNYXAgKG9yIFBzZXVkb01hcCkgdGhhdCBtYXRjaGVzIHRoZSBrZXlzIHRvXG4vLyB0aGUgWWFsbGlzdC5Ob2RlIG9iamVjdC5cbmNsYXNzIExSVUNhY2hlIHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKVxuICAgICAgb3B0aW9ucyA9IHsgbWF4OiBvcHRpb25zIH1cblxuICAgIGlmICghb3B0aW9ucylcbiAgICAgIG9wdGlvbnMgPSB7fVxuXG4gICAgaWYgKG9wdGlvbnMubWF4ICYmICh0eXBlb2Ygb3B0aW9ucy5tYXggIT09ICdudW1iZXInIHx8IG9wdGlvbnMubWF4IDwgMCkpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYXggbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXInKVxuICAgIC8vIEtpbmQgb2Ygd2VpcmQgdG8gaGF2ZSBhIGRlZmF1bHQgbWF4IG9mIEluZmluaXR5LCBidXQgb2ggd2VsbC5cbiAgICBjb25zdCBtYXggPSB0aGlzW01BWF0gPSBvcHRpb25zLm1heCB8fCBJbmZpbml0eVxuXG4gICAgY29uc3QgbGMgPSBvcHRpb25zLmxlbmd0aCB8fCBuYWl2ZUxlbmd0aFxuICAgIHRoaXNbTEVOR1RIX0NBTENVTEFUT1JdID0gKHR5cGVvZiBsYyAhPT0gJ2Z1bmN0aW9uJykgPyBuYWl2ZUxlbmd0aCA6IGxjXG4gICAgdGhpc1tBTExPV19TVEFMRV0gPSBvcHRpb25zLnN0YWxlIHx8IGZhbHNlXG4gICAgaWYgKG9wdGlvbnMubWF4QWdlICYmIHR5cGVvZiBvcHRpb25zLm1heEFnZSAhPT0gJ251bWJlcicpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYXhBZ2UgbXVzdCBiZSBhIG51bWJlcicpXG4gICAgdGhpc1tNQVhfQUdFXSA9IG9wdGlvbnMubWF4QWdlIHx8IDBcbiAgICB0aGlzW0RJU1BPU0VdID0gb3B0aW9ucy5kaXNwb3NlXG4gICAgdGhpc1tOT19ESVNQT1NFX09OX1NFVF0gPSBvcHRpb25zLm5vRGlzcG9zZU9uU2V0IHx8IGZhbHNlXG4gICAgdGhpc1tVUERBVEVfQUdFX09OX0dFVF0gPSBvcHRpb25zLnVwZGF0ZUFnZU9uR2V0IHx8IGZhbHNlXG4gICAgdGhpcy5yZXNldCgpXG4gIH1cblxuICAvLyByZXNpemUgdGhlIGNhY2hlIHdoZW4gdGhlIG1heCBjaGFuZ2VzLlxuICBzZXQgbWF4IChtTCkge1xuICAgIGlmICh0eXBlb2YgbUwgIT09ICdudW1iZXInIHx8IG1MIDwgMClcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21heCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlcicpXG5cbiAgICB0aGlzW01BWF0gPSBtTCB8fCBJbmZpbml0eVxuICAgIHRyaW0odGhpcylcbiAgfVxuICBnZXQgbWF4ICgpIHtcbiAgICByZXR1cm4gdGhpc1tNQVhdXG4gIH1cblxuICBzZXQgYWxsb3dTdGFsZSAoYWxsb3dTdGFsZSkge1xuICAgIHRoaXNbQUxMT1dfU1RBTEVdID0gISFhbGxvd1N0YWxlXG4gIH1cbiAgZ2V0IGFsbG93U3RhbGUgKCkge1xuICAgIHJldHVybiB0aGlzW0FMTE9XX1NUQUxFXVxuICB9XG5cbiAgc2V0IG1heEFnZSAobUEpIHtcbiAgICBpZiAodHlwZW9mIG1BICE9PSAnbnVtYmVyJylcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21heEFnZSBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlcicpXG5cbiAgICB0aGlzW01BWF9BR0VdID0gbUFcbiAgICB0cmltKHRoaXMpXG4gIH1cbiAgZ2V0IG1heEFnZSAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTUFYX0FHRV1cbiAgfVxuXG4gIC8vIHJlc2l6ZSB0aGUgY2FjaGUgd2hlbiB0aGUgbGVuZ3RoQ2FsY3VsYXRvciBjaGFuZ2VzLlxuICBzZXQgbGVuZ3RoQ2FsY3VsYXRvciAobEMpIHtcbiAgICBpZiAodHlwZW9mIGxDICE9PSAnZnVuY3Rpb24nKVxuICAgICAgbEMgPSBuYWl2ZUxlbmd0aFxuXG4gICAgaWYgKGxDICE9PSB0aGlzW0xFTkdUSF9DQUxDVUxBVE9SXSkge1xuICAgICAgdGhpc1tMRU5HVEhfQ0FMQ1VMQVRPUl0gPSBsQ1xuICAgICAgdGhpc1tMRU5HVEhdID0gMFxuICAgICAgdGhpc1tMUlVfTElTVF0uZm9yRWFjaChoaXQgPT4ge1xuICAgICAgICBoaXQubGVuZ3RoID0gdGhpc1tMRU5HVEhfQ0FMQ1VMQVRPUl0oaGl0LnZhbHVlLCBoaXQua2V5KVxuICAgICAgICB0aGlzW0xFTkdUSF0gKz0gaGl0Lmxlbmd0aFxuICAgICAgfSlcbiAgICB9XG4gICAgdHJpbSh0aGlzKVxuICB9XG4gIGdldCBsZW5ndGhDYWxjdWxhdG9yICgpIHsgcmV0dXJuIHRoaXNbTEVOR1RIX0NBTENVTEFUT1JdIH1cblxuICBnZXQgbGVuZ3RoICgpIHsgcmV0dXJuIHRoaXNbTEVOR1RIXSB9XG4gIGdldCBpdGVtQ291bnQgKCkgeyByZXR1cm4gdGhpc1tMUlVfTElTVF0ubGVuZ3RoIH1cblxuICByZm9yRWFjaCAoZm4sIHRoaXNwKSB7XG4gICAgdGhpc3AgPSB0aGlzcCB8fCB0aGlzXG4gICAgZm9yIChsZXQgd2Fsa2VyID0gdGhpc1tMUlVfTElTVF0udGFpbDsgd2Fsa2VyICE9PSBudWxsOykge1xuICAgICAgY29uc3QgcHJldiA9IHdhbGtlci5wcmV2XG4gICAgICBmb3JFYWNoU3RlcCh0aGlzLCBmbiwgd2Fsa2VyLCB0aGlzcClcbiAgICAgIHdhbGtlciA9IHByZXZcbiAgICB9XG4gIH1cblxuICBmb3JFYWNoIChmbiwgdGhpc3ApIHtcbiAgICB0aGlzcCA9IHRoaXNwIHx8IHRoaXNcbiAgICBmb3IgKGxldCB3YWxrZXIgPSB0aGlzW0xSVV9MSVNUXS5oZWFkOyB3YWxrZXIgIT09IG51bGw7KSB7XG4gICAgICBjb25zdCBuZXh0ID0gd2Fsa2VyLm5leHRcbiAgICAgIGZvckVhY2hTdGVwKHRoaXMsIGZuLCB3YWxrZXIsIHRoaXNwKVxuICAgICAgd2Fsa2VyID0gbmV4dFxuICAgIH1cbiAgfVxuXG4gIGtleXMgKCkge1xuICAgIHJldHVybiB0aGlzW0xSVV9MSVNUXS50b0FycmF5KCkubWFwKGsgPT4gay5rZXkpXG4gIH1cblxuICB2YWx1ZXMgKCkge1xuICAgIHJldHVybiB0aGlzW0xSVV9MSVNUXS50b0FycmF5KCkubWFwKGsgPT4gay52YWx1ZSlcbiAgfVxuXG4gIHJlc2V0ICgpIHtcbiAgICBpZiAodGhpc1tESVNQT1NFXSAmJlxuICAgICAgICB0aGlzW0xSVV9MSVNUXSAmJlxuICAgICAgICB0aGlzW0xSVV9MSVNUXS5sZW5ndGgpIHtcbiAgICAgIHRoaXNbTFJVX0xJU1RdLmZvckVhY2goaGl0ID0+IHRoaXNbRElTUE9TRV0oaGl0LmtleSwgaGl0LnZhbHVlKSlcbiAgICB9XG5cbiAgICB0aGlzW0NBQ0hFXSA9IG5ldyBNYXAoKSAvLyBoYXNoIG9mIGl0ZW1zIGJ5IGtleVxuICAgIHRoaXNbTFJVX0xJU1RdID0gbmV3IFlhbGxpc3QoKSAvLyBsaXN0IG9mIGl0ZW1zIGluIG9yZGVyIG9mIHVzZSByZWNlbmN5XG4gICAgdGhpc1tMRU5HVEhdID0gMCAvLyBsZW5ndGggb2YgaXRlbXMgaW4gdGhlIGxpc3RcbiAgfVxuXG4gIGR1bXAgKCkge1xuICAgIHJldHVybiB0aGlzW0xSVV9MSVNUXS5tYXAoaGl0ID0+XG4gICAgICBpc1N0YWxlKHRoaXMsIGhpdCkgPyBmYWxzZSA6IHtcbiAgICAgICAgazogaGl0LmtleSxcbiAgICAgICAgdjogaGl0LnZhbHVlLFxuICAgICAgICBlOiBoaXQubm93ICsgKGhpdC5tYXhBZ2UgfHwgMClcbiAgICAgIH0pLnRvQXJyYXkoKS5maWx0ZXIoaCA9PiBoKVxuICB9XG5cbiAgZHVtcExydSAoKSB7XG4gICAgcmV0dXJuIHRoaXNbTFJVX0xJU1RdXG4gIH1cblxuICBzZXQgKGtleSwgdmFsdWUsIG1heEFnZSkge1xuICAgIG1heEFnZSA9IG1heEFnZSB8fCB0aGlzW01BWF9BR0VdXG5cbiAgICBpZiAobWF4QWdlICYmIHR5cGVvZiBtYXhBZ2UgIT09ICdudW1iZXInKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbWF4QWdlIG11c3QgYmUgYSBudW1iZXInKVxuXG4gICAgY29uc3Qgbm93ID0gbWF4QWdlID8gRGF0ZS5ub3coKSA6IDBcbiAgICBjb25zdCBsZW4gPSB0aGlzW0xFTkdUSF9DQUxDVUxBVE9SXSh2YWx1ZSwga2V5KVxuXG4gICAgaWYgKHRoaXNbQ0FDSEVdLmhhcyhrZXkpKSB7XG4gICAgICBpZiAobGVuID4gdGhpc1tNQVhdKSB7XG4gICAgICAgIGRlbCh0aGlzLCB0aGlzW0NBQ0hFXS5nZXQoa2V5KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGUgPSB0aGlzW0NBQ0hFXS5nZXQoa2V5KVxuICAgICAgY29uc3QgaXRlbSA9IG5vZGUudmFsdWVcblxuICAgICAgLy8gZGlzcG9zZSBvZiB0aGUgb2xkIG9uZSBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgICAgIC8vIHNwbGl0IG91dCBpbnRvIDIgaWZzIGZvciBiZXR0ZXIgY292ZXJhZ2UgdHJhY2tpbmdcbiAgICAgIGlmICh0aGlzW0RJU1BPU0VdKSB7XG4gICAgICAgIGlmICghdGhpc1tOT19ESVNQT1NFX09OX1NFVF0pXG4gICAgICAgICAgdGhpc1tESVNQT1NFXShrZXksIGl0ZW0udmFsdWUpXG4gICAgICB9XG5cbiAgICAgIGl0ZW0ubm93ID0gbm93XG4gICAgICBpdGVtLm1heEFnZSA9IG1heEFnZVxuICAgICAgaXRlbS52YWx1ZSA9IHZhbHVlXG4gICAgICB0aGlzW0xFTkdUSF0gKz0gbGVuIC0gaXRlbS5sZW5ndGhcbiAgICAgIGl0ZW0ubGVuZ3RoID0gbGVuXG4gICAgICB0aGlzLmdldChrZXkpXG4gICAgICB0cmltKHRoaXMpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGhpdCA9IG5ldyBFbnRyeShrZXksIHZhbHVlLCBsZW4sIG5vdywgbWF4QWdlKVxuXG4gICAgLy8gb3ZlcnNpemVkIG9iamVjdHMgZmFsbCBvdXQgb2YgY2FjaGUgYXV0b21hdGljYWxseS5cbiAgICBpZiAoaGl0Lmxlbmd0aCA+IHRoaXNbTUFYXSkge1xuICAgICAgaWYgKHRoaXNbRElTUE9TRV0pXG4gICAgICAgIHRoaXNbRElTUE9TRV0oa2V5LCB2YWx1ZSlcblxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdGhpc1tMRU5HVEhdICs9IGhpdC5sZW5ndGhcbiAgICB0aGlzW0xSVV9MSVNUXS51bnNoaWZ0KGhpdClcbiAgICB0aGlzW0NBQ0hFXS5zZXQoa2V5LCB0aGlzW0xSVV9MSVNUXS5oZWFkKVxuICAgIHRyaW0odGhpcylcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgaGFzIChrZXkpIHtcbiAgICBpZiAoIXRoaXNbQ0FDSEVdLmhhcyhrZXkpKSByZXR1cm4gZmFsc2VcbiAgICBjb25zdCBoaXQgPSB0aGlzW0NBQ0hFXS5nZXQoa2V5KS52YWx1ZVxuICAgIHJldHVybiAhaXNTdGFsZSh0aGlzLCBoaXQpXG4gIH1cblxuICBnZXQgKGtleSkge1xuICAgIHJldHVybiBnZXQodGhpcywga2V5LCB0cnVlKVxuICB9XG5cbiAgcGVlayAoa2V5KSB7XG4gICAgcmV0dXJuIGdldCh0aGlzLCBrZXksIGZhbHNlKVxuICB9XG5cbiAgcG9wICgpIHtcbiAgICBjb25zdCBub2RlID0gdGhpc1tMUlVfTElTVF0udGFpbFxuICAgIGlmICghbm9kZSlcbiAgICAgIHJldHVybiBudWxsXG5cbiAgICBkZWwodGhpcywgbm9kZSlcbiAgICByZXR1cm4gbm9kZS52YWx1ZVxuICB9XG5cbiAgZGVsIChrZXkpIHtcbiAgICBkZWwodGhpcywgdGhpc1tDQUNIRV0uZ2V0KGtleSkpXG4gIH1cblxuICBsb2FkIChhcnIpIHtcbiAgICAvLyByZXNldCB0aGUgY2FjaGVcbiAgICB0aGlzLnJlc2V0KClcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICAvLyBBIHByZXZpb3VzIHNlcmlhbGl6ZWQgY2FjaGUgaGFzIHRoZSBtb3N0IHJlY2VudCBpdGVtcyBmaXJzdFxuICAgIGZvciAobGV0IGwgPSBhcnIubGVuZ3RoIC0gMTsgbCA+PSAwOyBsLS0pIHtcbiAgICAgIGNvbnN0IGhpdCA9IGFycltsXVxuICAgICAgY29uc3QgZXhwaXJlc0F0ID0gaGl0LmUgfHwgMFxuICAgICAgaWYgKGV4cGlyZXNBdCA9PT0gMClcbiAgICAgICAgLy8gdGhlIGl0ZW0gd2FzIGNyZWF0ZWQgd2l0aG91dCBleHBpcmF0aW9uIGluIGEgbm9uIGFnZWQgY2FjaGVcbiAgICAgICAgdGhpcy5zZXQoaGl0LmssIGhpdC52KVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG1heEFnZSA9IGV4cGlyZXNBdCAtIG5vd1xuICAgICAgICAvLyBkb250IGFkZCBhbHJlYWR5IGV4cGlyZWQgaXRlbXNcbiAgICAgICAgaWYgKG1heEFnZSA+IDApIHtcbiAgICAgICAgICB0aGlzLnNldChoaXQuaywgaGl0LnYsIG1heEFnZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBydW5lICgpIHtcbiAgICB0aGlzW0NBQ0hFXS5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiBnZXQodGhpcywga2V5LCBmYWxzZSkpXG4gIH1cbn1cblxuY29uc3QgZ2V0ID0gKHNlbGYsIGtleSwgZG9Vc2UpID0+IHtcbiAgY29uc3Qgbm9kZSA9IHNlbGZbQ0FDSEVdLmdldChrZXkpXG4gIGlmIChub2RlKSB7XG4gICAgY29uc3QgaGl0ID0gbm9kZS52YWx1ZVxuICAgIGlmIChpc1N0YWxlKHNlbGYsIGhpdCkpIHtcbiAgICAgIGRlbChzZWxmLCBub2RlKVxuICAgICAgaWYgKCFzZWxmW0FMTE9XX1NUQUxFXSlcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZG9Vc2UpIHtcbiAgICAgICAgaWYgKHNlbGZbVVBEQVRFX0FHRV9PTl9HRVRdKVxuICAgICAgICAgIG5vZGUudmFsdWUubm93ID0gRGF0ZS5ub3coKVxuICAgICAgICBzZWxmW0xSVV9MSVNUXS51bnNoaWZ0Tm9kZShub2RlKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGl0LnZhbHVlXG4gIH1cbn1cblxuY29uc3QgaXNTdGFsZSA9IChzZWxmLCBoaXQpID0+IHtcbiAgaWYgKCFoaXQgfHwgKCFoaXQubWF4QWdlICYmICFzZWxmW01BWF9BR0VdKSlcbiAgICByZXR1cm4gZmFsc2VcblxuICBjb25zdCBkaWZmID0gRGF0ZS5ub3coKSAtIGhpdC5ub3dcbiAgcmV0dXJuIGhpdC5tYXhBZ2UgPyBkaWZmID4gaGl0Lm1heEFnZVxuICAgIDogc2VsZltNQVhfQUdFXSAmJiAoZGlmZiA+IHNlbGZbTUFYX0FHRV0pXG59XG5cbmNvbnN0IHRyaW0gPSBzZWxmID0+IHtcbiAgaWYgKHNlbGZbTEVOR1RIXSA+IHNlbGZbTUFYXSkge1xuICAgIGZvciAobGV0IHdhbGtlciA9IHNlbGZbTFJVX0xJU1RdLnRhaWw7XG4gICAgICBzZWxmW0xFTkdUSF0gPiBzZWxmW01BWF0gJiYgd2Fsa2VyICE9PSBudWxsOykge1xuICAgICAgLy8gV2Uga25vdyB0aGF0IHdlJ3JlIGFib3V0IHRvIGRlbGV0ZSB0aGlzIG9uZSwgYW5kIGFsc29cbiAgICAgIC8vIHdoYXQgdGhlIG5leHQgbGVhc3QgcmVjZW50bHkgdXNlZCBrZXkgd2lsbCBiZSwgc28ganVzdFxuICAgICAgLy8gZ28gYWhlYWQgYW5kIHNldCBpdCBub3cuXG4gICAgICBjb25zdCBwcmV2ID0gd2Fsa2VyLnByZXZcbiAgICAgIGRlbChzZWxmLCB3YWxrZXIpXG4gICAgICB3YWxrZXIgPSBwcmV2XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGRlbCA9IChzZWxmLCBub2RlKSA9PiB7XG4gIGlmIChub2RlKSB7XG4gICAgY29uc3QgaGl0ID0gbm9kZS52YWx1ZVxuICAgIGlmIChzZWxmW0RJU1BPU0VdKVxuICAgICAgc2VsZltESVNQT1NFXShoaXQua2V5LCBoaXQudmFsdWUpXG5cbiAgICBzZWxmW0xFTkdUSF0gLT0gaGl0Lmxlbmd0aFxuICAgIHNlbGZbQ0FDSEVdLmRlbGV0ZShoaXQua2V5KVxuICAgIHNlbGZbTFJVX0xJU1RdLnJlbW92ZU5vZGUobm9kZSlcbiAgfVxufVxuXG5jbGFzcyBFbnRyeSB7XG4gIGNvbnN0cnVjdG9yIChrZXksIHZhbHVlLCBsZW5ndGgsIG5vdywgbWF4QWdlKSB7XG4gICAgdGhpcy5rZXkgPSBrZXlcbiAgICB0aGlzLnZhbHVlID0gdmFsdWVcbiAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aFxuICAgIHRoaXMubm93ID0gbm93XG4gICAgdGhpcy5tYXhBZ2UgPSBtYXhBZ2UgfHwgMFxuICB9XG59XG5cbmNvbnN0IGZvckVhY2hTdGVwID0gKHNlbGYsIGZuLCBub2RlLCB0aGlzcCkgPT4ge1xuICBsZXQgaGl0ID0gbm9kZS52YWx1ZVxuICBpZiAoaXNTdGFsZShzZWxmLCBoaXQpKSB7XG4gICAgZGVsKHNlbGYsIG5vZGUpXG4gICAgaWYgKCFzZWxmW0FMTE9XX1NUQUxFXSlcbiAgICAgIGhpdCA9IHVuZGVmaW5lZFxuICB9XG4gIGlmIChoaXQpXG4gICAgZm4uY2FsbCh0aGlzcCwgaGl0LnZhbHVlLCBoaXQua2V5LCBzZWxmKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExSVUNhY2hlXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/lru-memoize/node_modules/lru-cache/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/security-context/dist/context.esm.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/security-context/dist/context.esm.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONTEXT: () => (/* binding */ context_3),\n/* harmony export */   CONTEXT_URL: () => (/* binding */ context_4),\n/* harmony export */   SECURITY_CONTEXT_V1_URL: () => (/* binding */ context_5),\n/* harmony export */   SECURITY_CONTEXT_V2_URL: () => (/* binding */ context_6),\n/* harmony export */   constants: () => (/* binding */ context_2),\n/* harmony export */   contexts: () => (/* binding */ context_1),\n/* harmony export */   \"default\": () => (/* binding */ context$1)\n/* harmony export */ });\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar context = createCommonjsModule(function (module, exports) {\n!function(e,t){for(var i in t)e[i]=t[i];}(exports,function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r});},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0});},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */const r=i(1),a=i(2),c=i(3),{CONTEXT_URL:n,SECURITY_CONTEXT_V1_URL:o,SECURITY_CONTEXT_V2_URL:s}=c,p=new Map;p.set(o,r),p.set(s,a),e.exports={constants:c,contexts:p,SECURITY_CONTEXT_V1_URL:o,SECURITY_CONTEXT_V2_URL:s,CONTEXT_URL:n,CONTEXT:a};},function(e,t,i){/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */e.exports={\"@context\":{id:\"@id\",type:\"@type\",dc:\"http://purl.org/dc/terms/\",sec:\"https://w3id.org/security#\",xsd:\"http://www.w3.org/2001/XMLSchema#\",EcdsaKoblitzSignature2016:\"sec:EcdsaKoblitzSignature2016\",Ed25519Signature2018:\"sec:Ed25519Signature2018\",EncryptedMessage:\"sec:EncryptedMessage\",GraphSignature2012:\"sec:GraphSignature2012\",LinkedDataSignature2015:\"sec:LinkedDataSignature2015\",LinkedDataSignature2016:\"sec:LinkedDataSignature2016\",CryptographicKey:\"sec:Key\",authenticationTag:\"sec:authenticationTag\",canonicalizationAlgorithm:\"sec:canonicalizationAlgorithm\",cipherAlgorithm:\"sec:cipherAlgorithm\",cipherData:\"sec:cipherData\",cipherKey:\"sec:cipherKey\",created:{\"@id\":\"dc:created\",\"@type\":\"xsd:dateTime\"},creator:{\"@id\":\"dc:creator\",\"@type\":\"@id\"},digestAlgorithm:\"sec:digestAlgorithm\",digestValue:\"sec:digestValue\",domain:\"sec:domain\",encryptionKey:\"sec:encryptionKey\",expiration:{\"@id\":\"sec:expiration\",\"@type\":\"xsd:dateTime\"},expires:{\"@id\":\"sec:expiration\",\"@type\":\"xsd:dateTime\"},initializationVector:\"sec:initializationVector\",iterationCount:\"sec:iterationCount\",nonce:\"sec:nonce\",normalizationAlgorithm:\"sec:normalizationAlgorithm\",owner:{\"@id\":\"sec:owner\",\"@type\":\"@id\"},password:\"sec:password\",privateKey:{\"@id\":\"sec:privateKey\",\"@type\":\"@id\"},privateKeyPem:\"sec:privateKeyPem\",publicKey:{\"@id\":\"sec:publicKey\",\"@type\":\"@id\"},publicKeyBase58:\"sec:publicKeyBase58\",publicKeyPem:\"sec:publicKeyPem\",publicKeyWif:\"sec:publicKeyWif\",publicKeyService:{\"@id\":\"sec:publicKeyService\",\"@type\":\"@id\"},revoked:{\"@id\":\"sec:revoked\",\"@type\":\"xsd:dateTime\"},salt:\"sec:salt\",signature:\"sec:signature\",signatureAlgorithm:\"sec:signingAlgorithm\",signatureValue:\"sec:signatureValue\"}};},function(e,t,i){/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */e.exports={\"@context\":[{\"@version\":1.1},\"https://w3id.org/security/v1\",{AesKeyWrappingKey2019:\"sec:AesKeyWrappingKey2019\",DeleteKeyOperation:\"sec:DeleteKeyOperation\",DeriveSecretOperation:\"sec:DeriveSecretOperation\",EcdsaSecp256k1Signature2019:\"sec:EcdsaSecp256k1Signature2019\",EcdsaSecp256r1Signature2019:\"sec:EcdsaSecp256r1Signature2019\",EcdsaSecp256k1VerificationKey2019:\"sec:EcdsaSecp256k1VerificationKey2019\",EcdsaSecp256r1VerificationKey2019:\"sec:EcdsaSecp256r1VerificationKey2019\",Ed25519Signature2018:\"sec:Ed25519Signature2018\",Ed25519VerificationKey2018:\"sec:Ed25519VerificationKey2018\",EquihashProof2018:\"sec:EquihashProof2018\",ExportKeyOperation:\"sec:ExportKeyOperation\",GenerateKeyOperation:\"sec:GenerateKeyOperation\",KmsOperation:\"sec:KmsOperation\",RevokeKeyOperation:\"sec:RevokeKeyOperation\",RsaSignature2018:\"sec:RsaSignature2018\",RsaVerificationKey2018:\"sec:RsaVerificationKey2018\",Sha256HmacKey2019:\"sec:Sha256HmacKey2019\",SignOperation:\"sec:SignOperation\",UnwrapKeyOperation:\"sec:UnwrapKeyOperation\",VerifyOperation:\"sec:VerifyOperation\",WrapKeyOperation:\"sec:WrapKeyOperation\",X25519KeyAgreementKey2019:\"sec:X25519KeyAgreementKey2019\",allowedAction:\"sec:allowedAction\",assertionMethod:{\"@id\":\"sec:assertionMethod\",\"@type\":\"@id\",\"@container\":\"@set\"},authentication:{\"@id\":\"sec:authenticationMethod\",\"@type\":\"@id\",\"@container\":\"@set\"},capability:{\"@id\":\"sec:capability\",\"@type\":\"@id\"},capabilityAction:\"sec:capabilityAction\",capabilityChain:{\"@id\":\"sec:capabilityChain\",\"@type\":\"@id\",\"@container\":\"@list\"},capabilityDelegation:{\"@id\":\"sec:capabilityDelegationMethod\",\"@type\":\"@id\",\"@container\":\"@set\"},capabilityInvocation:{\"@id\":\"sec:capabilityInvocationMethod\",\"@type\":\"@id\",\"@container\":\"@set\"},caveat:{\"@id\":\"sec:caveat\",\"@type\":\"@id\",\"@container\":\"@set\"},challenge:\"sec:challenge\",ciphertext:\"sec:ciphertext\",controller:{\"@id\":\"sec:controller\",\"@type\":\"@id\"},delegator:{\"@id\":\"sec:delegator\",\"@type\":\"@id\"},equihashParameterK:{\"@id\":\"sec:equihashParameterK\",\"@type\":\"xsd:integer\"},equihashParameterN:{\"@id\":\"sec:equihashParameterN\",\"@type\":\"xsd:integer\"},invocationTarget:{\"@id\":\"sec:invocationTarget\",\"@type\":\"@id\"},invoker:{\"@id\":\"sec:invoker\",\"@type\":\"@id\"},jws:\"sec:jws\",keyAgreement:{\"@id\":\"sec:keyAgreementMethod\",\"@type\":\"@id\",\"@container\":\"@set\"},kmsModule:{\"@id\":\"sec:kmsModule\"},parentCapability:{\"@id\":\"sec:parentCapability\",\"@type\":\"@id\"},plaintext:\"sec:plaintext\",proof:{\"@id\":\"sec:proof\",\"@type\":\"@id\",\"@container\":\"@graph\"},proofPurpose:{\"@id\":\"sec:proofPurpose\",\"@type\":\"@vocab\"},proofValue:\"sec:proofValue\",referenceId:\"sec:referenceId\",unwrappedKey:\"sec:unwrappedKey\",verificationMethod:{\"@id\":\"sec:verificationMethod\",\"@type\":\"@id\"},verifyData:\"sec:verifyData\",wrappedKey:\"sec:wrappedKey\"}]};},function(e,t,i){/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */e.exports={SECURITY_CONTEXT_V1_URL:\"https://w3id.org/security/v1\",SECURITY_CONTEXT_V2_URL:\"https://w3id.org/security/v2\",CONTEXT_URL:\"https://w3id.org/security/v2\"};}]));\n});\n\nvar context$1 = unwrapExports(context);\nvar context_1 = context.contexts;\nvar context_2 = context.constants;\nvar context_3 = context.CONTEXT;\nvar context_4 = context.CONTEXT_URL;\nvar context_5 = context.SECURITY_CONTEXT_V1_URL;\nvar context_6 = context.SECURITY_CONTEXT_V2_URL;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvc2VjdXJpdHktY29udGV4dC9kaXN0L2NvbnRleHQuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsYUFBYTtBQUNoQzs7QUFFQTtBQUNBLGVBQWUsMEJBQTBCLHFCQUFxQixTQUFTLGNBQWMsNEJBQTRCLFlBQVkscUJBQXFCLDJEQUEyRCx1Q0FBdUMscUNBQXFDLG9CQUFvQixHQUFHLGlCQUFpQiw0RkFBNEYsZUFBZSx3Q0FBd0MsU0FBUyxHQUFHLG1CQUFtQiw4QkFBOEIscURBQXFELDBCQUEwQiw2Q0FBNkMsc0JBQXNCLDZEQUE2RCxZQUFZLGVBQWUsU0FBUyxpQkFBaUIsaUNBQWlDLGlCQUFpQixZQUFZLFVBQVUsc0JBQXNCLG1CQUFtQixpREFBaUQsaUJBQWlCLGtCQUFrQjtBQUMxOUI7QUFDQSwrQkFBK0Isa0VBQWtFLGFBQWEsaUNBQWlDLHFHQUFxRyxpQkFBaUI7QUFDclE7QUFDQSxjQUFjLFlBQVksNG9CQUE0b0IsMENBQTBDLFVBQVUsaUNBQWlDLHVJQUF1SSw4Q0FBOEMsVUFBVSw4Q0FBOEMsa0tBQWtLLGdDQUFnQyxxQ0FBcUMscUNBQXFDLDhDQUE4QyxvQ0FBb0MseUhBQXlILDJDQUEyQyxVQUFVLDJDQUEyQyw0SEFBNEgsaUJBQWlCO0FBQzVxRDtBQUNBLGNBQWMsYUFBYSxlQUFlLGlDQUFpQyw2bUNBQTZtQyw4REFBOEQsaUJBQWlCLG1FQUFtRSxhQUFhLHFDQUFxQywwREFBMEQsK0RBQStELHVCQUF1Qix5RUFBeUUsdUJBQXVCLHlFQUF5RSxTQUFTLHFEQUFxRCxtRUFBbUUscUNBQXFDLFlBQVksb0NBQW9DLHFCQUFxQixxREFBcUQscUJBQXFCLHFEQUFxRCxtQkFBbUIsMkNBQTJDLFVBQVUsa0NBQWtDLDZCQUE2QixpRUFBaUUsWUFBWSxzQkFBc0IsbUJBQW1CLDJDQUEyQyxrQ0FBa0Msc0RBQXNELGVBQWUsMENBQTBDLCtHQUErRyw2Q0FBNkMseURBQXlELElBQUksaUJBQWlCO0FBQ2xzRjtBQUNBLGNBQWMsMkpBQTJKO0FBQ3pLLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTJNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL3NlY3VyaXR5LWNvbnRleHQvZGlzdC9jb250ZXh0LmVzbS5qcz84NzVhIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHVud3JhcEV4cG9ydHMgKHgpIHtcblx0cmV0dXJuIHggJiYgeC5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnZGVmYXVsdCcpID8geFsnZGVmYXVsdCddIDogeDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZm4sIG1vZHVsZSkge1xuXHRyZXR1cm4gbW9kdWxlID0geyBleHBvcnRzOiB7fSB9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7XG59XG5cbnZhciBjb250ZXh0ID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuIWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBpIGluIHQpZVtpXT10W2ldO30oZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgdD17fTtmdW5jdGlvbiBpKHIpe2lmKHRbcl0pcmV0dXJuIHRbcl0uZXhwb3J0czt2YXIgYT10W3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtyXS5jYWxsKGEuZXhwb3J0cyxhLGEuZXhwb3J0cyxpKSxhLmw9ITAsYS5leHBvcnRzfXJldHVybiBpLm09ZSxpLmM9dCxpLmQ9ZnVuY3Rpb24oZSx0LHIpe2kubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGdldDpyfSk7fSxpLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt9LGkudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9aShlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKGkucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIGEgaW4gZSlpLmQocixhLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsYSkpO3JldHVybiByfSxpLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIGkuZCh0LFwiYVwiLHQpLHR9LGkubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0saS5wPVwiXCIsaShpLnM9MCl9KFtmdW5jdGlvbihlLHQsaSl7LyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL2NvbnN0IHI9aSgxKSxhPWkoMiksYz1pKDMpLHtDT05URVhUX1VSTDpuLFNFQ1VSSVRZX0NPTlRFWFRfVjFfVVJMOm8sU0VDVVJJVFlfQ09OVEVYVF9WMl9VUkw6c309YyxwPW5ldyBNYXA7cC5zZXQobyxyKSxwLnNldChzLGEpLGUuZXhwb3J0cz17Y29uc3RhbnRzOmMsY29udGV4dHM6cCxTRUNVUklUWV9DT05URVhUX1YxX1VSTDpvLFNFQ1VSSVRZX0NPTlRFWFRfVjJfVVJMOnMsQ09OVEVYVF9VUkw6bixDT05URVhUOmF9O30sZnVuY3Rpb24oZSx0LGkpey8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIxIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9lLmV4cG9ydHM9e1wiQGNvbnRleHRcIjp7aWQ6XCJAaWRcIix0eXBlOlwiQHR5cGVcIixkYzpcImh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy9cIixzZWM6XCJodHRwczovL3czaWQub3JnL3NlY3VyaXR5I1wiLHhzZDpcImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI1wiLEVjZHNhS29ibGl0elNpZ25hdHVyZTIwMTY6XCJzZWM6RWNkc2FLb2JsaXR6U2lnbmF0dXJlMjAxNlwiLEVkMjU1MTlTaWduYXR1cmUyMDE4Olwic2VjOkVkMjU1MTlTaWduYXR1cmUyMDE4XCIsRW5jcnlwdGVkTWVzc2FnZTpcInNlYzpFbmNyeXB0ZWRNZXNzYWdlXCIsR3JhcGhTaWduYXR1cmUyMDEyOlwic2VjOkdyYXBoU2lnbmF0dXJlMjAxMlwiLExpbmtlZERhdGFTaWduYXR1cmUyMDE1Olwic2VjOkxpbmtlZERhdGFTaWduYXR1cmUyMDE1XCIsTGlua2VkRGF0YVNpZ25hdHVyZTIwMTY6XCJzZWM6TGlua2VkRGF0YVNpZ25hdHVyZTIwMTZcIixDcnlwdG9ncmFwaGljS2V5Olwic2VjOktleVwiLGF1dGhlbnRpY2F0aW9uVGFnOlwic2VjOmF1dGhlbnRpY2F0aW9uVGFnXCIsY2Fub25pY2FsaXphdGlvbkFsZ29yaXRobTpcInNlYzpjYW5vbmljYWxpemF0aW9uQWxnb3JpdGhtXCIsY2lwaGVyQWxnb3JpdGhtOlwic2VjOmNpcGhlckFsZ29yaXRobVwiLGNpcGhlckRhdGE6XCJzZWM6Y2lwaGVyRGF0YVwiLGNpcGhlcktleTpcInNlYzpjaXBoZXJLZXlcIixjcmVhdGVkOntcIkBpZFwiOlwiZGM6Y3JlYXRlZFwiLFwiQHR5cGVcIjpcInhzZDpkYXRlVGltZVwifSxjcmVhdG9yOntcIkBpZFwiOlwiZGM6Y3JlYXRvclwiLFwiQHR5cGVcIjpcIkBpZFwifSxkaWdlc3RBbGdvcml0aG06XCJzZWM6ZGlnZXN0QWxnb3JpdGhtXCIsZGlnZXN0VmFsdWU6XCJzZWM6ZGlnZXN0VmFsdWVcIixkb21haW46XCJzZWM6ZG9tYWluXCIsZW5jcnlwdGlvbktleTpcInNlYzplbmNyeXB0aW9uS2V5XCIsZXhwaXJhdGlvbjp7XCJAaWRcIjpcInNlYzpleHBpcmF0aW9uXCIsXCJAdHlwZVwiOlwieHNkOmRhdGVUaW1lXCJ9LGV4cGlyZXM6e1wiQGlkXCI6XCJzZWM6ZXhwaXJhdGlvblwiLFwiQHR5cGVcIjpcInhzZDpkYXRlVGltZVwifSxpbml0aWFsaXphdGlvblZlY3RvcjpcInNlYzppbml0aWFsaXphdGlvblZlY3RvclwiLGl0ZXJhdGlvbkNvdW50Olwic2VjOml0ZXJhdGlvbkNvdW50XCIsbm9uY2U6XCJzZWM6bm9uY2VcIixub3JtYWxpemF0aW9uQWxnb3JpdGhtOlwic2VjOm5vcm1hbGl6YXRpb25BbGdvcml0aG1cIixvd25lcjp7XCJAaWRcIjpcInNlYzpvd25lclwiLFwiQHR5cGVcIjpcIkBpZFwifSxwYXNzd29yZDpcInNlYzpwYXNzd29yZFwiLHByaXZhdGVLZXk6e1wiQGlkXCI6XCJzZWM6cHJpdmF0ZUtleVwiLFwiQHR5cGVcIjpcIkBpZFwifSxwcml2YXRlS2V5UGVtOlwic2VjOnByaXZhdGVLZXlQZW1cIixwdWJsaWNLZXk6e1wiQGlkXCI6XCJzZWM6cHVibGljS2V5XCIsXCJAdHlwZVwiOlwiQGlkXCJ9LHB1YmxpY0tleUJhc2U1ODpcInNlYzpwdWJsaWNLZXlCYXNlNThcIixwdWJsaWNLZXlQZW06XCJzZWM6cHVibGljS2V5UGVtXCIscHVibGljS2V5V2lmOlwic2VjOnB1YmxpY0tleVdpZlwiLHB1YmxpY0tleVNlcnZpY2U6e1wiQGlkXCI6XCJzZWM6cHVibGljS2V5U2VydmljZVwiLFwiQHR5cGVcIjpcIkBpZFwifSxyZXZva2VkOntcIkBpZFwiOlwic2VjOnJldm9rZWRcIixcIkB0eXBlXCI6XCJ4c2Q6ZGF0ZVRpbWVcIn0sc2FsdDpcInNlYzpzYWx0XCIsc2lnbmF0dXJlOlwic2VjOnNpZ25hdHVyZVwiLHNpZ25hdHVyZUFsZ29yaXRobTpcInNlYzpzaWduaW5nQWxnb3JpdGhtXCIsc2lnbmF0dXJlVmFsdWU6XCJzZWM6c2lnbmF0dXJlVmFsdWVcIn19O30sZnVuY3Rpb24oZSx0LGkpey8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIxIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9lLmV4cG9ydHM9e1wiQGNvbnRleHRcIjpbe1wiQHZlcnNpb25cIjoxLjF9LFwiaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS92MVwiLHtBZXNLZXlXcmFwcGluZ0tleTIwMTk6XCJzZWM6QWVzS2V5V3JhcHBpbmdLZXkyMDE5XCIsRGVsZXRlS2V5T3BlcmF0aW9uOlwic2VjOkRlbGV0ZUtleU9wZXJhdGlvblwiLERlcml2ZVNlY3JldE9wZXJhdGlvbjpcInNlYzpEZXJpdmVTZWNyZXRPcGVyYXRpb25cIixFY2RzYVNlY3AyNTZrMVNpZ25hdHVyZTIwMTk6XCJzZWM6RWNkc2FTZWNwMjU2azFTaWduYXR1cmUyMDE5XCIsRWNkc2FTZWNwMjU2cjFTaWduYXR1cmUyMDE5Olwic2VjOkVjZHNhU2VjcDI1NnIxU2lnbmF0dXJlMjAxOVwiLEVjZHNhU2VjcDI1NmsxVmVyaWZpY2F0aW9uS2V5MjAxOTpcInNlYzpFY2RzYVNlY3AyNTZrMVZlcmlmaWNhdGlvbktleTIwMTlcIixFY2RzYVNlY3AyNTZyMVZlcmlmaWNhdGlvbktleTIwMTk6XCJzZWM6RWNkc2FTZWNwMjU2cjFWZXJpZmljYXRpb25LZXkyMDE5XCIsRWQyNTUxOVNpZ25hdHVyZTIwMTg6XCJzZWM6RWQyNTUxOVNpZ25hdHVyZTIwMThcIixFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxODpcInNlYzpFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOFwiLEVxdWloYXNoUHJvb2YyMDE4Olwic2VjOkVxdWloYXNoUHJvb2YyMDE4XCIsRXhwb3J0S2V5T3BlcmF0aW9uOlwic2VjOkV4cG9ydEtleU9wZXJhdGlvblwiLEdlbmVyYXRlS2V5T3BlcmF0aW9uOlwic2VjOkdlbmVyYXRlS2V5T3BlcmF0aW9uXCIsS21zT3BlcmF0aW9uOlwic2VjOkttc09wZXJhdGlvblwiLFJldm9rZUtleU9wZXJhdGlvbjpcInNlYzpSZXZva2VLZXlPcGVyYXRpb25cIixSc2FTaWduYXR1cmUyMDE4Olwic2VjOlJzYVNpZ25hdHVyZTIwMThcIixSc2FWZXJpZmljYXRpb25LZXkyMDE4Olwic2VjOlJzYVZlcmlmaWNhdGlvbktleTIwMThcIixTaGEyNTZIbWFjS2V5MjAxOTpcInNlYzpTaGEyNTZIbWFjS2V5MjAxOVwiLFNpZ25PcGVyYXRpb246XCJzZWM6U2lnbk9wZXJhdGlvblwiLFVud3JhcEtleU9wZXJhdGlvbjpcInNlYzpVbndyYXBLZXlPcGVyYXRpb25cIixWZXJpZnlPcGVyYXRpb246XCJzZWM6VmVyaWZ5T3BlcmF0aW9uXCIsV3JhcEtleU9wZXJhdGlvbjpcInNlYzpXcmFwS2V5T3BlcmF0aW9uXCIsWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOTpcInNlYzpYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5XCIsYWxsb3dlZEFjdGlvbjpcInNlYzphbGxvd2VkQWN0aW9uXCIsYXNzZXJ0aW9uTWV0aG9kOntcIkBpZFwiOlwic2VjOmFzc2VydGlvbk1ldGhvZFwiLFwiQHR5cGVcIjpcIkBpZFwiLFwiQGNvbnRhaW5lclwiOlwiQHNldFwifSxhdXRoZW50aWNhdGlvbjp7XCJAaWRcIjpcInNlYzphdXRoZW50aWNhdGlvbk1ldGhvZFwiLFwiQHR5cGVcIjpcIkBpZFwiLFwiQGNvbnRhaW5lclwiOlwiQHNldFwifSxjYXBhYmlsaXR5OntcIkBpZFwiOlwic2VjOmNhcGFiaWxpdHlcIixcIkB0eXBlXCI6XCJAaWRcIn0sY2FwYWJpbGl0eUFjdGlvbjpcInNlYzpjYXBhYmlsaXR5QWN0aW9uXCIsY2FwYWJpbGl0eUNoYWluOntcIkBpZFwiOlwic2VjOmNhcGFiaWxpdHlDaGFpblwiLFwiQHR5cGVcIjpcIkBpZFwiLFwiQGNvbnRhaW5lclwiOlwiQGxpc3RcIn0sY2FwYWJpbGl0eURlbGVnYXRpb246e1wiQGlkXCI6XCJzZWM6Y2FwYWJpbGl0eURlbGVnYXRpb25NZXRob2RcIixcIkB0eXBlXCI6XCJAaWRcIixcIkBjb250YWluZXJcIjpcIkBzZXRcIn0sY2FwYWJpbGl0eUludm9jYXRpb246e1wiQGlkXCI6XCJzZWM6Y2FwYWJpbGl0eUludm9jYXRpb25NZXRob2RcIixcIkB0eXBlXCI6XCJAaWRcIixcIkBjb250YWluZXJcIjpcIkBzZXRcIn0sY2F2ZWF0OntcIkBpZFwiOlwic2VjOmNhdmVhdFwiLFwiQHR5cGVcIjpcIkBpZFwiLFwiQGNvbnRhaW5lclwiOlwiQHNldFwifSxjaGFsbGVuZ2U6XCJzZWM6Y2hhbGxlbmdlXCIsY2lwaGVydGV4dDpcInNlYzpjaXBoZXJ0ZXh0XCIsY29udHJvbGxlcjp7XCJAaWRcIjpcInNlYzpjb250cm9sbGVyXCIsXCJAdHlwZVwiOlwiQGlkXCJ9LGRlbGVnYXRvcjp7XCJAaWRcIjpcInNlYzpkZWxlZ2F0b3JcIixcIkB0eXBlXCI6XCJAaWRcIn0sZXF1aWhhc2hQYXJhbWV0ZXJLOntcIkBpZFwiOlwic2VjOmVxdWloYXNoUGFyYW1ldGVyS1wiLFwiQHR5cGVcIjpcInhzZDppbnRlZ2VyXCJ9LGVxdWloYXNoUGFyYW1ldGVyTjp7XCJAaWRcIjpcInNlYzplcXVpaGFzaFBhcmFtZXRlck5cIixcIkB0eXBlXCI6XCJ4c2Q6aW50ZWdlclwifSxpbnZvY2F0aW9uVGFyZ2V0OntcIkBpZFwiOlwic2VjOmludm9jYXRpb25UYXJnZXRcIixcIkB0eXBlXCI6XCJAaWRcIn0saW52b2tlcjp7XCJAaWRcIjpcInNlYzppbnZva2VyXCIsXCJAdHlwZVwiOlwiQGlkXCJ9LGp3czpcInNlYzpqd3NcIixrZXlBZ3JlZW1lbnQ6e1wiQGlkXCI6XCJzZWM6a2V5QWdyZWVtZW50TWV0aG9kXCIsXCJAdHlwZVwiOlwiQGlkXCIsXCJAY29udGFpbmVyXCI6XCJAc2V0XCJ9LGttc01vZHVsZTp7XCJAaWRcIjpcInNlYzprbXNNb2R1bGVcIn0scGFyZW50Q2FwYWJpbGl0eTp7XCJAaWRcIjpcInNlYzpwYXJlbnRDYXBhYmlsaXR5XCIsXCJAdHlwZVwiOlwiQGlkXCJ9LHBsYWludGV4dDpcInNlYzpwbGFpbnRleHRcIixwcm9vZjp7XCJAaWRcIjpcInNlYzpwcm9vZlwiLFwiQHR5cGVcIjpcIkBpZFwiLFwiQGNvbnRhaW5lclwiOlwiQGdyYXBoXCJ9LHByb29mUHVycG9zZTp7XCJAaWRcIjpcInNlYzpwcm9vZlB1cnBvc2VcIixcIkB0eXBlXCI6XCJAdm9jYWJcIn0scHJvb2ZWYWx1ZTpcInNlYzpwcm9vZlZhbHVlXCIscmVmZXJlbmNlSWQ6XCJzZWM6cmVmZXJlbmNlSWRcIix1bndyYXBwZWRLZXk6XCJzZWM6dW53cmFwcGVkS2V5XCIsdmVyaWZpY2F0aW9uTWV0aG9kOntcIkBpZFwiOlwic2VjOnZlcmlmaWNhdGlvbk1ldGhvZFwiLFwiQHR5cGVcIjpcIkBpZFwifSx2ZXJpZnlEYXRhOlwic2VjOnZlcmlmeURhdGFcIix3cmFwcGVkS2V5Olwic2VjOndyYXBwZWRLZXlcIn1dfTt9LGZ1bmN0aW9uKGUsdCxpKXsvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMSBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovZS5leHBvcnRzPXtTRUNVUklUWV9DT05URVhUX1YxX1VSTDpcImh0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvdjFcIixTRUNVUklUWV9DT05URVhUX1YyX1VSTDpcImh0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvdjJcIixDT05URVhUX1VSTDpcImh0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvdjJcIn07fV0pKTtcbn0pO1xuXG52YXIgY29udGV4dCQxID0gdW53cmFwRXhwb3J0cyhjb250ZXh0KTtcbnZhciBjb250ZXh0XzEgPSBjb250ZXh0LmNvbnRleHRzO1xudmFyIGNvbnRleHRfMiA9IGNvbnRleHQuY29uc3RhbnRzO1xudmFyIGNvbnRleHRfMyA9IGNvbnRleHQuQ09OVEVYVDtcbnZhciBjb250ZXh0XzQgPSBjb250ZXh0LkNPTlRFWFRfVVJMO1xudmFyIGNvbnRleHRfNSA9IGNvbnRleHQuU0VDVVJJVFlfQ09OVEVYVF9WMV9VUkw7XG52YXIgY29udGV4dF82ID0gY29udGV4dC5TRUNVUklUWV9DT05URVhUX1YyX1VSTDtcblxuZXhwb3J0IHsgY29udGV4dF8zIGFzIENPTlRFWFQsIGNvbnRleHRfNCBhcyBDT05URVhUX1VSTCwgY29udGV4dF81IGFzIFNFQ1VSSVRZX0NPTlRFWFRfVjFfVVJMLCBjb250ZXh0XzYgYXMgU0VDVVJJVFlfQ09OVEVYVF9WMl9VUkwsIGNvbnRleHRfMiBhcyBjb25zdGFudHMsIGNvbnRleHRfMSBhcyBjb250ZXh0cywgY29udGV4dCQxIGFzIGRlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/security-context/dist/context.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/http-client/dist/cjs/index.cjs":
/*!********************************************************************!*\
  !*** ./node_modules/@digitalbazaar/http-client/dist/cjs/index.cjs ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nvar undici = __webpack_require__(/*! undici */ \"(ssr)/./node_modules/undici/index.js\");\nvar node_process = __webpack_require__(/*! node:process */ \"node:process\");\n\n/*!\n * Copyright (c) 2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n// as long as an agent has a reference to it, its associated dispatcher will\n// be kept in this cache for reuse\nconst AGENT_CACHE = new WeakMap();\n\n// can only convert agent to dispatcher option on node 18.2+\nconst [major, minor] = node_process.versions.node.split('.').map(v => parseInt(v, 10));\nconst canConvert = (major > 18) || (major === 18 && minor >= 2);\n\n// converts `agent`/`httpsAgent` option to a dispatcher option\nfunction convertAgent(options) {\n  if(!canConvert) {\n    return options;\n  }\n\n  // do not override custom fetch function from another lib\n  if(options?.fetch && !options.fetch._httpClientCustomFetch) {\n    return options;\n  }\n\n  // only override if an agent option is present\n  const agent = options?.agent || options?.httpsAgent;\n  if(!agent) {\n    return options;\n  }\n\n  // use custom fetch if agent has already been converted\n  let fetch = AGENT_CACHE.get(agent);\n  if(!fetch) {\n    const dispatcher = new undici.Agent({connect: agent.options});\n    fetch = createFetch(dispatcher);\n    fetch._httpClientCustomFetch = true;\n    AGENT_CACHE.set(agent, fetch);\n  }\n\n  return {...options, fetch};\n}\n\n// create fetch override uses custom `dispatcher`; since `ky` does not pass\n// the dispatcher option through to `fetch`, we must use this override\nfunction createFetch(dispatcher) {\n  return function fetch(...args) {\n    dispatcher = (args[1] && args[1].dispatcher) || dispatcher;\n    args[1] = {...args[1], dispatcher};\n    // eslint-disable-next-line no-undef\n    return globalThis.fetch(...args);\n  };\n}\n\nfunction deferred(f) {\n  let promise;\n\n  return {\n    then(\n      onfulfilled,\n      onrejected\n    ) {\n      // Use logical OR assignment when Node.js 14.x support is dropped\n      //promise ||= new Promise(resolve => resolve(f()));\n      promise || (promise = new Promise(resolve => resolve(f())));\n      return promise.then(\n        onfulfilled,\n        onrejected\n      );\n    },\n  };\n}\n\n/*!\n * Copyright (c) 2020-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\nconst kyOriginalPromise = deferred(() => Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/web-streams-polyfill\"), __webpack_require__.e(\"vendor-chunks/node-fetch\"), __webpack_require__.e(\"vendor-chunks/fetch-blob\"), __webpack_require__.e(\"vendor-chunks/ky-universal\"), __webpack_require__.e(\"vendor-chunks/formdata-polyfill\"), __webpack_require__.e(\"vendor-chunks/data-uri-to-buffer\"), __webpack_require__.e(\"vendor-chunks/node-domexception\"), __webpack_require__.e(\"vendor-chunks/event-target-shim\"), __webpack_require__.e(\"vendor-chunks/abort-controller\")]).then(__webpack_require__.bind(__webpack_require__, /*! ky-universal */ \"(ssr)/./node_modules/ky-universal/index.js\"))\n  .then(({default: ky}) => ky));\n\nconst DEFAULT_HEADERS = {\n  Accept: 'application/ld+json, application/json'\n};\n\n// methods to proxy from ky\nconst PROXY_METHODS = new Set([\n  'get', 'post', 'put', 'push', 'patch', 'head', 'delete'\n]);\n\n/**\n * Returns a custom httpClient instance. Used to specify default headers and\n * other default overrides.\n *\n * @param {object} [options={}] - Options hashmap.\n * @param {object} [options.parent] - The ky promise to inherit from.\n * @param {object} [options.headers={}] - Default header overrides.\n * @param {object} [options.params] - Other default overrides.\n *\n * @returns {Function} Custom httpClient instance.\n */\nfunction createInstance({\n  parent = kyOriginalPromise, headers = {}, ...params\n} = {}) {\n  // convert legacy agent options\n  params = convertAgent(params);\n\n  // create new ky instance that will asynchronously resolve\n  const kyPromise = deferred(() => parent.then(kyBase => {\n    let ky;\n    if(parent === kyOriginalPromise) {\n      // ensure default headers, allow overrides\n      ky = kyBase.create({\n        headers: {...DEFAULT_HEADERS, ...headers},\n        ...params\n      });\n    } else {\n      // extend parent\n      ky = kyBase.extend({headers, ...params});\n    }\n    return ky;\n  }));\n\n  return _createHttpClient(kyPromise);\n}\n\nfunction _createHttpClient(kyPromise) {\n  async function httpClient(...args) {\n    const ky = await kyPromise;\n    const method = ((args[1] && args[1].method) || 'get').toLowerCase();\n    if(PROXY_METHODS.has(method)) {\n      return httpClient[method].apply(ky[method], args);\n    }\n\n    // convert legacy agent options\n    args[1] = convertAgent(args[1]);\n    return ky.apply(ky, args);\n  }\n\n  for(const method of PROXY_METHODS) {\n    httpClient[method] = async function(...args) {\n      const ky = await kyPromise;\n      return _handleResponse(ky[method], ky, args);\n    };\n  }\n\n  httpClient.create = function({headers = {}, ...params}) {\n    return createInstance({headers, ...params});\n  };\n\n  httpClient.extend = function({headers = {}, ...params}) {\n    return createInstance({parent: kyPromise, headers, ...params});\n  };\n\n  // default async `stop` signal getter\n  Object.defineProperty(httpClient, 'stop', {\n    async get() {\n      const ky = await kyPromise;\n      return ky.stop;\n    }\n  });\n\n  return httpClient;\n}\n\nasync function _handleResponse(target, thisArg, args) {\n  // convert legacy agent options\n  args[1] = convertAgent(args[1]);\n\n  let response;\n  const [url] = args;\n  try {\n    response = await target.apply(thisArg, args);\n  } catch(error) {\n    return _handleError({error, url});\n  }\n  const {parseBody = true} = args[1] || {};\n  // always set 'data', default to undefined\n  let data;\n  if(parseBody) {\n    // a 204 will not include a content-type header\n    const contentType = response.headers.get('content-type');\n    if(contentType && contentType.includes('json')) {\n      data = await response.json();\n    }\n  }\n  Object.defineProperty(response, 'data', {value: data});\n  return response;\n}\n\n/**\n * @param {object} options - Options hashmap.\n * @param {Error} options.error - Error thrown during http operation.\n * @param {string} options.url - Target URL of the request.\n *\n * @returns {Promise} Rejects with a thrown error.\n */\nasync function _handleError({error, url}) {\n  error.requestUrl = url;\n\n  // handle network errors and system errors that do not have a response\n  if(!error.response) {\n    if(error.message === 'Failed to fetch') {\n      error.message = `Failed to fetch \"${url}\". Possible CORS error.`;\n    }\n    // ky's TimeoutError class\n    if(error.name === 'TimeoutError') {\n      error.message = `Request to \"${url}\" timed out.`;\n    }\n\n    throw error;\n  }\n\n  // always move status up to the root of error\n  error.status = error.response.status;\n\n  const contentType = error.response.headers.get('content-type');\n  if(contentType && contentType.includes('json')) {\n    const errorBody = await error.response.json();\n    // the HTTPError received from ky has a generic message based on status\n    // use that if the JSON body does not include a message\n    error.message = errorBody.message || error.message;\n    error.data = errorBody;\n  }\n  throw error;\n}\n\n/*!\n * Copyright (c) 2020-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\nconst httpClient = createInstance();\n\nexports.DEFAULT_HEADERS = DEFAULT_HEADERS;\nexports.httpClient = httpClient;\nexports.kyPromise = kyOriginalPromise;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvaHR0cC1jbGllbnQvZGlzdC9janMvaW5kZXguY2pzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGFBQWEsbUJBQU8sQ0FBQyxvREFBUTtBQUM3QixtQkFBbUIsbUJBQU8sQ0FBQyxrQ0FBYzs7QUFFekM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx1QkFBdUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVTtBQUNWOztBQUVBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsNG9CQUFzQjtBQUMvRCxVQUFVLFlBQVk7O0FBRXRCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUSxXQUFXO0FBQzlCLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVEsbUJBQW1CO0FBQ3RDLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDLEVBQUUsSUFBSTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLCtCQUErQjtBQUNqRDtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSwwQkFBMEIsbUJBQW1CO0FBQzdDO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdDQUFnQyxZQUFZLFlBQVk7QUFDeEQsMkJBQTJCLG1CQUFtQjtBQUM5Qzs7QUFFQSxnQ0FBZ0MsWUFBWSxZQUFZO0FBQ3hELDJCQUEyQixzQ0FBc0M7QUFDakU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix5QkFBeUIsV0FBVztBQUNwQztBQUNBLFNBQVMsa0JBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBLDZCQUE2QixXQUFXO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxJQUFJO0FBQ3pDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsdUJBQXVCO0FBQ3ZCLGtCQUFrQjtBQUNsQixpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvaHR0cC1jbGllbnQvZGlzdC9janMvaW5kZXguY2pzPzczNTkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdW5kaWNpID0gcmVxdWlyZSgndW5kaWNpJyk7XG52YXIgbm9kZV9wcm9jZXNzID0gcmVxdWlyZSgnbm9kZTpwcm9jZXNzJyk7XG5cbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIyIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuLy8gYXMgbG9uZyBhcyBhbiBhZ2VudCBoYXMgYSByZWZlcmVuY2UgdG8gaXQsIGl0cyBhc3NvY2lhdGVkIGRpc3BhdGNoZXIgd2lsbFxuLy8gYmUga2VwdCBpbiB0aGlzIGNhY2hlIGZvciByZXVzZVxuY29uc3QgQUdFTlRfQ0FDSEUgPSBuZXcgV2Vha01hcCgpO1xuXG4vLyBjYW4gb25seSBjb252ZXJ0IGFnZW50IHRvIGRpc3BhdGNoZXIgb3B0aW9uIG9uIG5vZGUgMTguMitcbmNvbnN0IFttYWpvciwgbWlub3JdID0gbm9kZV9wcm9jZXNzLnZlcnNpb25zLm5vZGUuc3BsaXQoJy4nKS5tYXAodiA9PiBwYXJzZUludCh2LCAxMCkpO1xuY29uc3QgY2FuQ29udmVydCA9IChtYWpvciA+IDE4KSB8fCAobWFqb3IgPT09IDE4ICYmIG1pbm9yID49IDIpO1xuXG4vLyBjb252ZXJ0cyBgYWdlbnRgL2BodHRwc0FnZW50YCBvcHRpb24gdG8gYSBkaXNwYXRjaGVyIG9wdGlvblxuZnVuY3Rpb24gY29udmVydEFnZW50KG9wdGlvbnMpIHtcbiAgaWYoIWNhbkNvbnZlcnQpIHtcbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIC8vIGRvIG5vdCBvdmVycmlkZSBjdXN0b20gZmV0Y2ggZnVuY3Rpb24gZnJvbSBhbm90aGVyIGxpYlxuICBpZihvcHRpb25zPy5mZXRjaCAmJiAhb3B0aW9ucy5mZXRjaC5faHR0cENsaWVudEN1c3RvbUZldGNoKSB7XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICAvLyBvbmx5IG92ZXJyaWRlIGlmIGFuIGFnZW50IG9wdGlvbiBpcyBwcmVzZW50XG4gIGNvbnN0IGFnZW50ID0gb3B0aW9ucz8uYWdlbnQgfHwgb3B0aW9ucz8uaHR0cHNBZ2VudDtcbiAgaWYoIWFnZW50KSB7XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICAvLyB1c2UgY3VzdG9tIGZldGNoIGlmIGFnZW50IGhhcyBhbHJlYWR5IGJlZW4gY29udmVydGVkXG4gIGxldCBmZXRjaCA9IEFHRU5UX0NBQ0hFLmdldChhZ2VudCk7XG4gIGlmKCFmZXRjaCkge1xuICAgIGNvbnN0IGRpc3BhdGNoZXIgPSBuZXcgdW5kaWNpLkFnZW50KHtjb25uZWN0OiBhZ2VudC5vcHRpb25zfSk7XG4gICAgZmV0Y2ggPSBjcmVhdGVGZXRjaChkaXNwYXRjaGVyKTtcbiAgICBmZXRjaC5faHR0cENsaWVudEN1c3RvbUZldGNoID0gdHJ1ZTtcbiAgICBBR0VOVF9DQUNIRS5zZXQoYWdlbnQsIGZldGNoKTtcbiAgfVxuXG4gIHJldHVybiB7Li4ub3B0aW9ucywgZmV0Y2h9O1xufVxuXG4vLyBjcmVhdGUgZmV0Y2ggb3ZlcnJpZGUgdXNlcyBjdXN0b20gYGRpc3BhdGNoZXJgOyBzaW5jZSBga3lgIGRvZXMgbm90IHBhc3Ncbi8vIHRoZSBkaXNwYXRjaGVyIG9wdGlvbiB0aHJvdWdoIHRvIGBmZXRjaGAsIHdlIG11c3QgdXNlIHRoaXMgb3ZlcnJpZGVcbmZ1bmN0aW9uIGNyZWF0ZUZldGNoKGRpc3BhdGNoZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoKC4uLmFyZ3MpIHtcbiAgICBkaXNwYXRjaGVyID0gKGFyZ3NbMV0gJiYgYXJnc1sxXS5kaXNwYXRjaGVyKSB8fCBkaXNwYXRjaGVyO1xuICAgIGFyZ3NbMV0gPSB7Li4uYXJnc1sxXSwgZGlzcGF0Y2hlcn07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgcmV0dXJuIGdsb2JhbFRoaXMuZmV0Y2goLi4uYXJncyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlZmVycmVkKGYpIHtcbiAgbGV0IHByb21pc2U7XG5cbiAgcmV0dXJuIHtcbiAgICB0aGVuKFxuICAgICAgb25mdWxmaWxsZWQsXG4gICAgICBvbnJlamVjdGVkXG4gICAgKSB7XG4gICAgICAvLyBVc2UgbG9naWNhbCBPUiBhc3NpZ25tZW50IHdoZW4gTm9kZS5qcyAxNC54IHN1cHBvcnQgaXMgZHJvcHBlZFxuICAgICAgLy9wcm9taXNlIHx8PSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUoZigpKSk7XG4gICAgICBwcm9taXNlIHx8IChwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiByZXNvbHZlKGYoKSkpKTtcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oXG4gICAgICAgIG9uZnVsZmlsbGVkLFxuICAgICAgICBvbnJlamVjdGVkXG4gICAgICApO1xuICAgIH0sXG4gIH07XG59XG5cbi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjIgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuXG5jb25zdCBreU9yaWdpbmFsUHJvbWlzZSA9IGRlZmVycmVkKCgpID0+IGltcG9ydCgna3ktdW5pdmVyc2FsJylcbiAgLnRoZW4oKHtkZWZhdWx0OiBreX0pID0+IGt5KSk7XG5cbmNvbnN0IERFRkFVTFRfSEVBREVSUyA9IHtcbiAgQWNjZXB0OiAnYXBwbGljYXRpb24vbGQranNvbiwgYXBwbGljYXRpb24vanNvbidcbn07XG5cbi8vIG1ldGhvZHMgdG8gcHJveHkgZnJvbSBreVxuY29uc3QgUFJPWFlfTUVUSE9EUyA9IG5ldyBTZXQoW1xuICAnZ2V0JywgJ3Bvc3QnLCAncHV0JywgJ3B1c2gnLCAncGF0Y2gnLCAnaGVhZCcsICdkZWxldGUnXG5dKTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgY3VzdG9tIGh0dHBDbGllbnQgaW5zdGFuY2UuIFVzZWQgdG8gc3BlY2lmeSBkZWZhdWx0IGhlYWRlcnMgYW5kXG4gKiBvdGhlciBkZWZhdWx0IG92ZXJyaWRlcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLnBhcmVudF0gLSBUaGUga3kgcHJvbWlzZSB0byBpbmhlcml0IGZyb20uXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuaGVhZGVycz17fV0gLSBEZWZhdWx0IGhlYWRlciBvdmVycmlkZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMucGFyYW1zXSAtIE90aGVyIGRlZmF1bHQgb3ZlcnJpZGVzLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQ3VzdG9tIGh0dHBDbGllbnQgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKHtcbiAgcGFyZW50ID0ga3lPcmlnaW5hbFByb21pc2UsIGhlYWRlcnMgPSB7fSwgLi4ucGFyYW1zXG59ID0ge30pIHtcbiAgLy8gY29udmVydCBsZWdhY3kgYWdlbnQgb3B0aW9uc1xuICBwYXJhbXMgPSBjb252ZXJ0QWdlbnQocGFyYW1zKTtcblxuICAvLyBjcmVhdGUgbmV3IGt5IGluc3RhbmNlIHRoYXQgd2lsbCBhc3luY2hyb25vdXNseSByZXNvbHZlXG4gIGNvbnN0IGt5UHJvbWlzZSA9IGRlZmVycmVkKCgpID0+IHBhcmVudC50aGVuKGt5QmFzZSA9PiB7XG4gICAgbGV0IGt5O1xuICAgIGlmKHBhcmVudCA9PT0ga3lPcmlnaW5hbFByb21pc2UpIHtcbiAgICAgIC8vIGVuc3VyZSBkZWZhdWx0IGhlYWRlcnMsIGFsbG93IG92ZXJyaWRlc1xuICAgICAga3kgPSBreUJhc2UuY3JlYXRlKHtcbiAgICAgICAgaGVhZGVyczogey4uLkRFRkFVTFRfSEVBREVSUywgLi4uaGVhZGVyc30sXG4gICAgICAgIC4uLnBhcmFtc1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGV4dGVuZCBwYXJlbnRcbiAgICAgIGt5ID0ga3lCYXNlLmV4dGVuZCh7aGVhZGVycywgLi4ucGFyYW1zfSk7XG4gICAgfVxuICAgIHJldHVybiBreTtcbiAgfSkpO1xuXG4gIHJldHVybiBfY3JlYXRlSHR0cENsaWVudChreVByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlSHR0cENsaWVudChreVByb21pc2UpIHtcbiAgYXN5bmMgZnVuY3Rpb24gaHR0cENsaWVudCguLi5hcmdzKSB7XG4gICAgY29uc3Qga3kgPSBhd2FpdCBreVByb21pc2U7XG4gICAgY29uc3QgbWV0aG9kID0gKChhcmdzWzFdICYmIGFyZ3NbMV0ubWV0aG9kKSB8fCAnZ2V0JykudG9Mb3dlckNhc2UoKTtcbiAgICBpZihQUk9YWV9NRVRIT0RTLmhhcyhtZXRob2QpKSB7XG4gICAgICByZXR1cm4gaHR0cENsaWVudFttZXRob2RdLmFwcGx5KGt5W21ldGhvZF0sIGFyZ3MpO1xuICAgIH1cblxuICAgIC8vIGNvbnZlcnQgbGVnYWN5IGFnZW50IG9wdGlvbnNcbiAgICBhcmdzWzFdID0gY29udmVydEFnZW50KGFyZ3NbMV0pO1xuICAgIHJldHVybiBreS5hcHBseShreSwgYXJncyk7XG4gIH1cblxuICBmb3IoY29uc3QgbWV0aG9kIG9mIFBST1hZX01FVEhPRFMpIHtcbiAgICBodHRwQ2xpZW50W21ldGhvZF0gPSBhc3luYyBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICBjb25zdCBreSA9IGF3YWl0IGt5UHJvbWlzZTtcbiAgICAgIHJldHVybiBfaGFuZGxlUmVzcG9uc2Uoa3lbbWV0aG9kXSwga3ksIGFyZ3MpO1xuICAgIH07XG4gIH1cblxuICBodHRwQ2xpZW50LmNyZWF0ZSA9IGZ1bmN0aW9uKHtoZWFkZXJzID0ge30sIC4uLnBhcmFtc30pIHtcbiAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2Uoe2hlYWRlcnMsIC4uLnBhcmFtc30pO1xuICB9O1xuXG4gIGh0dHBDbGllbnQuZXh0ZW5kID0gZnVuY3Rpb24oe2hlYWRlcnMgPSB7fSwgLi4ucGFyYW1zfSkge1xuICAgIHJldHVybiBjcmVhdGVJbnN0YW5jZSh7cGFyZW50OiBreVByb21pc2UsIGhlYWRlcnMsIC4uLnBhcmFtc30pO1xuICB9O1xuXG4gIC8vIGRlZmF1bHQgYXN5bmMgYHN0b3BgIHNpZ25hbCBnZXR0ZXJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGh0dHBDbGllbnQsICdzdG9wJywge1xuICAgIGFzeW5jIGdldCgpIHtcbiAgICAgIGNvbnN0IGt5ID0gYXdhaXQga3lQcm9taXNlO1xuICAgICAgcmV0dXJuIGt5LnN0b3A7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaHR0cENsaWVudDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX2hhbmRsZVJlc3BvbnNlKHRhcmdldCwgdGhpc0FyZywgYXJncykge1xuICAvLyBjb252ZXJ0IGxlZ2FjeSBhZ2VudCBvcHRpb25zXG4gIGFyZ3NbMV0gPSBjb252ZXJ0QWdlbnQoYXJnc1sxXSk7XG5cbiAgbGV0IHJlc3BvbnNlO1xuICBjb25zdCBbdXJsXSA9IGFyZ3M7XG4gIHRyeSB7XG4gICAgcmVzcG9uc2UgPSBhd2FpdCB0YXJnZXQuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH0gY2F0Y2goZXJyb3IpIHtcbiAgICByZXR1cm4gX2hhbmRsZUVycm9yKHtlcnJvciwgdXJsfSk7XG4gIH1cbiAgY29uc3Qge3BhcnNlQm9keSA9IHRydWV9ID0gYXJnc1sxXSB8fCB7fTtcbiAgLy8gYWx3YXlzIHNldCAnZGF0YScsIGRlZmF1bHQgdG8gdW5kZWZpbmVkXG4gIGxldCBkYXRhO1xuICBpZihwYXJzZUJvZHkpIHtcbiAgICAvLyBhIDIwNCB3aWxsIG5vdCBpbmNsdWRlIGEgY29udGVudC10eXBlIGhlYWRlclxuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgIGlmKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdqc29uJykpIHtcbiAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXNwb25zZSwgJ2RhdGEnLCB7dmFsdWU6IGRhdGF9KTtcbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICogQHBhcmFtIHtFcnJvcn0gb3B0aW9ucy5lcnJvciAtIEVycm9yIHRocm93biBkdXJpbmcgaHR0cCBvcGVyYXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51cmwgLSBUYXJnZXQgVVJMIG9mIHRoZSByZXF1ZXN0LlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBSZWplY3RzIHdpdGggYSB0aHJvd24gZXJyb3IuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9oYW5kbGVFcnJvcih7ZXJyb3IsIHVybH0pIHtcbiAgZXJyb3IucmVxdWVzdFVybCA9IHVybDtcblxuICAvLyBoYW5kbGUgbmV0d29yayBlcnJvcnMgYW5kIHN5c3RlbSBlcnJvcnMgdGhhdCBkbyBub3QgaGF2ZSBhIHJlc3BvbnNlXG4gIGlmKCFlcnJvci5yZXNwb25zZSkge1xuICAgIGlmKGVycm9yLm1lc3NhZ2UgPT09ICdGYWlsZWQgdG8gZmV0Y2gnKSB7XG4gICAgICBlcnJvci5tZXNzYWdlID0gYEZhaWxlZCB0byBmZXRjaCBcIiR7dXJsfVwiLiBQb3NzaWJsZSBDT1JTIGVycm9yLmA7XG4gICAgfVxuICAgIC8vIGt5J3MgVGltZW91dEVycm9yIGNsYXNzXG4gICAgaWYoZXJyb3IubmFtZSA9PT0gJ1RpbWVvdXRFcnJvcicpIHtcbiAgICAgIGVycm9yLm1lc3NhZ2UgPSBgUmVxdWVzdCB0byBcIiR7dXJsfVwiIHRpbWVkIG91dC5gO1xuICAgIH1cblxuICAgIHRocm93IGVycm9yO1xuICB9XG5cbiAgLy8gYWx3YXlzIG1vdmUgc3RhdHVzIHVwIHRvIHRoZSByb290IG9mIGVycm9yXG4gIGVycm9yLnN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1cztcblxuICBjb25zdCBjb250ZW50VHlwZSA9IGVycm9yLnJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgaWYoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2pzb24nKSkge1xuICAgIGNvbnN0IGVycm9yQm9keSA9IGF3YWl0IGVycm9yLnJlc3BvbnNlLmpzb24oKTtcbiAgICAvLyB0aGUgSFRUUEVycm9yIHJlY2VpdmVkIGZyb20ga3kgaGFzIGEgZ2VuZXJpYyBtZXNzYWdlIGJhc2VkIG9uIHN0YXR1c1xuICAgIC8vIHVzZSB0aGF0IGlmIHRoZSBKU09OIGJvZHkgZG9lcyBub3QgaW5jbHVkZSBhIG1lc3NhZ2VcbiAgICBlcnJvci5tZXNzYWdlID0gZXJyb3JCb2R5Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZTtcbiAgICBlcnJvci5kYXRhID0gZXJyb3JCb2R5O1xuICB9XG4gIHRocm93IGVycm9yO1xufVxuXG4vKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMC0yMDIyIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuY29uc3QgaHR0cENsaWVudCA9IGNyZWF0ZUluc3RhbmNlKCk7XG5cbmV4cG9ydHMuREVGQVVMVF9IRUFERVJTID0gREVGQVVMVF9IRUFERVJTO1xuZXhwb3J0cy5odHRwQ2xpZW50ID0gaHR0cENsaWVudDtcbmV4cG9ydHMua3lQcm9taXNlID0ga3lPcmlnaW5hbFByb21pc2U7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/http-client/dist/cjs/index.cjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-io/lib/CachedResolver.js":
/*!******************************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-io/lib/CachedResolver.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CachedResolver: () => (/* binding */ CachedResolver)\n/* harmony export */ });\n/* harmony import */ var _did_io_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./did-io.js */ \"(ssr)/./node_modules/@digitalbazaar/did-io/lib/did-io.js\");\n/* harmony import */ var _digitalbazaar_lru_memoize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @digitalbazaar/lru-memoize */ \"(ssr)/./node_modules/@digitalbazaar/lru-memoize/lib/index.js\");\n/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\nclass CachedResolver {\n  /**\n   * @param {object} [options={}] - Options hashmap.\n   * @param {number} [options.max=100] - Max number of items in the cache.\n   * @param {number} [options.maxAge=5000] - Max age of a cache item, in ms.\n   * @param {boolean} [options.updateAgeOnGet=false] - When using time-expiring\n   *   entries with `maxAge`, setting this to true will make each entry's\n   *   effective time update to the current time whenever it is retrieved from\n   *   cache, thereby extending the expiration date of the entry.\n   * @param {object} [options.cacheOptions] - Additional `lru-cache` options.\n   */\n  constructor({max = 100, maxAge = 5000, updateAgeOnGet = false,\n    ...cacheOptions} = {}) {\n    this._cache = new _digitalbazaar_lru_memoize__WEBPACK_IMPORTED_MODULE_1__.LruCache({max, maxAge, updateAgeOnGet, ...cacheOptions});\n    this._methods = new Map();\n  }\n\n  use(driver) {\n    const methodName = driver.method;\n    this._methods.set(methodName, driver);\n  }\n\n  /**\n   * Gets the DID Document, by selecting a registered driver based on the DID\n   * prefix (DID method).\n   * Either `did` or `url` param is required.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} [options.did] - DID uri.\n   * @param {string} [options.url] - Typically, a key ID or other DID-related\n   *   url. This is used instead of 'did' to improve code readability.\n   * @param {object} [options.args] - Options passed through to the\n   *   driver's get() operation.\n   *\n   * @returns {Promise<object>} Resolves with fetched DID Document.\n   */\n  async get({did, url, ...args} = {}) {\n    did = did || url;\n    if(!did) {\n      throw new TypeError('A string \"did\" or \"url\" parameter is required.');\n    }\n\n    const method = this._methodForDid(did);\n\n    return this._cache.memoize({\n      key: did,\n      fn: () => method.get({did, ...args})\n    });\n  }\n\n  /**\n   * Generates a new DID Document and corresponding keys.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.method - DID method id (e.g. 'key', 'v1', 'web').\n   * @param {object} options.args - Options passed through to the DID driver.\n   *\n   * @returns {Promise<object>} Resolves with result of individual DID driver's\n   *   `generate()` method call.\n   */\n  async generate({method, ...args}) {\n    const driver = this._methods.get(method);\n    if(!driver) {\n      throw new Error(`Driver for DID method \"${method}\" not found.`);\n    }\n\n    return driver.generate(args);\n  }\n\n  /**\n   * @param {string} did - DID uri.\n   *\n   * @returns {object} - DID Method driver.\n   * @private\n   */\n  _methodForDid(did) {\n    const {prefix} = (0,_did_io_js__WEBPACK_IMPORTED_MODULE_0__.parseDid)({did});\n    const method = this._methods.get(prefix);\n    if(!method) {\n      throw new Error(`Driver for DID ${did} not found.`);\n    }\n    return method;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLWlvL2xpYi9DYWNoZWRSZXNvbHZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDcUM7QUFDZTs7QUFFN0M7QUFDUDtBQUNBLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWU7QUFDZixxQkFBcUIsSUFBSTtBQUN6QixzQkFBc0IsZ0VBQVEsRUFBRSw2Q0FBNkM7QUFDN0U7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDO0FBQ0EsYUFBYSxtQkFBbUIsSUFBSTtBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLGFBQWE7QUFDekMsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBLGdEQUFnRCxPQUFPO0FBQ3ZEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRLEVBQUUsb0RBQVEsRUFBRSxJQUFJO0FBQ25DO0FBQ0E7QUFDQSx3Q0FBd0MsS0FBSztBQUM3QztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9kaWQtaW8vbGliL0NhY2hlZFJlc29sdmVyLmpzPzlmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0IHtwYXJzZURpZH0gZnJvbSAnLi9kaWQtaW8uanMnO1xuaW1wb3J0IHtMcnVDYWNoZX0gZnJvbSAnQGRpZ2l0YWxiYXphYXIvbHJ1LW1lbW9pemUnO1xuXG5leHBvcnQgY2xhc3MgQ2FjaGVkUmVzb2x2ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heD0xMDBdIC0gTWF4IG51bWJlciBvZiBpdGVtcyBpbiB0aGUgY2FjaGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhBZ2U9NTAwMF0gLSBNYXggYWdlIG9mIGEgY2FjaGUgaXRlbSwgaW4gbXMuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXBkYXRlQWdlT25HZXQ9ZmFsc2VdIC0gV2hlbiB1c2luZyB0aW1lLWV4cGlyaW5nXG4gICAqICAgZW50cmllcyB3aXRoIGBtYXhBZ2VgLCBzZXR0aW5nIHRoaXMgdG8gdHJ1ZSB3aWxsIG1ha2UgZWFjaCBlbnRyeSdzXG4gICAqICAgZWZmZWN0aXZlIHRpbWUgdXBkYXRlIHRvIHRoZSBjdXJyZW50IHRpbWUgd2hlbmV2ZXIgaXQgaXMgcmV0cmlldmVkIGZyb21cbiAgICogICBjYWNoZSwgdGhlcmVieSBleHRlbmRpbmcgdGhlIGV4cGlyYXRpb24gZGF0ZSBvZiB0aGUgZW50cnkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5jYWNoZU9wdGlvbnNdIC0gQWRkaXRpb25hbCBgbHJ1LWNhY2hlYCBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe21heCA9IDEwMCwgbWF4QWdlID0gNTAwMCwgdXBkYXRlQWdlT25HZXQgPSBmYWxzZSxcbiAgICAuLi5jYWNoZU9wdGlvbnN9ID0ge30pIHtcbiAgICB0aGlzLl9jYWNoZSA9IG5ldyBMcnVDYWNoZSh7bWF4LCBtYXhBZ2UsIHVwZGF0ZUFnZU9uR2V0LCAuLi5jYWNoZU9wdGlvbnN9KTtcbiAgICB0aGlzLl9tZXRob2RzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgdXNlKGRyaXZlcikge1xuICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBkcml2ZXIubWV0aG9kO1xuICAgIHRoaXMuX21ldGhvZHMuc2V0KG1ldGhvZE5hbWUsIGRyaXZlcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgRElEIERvY3VtZW50LCBieSBzZWxlY3RpbmcgYSByZWdpc3RlcmVkIGRyaXZlciBiYXNlZCBvbiB0aGUgRElEXG4gICAqIHByZWZpeCAoRElEIG1ldGhvZCkuXG4gICAqIEVpdGhlciBgZGlkYCBvciBgdXJsYCBwYXJhbSBpcyByZXF1aXJlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5kaWRdIC0gRElEIHVyaS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnVybF0gLSBUeXBpY2FsbHksIGEga2V5IElEIG9yIG90aGVyIERJRC1yZWxhdGVkXG4gICAqICAgdXJsLiBUaGlzIGlzIHVzZWQgaW5zdGVhZCBvZiAnZGlkJyB0byBpbXByb3ZlIGNvZGUgcmVhZGFiaWxpdHkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5hcmdzXSAtIE9wdGlvbnMgcGFzc2VkIHRocm91Z2ggdG8gdGhlXG4gICAqICAgZHJpdmVyJ3MgZ2V0KCkgb3BlcmF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fSBSZXNvbHZlcyB3aXRoIGZldGNoZWQgRElEIERvY3VtZW50LlxuICAgKi9cbiAgYXN5bmMgZ2V0KHtkaWQsIHVybCwgLi4uYXJnc30gPSB7fSkge1xuICAgIGRpZCA9IGRpZCB8fCB1cmw7XG4gICAgaWYoIWRpZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQSBzdHJpbmcgXCJkaWRcIiBvciBcInVybFwiIHBhcmFtZXRlciBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLl9tZXRob2RGb3JEaWQoZGlkKTtcblxuICAgIHJldHVybiB0aGlzLl9jYWNoZS5tZW1vaXplKHtcbiAgICAgIGtleTogZGlkLFxuICAgICAgZm46ICgpID0+IG1ldGhvZC5nZXQoe2RpZCwgLi4uYXJnc30pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgbmV3IERJRCBEb2N1bWVudCBhbmQgY29ycmVzcG9uZGluZyBrZXlzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubWV0aG9kIC0gRElEIG1ldGhvZCBpZCAoZS5nLiAna2V5JywgJ3YxJywgJ3dlYicpLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5hcmdzIC0gT3B0aW9ucyBwYXNzZWQgdGhyb3VnaCB0byB0aGUgRElEIGRyaXZlci5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gUmVzb2x2ZXMgd2l0aCByZXN1bHQgb2YgaW5kaXZpZHVhbCBESUQgZHJpdmVyJ3NcbiAgICogICBgZ2VuZXJhdGUoKWAgbWV0aG9kIGNhbGwuXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZSh7bWV0aG9kLCAuLi5hcmdzfSkge1xuICAgIGNvbnN0IGRyaXZlciA9IHRoaXMuX21ldGhvZHMuZ2V0KG1ldGhvZCk7XG4gICAgaWYoIWRyaXZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEcml2ZXIgZm9yIERJRCBtZXRob2QgXCIke21ldGhvZH1cIiBub3QgZm91bmQuYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRyaXZlci5nZW5lcmF0ZShhcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGlkIC0gRElEIHVyaS5cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gLSBESUQgTWV0aG9kIGRyaXZlci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9tZXRob2RGb3JEaWQoZGlkKSB7XG4gICAgY29uc3Qge3ByZWZpeH0gPSBwYXJzZURpZCh7ZGlkfSk7XG4gICAgY29uc3QgbWV0aG9kID0gdGhpcy5fbWV0aG9kcy5nZXQocHJlZml4KTtcbiAgICBpZighbWV0aG9kKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERyaXZlciBmb3IgRElEICR7ZGlkfSBub3QgZm91bmQuYCk7XG4gICAgfVxuICAgIHJldHVybiBtZXRob2Q7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-io/lib/CachedResolver.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-io/lib/constants.js":
/*!*************************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-io/lib/constants.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VERIFICATION_RELATIONSHIPS: () => (/* binding */ VERIFICATION_RELATIONSHIPS)\n/* harmony export */ });\n/*!\n * Copyright (c) 2021 Digital Bazaar. All rights reserved.\n */\n/**\n * A verification relationship expresses the relationship between the DID\n * subject and a verification method (such as a cryptographic public key).\n * Different verification relationships enable the associated verification\n * methods to be used for different purposes.\n *\n * @see https://w3c.github.io/did-core/#verification-relationships\n * @type {Set<string>}\n */\nconst VERIFICATION_RELATIONSHIPS = new Set([\n  'assertionMethod',\n  'authentication',\n  'capabilityDelegation',\n  'capabilityInvocation',\n  'keyAgreement'\n]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLWlvL2xpYi9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLWlvL2xpYi9jb25zdGFudHMuanM/N2RkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMSBEaWdpdGFsIEJhemFhci4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuLyoqXG4gKiBBIHZlcmlmaWNhdGlvbiByZWxhdGlvbnNoaXAgZXhwcmVzc2VzIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgRElEXG4gKiBzdWJqZWN0IGFuZCBhIHZlcmlmaWNhdGlvbiBtZXRob2QgKHN1Y2ggYXMgYSBjcnlwdG9ncmFwaGljIHB1YmxpYyBrZXkpLlxuICogRGlmZmVyZW50IHZlcmlmaWNhdGlvbiByZWxhdGlvbnNoaXBzIGVuYWJsZSB0aGUgYXNzb2NpYXRlZCB2ZXJpZmljYXRpb25cbiAqIG1ldGhvZHMgdG8gYmUgdXNlZCBmb3IgZGlmZmVyZW50IHB1cnBvc2VzLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2RpZC1jb3JlLyN2ZXJpZmljYXRpb24tcmVsYXRpb25zaGlwc1xuICogQHR5cGUge1NldDxzdHJpbmc+fVxuICovXG5leHBvcnQgY29uc3QgVkVSSUZJQ0FUSU9OX1JFTEFUSU9OU0hJUFMgPSBuZXcgU2V0KFtcbiAgJ2Fzc2VydGlvbk1ldGhvZCcsXG4gICdhdXRoZW50aWNhdGlvbicsXG4gICdjYXBhYmlsaXR5RGVsZWdhdGlvbicsXG4gICdjYXBhYmlsaXR5SW52b2NhdGlvbicsXG4gICdrZXlBZ3JlZW1lbnQnXG5dKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-io/lib/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-io/lib/did-io.js":
/*!**********************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-io/lib/did-io.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _methodById: () => (/* binding */ _methodById),\n/* harmony export */   approvesMethodFor: () => (/* binding */ approvesMethodFor),\n/* harmony export */   findVerificationMethod: () => (/* binding */ findVerificationMethod),\n/* harmony export */   initKeys: () => (/* binding */ initKeys),\n/* harmony export */   parseDid: () => (/* binding */ parseDid)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@digitalbazaar/did-io/lib/constants.js\");\n/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n/**\n * Tests whether this DID Document contains a verification relationship\n * between the subject and a method id, for a given purpose.\n *\n * @example\n * didDocument.approvesMethodFor({\n *   methodId: 'did:ex:1234#abcd', purpose: 'authentication'\n * });\n * // -> true\n * @example\n * didDocument.approvesMethodFor({\n *   methodId: 'did:ex:1234#abcd', purpose: 'assertionMethod'\n * });\n * // -> false\n *\n * @param {object} options - Options hashmap.\n * @param {object} options.doc - DID Document.\n * @param {string} options.methodId - Verification method id (a uri).\n * @param {string} options.purpose - E.g. 'authentication', etc.\n *\n * @returns {boolean} Returns whether a method id is authorized for purpose.\n */\nfunction approvesMethodFor({doc, methodId, purpose}) {\n  if(!(methodId && purpose)) {\n    throw new Error('A method id and purpose is required.');\n  }\n  const method = _methodById({doc, methodId});\n  if(!method) {\n    return false;\n  }\n  const methods = doc[purpose] || [];\n  return !!methods.find(method => {\n    return (typeof method === 'string' && method === methodId) ||\n      (typeof method === 'object' && method.id === methodId);\n  });\n}\n\n/**\n * Initializes the DID Document's keys/proof methods.\n *\n * @example\n * didDocument.id = 'did:ex:123';\n * const {keyPairs} = await initKeys({\n *   cryptoLd,\n *   keyMap: {\n *     capabilityInvocation: someExistingKey,\n *     authentication: 'Ed25519VerificationKey2020',\n *     assertionMethod: 'Ed25519VerificationKey2020',\n *     keyAgreement: 'X25519KeyAgreementKey2019'\n *   }\n * });.\n *\n * @param {object} options - Options hashmap.\n * @param {object} options.doc - DID Document.\n * @typedef {object} CryptoLD\n * @param {CryptoLD} [options.cryptoLd] - CryptoLD driver instance,\n *   initialized with the key types this DID Document intends to support.\n * @param {object} [options.keyMap] - Map of keys (or key types) by purpose.\n *\n * @returns {Promise<{keyPairs: object}>} A hashmap of public/private key\n *   pairs, by key id.\n */\nasync function initKeys({doc, cryptoLd, keyMap = {}} = {}) {\n  if(!doc.id) {\n    throw new TypeError(\n      'DID Document \"id\" property is required to initialize keys.');\n  }\n\n  const keyPairs = {};\n\n  // Set the defaults for the created keys (if needed)\n  const options = {controller: doc.id};\n\n  for(const purpose in keyMap) {\n    if(!_constants_js__WEBPACK_IMPORTED_MODULE_0__.VERIFICATION_RELATIONSHIPS.has(purpose)) {\n      throw new Error(`Unsupported key purpose: \"${purpose}\".`);\n    }\n\n    let key;\n    if(typeof keyMap[purpose] === 'string') {\n      if(!cryptoLd) {\n        throw new Error('Please provide an initialized CryptoLD instance.');\n      }\n      key = await cryptoLd.generate({type: keyMap[purpose], ...options});\n    } else {\n      // An existing key has been provided\n      key = keyMap[purpose];\n    }\n\n    this[purpose] = [key.export({publicKey: true})];\n    keyPairs[key.id] = key;\n  }\n\n  return {keyPairs};\n}\n\n/**\n * Finds a verification method for a given methodId or purpose.\n *\n * If a method id is given, returns the object for that method (for example,\n * returns the public key definition for that id).\n *\n * If a purpose (verification relationship) is given, returns the first\n * available verification method for that purpose.\n *\n * If no method is found (for the given id or purpose), returns undefined.\n *\n * @example\n * findVerificationMethod({doc, methodId: 'did:ex:123#abcd'});\n * // ->\n * {\n *   id: 'did:ex:123#abcd',\n *   controller: 'did:ex:123',\n *   type: 'Ed25519VerificationKey2020',\n *   publicKeyMultibase: '...'\n * }\n * @example\n * didDocument.findVerificationMethod({doc, purpose: 'authentication'});\n * // ->\n * {\n *   id: 'did:ex:123#abcd',\n *   controller: 'did:ex:123',\n *   type: 'Ed25519VerificationKey2020',\n *   publicKeyMultibase: '...'\n * }\n * @param {object} options - Options hashmap.\n * @param {object} options.doc - DID Document.\n *\n * One of the following is required.\n * @param {string} [options.methodId] - Verification method id.\n * @param {string} [options.purpose] - Method purpose (verification\n *   relationship).\n *\n * @returns {object} Returns the verification method, or undefined if not found.\n */\nfunction findVerificationMethod({doc, methodId, purpose} = {}) {\n  if(!doc) {\n    throw new TypeError('A DID Document is required.');\n  }\n  if(!(methodId || purpose)) {\n    throw new TypeError('A method id or purpose is required.');\n  }\n\n  if(methodId) {\n    return _methodById({doc, methodId});\n  }\n\n  // Id not given, find the first method by purpose\n  const [method] = doc[purpose] || [];\n  if(method && typeof method === 'string') {\n    // This is a reference, not the full method, attempt to find it\n    return _methodById({doc, methodId: method});\n  }\n\n  return method;\n}\n\n/**\n * Finds a verification method for a given id and returns it.\n *\n * @param {object} options - Options hashmap.\n * @param {object} options.doc - DID Document.\n * @param {string} options.methodId - Verification method id.\n *\n * @returns {object} Returns the verification method.\n */\nfunction _methodById({doc, methodId}) {\n  let result;\n\n  // First, check the 'verificationMethod' bucket, see if it's listed there\n  if(doc.verificationMethod) {\n    result = doc.verificationMethod.find(method => method.id === methodId);\n  }\n\n  for(const purpose of _constants_js__WEBPACK_IMPORTED_MODULE_0__.VERIFICATION_RELATIONSHIPS) {\n    const methods = doc[purpose] || [];\n    // Iterate through each verification method in 'authentication', etc.\n    for(const method of methods) {\n      // Only return it if the method is defined, not referenced\n      if(typeof method === 'object' && method.id === methodId) {\n        result = method;\n        break;\n      }\n    }\n    if(result) {\n      return result;\n    }\n  }\n}\n\n/**\n * Parses the DID into various component (currently, only cares about prefix).\n *\n * @example\n * parseDid({did: 'did:v1:test:nym'});\n * // -> {prefix: 'v1'}\n *\n * @param {string} did - DID uri.\n *\n * @returns {{prefix: string}} Returns the method prefix (without `did:`).\n */\nfunction parseDid({did}) {\n  if(!did) {\n    throw new TypeError('DID cannot be empty.');\n  }\n\n  const prefix = did.split(':').slice(1, 2).join(':');\n\n  return {prefix};\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLWlvL2xpYi9kaWQtaW8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzBEOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ08sNEJBQTRCLHVCQUF1QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxVQUFVO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxFQUFFO0FBQ047QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQixXQUFXLFVBQVU7QUFDckI7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxhQUFhLFNBQVMsaUJBQWlCLEdBQUc7QUFDMUM7QUFDQTtBQUNPLHlCQUF5Qiw0QkFBNEIsSUFBSTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLG1CQUFtQjs7QUFFbkI7QUFDQSxRQUFRLHFFQUEwQjtBQUNsQyxtREFBbUQsUUFBUTtBQUMzRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGtDQUFrQztBQUN2RSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBLGlDQUFpQyxnQkFBZ0I7QUFDakQ7QUFDQTs7QUFFQSxVQUFVO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlDQUFpQztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLCtCQUErQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNPLGlDQUFpQyx3QkFBd0IsSUFBSTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IsY0FBYztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixzQkFBc0I7QUFDOUM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNPLHNCQUFzQixjQUFjO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixxRUFBMEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdUJBQXVCO0FBQ3BDLFVBQVU7QUFDVjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGNBQWMsaUJBQWlCO0FBQy9CO0FBQ08sbUJBQW1CLElBQUk7QUFDOUI7QUFDQTtBQUNBOztBQUVBOztBQUVBLFVBQVU7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9kaWQtaW8vbGliL2RpZC1pby5qcz8zMGYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIxIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmltcG9ydCB7VkVSSUZJQ0FUSU9OX1JFTEFUSU9OU0hJUFN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLyoqXG4gKiBUZXN0cyB3aGV0aGVyIHRoaXMgRElEIERvY3VtZW50IGNvbnRhaW5zIGEgdmVyaWZpY2F0aW9uIHJlbGF0aW9uc2hpcFxuICogYmV0d2VlbiB0aGUgc3ViamVjdCBhbmQgYSBtZXRob2QgaWQsIGZvciBhIGdpdmVuIHB1cnBvc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIGRpZERvY3VtZW50LmFwcHJvdmVzTWV0aG9kRm9yKHtcbiAqICAgbWV0aG9kSWQ6ICdkaWQ6ZXg6MTIzNCNhYmNkJywgcHVycG9zZTogJ2F1dGhlbnRpY2F0aW9uJ1xuICogfSk7XG4gKiAvLyAtPiB0cnVlXG4gKiBAZXhhbXBsZVxuICogZGlkRG9jdW1lbnQuYXBwcm92ZXNNZXRob2RGb3Ioe1xuICogICBtZXRob2RJZDogJ2RpZDpleDoxMjM0I2FiY2QnLCBwdXJwb3NlOiAnYXNzZXJ0aW9uTWV0aG9kJ1xuICogfSk7XG4gKiAvLyAtPiBmYWxzZVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuZG9jIC0gRElEIERvY3VtZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubWV0aG9kSWQgLSBWZXJpZmljYXRpb24gbWV0aG9kIGlkIChhIHVyaSkuXG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5wdXJwb3NlIC0gRS5nLiAnYXV0aGVudGljYXRpb24nLCBldGMuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgd2hldGhlciBhIG1ldGhvZCBpZCBpcyBhdXRob3JpemVkIGZvciBwdXJwb3NlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwcm92ZXNNZXRob2RGb3Ioe2RvYywgbWV0aG9kSWQsIHB1cnBvc2V9KSB7XG4gIGlmKCEobWV0aG9kSWQgJiYgcHVycG9zZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgbWV0aG9kIGlkIGFuZCBwdXJwb3NlIGlzIHJlcXVpcmVkLicpO1xuICB9XG4gIGNvbnN0IG1ldGhvZCA9IF9tZXRob2RCeUlkKHtkb2MsIG1ldGhvZElkfSk7XG4gIGlmKCFtZXRob2QpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgbWV0aG9kcyA9IGRvY1twdXJwb3NlXSB8fCBbXTtcbiAgcmV0dXJuICEhbWV0aG9kcy5maW5kKG1ldGhvZCA9PiB7XG4gICAgcmV0dXJuICh0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJyAmJiBtZXRob2QgPT09IG1ldGhvZElkKSB8fFxuICAgICAgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnICYmIG1ldGhvZC5pZCA9PT0gbWV0aG9kSWQpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgRElEIERvY3VtZW50J3Mga2V5cy9wcm9vZiBtZXRob2RzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBkaWREb2N1bWVudC5pZCA9ICdkaWQ6ZXg6MTIzJztcbiAqIGNvbnN0IHtrZXlQYWlyc30gPSBhd2FpdCBpbml0S2V5cyh7XG4gKiAgIGNyeXB0b0xkLFxuICogICBrZXlNYXA6IHtcbiAqICAgICBjYXBhYmlsaXR5SW52b2NhdGlvbjogc29tZUV4aXN0aW5nS2V5LFxuICogICAgIGF1dGhlbnRpY2F0aW9uOiAnRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAnLFxuICogICAgIGFzc2VydGlvbk1ldGhvZDogJ0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwJyxcbiAqICAgICBrZXlBZ3JlZW1lbnQ6ICdYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5J1xuICogICB9XG4gKiB9KTsuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5kb2MgLSBESUQgRG9jdW1lbnQuXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBDcnlwdG9MRFxuICogQHBhcmFtIHtDcnlwdG9MRH0gW29wdGlvbnMuY3J5cHRvTGRdIC0gQ3J5cHRvTEQgZHJpdmVyIGluc3RhbmNlLFxuICogICBpbml0aWFsaXplZCB3aXRoIHRoZSBrZXkgdHlwZXMgdGhpcyBESUQgRG9jdW1lbnQgaW50ZW5kcyB0byBzdXBwb3J0LlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmtleU1hcF0gLSBNYXAgb2Yga2V5cyAob3Iga2V5IHR5cGVzKSBieSBwdXJwb3NlLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPHtrZXlQYWlyczogb2JqZWN0fT59IEEgaGFzaG1hcCBvZiBwdWJsaWMvcHJpdmF0ZSBrZXlcbiAqICAgcGFpcnMsIGJ5IGtleSBpZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRLZXlzKHtkb2MsIGNyeXB0b0xkLCBrZXlNYXAgPSB7fX0gPSB7fSkge1xuICBpZighZG9jLmlkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdESUQgRG9jdW1lbnQgXCJpZFwiIHByb3BlcnR5IGlzIHJlcXVpcmVkIHRvIGluaXRpYWxpemUga2V5cy4nKTtcbiAgfVxuXG4gIGNvbnN0IGtleVBhaXJzID0ge307XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3IgdGhlIGNyZWF0ZWQga2V5cyAoaWYgbmVlZGVkKVxuICBjb25zdCBvcHRpb25zID0ge2NvbnRyb2xsZXI6IGRvYy5pZH07XG5cbiAgZm9yKGNvbnN0IHB1cnBvc2UgaW4ga2V5TWFwKSB7XG4gICAgaWYoIVZFUklGSUNBVElPTl9SRUxBVElPTlNISVBTLmhhcyhwdXJwb3NlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBrZXkgcHVycG9zZTogXCIke3B1cnBvc2V9XCIuYCk7XG4gICAgfVxuXG4gICAgbGV0IGtleTtcbiAgICBpZih0eXBlb2Yga2V5TWFwW3B1cnBvc2VdID09PSAnc3RyaW5nJykge1xuICAgICAgaWYoIWNyeXB0b0xkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHByb3ZpZGUgYW4gaW5pdGlhbGl6ZWQgQ3J5cHRvTEQgaW5zdGFuY2UuJyk7XG4gICAgICB9XG4gICAgICBrZXkgPSBhd2FpdCBjcnlwdG9MZC5nZW5lcmF0ZSh7dHlwZToga2V5TWFwW3B1cnBvc2VdLCAuLi5vcHRpb25zfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFuIGV4aXN0aW5nIGtleSBoYXMgYmVlbiBwcm92aWRlZFxuICAgICAga2V5ID0ga2V5TWFwW3B1cnBvc2VdO1xuICAgIH1cblxuICAgIHRoaXNbcHVycG9zZV0gPSBba2V5LmV4cG9ydCh7cHVibGljS2V5OiB0cnVlfSldO1xuICAgIGtleVBhaXJzW2tleS5pZF0gPSBrZXk7XG4gIH1cblxuICByZXR1cm4ge2tleVBhaXJzfTtcbn1cblxuLyoqXG4gKiBGaW5kcyBhIHZlcmlmaWNhdGlvbiBtZXRob2QgZm9yIGEgZ2l2ZW4gbWV0aG9kSWQgb3IgcHVycG9zZS5cbiAqXG4gKiBJZiBhIG1ldGhvZCBpZCBpcyBnaXZlbiwgcmV0dXJucyB0aGUgb2JqZWN0IGZvciB0aGF0IG1ldGhvZCAoZm9yIGV4YW1wbGUsXG4gKiByZXR1cm5zIHRoZSBwdWJsaWMga2V5IGRlZmluaXRpb24gZm9yIHRoYXQgaWQpLlxuICpcbiAqIElmIGEgcHVycG9zZSAodmVyaWZpY2F0aW9uIHJlbGF0aW9uc2hpcCkgaXMgZ2l2ZW4sIHJldHVybnMgdGhlIGZpcnN0XG4gKiBhdmFpbGFibGUgdmVyaWZpY2F0aW9uIG1ldGhvZCBmb3IgdGhhdCBwdXJwb3NlLlxuICpcbiAqIElmIG5vIG1ldGhvZCBpcyBmb3VuZCAoZm9yIHRoZSBnaXZlbiBpZCBvciBwdXJwb3NlKSwgcmV0dXJucyB1bmRlZmluZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGZpbmRWZXJpZmljYXRpb25NZXRob2Qoe2RvYywgbWV0aG9kSWQ6ICdkaWQ6ZXg6MTIzI2FiY2QnfSk7XG4gKiAvLyAtPlxuICoge1xuICogICBpZDogJ2RpZDpleDoxMjMjYWJjZCcsXG4gKiAgIGNvbnRyb2xsZXI6ICdkaWQ6ZXg6MTIzJyxcbiAqICAgdHlwZTogJ0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwJyxcbiAqICAgcHVibGljS2V5TXVsdGliYXNlOiAnLi4uJ1xuICogfVxuICogQGV4YW1wbGVcbiAqIGRpZERvY3VtZW50LmZpbmRWZXJpZmljYXRpb25NZXRob2Qoe2RvYywgcHVycG9zZTogJ2F1dGhlbnRpY2F0aW9uJ30pO1xuICogLy8gLT5cbiAqIHtcbiAqICAgaWQ6ICdkaWQ6ZXg6MTIzI2FiY2QnLFxuICogICBjb250cm9sbGVyOiAnZGlkOmV4OjEyMycsXG4gKiAgIHR5cGU6ICdFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCcsXG4gKiAgIHB1YmxpY0tleU11bHRpYmFzZTogJy4uLidcbiAqIH1cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuZG9jIC0gRElEIERvY3VtZW50LlxuICpcbiAqIE9uZSBvZiB0aGUgZm9sbG93aW5nIGlzIHJlcXVpcmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm1ldGhvZElkXSAtIFZlcmlmaWNhdGlvbiBtZXRob2QgaWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucHVycG9zZV0gLSBNZXRob2QgcHVycG9zZSAodmVyaWZpY2F0aW9uXG4gKiAgIHJlbGF0aW9uc2hpcCkuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gUmV0dXJucyB0aGUgdmVyaWZpY2F0aW9uIG1ldGhvZCwgb3IgdW5kZWZpbmVkIGlmIG5vdCBmb3VuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRWZXJpZmljYXRpb25NZXRob2Qoe2RvYywgbWV0aG9kSWQsIHB1cnBvc2V9ID0ge30pIHtcbiAgaWYoIWRvYykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0EgRElEIERvY3VtZW50IGlzIHJlcXVpcmVkLicpO1xuICB9XG4gIGlmKCEobWV0aG9kSWQgfHwgcHVycG9zZSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIG1ldGhvZCBpZCBvciBwdXJwb3NlIGlzIHJlcXVpcmVkLicpO1xuICB9XG5cbiAgaWYobWV0aG9kSWQpIHtcbiAgICByZXR1cm4gX21ldGhvZEJ5SWQoe2RvYywgbWV0aG9kSWR9KTtcbiAgfVxuXG4gIC8vIElkIG5vdCBnaXZlbiwgZmluZCB0aGUgZmlyc3QgbWV0aG9kIGJ5IHB1cnBvc2VcbiAgY29uc3QgW21ldGhvZF0gPSBkb2NbcHVycG9zZV0gfHwgW107XG4gIGlmKG1ldGhvZCAmJiB0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJykge1xuICAgIC8vIFRoaXMgaXMgYSByZWZlcmVuY2UsIG5vdCB0aGUgZnVsbCBtZXRob2QsIGF0dGVtcHQgdG8gZmluZCBpdFxuICAgIHJldHVybiBfbWV0aG9kQnlJZCh7ZG9jLCBtZXRob2RJZDogbWV0aG9kfSk7XG4gIH1cblxuICByZXR1cm4gbWV0aG9kO1xufVxuXG4vKipcbiAqIEZpbmRzIGEgdmVyaWZpY2F0aW9uIG1ldGhvZCBmb3IgYSBnaXZlbiBpZCBhbmQgcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmRvYyAtIERJRCBEb2N1bWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm1ldGhvZElkIC0gVmVyaWZpY2F0aW9uIG1ldGhvZCBpZC5cbiAqXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBSZXR1cm5zIHRoZSB2ZXJpZmljYXRpb24gbWV0aG9kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gX21ldGhvZEJ5SWQoe2RvYywgbWV0aG9kSWR9KSB7XG4gIGxldCByZXN1bHQ7XG5cbiAgLy8gRmlyc3QsIGNoZWNrIHRoZSAndmVyaWZpY2F0aW9uTWV0aG9kJyBidWNrZXQsIHNlZSBpZiBpdCdzIGxpc3RlZCB0aGVyZVxuICBpZihkb2MudmVyaWZpY2F0aW9uTWV0aG9kKSB7XG4gICAgcmVzdWx0ID0gZG9jLnZlcmlmaWNhdGlvbk1ldGhvZC5maW5kKG1ldGhvZCA9PiBtZXRob2QuaWQgPT09IG1ldGhvZElkKTtcbiAgfVxuXG4gIGZvcihjb25zdCBwdXJwb3NlIG9mIFZFUklGSUNBVElPTl9SRUxBVElPTlNISVBTKSB7XG4gICAgY29uc3QgbWV0aG9kcyA9IGRvY1twdXJwb3NlXSB8fCBbXTtcbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCB2ZXJpZmljYXRpb24gbWV0aG9kIGluICdhdXRoZW50aWNhdGlvbicsIGV0Yy5cbiAgICBmb3IoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcbiAgICAgIC8vIE9ubHkgcmV0dXJuIGl0IGlmIHRoZSBtZXRob2QgaXMgZGVmaW5lZCwgbm90IHJlZmVyZW5jZWRcbiAgICAgIGlmKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnICYmIG1ldGhvZC5pZCA9PT0gbWV0aG9kSWQpIHtcbiAgICAgICAgcmVzdWx0ID0gbWV0aG9kO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYocmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgRElEIGludG8gdmFyaW91cyBjb21wb25lbnQgKGN1cnJlbnRseSwgb25seSBjYXJlcyBhYm91dCBwcmVmaXgpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBwYXJzZURpZCh7ZGlkOiAnZGlkOnYxOnRlc3Q6bnltJ30pO1xuICogLy8gLT4ge3ByZWZpeDogJ3YxJ31cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlkIC0gRElEIHVyaS5cbiAqXG4gKiBAcmV0dXJucyB7e3ByZWZpeDogc3RyaW5nfX0gUmV0dXJucyB0aGUgbWV0aG9kIHByZWZpeCAod2l0aG91dCBgZGlkOmApLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEaWQoe2RpZH0pIHtcbiAgaWYoIWRpZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0RJRCBjYW5ub3QgYmUgZW1wdHkuJyk7XG4gIH1cblxuICBjb25zdCBwcmVmaXggPSBkaWQuc3BsaXQoJzonKS5zbGljZSgxLCAyKS5qb2luKCc6Jyk7XG5cbiAgcmV0dXJuIHtwcmVmaXh9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-io/lib/did-io.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-io/lib/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-io/lib/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CachedResolver: () => (/* reexport safe */ _CachedResolver_js__WEBPACK_IMPORTED_MODULE_1__.CachedResolver),\n/* harmony export */   VERIFICATION_RELATIONSHIPS: () => (/* reexport safe */ _constants_js__WEBPACK_IMPORTED_MODULE_2__.VERIFICATION_RELATIONSHIPS),\n/* harmony export */   approvesMethodFor: () => (/* reexport safe */ _did_io_js__WEBPACK_IMPORTED_MODULE_0__.approvesMethodFor),\n/* harmony export */   findVerificationMethod: () => (/* reexport safe */ _did_io_js__WEBPACK_IMPORTED_MODULE_0__.findVerificationMethod),\n/* harmony export */   initKeys: () => (/* reexport safe */ _did_io_js__WEBPACK_IMPORTED_MODULE_0__.initKeys),\n/* harmony export */   parseDid: () => (/* reexport safe */ _did_io_js__WEBPACK_IMPORTED_MODULE_0__.parseDid)\n/* harmony export */ });\n/* harmony import */ var _did_io_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./did-io.js */ \"(ssr)/./node_modules/@digitalbazaar/did-io/lib/did-io.js\");\n/* harmony import */ var _CachedResolver_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CachedResolver.js */ \"(ssr)/./node_modules/@digitalbazaar/did-io/lib/CachedResolver.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@digitalbazaar/did-io/lib/constants.js\");\n/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLWlvL2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFNcUI7O0FBRThCOztBQUVPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2RpZC1pby9saWIvaW5kZXguanM/ZjYyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMSBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5leHBvcnQge1xuICBhcHByb3Zlc01ldGhvZEZvcixcbiAgZmluZFZlcmlmaWNhdGlvbk1ldGhvZCxcbiAgaW5pdEtleXMsXG4gIHBhcnNlRGlkXG59IGZyb20gJy4vZGlkLWlvLmpzJztcblxuZXhwb3J0IHtDYWNoZWRSZXNvbHZlcn0gZnJvbSAnLi9DYWNoZWRSZXNvbHZlci5qcyc7XG5cbmV4cG9ydCB7VkVSSUZJQ0FUSU9OX1JFTEFUSU9OU0hJUFN9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-io/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/DidKeyDriver.js":
/*!************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-method-key/lib/DidKeyDriver.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DidKeyDriver: () => (/* binding */ DidKeyDriver)\n/* harmony export */ });\n/* harmony import */ var _digitalbazaar_did_io__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @digitalbazaar/did-io */ \"(ssr)/./node_modules/@digitalbazaar/did-io/lib/index.js\");\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers.js */ \"(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/helpers.js\");\n/*!\n * Copyright (c) 2021-2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\nconst DID_CONTEXT_URL = 'https://www.w3.org/ns/did/v1';\n\nclass DidKeyDriver {\n  constructor() {\n    // used by did-io to register drivers\n    this.method = 'key';\n    this._allowedKeyTypes = new Map();\n  }\n\n  /**\n   * Registers a multibase-multikey header and a multibase-multikey\n   * deserializer that is allowed to handle data using that header.\n   *\n   * @param {object} options - Options hashmap.\n   *\n   * @param {string} options.multibaseMultikeyHeader - The multibase-multikey\n   *   header to register.\n   * @param {Function} options.fromMultibase - A function that converts a\n   *  `{publicKeyMultibase}` value into a key pair interface.\n   */\n  use({multibaseMultikeyHeader, fromMultibase} = {}) {\n    if(!(multibaseMultikeyHeader &&\n      typeof multibaseMultikeyHeader === 'string')) {\n      throw new TypeError('\"multibaseMultikeyHeader\" must be a string.');\n    }\n    if(typeof fromMultibase !== 'function') {\n      throw new TypeError('\"fromMultibase\" must be a function.');\n    }\n    this._allowedKeyTypes.set(multibaseMultikeyHeader, fromMultibase);\n  }\n\n  /**\n   * Generates a DID `key` (`did:key`) method DID Document from a KeyPair.\n   *\n   * @param {object} options - Options hashmap.\n   *\n   * @param {object} [options.verificationKeyPair] - A verification KeyPair.\n   * @param {object} [options.keyAgreementKeyPair] - A keyAgreement KeyPair.\n   *\n   * @returns {Promise<{didDocument: object, keyPairs: Map,\n   *   methodFor: Function}>} Resolves with the generated DID Document, along\n   *   with the corresponding key pairs used to generate it (for storage in a\n   *   KMS).\n   */\n  async fromKeyPair({verificationKeyPair, keyAgreementKeyPair} = {}) {\n    if(!(verificationKeyPair || keyAgreementKeyPair)) {\n      throw new TypeError(\n        '\"verificationKeyPair\" or \"keyAgreementKeyPair\" must be an object.');\n    }\n    // keyPairs is a map of keyId to key pair instance, that includes the\n    // verificationKeyPair above and the keyAgreementKey pair that is\n    // optionally passed or derived from the passed verification key pair\n    const {didDocument, keyPairs} = await this._keyPairToDidDocument(\n      {keyPair: verificationKeyPair, keyAgreementKeyPair});\n\n    // convenience function that returns the public/private key pair instance\n    // for a given purpose (authentication, assertionMethod, keyAgreement, etc).\n    const methodFor = ({purpose}) => {\n      const {id: methodId} = this.publicMethodFor({\n        didDocument, purpose\n      });\n      return keyPairs.get(methodId);\n    };\n    return {didDocument, keyPairs, methodFor};\n  }\n\n  /**\n   * Returns the public key (verification method) object for a given DID\n   * Document and purpose. Useful in conjunction with a `.get()` call.\n   *\n   * @example\n   * const didDocument = await didKeyDriver.get({did});\n   * const authKeyData = didDriver.publicMethodFor({\n   *   didDocument, purpose: 'authentication'\n   * });\n   * // You can then create a suite instance object to verify signatures etc.\n   * const authPublicKey = await cryptoLd.from(authKeyData);\n   * const {verify} = authPublicKey.verifier();\n   *\n   * @param {object} options - Options hashmap.\n   * @param {object} options.didDocument - DID Document (retrieved via a\n   *   `.get()` or from some other source).\n   * @param {string} options.purpose - Verification method purpose, such as\n   *   'authentication', 'assertionMethod', 'keyAgreement' and so on.\n   *\n   * @returns {object} Returns the public key object (obtained from the DID\n   *   Document), without a `@context`.\n   */\n  publicMethodFor({didDocument, purpose} = {}) {\n    if(!didDocument) {\n      throw new TypeError('The \"didDocument\" parameter is required.');\n    }\n    if(!purpose) {\n      throw new TypeError('The \"purpose\" parameter is required.');\n    }\n\n    const method = _digitalbazaar_did_io__WEBPACK_IMPORTED_MODULE_0__.findVerificationMethod({doc: didDocument, purpose});\n    if(!method) {\n      throw new Error(`No verification method found for purpose \"${purpose}\"`);\n    }\n    return method;\n  }\n\n  /**\n   * Returns a `did:key` method DID Document for a given DID, or a key document\n   * for a given DID URL (key id).\n   * Either a `did` or `url` param is required.\n   *\n   * @example\n   * await resolver.get({did}); // -> did document\n   * await resolver.get({url: keyId}); // -> public key node\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} [options.did] - DID URL or a key id (either an ed25519 key\n   *   or an x25519 key-agreement key id).\n   * @param {string} [options.url] - Alias for the `did` url param, supported\n   *   for better readability of invoking code.\n   *\n   * @returns {Promise<object>} Resolves to a DID Document or a\n   *   public key node with context.\n   */\n  async get({did, url} = {}) {\n    did = did || url;\n    if(!did) {\n      throw new TypeError('\"did\" must be a string.');\n    }\n    const [didAuthority, keyIdFragment] = did.split('#');\n    const publicKeyMultibase = didAuthority.substring('did:key:'.length);\n    // get the multikey header from the public key value\n    const multibaseMultikeyHeader = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getMultibaseMultikeyHeader)({\n      value: publicKeyMultibase\n    });\n\n    const fromMultibase =\n      this._allowedKeyTypes.get(multibaseMultikeyHeader);\n    if(!fromMultibase) {\n      throw new Error(\n        `Unsupported \"multibaseMultikeyHeader\", \"${multibaseMultikeyHeader}\".`);\n    }\n    const {keyAgreementKeyPair, keyPair} = await (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getKeyPair)({\n      fromMultibase, publicKeyMultibase\n    });\n    const {didDocument} = await this._keyPairToDidDocument({\n      keyPair, keyAgreementKeyPair\n    });\n\n    if(keyIdFragment) {\n      // resolve an individual key\n      return (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getKey)({didDocument, keyIdFragment});\n    }\n    // Resolve the full DID Document\n    return didDocument;\n  }\n\n  /**\n   * Converts a public key object to a `did:key` method DID Document.\n   * Note that unlike `generate()`, a `keyPairs` map is not returned. Use\n   * `publicMethodFor()` to fetch keys for particular proof purposes.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {object} options.publicKeyDescription - Public key object\n   *   used to generate the DID document (either an LDKeyPair instance\n   *   containing public key material, or a \"key description\" plain object\n   *   (such as that generated from a KMS)).\n   *\n   * @returns {Promise<object>} Resolves with the generated DID Document.\n   */\n  async publicKeyToDidDoc({publicKeyDescription} = {}) {\n    const {\n      keyPair, keyAgreementKeyPair\n    } = await (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getKeyPair)({publicKeyDescription});\n    const {didDocument} = await this._keyPairToDidDocument({\n      keyPair, keyAgreementKeyPair\n    });\n    return {didDocument};\n  }\n\n  /**\n   * Converts an Ed25519KeyPair object to a `did:key` method DID Document.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {object} options.keyPair - Key used to generate the DID\n   *   document (either an LDKeyPair instance containing public key material,\n   *   or a \"key description\" plain object (such as that generated from a KMS)).\n   * @param {object} [options.keyAgreementKeyPair] -  Optional\n   *   keyAgreement key pair for generating did for keyAgreement.\n   * @returns {Promise<{didDocument: object, keyPairs: Map}>}\n   *   Resolves with the generated DID Document, along with the corresponding\n   *   key pairs used to generate it (for storage in a KMS).\n   */\n  async _keyPairToDidDocument({keyPair, keyAgreementKeyPair} = {}) {\n    const keyPairs = new Map();\n    let didDocument;\n    let publicDhKey;\n    const contexts = [DID_CONTEXT_URL];\n    if(!keyPair && keyAgreementKeyPair) {\n      (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.addKeyAgreementKeyContext)({contexts, keyAgreementKeyPair});\n      const did = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getDid)({keyPair: keyAgreementKeyPair});\n      keyAgreementKeyPair.controller = did;\n      (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.setKeyPairId)({keyPair: keyAgreementKeyPair, did});\n      publicDhKey = await keyAgreementKeyPair.export({publicKey: true});\n      keyPairs.set(keyAgreementKeyPair.id, keyAgreementKeyPair);\n      didDocument = {\n        '@context': contexts,\n        id: did,\n        keyAgreement: [publicDhKey]\n      };\n      return {didDocument, keyPairs};\n    }\n    let {publicKeyMultibase} = keyPair;\n    if(!publicKeyMultibase && keyPair.publicKeyBase58) {\n      // handle backwards compatibility w/older key pair interfaces\n      publicKeyMultibase = await keyPair.fingerprint();\n    }\n    // get the multibaseMultikeyHeader from the public key value\n    const multibaseMultikeyHeader = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getMultibaseMultikeyHeader)({\n      value: publicKeyMultibase\n    });\n    const fromMultibase = this._allowedKeyTypes.get(multibaseMultikeyHeader);\n    if(!fromMultibase) {\n      throw new Error(\n        `Unsupported \"multibaseMultikeyHeader\", \"${multibaseMultikeyHeader}\".`);\n    }\n    const verificationKeyPair = await fromMultibase({publicKeyMultibase});\n\n    const did = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getDid)({keyPair: verificationKeyPair});\n    verificationKeyPair.controller = did;\n    // Now set the source key's id\n    (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.setKeyPairId)({keyPair: verificationKeyPair, did});\n    // get the public components of verification keypair\n    const verificationPublicKey = await verificationKeyPair.export({\n      publicKey: true,\n      includeContext: true\n    });\n    contexts.push(verificationPublicKey['@context']);\n    // delete context from verificationPublicKey\n    delete verificationPublicKey['@context'];\n    // get the keyAgreement keypair\n    if(!keyAgreementKeyPair) {\n      ({keyAgreementKeyPair} = await (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getKeyAgreementKeyPair)({\n        contexts, verificationPublicKey\n      }));\n    }\n\n    // get the public components of keyAgreement keypair\n    if(keyAgreementKeyPair) {\n      (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.addKeyAgreementKeyContext)({contexts, keyAgreementKeyPair});\n      const did = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.getDid)({keyPair: keyAgreementKeyPair});\n      if(!keyAgreementKeyPair.controller) {\n        keyAgreementKeyPair.controller = did;\n      }\n      if(!keyAgreementKeyPair.id) {\n        (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.setKeyPairId)({keyPair: keyAgreementKeyPair, did});\n      }\n      publicDhKey = await keyAgreementKeyPair.export({publicKey: true});\n    }\n\n    // Compose the DID Document\n    didDocument = {\n      // Note that did:key does not have its own method-specific context,\n      // and only uses the general DID Core context, and key-specific contexts.\n      '@context': contexts,\n      id: did,\n      verificationMethod: [verificationPublicKey],\n      authentication: [verificationPublicKey.id],\n      assertionMethod: [verificationPublicKey.id],\n      capabilityDelegation: [verificationPublicKey.id],\n      capabilityInvocation: [verificationPublicKey.id],\n    };\n    if(publicDhKey) {\n      didDocument.keyAgreement = [publicDhKey];\n    }\n    // create the key pairs map\n    keyPairs.set(verificationKeyPair.id, verificationKeyPair);\n    if(keyAgreementKeyPair) {\n      keyPairs.set(keyAgreementKeyPair.id, keyAgreementKeyPair);\n    }\n\n    return {didDocument, keyPairs};\n  }\n\n  /**\n   * Computes and returns the id of a given key pair. Used by `did-io` drivers.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {object} options.keyPair - The key pair used when computing the\n   *   identifier.\n   *\n   * @returns {string} Returns the key's id.\n   */\n  async computeId({keyPair}) {\n    return `did:key:${keyPair.fingerprint()}#${keyPair.fingerprint()}`;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLW1ldGhvZC1rZXkvbGliL0RpZEtleURyaXZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDK0M7QUFJekI7O0FBRXRCOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsVUFBVTtBQUN2QixRQUFRLG1CQUFtQjtBQUMzQjtBQUNBLE9BQU8sd0NBQXdDLElBQUk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLFNBQVM7QUFDeEIsMkJBQTJCLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDBDQUEwQyxJQUFJO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx1QkFBdUI7QUFDbEMsT0FBTyxrREFBa0Q7O0FBRXpEO0FBQ0E7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQyxhQUFhLGNBQWM7QUFDM0I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELElBQUk7QUFDckQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxtQkFBbUIsc0JBQXNCLElBQUk7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQix5RUFBNEIsRUFBRSwwQkFBMEI7QUFDM0U7QUFDQSxtRUFBbUUsUUFBUTtBQUMzRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLElBQUksR0FBRztBQUNoQyx5QkFBeUIsV0FBVyxHQUFHO0FBQ3ZDO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBLGFBQWEsVUFBVSxJQUFJO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHVFQUEwQjtBQUM5RDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsd0JBQXdCO0FBQzNFO0FBQ0EsV0FBVyw4QkFBOEIsUUFBUSx1REFBVTtBQUMzRDtBQUNBLEtBQUs7QUFDTCxXQUFXLGFBQWE7QUFDeEI7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxhQUFhLG1EQUFNLEVBQUUsMkJBQTJCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQSwyQkFBMkIsc0JBQXNCLElBQUk7QUFDckQ7QUFDQTtBQUNBLE1BQU0sUUFBUSx1REFBVSxFQUFFLHFCQUFxQjtBQUMvQyxXQUFXLGFBQWE7QUFDeEI7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWUsU0FBUyxtQ0FBbUM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDhCQUE4QixJQUFJO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNFQUF5QixFQUFFLDhCQUE4QjtBQUMvRCxrQkFBa0IsbURBQU0sRUFBRSw2QkFBNkI7QUFDdkQ7QUFDQSxNQUFNLHlEQUFZLEVBQUUsa0NBQWtDO0FBQ3RELHNEQUFzRCxnQkFBZ0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsU0FBUyxvQkFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx1RUFBMEI7QUFDOUQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHdCQUF3QjtBQUMzRTtBQUNBLHFEQUFxRCxtQkFBbUI7O0FBRXhFLGdCQUFnQixtREFBTSxFQUFFLDZCQUE2QjtBQUNyRDtBQUNBO0FBQ0EsSUFBSSx5REFBWSxFQUFFLGtDQUFrQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxQkFBcUIsUUFBUSxtRUFBc0I7QUFDM0Q7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLE1BQU0sc0VBQXlCLEVBQUUsOEJBQThCO0FBQy9ELGtCQUFrQixtREFBTSxFQUFFLDZCQUE2QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQVksRUFBRSxrQ0FBa0M7QUFDeEQ7QUFDQSxzREFBc0QsZ0JBQWdCO0FBQ3RFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG1CQUFtQixRQUFRO0FBQzNCLHNCQUFzQixzQkFBc0IsR0FBRyxzQkFBc0I7QUFDckU7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9kaWQtbWV0aG9kLWtleS9saWIvRGlkS2V5RHJpdmVyLmpzPzY0YTgiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyMyBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQgKiBhcyBkaWRJbyBmcm9tICdAZGlnaXRhbGJhemFhci9kaWQtaW8nO1xuaW1wb3J0IHtcbiAgYWRkS2V5QWdyZWVtZW50S2V5Q29udGV4dCwgZ2V0RGlkLCBnZXRLZXksIGdldEtleUFncmVlbWVudEtleVBhaXIsIGdldEtleVBhaXIsXG4gIGdldE11bHRpYmFzZU11bHRpa2V5SGVhZGVyLCBzZXRLZXlQYWlySWRcbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcblxuY29uc3QgRElEX0NPTlRFWFRfVVJMID0gJ2h0dHBzOi8vd3d3LnczLm9yZy9ucy9kaWQvdjEnO1xuXG5leHBvcnQgY2xhc3MgRGlkS2V5RHJpdmVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gdXNlZCBieSBkaWQtaW8gdG8gcmVnaXN0ZXIgZHJpdmVyc1xuICAgIHRoaXMubWV0aG9kID0gJ2tleSc7XG4gICAgdGhpcy5fYWxsb3dlZEtleVR5cGVzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIG11bHRpYmFzZS1tdWx0aWtleSBoZWFkZXIgYW5kIGEgbXVsdGliYXNlLW11bHRpa2V5XG4gICAqIGRlc2VyaWFsaXplciB0aGF0IGlzIGFsbG93ZWQgdG8gaGFuZGxlIGRhdGEgdXNpbmcgdGhhdCBoZWFkZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5tdWx0aWJhc2VNdWx0aWtleUhlYWRlciAtIFRoZSBtdWx0aWJhc2UtbXVsdGlrZXlcbiAgICogICBoZWFkZXIgdG8gcmVnaXN0ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMuZnJvbU11bHRpYmFzZSAtIEEgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyBhXG4gICAqICBge3B1YmxpY0tleU11bHRpYmFzZX1gIHZhbHVlIGludG8gYSBrZXkgcGFpciBpbnRlcmZhY2UuXG4gICAqL1xuICB1c2Uoe211bHRpYmFzZU11bHRpa2V5SGVhZGVyLCBmcm9tTXVsdGliYXNlfSA9IHt9KSB7XG4gICAgaWYoIShtdWx0aWJhc2VNdWx0aWtleUhlYWRlciAmJlxuICAgICAgdHlwZW9mIG11bHRpYmFzZU11bHRpa2V5SGVhZGVyID09PSAnc3RyaW5nJykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibXVsdGliYXNlTXVsdGlrZXlIZWFkZXJcIiBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZih0eXBlb2YgZnJvbU11bHRpYmFzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJmcm9tTXVsdGliYXNlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICB0aGlzLl9hbGxvd2VkS2V5VHlwZXMuc2V0KG11bHRpYmFzZU11bHRpa2V5SGVhZGVyLCBmcm9tTXVsdGliYXNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBESUQgYGtleWAgKGBkaWQ6a2V5YCkgbWV0aG9kIERJRCBEb2N1bWVudCBmcm9tIGEgS2V5UGFpci5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy52ZXJpZmljYXRpb25LZXlQYWlyXSAtIEEgdmVyaWZpY2F0aW9uIEtleVBhaXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5rZXlBZ3JlZW1lbnRLZXlQYWlyXSAtIEEga2V5QWdyZWVtZW50IEtleVBhaXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHtkaWREb2N1bWVudDogb2JqZWN0LCBrZXlQYWlyczogTWFwLFxuICAgKiAgIG1ldGhvZEZvcjogRnVuY3Rpb259Pn0gUmVzb2x2ZXMgd2l0aCB0aGUgZ2VuZXJhdGVkIERJRCBEb2N1bWVudCwgYWxvbmdcbiAgICogICB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGtleSBwYWlycyB1c2VkIHRvIGdlbmVyYXRlIGl0IChmb3Igc3RvcmFnZSBpbiBhXG4gICAqICAgS01TKS5cbiAgICovXG4gIGFzeW5jIGZyb21LZXlQYWlyKHt2ZXJpZmljYXRpb25LZXlQYWlyLCBrZXlBZ3JlZW1lbnRLZXlQYWlyfSA9IHt9KSB7XG4gICAgaWYoISh2ZXJpZmljYXRpb25LZXlQYWlyIHx8IGtleUFncmVlbWVudEtleVBhaXIpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnXCJ2ZXJpZmljYXRpb25LZXlQYWlyXCIgb3IgXCJrZXlBZ3JlZW1lbnRLZXlQYWlyXCIgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgfVxuICAgIC8vIGtleVBhaXJzIGlzIGEgbWFwIG9mIGtleUlkIHRvIGtleSBwYWlyIGluc3RhbmNlLCB0aGF0IGluY2x1ZGVzIHRoZVxuICAgIC8vIHZlcmlmaWNhdGlvbktleVBhaXIgYWJvdmUgYW5kIHRoZSBrZXlBZ3JlZW1lbnRLZXkgcGFpciB0aGF0IGlzXG4gICAgLy8gb3B0aW9uYWxseSBwYXNzZWQgb3IgZGVyaXZlZCBmcm9tIHRoZSBwYXNzZWQgdmVyaWZpY2F0aW9uIGtleSBwYWlyXG4gICAgY29uc3Qge2RpZERvY3VtZW50LCBrZXlQYWlyc30gPSBhd2FpdCB0aGlzLl9rZXlQYWlyVG9EaWREb2N1bWVudChcbiAgICAgIHtrZXlQYWlyOiB2ZXJpZmljYXRpb25LZXlQYWlyLCBrZXlBZ3JlZW1lbnRLZXlQYWlyfSk7XG5cbiAgICAvLyBjb252ZW5pZW5jZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHB1YmxpYy9wcml2YXRlIGtleSBwYWlyIGluc3RhbmNlXG4gICAgLy8gZm9yIGEgZ2l2ZW4gcHVycG9zZSAoYXV0aGVudGljYXRpb24sIGFzc2VydGlvbk1ldGhvZCwga2V5QWdyZWVtZW50LCBldGMpLlxuICAgIGNvbnN0IG1ldGhvZEZvciA9ICh7cHVycG9zZX0pID0+IHtcbiAgICAgIGNvbnN0IHtpZDogbWV0aG9kSWR9ID0gdGhpcy5wdWJsaWNNZXRob2RGb3Ioe1xuICAgICAgICBkaWREb2N1bWVudCwgcHVycG9zZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4ga2V5UGFpcnMuZ2V0KG1ldGhvZElkKTtcbiAgICB9O1xuICAgIHJldHVybiB7ZGlkRG9jdW1lbnQsIGtleVBhaXJzLCBtZXRob2RGb3J9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHB1YmxpYyBrZXkgKHZlcmlmaWNhdGlvbiBtZXRob2QpIG9iamVjdCBmb3IgYSBnaXZlbiBESURcbiAgICogRG9jdW1lbnQgYW5kIHB1cnBvc2UuIFVzZWZ1bCBpbiBjb25qdW5jdGlvbiB3aXRoIGEgYC5nZXQoKWAgY2FsbC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZGlkRG9jdW1lbnQgPSBhd2FpdCBkaWRLZXlEcml2ZXIuZ2V0KHtkaWR9KTtcbiAgICogY29uc3QgYXV0aEtleURhdGEgPSBkaWREcml2ZXIucHVibGljTWV0aG9kRm9yKHtcbiAgICogICBkaWREb2N1bWVudCwgcHVycG9zZTogJ2F1dGhlbnRpY2F0aW9uJ1xuICAgKiB9KTtcbiAgICogLy8gWW91IGNhbiB0aGVuIGNyZWF0ZSBhIHN1aXRlIGluc3RhbmNlIG9iamVjdCB0byB2ZXJpZnkgc2lnbmF0dXJlcyBldGMuXG4gICAqIGNvbnN0IGF1dGhQdWJsaWNLZXkgPSBhd2FpdCBjcnlwdG9MZC5mcm9tKGF1dGhLZXlEYXRhKTtcbiAgICogY29uc3Qge3ZlcmlmeX0gPSBhdXRoUHVibGljS2V5LnZlcmlmaWVyKCk7XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5kaWREb2N1bWVudCAtIERJRCBEb2N1bWVudCAocmV0cmlldmVkIHZpYSBhXG4gICAqICAgYC5nZXQoKWAgb3IgZnJvbSBzb21lIG90aGVyIHNvdXJjZSkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnB1cnBvc2UgLSBWZXJpZmljYXRpb24gbWV0aG9kIHB1cnBvc2UsIHN1Y2ggYXNcbiAgICogICAnYXV0aGVudGljYXRpb24nLCAnYXNzZXJ0aW9uTWV0aG9kJywgJ2tleUFncmVlbWVudCcgYW5kIHNvIG9uLlxuICAgKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBSZXR1cm5zIHRoZSBwdWJsaWMga2V5IG9iamVjdCAob2J0YWluZWQgZnJvbSB0aGUgRElEXG4gICAqICAgRG9jdW1lbnQpLCB3aXRob3V0IGEgYEBjb250ZXh0YC5cbiAgICovXG4gIHB1YmxpY01ldGhvZEZvcih7ZGlkRG9jdW1lbnQsIHB1cnBvc2V9ID0ge30pIHtcbiAgICBpZighZGlkRG9jdW1lbnQpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImRpZERvY3VtZW50XCIgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLicpO1xuICAgIH1cbiAgICBpZighcHVycG9zZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwicHVycG9zZVwiIHBhcmFtZXRlciBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRob2QgPSBkaWRJby5maW5kVmVyaWZpY2F0aW9uTWV0aG9kKHtkb2M6IGRpZERvY3VtZW50LCBwdXJwb3NlfSk7XG4gICAgaWYoIW1ldGhvZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyB2ZXJpZmljYXRpb24gbWV0aG9kIGZvdW5kIGZvciBwdXJwb3NlIFwiJHtwdXJwb3NlfVwiYCk7XG4gICAgfVxuICAgIHJldHVybiBtZXRob2Q7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGBkaWQ6a2V5YCBtZXRob2QgRElEIERvY3VtZW50IGZvciBhIGdpdmVuIERJRCwgb3IgYSBrZXkgZG9jdW1lbnRcbiAgICogZm9yIGEgZ2l2ZW4gRElEIFVSTCAoa2V5IGlkKS5cbiAgICogRWl0aGVyIGEgYGRpZGAgb3IgYHVybGAgcGFyYW0gaXMgcmVxdWlyZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IHJlc29sdmVyLmdldCh7ZGlkfSk7IC8vIC0+IGRpZCBkb2N1bWVudFxuICAgKiBhd2FpdCByZXNvbHZlci5nZXQoe3VybDoga2V5SWR9KTsgLy8gLT4gcHVibGljIGtleSBub2RlXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZGlkXSAtIERJRCBVUkwgb3IgYSBrZXkgaWQgKGVpdGhlciBhbiBlZDI1NTE5IGtleVxuICAgKiAgIG9yIGFuIHgyNTUxOSBrZXktYWdyZWVtZW50IGtleSBpZCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy51cmxdIC0gQWxpYXMgZm9yIHRoZSBgZGlkYCB1cmwgcGFyYW0sIHN1cHBvcnRlZFxuICAgKiAgIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHkgb2YgaW52b2tpbmcgY29kZS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gUmVzb2x2ZXMgdG8gYSBESUQgRG9jdW1lbnQgb3IgYVxuICAgKiAgIHB1YmxpYyBrZXkgbm9kZSB3aXRoIGNvbnRleHQuXG4gICAqL1xuICBhc3luYyBnZXQoe2RpZCwgdXJsfSA9IHt9KSB7XG4gICAgZGlkID0gZGlkIHx8IHVybDtcbiAgICBpZighZGlkKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImRpZFwiIG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgfVxuICAgIGNvbnN0IFtkaWRBdXRob3JpdHksIGtleUlkRnJhZ21lbnRdID0gZGlkLnNwbGl0KCcjJyk7XG4gICAgY29uc3QgcHVibGljS2V5TXVsdGliYXNlID0gZGlkQXV0aG9yaXR5LnN1YnN0cmluZygnZGlkOmtleTonLmxlbmd0aCk7XG4gICAgLy8gZ2V0IHRoZSBtdWx0aWtleSBoZWFkZXIgZnJvbSB0aGUgcHVibGljIGtleSB2YWx1ZVxuICAgIGNvbnN0IG11bHRpYmFzZU11bHRpa2V5SGVhZGVyID0gZ2V0TXVsdGliYXNlTXVsdGlrZXlIZWFkZXIoe1xuICAgICAgdmFsdWU6IHB1YmxpY0tleU11bHRpYmFzZVxuICAgIH0pO1xuXG4gICAgY29uc3QgZnJvbU11bHRpYmFzZSA9XG4gICAgICB0aGlzLl9hbGxvd2VkS2V5VHlwZXMuZ2V0KG11bHRpYmFzZU11bHRpa2V5SGVhZGVyKTtcbiAgICBpZighZnJvbU11bHRpYmFzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVW5zdXBwb3J0ZWQgXCJtdWx0aWJhc2VNdWx0aWtleUhlYWRlclwiLCBcIiR7bXVsdGliYXNlTXVsdGlrZXlIZWFkZXJ9XCIuYCk7XG4gICAgfVxuICAgIGNvbnN0IHtrZXlBZ3JlZW1lbnRLZXlQYWlyLCBrZXlQYWlyfSA9IGF3YWl0IGdldEtleVBhaXIoe1xuICAgICAgZnJvbU11bHRpYmFzZSwgcHVibGljS2V5TXVsdGliYXNlXG4gICAgfSk7XG4gICAgY29uc3Qge2RpZERvY3VtZW50fSA9IGF3YWl0IHRoaXMuX2tleVBhaXJUb0RpZERvY3VtZW50KHtcbiAgICAgIGtleVBhaXIsIGtleUFncmVlbWVudEtleVBhaXJcbiAgICB9KTtcblxuICAgIGlmKGtleUlkRnJhZ21lbnQpIHtcbiAgICAgIC8vIHJlc29sdmUgYW4gaW5kaXZpZHVhbCBrZXlcbiAgICAgIHJldHVybiBnZXRLZXkoe2RpZERvY3VtZW50LCBrZXlJZEZyYWdtZW50fSk7XG4gICAgfVxuICAgIC8vIFJlc29sdmUgdGhlIGZ1bGwgRElEIERvY3VtZW50XG4gICAgcmV0dXJuIGRpZERvY3VtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgcHVibGljIGtleSBvYmplY3QgdG8gYSBgZGlkOmtleWAgbWV0aG9kIERJRCBEb2N1bWVudC5cbiAgICogTm90ZSB0aGF0IHVubGlrZSBgZ2VuZXJhdGUoKWAsIGEgYGtleVBhaXJzYCBtYXAgaXMgbm90IHJldHVybmVkLiBVc2VcbiAgICogYHB1YmxpY01ldGhvZEZvcigpYCB0byBmZXRjaCBrZXlzIGZvciBwYXJ0aWN1bGFyIHByb29mIHB1cnBvc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMucHVibGljS2V5RGVzY3JpcHRpb24gLSBQdWJsaWMga2V5IG9iamVjdFxuICAgKiAgIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIERJRCBkb2N1bWVudCAoZWl0aGVyIGFuIExES2V5UGFpciBpbnN0YW5jZVxuICAgKiAgIGNvbnRhaW5pbmcgcHVibGljIGtleSBtYXRlcmlhbCwgb3IgYSBcImtleSBkZXNjcmlwdGlvblwiIHBsYWluIG9iamVjdFxuICAgKiAgIChzdWNoIGFzIHRoYXQgZ2VuZXJhdGVkIGZyb20gYSBLTVMpKS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gUmVzb2x2ZXMgd2l0aCB0aGUgZ2VuZXJhdGVkIERJRCBEb2N1bWVudC5cbiAgICovXG4gIGFzeW5jIHB1YmxpY0tleVRvRGlkRG9jKHtwdWJsaWNLZXlEZXNjcmlwdGlvbn0gPSB7fSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGtleVBhaXIsIGtleUFncmVlbWVudEtleVBhaXJcbiAgICB9ID0gYXdhaXQgZ2V0S2V5UGFpcih7cHVibGljS2V5RGVzY3JpcHRpb259KTtcbiAgICBjb25zdCB7ZGlkRG9jdW1lbnR9ID0gYXdhaXQgdGhpcy5fa2V5UGFpclRvRGlkRG9jdW1lbnQoe1xuICAgICAga2V5UGFpciwga2V5QWdyZWVtZW50S2V5UGFpclxuICAgIH0pO1xuICAgIHJldHVybiB7ZGlkRG9jdW1lbnR9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIEVkMjU1MTlLZXlQYWlyIG9iamVjdCB0byBhIGBkaWQ6a2V5YCBtZXRob2QgRElEIERvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMua2V5UGFpciAtIEtleSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBESURcbiAgICogICBkb2N1bWVudCAoZWl0aGVyIGFuIExES2V5UGFpciBpbnN0YW5jZSBjb250YWluaW5nIHB1YmxpYyBrZXkgbWF0ZXJpYWwsXG4gICAqICAgb3IgYSBcImtleSBkZXNjcmlwdGlvblwiIHBsYWluIG9iamVjdCAoc3VjaCBhcyB0aGF0IGdlbmVyYXRlZCBmcm9tIGEgS01TKSkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5rZXlBZ3JlZW1lbnRLZXlQYWlyXSAtICBPcHRpb25hbFxuICAgKiAgIGtleUFncmVlbWVudCBrZXkgcGFpciBmb3IgZ2VuZXJhdGluZyBkaWQgZm9yIGtleUFncmVlbWVudC5cbiAgICogQHJldHVybnMge1Byb21pc2U8e2RpZERvY3VtZW50OiBvYmplY3QsIGtleVBhaXJzOiBNYXB9Pn1cbiAgICogICBSZXNvbHZlcyB3aXRoIHRoZSBnZW5lcmF0ZWQgRElEIERvY3VtZW50LCBhbG9uZyB3aXRoIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqICAga2V5IHBhaXJzIHVzZWQgdG8gZ2VuZXJhdGUgaXQgKGZvciBzdG9yYWdlIGluIGEgS01TKS5cbiAgICovXG4gIGFzeW5jIF9rZXlQYWlyVG9EaWREb2N1bWVudCh7a2V5UGFpciwga2V5QWdyZWVtZW50S2V5UGFpcn0gPSB7fSkge1xuICAgIGNvbnN0IGtleVBhaXJzID0gbmV3IE1hcCgpO1xuICAgIGxldCBkaWREb2N1bWVudDtcbiAgICBsZXQgcHVibGljRGhLZXk7XG4gICAgY29uc3QgY29udGV4dHMgPSBbRElEX0NPTlRFWFRfVVJMXTtcbiAgICBpZigha2V5UGFpciAmJiBrZXlBZ3JlZW1lbnRLZXlQYWlyKSB7XG4gICAgICBhZGRLZXlBZ3JlZW1lbnRLZXlDb250ZXh0KHtjb250ZXh0cywga2V5QWdyZWVtZW50S2V5UGFpcn0pO1xuICAgICAgY29uc3QgZGlkID0gZ2V0RGlkKHtrZXlQYWlyOiBrZXlBZ3JlZW1lbnRLZXlQYWlyfSk7XG4gICAgICBrZXlBZ3JlZW1lbnRLZXlQYWlyLmNvbnRyb2xsZXIgPSBkaWQ7XG4gICAgICBzZXRLZXlQYWlySWQoe2tleVBhaXI6IGtleUFncmVlbWVudEtleVBhaXIsIGRpZH0pO1xuICAgICAgcHVibGljRGhLZXkgPSBhd2FpdCBrZXlBZ3JlZW1lbnRLZXlQYWlyLmV4cG9ydCh7cHVibGljS2V5OiB0cnVlfSk7XG4gICAgICBrZXlQYWlycy5zZXQoa2V5QWdyZWVtZW50S2V5UGFpci5pZCwga2V5QWdyZWVtZW50S2V5UGFpcik7XG4gICAgICBkaWREb2N1bWVudCA9IHtcbiAgICAgICAgJ0Bjb250ZXh0JzogY29udGV4dHMsXG4gICAgICAgIGlkOiBkaWQsXG4gICAgICAgIGtleUFncmVlbWVudDogW3B1YmxpY0RoS2V5XVxuICAgICAgfTtcbiAgICAgIHJldHVybiB7ZGlkRG9jdW1lbnQsIGtleVBhaXJzfTtcbiAgICB9XG4gICAgbGV0IHtwdWJsaWNLZXlNdWx0aWJhc2V9ID0ga2V5UGFpcjtcbiAgICBpZighcHVibGljS2V5TXVsdGliYXNlICYmIGtleVBhaXIucHVibGljS2V5QmFzZTU4KSB7XG4gICAgICAvLyBoYW5kbGUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgdy9vbGRlciBrZXkgcGFpciBpbnRlcmZhY2VzXG4gICAgICBwdWJsaWNLZXlNdWx0aWJhc2UgPSBhd2FpdCBrZXlQYWlyLmZpbmdlcnByaW50KCk7XG4gICAgfVxuICAgIC8vIGdldCB0aGUgbXVsdGliYXNlTXVsdGlrZXlIZWFkZXIgZnJvbSB0aGUgcHVibGljIGtleSB2YWx1ZVxuICAgIGNvbnN0IG11bHRpYmFzZU11bHRpa2V5SGVhZGVyID0gZ2V0TXVsdGliYXNlTXVsdGlrZXlIZWFkZXIoe1xuICAgICAgdmFsdWU6IHB1YmxpY0tleU11bHRpYmFzZVxuICAgIH0pO1xuICAgIGNvbnN0IGZyb21NdWx0aWJhc2UgPSB0aGlzLl9hbGxvd2VkS2V5VHlwZXMuZ2V0KG11bHRpYmFzZU11bHRpa2V5SGVhZGVyKTtcbiAgICBpZighZnJvbU11bHRpYmFzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVW5zdXBwb3J0ZWQgXCJtdWx0aWJhc2VNdWx0aWtleUhlYWRlclwiLCBcIiR7bXVsdGliYXNlTXVsdGlrZXlIZWFkZXJ9XCIuYCk7XG4gICAgfVxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbktleVBhaXIgPSBhd2FpdCBmcm9tTXVsdGliYXNlKHtwdWJsaWNLZXlNdWx0aWJhc2V9KTtcblxuICAgIGNvbnN0IGRpZCA9IGdldERpZCh7a2V5UGFpcjogdmVyaWZpY2F0aW9uS2V5UGFpcn0pO1xuICAgIHZlcmlmaWNhdGlvbktleVBhaXIuY29udHJvbGxlciA9IGRpZDtcbiAgICAvLyBOb3cgc2V0IHRoZSBzb3VyY2Uga2V5J3MgaWRcbiAgICBzZXRLZXlQYWlySWQoe2tleVBhaXI6IHZlcmlmaWNhdGlvbktleVBhaXIsIGRpZH0pO1xuICAgIC8vIGdldCB0aGUgcHVibGljIGNvbXBvbmVudHMgb2YgdmVyaWZpY2F0aW9uIGtleXBhaXJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25QdWJsaWNLZXkgPSBhd2FpdCB2ZXJpZmljYXRpb25LZXlQYWlyLmV4cG9ydCh7XG4gICAgICBwdWJsaWNLZXk6IHRydWUsXG4gICAgICBpbmNsdWRlQ29udGV4dDogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnRleHRzLnB1c2godmVyaWZpY2F0aW9uUHVibGljS2V5WydAY29udGV4dCddKTtcbiAgICAvLyBkZWxldGUgY29udGV4dCBmcm9tIHZlcmlmaWNhdGlvblB1YmxpY0tleVxuICAgIGRlbGV0ZSB2ZXJpZmljYXRpb25QdWJsaWNLZXlbJ0Bjb250ZXh0J107XG4gICAgLy8gZ2V0IHRoZSBrZXlBZ3JlZW1lbnQga2V5cGFpclxuICAgIGlmKCFrZXlBZ3JlZW1lbnRLZXlQYWlyKSB7XG4gICAgICAoe2tleUFncmVlbWVudEtleVBhaXJ9ID0gYXdhaXQgZ2V0S2V5QWdyZWVtZW50S2V5UGFpcih7XG4gICAgICAgIGNvbnRleHRzLCB2ZXJpZmljYXRpb25QdWJsaWNLZXlcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBnZXQgdGhlIHB1YmxpYyBjb21wb25lbnRzIG9mIGtleUFncmVlbWVudCBrZXlwYWlyXG4gICAgaWYoa2V5QWdyZWVtZW50S2V5UGFpcikge1xuICAgICAgYWRkS2V5QWdyZWVtZW50S2V5Q29udGV4dCh7Y29udGV4dHMsIGtleUFncmVlbWVudEtleVBhaXJ9KTtcbiAgICAgIGNvbnN0IGRpZCA9IGdldERpZCh7a2V5UGFpcjoga2V5QWdyZWVtZW50S2V5UGFpcn0pO1xuICAgICAgaWYoIWtleUFncmVlbWVudEtleVBhaXIuY29udHJvbGxlcikge1xuICAgICAgICBrZXlBZ3JlZW1lbnRLZXlQYWlyLmNvbnRyb2xsZXIgPSBkaWQ7XG4gICAgICB9XG4gICAgICBpZigha2V5QWdyZWVtZW50S2V5UGFpci5pZCkge1xuICAgICAgICBzZXRLZXlQYWlySWQoe2tleVBhaXI6IGtleUFncmVlbWVudEtleVBhaXIsIGRpZH0pO1xuICAgICAgfVxuICAgICAgcHVibGljRGhLZXkgPSBhd2FpdCBrZXlBZ3JlZW1lbnRLZXlQYWlyLmV4cG9ydCh7cHVibGljS2V5OiB0cnVlfSk7XG4gICAgfVxuXG4gICAgLy8gQ29tcG9zZSB0aGUgRElEIERvY3VtZW50XG4gICAgZGlkRG9jdW1lbnQgPSB7XG4gICAgICAvLyBOb3RlIHRoYXQgZGlkOmtleSBkb2VzIG5vdCBoYXZlIGl0cyBvd24gbWV0aG9kLXNwZWNpZmljIGNvbnRleHQsXG4gICAgICAvLyBhbmQgb25seSB1c2VzIHRoZSBnZW5lcmFsIERJRCBDb3JlIGNvbnRleHQsIGFuZCBrZXktc3BlY2lmaWMgY29udGV4dHMuXG4gICAgICAnQGNvbnRleHQnOiBjb250ZXh0cyxcbiAgICAgIGlkOiBkaWQsXG4gICAgICB2ZXJpZmljYXRpb25NZXRob2Q6IFt2ZXJpZmljYXRpb25QdWJsaWNLZXldLFxuICAgICAgYXV0aGVudGljYXRpb246IFt2ZXJpZmljYXRpb25QdWJsaWNLZXkuaWRdLFxuICAgICAgYXNzZXJ0aW9uTWV0aG9kOiBbdmVyaWZpY2F0aW9uUHVibGljS2V5LmlkXSxcbiAgICAgIGNhcGFiaWxpdHlEZWxlZ2F0aW9uOiBbdmVyaWZpY2F0aW9uUHVibGljS2V5LmlkXSxcbiAgICAgIGNhcGFiaWxpdHlJbnZvY2F0aW9uOiBbdmVyaWZpY2F0aW9uUHVibGljS2V5LmlkXSxcbiAgICB9O1xuICAgIGlmKHB1YmxpY0RoS2V5KSB7XG4gICAgICBkaWREb2N1bWVudC5rZXlBZ3JlZW1lbnQgPSBbcHVibGljRGhLZXldO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgdGhlIGtleSBwYWlycyBtYXBcbiAgICBrZXlQYWlycy5zZXQodmVyaWZpY2F0aW9uS2V5UGFpci5pZCwgdmVyaWZpY2F0aW9uS2V5UGFpcik7XG4gICAgaWYoa2V5QWdyZWVtZW50S2V5UGFpcikge1xuICAgICAga2V5UGFpcnMuc2V0KGtleUFncmVlbWVudEtleVBhaXIuaWQsIGtleUFncmVlbWVudEtleVBhaXIpO1xuICAgIH1cblxuICAgIHJldHVybiB7ZGlkRG9jdW1lbnQsIGtleVBhaXJzfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyB0aGUgaWQgb2YgYSBnaXZlbiBrZXkgcGFpci4gVXNlZCBieSBgZGlkLWlvYCBkcml2ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMua2V5UGFpciAtIFRoZSBrZXkgcGFpciB1c2VkIHdoZW4gY29tcHV0aW5nIHRoZVxuICAgKiAgIGlkZW50aWZpZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGtleSdzIGlkLlxuICAgKi9cbiAgYXN5bmMgY29tcHV0ZUlkKHtrZXlQYWlyfSkge1xuICAgIHJldHVybiBgZGlkOmtleToke2tleVBhaXIuZmluZ2VycHJpbnQoKX0jJHtrZXlQYWlyLmZpbmdlcnByaW50KCl9YDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/DidKeyDriver.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/helpers.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-method-key/lib/helpers.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addKeyAgreementKeyContext: () => (/* binding */ addKeyAgreementKeyContext),\n/* harmony export */   getDid: () => (/* binding */ getDid),\n/* harmony export */   getKey: () => (/* binding */ getKey),\n/* harmony export */   getKeyAgreementKeyPair: () => (/* binding */ getKeyAgreementKeyPair),\n/* harmony export */   getKeyPair: () => (/* binding */ getKeyPair),\n/* harmony export */   getMultibaseMultikeyHeader: () => (/* binding */ getMultibaseMultikeyHeader),\n/* harmony export */   setKeyPairId: () => (/* binding */ setKeyPairId)\n/* harmony export */ });\n/* harmony import */ var _digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @digitalbazaar/x25519-key-agreement-key-2019 */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/index.js\");\n/* harmony import */ var _digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @digitalbazaar/x25519-key-agreement-key-2020 */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/index.js\");\n/*!\n * Copyright (c) 2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\nconst ED25519_KEY_2018_CONTEXT_URL =\n  'https://w3id.org/security/suites/ed25519-2018/v1';\nconst ED25519_KEY_2020_CONTEXT_URL =\n  'https://w3id.org/security/suites/ed25519-2020/v1';\nconst MULTIKEY_CONTEXT_V1_URL = 'https://w3id.org/security/multikey/v1';\n\nconst contextsBySuite = new Map([\n  ['Ed25519VerificationKey2020', ED25519_KEY_2020_CONTEXT_URL],\n  ['Ed25519VerificationKey2018', ED25519_KEY_2018_CONTEXT_URL],\n  ['Multikey', MULTIKEY_CONTEXT_V1_URL],\n  [_digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__.X25519KeyAgreementKey2020.suite, _digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__.X25519KeyAgreementKey2020.SUITE_CONTEXT],\n  [_digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019.suite, _digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019.SUITE_CONTEXT]\n]);\n\n/**\n * Returns the public key object for a given key id fragment.\n *\n * @param {object} options - Options hashmap.\n * @param {object} options.didDocument - The DID Document to use when generating\n *   the id.\n * @param {string} options.keyIdFragment - The key identifier fragment.\n *\n * @returns {object} Returns the public key node, with `@context`.\n */\nfunction getKey({didDocument, keyIdFragment}) {\n  // Determine if the key id fragment belongs to the \"main\" public key,\n  // or the keyAgreement key\n  const keyId = didDocument.id + '#' + keyIdFragment;\n  let publicKey;\n  if(didDocument.verificationMethod?.[0].id === keyId) {\n    // Return the public key node for the main public key\n    publicKey = didDocument.verificationMethod[0];\n  } else {\n    // Return the public key node for the X25519 key-agreement key\n    publicKey = didDocument.keyAgreement[0];\n  }\n\n  return {\n    '@context': contextsBySuite.get(publicKey.type),\n    ...publicKey\n  };\n}\n\nfunction getDid({keyPair}) {\n  return keyPair.fingerprint ? `did:key:${keyPair.fingerprint()}` :\n    `did:key:${keyPair.publicKeyMultibase}`;\n}\n\nfunction setKeyPairId({keyPair, did}) {\n  keyPair.id = keyPair.fingerprint ? `${did}#${keyPair.fingerprint()}` :\n    `${did}#${keyPair.publicKeyMultibase}`;\n}\n\nfunction getKeyAgreementKeyPair({contexts, verificationPublicKey}) {\n  // The KAK pair will use the source key's controller, but may generate\n  // its own .id\n  let keyAgreementKeyPair;\n\n  switch(verificationPublicKey.type) {\n    case 'Ed25519VerificationKey2018': {\n      keyAgreementKeyPair = _digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019\n        .fromEd25519VerificationKey2018({keyPair: verificationPublicKey});\n      contexts.push(_digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019.SUITE_CONTEXT);\n      break;\n    }\n    case 'Ed25519VerificationKey2020': {\n      keyAgreementKeyPair = _digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__.X25519KeyAgreementKey2020\n        .fromEd25519VerificationKey2020({keyPair: verificationPublicKey});\n      contexts.push(_digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__.X25519KeyAgreementKey2020.SUITE_CONTEXT);\n      break;\n    }\n    case 'Multikey': {\n      // FIXME: Add keyAgreementKeyPair interface for Multikey.\n      break;\n    }\n    default: {\n      throw new Error(\n        `Cannot derive key agreement key from verification key type\n          \"${verificationPublicKey.type}\".`);\n    }\n  }\n  return {keyAgreementKeyPair};\n}\n\nfunction getMultibaseMultikeyHeader({value}) {\n  if(!value) {\n    throw new TypeError('\"publicKeyMultibase\" must be a string.');\n  }\n  return value.slice(0, 4);\n}\n\nfunction addKeyAgreementKeyContext({contexts, keyAgreementKeyPair}) {\n  const {type} = keyAgreementKeyPair;\n  switch(type) {\n    case 'X25519KeyAgreementKey2019': {\n      if(!contexts.includes(_digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019.SUITE_CONTEXT)) {\n        contexts.push(_digitalbazaar_x25519_key_agreement_key_2019__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019.SUITE_CONTEXT);\n      }\n      break;\n    }\n    case 'X25519KeyAgreementKey2020': {\n      if(!contexts.includes(_digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__.X25519KeyAgreementKey2020.SUITE_CONTEXT)) {\n        contexts.push(_digitalbazaar_x25519_key_agreement_key_2020__WEBPACK_IMPORTED_MODULE_1__.X25519KeyAgreementKey2020.SUITE_CONTEXT);\n      }\n      break;\n    }\n    default: {\n      throw new Error(`Unsupported key agreement key type, \"${type}\".`);\n    }\n  }\n}\n\nasync function getKeyPair({\n  fromMultibase, publicKeyMultibase, publicKeyDescription\n} = {}) {\n  let keyPair;\n  if(fromMultibase && publicKeyMultibase) {\n    keyPair = await fromMultibase({publicKeyMultibase});\n  } else {\n    keyPair = publicKeyDescription;\n  }\n  const {type} = keyPair;\n  let keyAgreementKeyPair;\n  if(type === 'X25519KeyAgreementKey2020' ||\n    type === 'X25519KeyAgreementKey2019') {\n    keyAgreementKeyPair = keyPair;\n    keyPair = null;\n  }\n  return {keyPair, keyAgreementKeyPair};\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLW1ldGhvZC1rZXkvbGliL2hlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBR3NEO0FBR0E7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLG1HQUF5QixRQUFRLG1HQUF5QjtBQUM3RCxHQUFHLG1HQUF5QixRQUFRLG1HQUF5QjtBQUM3RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ08saUJBQWlCLDJCQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTyxpQkFBaUIsUUFBUTtBQUNoQywwQ0FBMEMsc0JBQXNCO0FBQ2hFLGVBQWUsMkJBQTJCO0FBQzFDOztBQUVPLHVCQUF1QixhQUFhO0FBQzNDLHdDQUF3QyxJQUFJLEdBQUcsc0JBQXNCO0FBQ3JFLE9BQU8sSUFBSSxHQUFHLDJCQUEyQjtBQUN6Qzs7QUFFTyxpQ0FBaUMsZ0NBQWdDO0FBQ3hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLG1HQUF5QjtBQUNyRCx5Q0FBeUMsK0JBQStCO0FBQ3hFLG9CQUFvQixtR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1HQUF5QjtBQUNyRCx5Q0FBeUMsK0JBQStCO0FBQ3hFLG9CQUFvQixtR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwyQkFBMkI7QUFDeEM7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFTyxxQ0FBcUMsTUFBTTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPLG9DQUFvQyw4QkFBOEI7QUFDekUsU0FBUyxNQUFNO0FBQ2Y7QUFDQTtBQUNBLDRCQUE0QixtR0FBeUI7QUFDckQsc0JBQXNCLG1HQUF5QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixtR0FBeUI7QUFDckQsc0JBQXNCLG1HQUF5QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxLQUFLO0FBQ25FO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBLG1DQUFtQyxtQkFBbUI7QUFDdEQsSUFBSTtBQUNKO0FBQ0E7QUFDQSxTQUFTLE1BQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLW1ldGhvZC1rZXkvbGliL2hlbHBlcnMuanM/ZDgwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMyBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQge1xuICBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5XG59IGZyb20gJ0BkaWdpdGFsYmF6YWFyL3gyNTUxOS1rZXktYWdyZWVtZW50LWtleS0yMDE5JztcbmltcG9ydCB7XG4gIFgyNTUxOUtleUFncmVlbWVudEtleTIwMjBcbn0gZnJvbSAnQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAnO1xuXG5jb25zdCBFRDI1NTE5X0tFWV8yMDE4X0NPTlRFWFRfVVJMID1cbiAgJ2h0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvc3VpdGVzL2VkMjU1MTktMjAxOC92MSc7XG5jb25zdCBFRDI1NTE5X0tFWV8yMDIwX0NPTlRFWFRfVVJMID1cbiAgJ2h0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvc3VpdGVzL2VkMjU1MTktMjAyMC92MSc7XG5jb25zdCBNVUxUSUtFWV9DT05URVhUX1YxX1VSTCA9ICdodHRwczovL3czaWQub3JnL3NlY3VyaXR5L211bHRpa2V5L3YxJztcblxuY29uc3QgY29udGV4dHNCeVN1aXRlID0gbmV3IE1hcChbXG4gIFsnRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAnLCBFRDI1NTE5X0tFWV8yMDIwX0NPTlRFWFRfVVJMXSxcbiAgWydFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCcsIEVEMjU1MTlfS0VZXzIwMThfQ09OVEVYVF9VUkxdLFxuICBbJ011bHRpa2V5JywgTVVMVElLRVlfQ09OVEVYVF9WMV9VUkxdLFxuICBbWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMC5zdWl0ZSwgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMC5TVUlURV9DT05URVhUXSxcbiAgW1gyNTUxOUtleUFncmVlbWVudEtleTIwMTkuc3VpdGUsIFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkuU1VJVEVfQ09OVEVYVF1cbl0pO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHB1YmxpYyBrZXkgb2JqZWN0IGZvciBhIGdpdmVuIGtleSBpZCBmcmFnbWVudC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmRpZERvY3VtZW50IC0gVGhlIERJRCBEb2N1bWVudCB0byB1c2Ugd2hlbiBnZW5lcmF0aW5nXG4gKiAgIHRoZSBpZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmtleUlkRnJhZ21lbnQgLSBUaGUga2V5IGlkZW50aWZpZXIgZnJhZ21lbnQuXG4gKlxuICogQHJldHVybnMge29iamVjdH0gUmV0dXJucyB0aGUgcHVibGljIGtleSBub2RlLCB3aXRoIGBAY29udGV4dGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXkoe2RpZERvY3VtZW50LCBrZXlJZEZyYWdtZW50fSkge1xuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGtleSBpZCBmcmFnbWVudCBiZWxvbmdzIHRvIHRoZSBcIm1haW5cIiBwdWJsaWMga2V5LFxuICAvLyBvciB0aGUga2V5QWdyZWVtZW50IGtleVxuICBjb25zdCBrZXlJZCA9IGRpZERvY3VtZW50LmlkICsgJyMnICsga2V5SWRGcmFnbWVudDtcbiAgbGV0IHB1YmxpY0tleTtcbiAgaWYoZGlkRG9jdW1lbnQudmVyaWZpY2F0aW9uTWV0aG9kPy5bMF0uaWQgPT09IGtleUlkKSB7XG4gICAgLy8gUmV0dXJuIHRoZSBwdWJsaWMga2V5IG5vZGUgZm9yIHRoZSBtYWluIHB1YmxpYyBrZXlcbiAgICBwdWJsaWNLZXkgPSBkaWREb2N1bWVudC52ZXJpZmljYXRpb25NZXRob2RbMF07XG4gIH0gZWxzZSB7XG4gICAgLy8gUmV0dXJuIHRoZSBwdWJsaWMga2V5IG5vZGUgZm9yIHRoZSBYMjU1MTkga2V5LWFncmVlbWVudCBrZXlcbiAgICBwdWJsaWNLZXkgPSBkaWREb2N1bWVudC5rZXlBZ3JlZW1lbnRbMF07XG4gIH1cblxuICByZXR1cm4ge1xuICAgICdAY29udGV4dCc6IGNvbnRleHRzQnlTdWl0ZS5nZXQocHVibGljS2V5LnR5cGUpLFxuICAgIC4uLnB1YmxpY0tleVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlkKHtrZXlQYWlyfSkge1xuICByZXR1cm4ga2V5UGFpci5maW5nZXJwcmludCA/IGBkaWQ6a2V5OiR7a2V5UGFpci5maW5nZXJwcmludCgpfWAgOlxuICAgIGBkaWQ6a2V5OiR7a2V5UGFpci5wdWJsaWNLZXlNdWx0aWJhc2V9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEtleVBhaXJJZCh7a2V5UGFpciwgZGlkfSkge1xuICBrZXlQYWlyLmlkID0ga2V5UGFpci5maW5nZXJwcmludCA/IGAke2RpZH0jJHtrZXlQYWlyLmZpbmdlcnByaW50KCl9YCA6XG4gICAgYCR7ZGlkfSMke2tleVBhaXIucHVibGljS2V5TXVsdGliYXNlfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlBZ3JlZW1lbnRLZXlQYWlyKHtjb250ZXh0cywgdmVyaWZpY2F0aW9uUHVibGljS2V5fSkge1xuICAvLyBUaGUgS0FLIHBhaXIgd2lsbCB1c2UgdGhlIHNvdXJjZSBrZXkncyBjb250cm9sbGVyLCBidXQgbWF5IGdlbmVyYXRlXG4gIC8vIGl0cyBvd24gLmlkXG4gIGxldCBrZXlBZ3JlZW1lbnRLZXlQYWlyO1xuXG4gIHN3aXRjaCh2ZXJpZmljYXRpb25QdWJsaWNLZXkudHlwZSkge1xuICAgIGNhc2UgJ0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDE4Jzoge1xuICAgICAga2V5QWdyZWVtZW50S2V5UGFpciA9IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTlcbiAgICAgICAgLmZyb21FZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCh7a2V5UGFpcjogdmVyaWZpY2F0aW9uUHVibGljS2V5fSk7XG4gICAgICBjb250ZXh0cy5wdXNoKFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkuU1VJVEVfQ09OVEVYVCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAnOiB7XG4gICAgICBrZXlBZ3JlZW1lbnRLZXlQYWlyID0gWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMFxuICAgICAgICAuZnJvbUVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwKHtrZXlQYWlyOiB2ZXJpZmljYXRpb25QdWJsaWNLZXl9KTtcbiAgICAgIGNvbnRleHRzLnB1c2goWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMC5TVUlURV9DT05URVhUKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdNdWx0aWtleSc6IHtcbiAgICAgIC8vIEZJWE1FOiBBZGQga2V5QWdyZWVtZW50S2V5UGFpciBpbnRlcmZhY2UgZm9yIE11bHRpa2V5LlxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBkZXJpdmUga2V5IGFncmVlbWVudCBrZXkgZnJvbSB2ZXJpZmljYXRpb24ga2V5IHR5cGVcbiAgICAgICAgICBcIiR7dmVyaWZpY2F0aW9uUHVibGljS2V5LnR5cGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7a2V5QWdyZWVtZW50S2V5UGFpcn07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNdWx0aWJhc2VNdWx0aWtleUhlYWRlcih7dmFsdWV9KSB7XG4gIGlmKCF2YWx1ZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wicHVibGljS2V5TXVsdGliYXNlXCIgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgfVxuICByZXR1cm4gdmFsdWUuc2xpY2UoMCwgNCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRLZXlBZ3JlZW1lbnRLZXlDb250ZXh0KHtjb250ZXh0cywga2V5QWdyZWVtZW50S2V5UGFpcn0pIHtcbiAgY29uc3Qge3R5cGV9ID0ga2V5QWdyZWVtZW50S2V5UGFpcjtcbiAgc3dpdGNoKHR5cGUpIHtcbiAgICBjYXNlICdYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5Jzoge1xuICAgICAgaWYoIWNvbnRleHRzLmluY2x1ZGVzKFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkuU1VJVEVfQ09OVEVYVCkpIHtcbiAgICAgICAgY29udGV4dHMucHVzaChYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5LlNVSVRFX0NPTlRFWFQpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ1gyNTUxOUtleUFncmVlbWVudEtleTIwMjAnOiB7XG4gICAgICBpZighY29udGV4dHMuaW5jbHVkZXMoWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMC5TVUlURV9DT05URVhUKSkge1xuICAgICAgICBjb250ZXh0cy5wdXNoKFgyNTUxOUtleUFncmVlbWVudEtleTIwMjAuU1VJVEVfQ09OVEVYVCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBrZXkgYWdyZWVtZW50IGtleSB0eXBlLCBcIiR7dHlwZX1cIi5gKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEtleVBhaXIoe1xuICBmcm9tTXVsdGliYXNlLCBwdWJsaWNLZXlNdWx0aWJhc2UsIHB1YmxpY0tleURlc2NyaXB0aW9uXG59ID0ge30pIHtcbiAgbGV0IGtleVBhaXI7XG4gIGlmKGZyb21NdWx0aWJhc2UgJiYgcHVibGljS2V5TXVsdGliYXNlKSB7XG4gICAga2V5UGFpciA9IGF3YWl0IGZyb21NdWx0aWJhc2Uoe3B1YmxpY0tleU11bHRpYmFzZX0pO1xuICB9IGVsc2Uge1xuICAgIGtleVBhaXIgPSBwdWJsaWNLZXlEZXNjcmlwdGlvbjtcbiAgfVxuICBjb25zdCB7dHlwZX0gPSBrZXlQYWlyO1xuICBsZXQga2V5QWdyZWVtZW50S2V5UGFpcjtcbiAgaWYodHlwZSA9PT0gJ1gyNTUxOUtleUFncmVlbWVudEtleTIwMjAnIHx8XG4gICAgdHlwZSA9PT0gJ1gyNTUxOUtleUFncmVlbWVudEtleTIwMTknKSB7XG4gICAga2V5QWdyZWVtZW50S2V5UGFpciA9IGtleVBhaXI7XG4gICAga2V5UGFpciA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIHtrZXlQYWlyLCBrZXlBZ3JlZW1lbnRLZXlQYWlyfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-method-key/lib/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DidKeyDriver: () => (/* reexport safe */ _DidKeyDriver_js__WEBPACK_IMPORTED_MODULE_1__.DidKeyDriver),\n/* harmony export */   createFromMultibase: () => (/* reexport safe */ _util_js__WEBPACK_IMPORTED_MODULE_0__.createFromMultibase),\n/* harmony export */   driver: () => (/* binding */ driver)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ \"(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/util.js\");\n/* harmony import */ var _DidKeyDriver_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DidKeyDriver.js */ \"(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/DidKeyDriver.js\");\n/*!\n * Copyright (c) 2021-2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n/**\n * Helper method to match the `.driver()` API of other `did-io` plugins.\n *\n * @returns {DidKeyDriver} Returns an instance of a did:key resolver driver.\n */\nfunction driver() {\n  return new _DidKeyDriver_js__WEBPACK_IMPORTED_MODULE_1__.DidKeyDriver();\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLW1ldGhvZC1rZXkvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzhDO0FBQ0M7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ0EsYUFBYSwwREFBWTtBQUN6Qjs7QUFFbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLW1ldGhvZC1rZXkvbGliL2luZGV4LmpzP2UyMzAiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyMyBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQge2NyZWF0ZUZyb21NdWx0aWJhc2V9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQge0RpZEtleURyaXZlcn0gZnJvbSAnLi9EaWRLZXlEcml2ZXIuanMnO1xuXG4vKipcbiAqIEhlbHBlciBtZXRob2QgdG8gbWF0Y2ggdGhlIGAuZHJpdmVyKClgIEFQSSBvZiBvdGhlciBgZGlkLWlvYCBwbHVnaW5zLlxuICpcbiAqIEByZXR1cm5zIHtEaWRLZXlEcml2ZXJ9IFJldHVybnMgYW4gaW5zdGFuY2Ugb2YgYSBkaWQ6a2V5IHJlc29sdmVyIGRyaXZlci5cbiAqL1xuZnVuY3Rpb24gZHJpdmVyKCkge1xuICByZXR1cm4gbmV3IERpZEtleURyaXZlcigpO1xufVxuXG5leHBvcnQge2NyZWF0ZUZyb21NdWx0aWJhc2UsIGRyaXZlciwgRGlkS2V5RHJpdmVyfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/util.js":
/*!****************************************************************!*\
  !*** ./node_modules/@digitalbazaar/did-method-key/lib/util.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFromMultibase: () => (/* binding */ createFromMultibase)\n/* harmony export */ });\n/*!\n * Copyright (c) 2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n/**\n * A utility function to create a multibase-multikey deserializer function.\n *\n * @param {object} options - Options hashmap.\n * @param {Function} options.fromFingerprint - A method that creates a KeyPair\n *   from a key fingerprint.\n *\n * @returns {Function} - Multibase-multikey deserializer.\n */\nfunction createFromMultibase({fromFingerprint}) {\n  return async function fromMultibase({publicKeyMultibase}) {\n    return fromFingerprint({fingerprint: publicKeyMultibase});\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZGlkLW1ldGhvZC1rZXkvbGliL3V0aWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDTyw4QkFBOEIsZ0JBQWdCO0FBQ3JELHVDQUF1QyxtQkFBbUI7QUFDMUQsNEJBQTRCLGdDQUFnQztBQUM1RDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2RpZC1tZXRob2Qta2V5L2xpYi91dGlsLmpzPzMwMDQiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjMgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuXG4vKipcbiAqIEEgdXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgYSBtdWx0aWJhc2UtbXVsdGlrZXkgZGVzZXJpYWxpemVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5mcm9tRmluZ2VycHJpbnQgLSBBIG1ldGhvZCB0aGF0IGNyZWF0ZXMgYSBLZXlQYWlyXG4gKiAgIGZyb20gYSBrZXkgZmluZ2VycHJpbnQuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSAtIE11bHRpYmFzZS1tdWx0aWtleSBkZXNlcmlhbGl6ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tTXVsdGliYXNlKHtmcm9tRmluZ2VycHJpbnR9KSB7XG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiBmcm9tTXVsdGliYXNlKHtwdWJsaWNLZXlNdWx0aWJhc2V9KSB7XG4gICAgcmV0dXJuIGZyb21GaW5nZXJwcmludCh7ZmluZ2VycHJpbnQ6IHB1YmxpY0tleU11bHRpYmFzZX0pO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/did-method-key/lib/util.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ED25519_SIGNATURE_2018_V1_URL: () => (/* binding */ ED25519_SIGNATURE_2018_V1_URL),\n/* harmony export */   ED25519_SIGNATURE_2020_V1_URL: () => (/* binding */ ED25519_SIGNATURE_2020_V1_URL),\n/* harmony export */   MULTIBASE_BASE58BTC_HEADER: () => (/* binding */ MULTIBASE_BASE58BTC_HEADER),\n/* harmony export */   MULTICODEC_PRIV_HEADER: () => (/* binding */ MULTICODEC_PRIV_HEADER),\n/* harmony export */   MULTICODEC_PUB_HEADER: () => (/* binding */ MULTICODEC_PUB_HEADER),\n/* harmony export */   MULTIKEY_CONTEXT_V1_URL: () => (/* binding */ MULTIKEY_CONTEXT_V1_URL),\n/* harmony export */   PUBLIC_KEY_SIZE: () => (/* binding */ PUBLIC_KEY_SIZE),\n/* harmony export */   SECRET_KEY_SIZE: () => (/* binding */ SECRET_KEY_SIZE)\n/* harmony export */ });\n/*!\n * Copyright (c) 2022-2024 Digital Bazaar, Inc. All rights reserved.\n */\n\n// Ed25519 Signature 2018 Context v1 URL\nconst ED25519_SIGNATURE_2018_V1_URL =\n  'https://w3id.org/security/suites/ed25519-2018/v1';\n// Ed25519 Signature 2020 Context v1 URL\nconst ED25519_SIGNATURE_2020_V1_URL =\n  'https://w3id.org/security/suites/ed25519-2020/v1';\n// multibase base58-btc header\nconst MULTIBASE_BASE58BTC_HEADER = 'z';\n// multicodec ed25519-pub header as varint\nconst MULTICODEC_PUB_HEADER = new Uint8Array([0xed, 0x01]);\n// multicodec ed25519-priv header as varint\nconst MULTICODEC_PRIV_HEADER = new Uint8Array([0x80, 0x26]);\n// multikey context v1 url\nconst MULTIKEY_CONTEXT_V1_URL = 'https://w3id.org/security/multikey/v1';\n// Ed25519 public key size in bytes\nconst PUBLIC_KEY_SIZE = 32;\n// Ed25519 secret key size in bytes\nconst SECRET_KEY_SIZE = 32;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDTyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LW11bHRpa2V5L2xpYi9jb25zdGFudHMuanM/NGJmMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMi0yMDI0IERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuLy8gRWQyNTUxOSBTaWduYXR1cmUgMjAxOCBDb250ZXh0IHYxIFVSTFxuZXhwb3J0IGNvbnN0IEVEMjU1MTlfU0lHTkFUVVJFXzIwMThfVjFfVVJMID1cbiAgJ2h0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvc3VpdGVzL2VkMjU1MTktMjAxOC92MSc7XG4vLyBFZDI1NTE5IFNpZ25hdHVyZSAyMDIwIENvbnRleHQgdjEgVVJMXG5leHBvcnQgY29uc3QgRUQyNTUxOV9TSUdOQVRVUkVfMjAyMF9WMV9VUkwgPVxuICAnaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS9zdWl0ZXMvZWQyNTUxOS0yMDIwL3YxJztcbi8vIG11bHRpYmFzZSBiYXNlNTgtYnRjIGhlYWRlclxuZXhwb3J0IGNvbnN0IE1VTFRJQkFTRV9CQVNFNThCVENfSEVBREVSID0gJ3onO1xuLy8gbXVsdGljb2RlYyBlZDI1NTE5LXB1YiBoZWFkZXIgYXMgdmFyaW50XG5leHBvcnQgY29uc3QgTVVMVElDT0RFQ19QVUJfSEVBREVSID0gbmV3IFVpbnQ4QXJyYXkoWzB4ZWQsIDB4MDFdKTtcbi8vIG11bHRpY29kZWMgZWQyNTUxOS1wcml2IGhlYWRlciBhcyB2YXJpbnRcbmV4cG9ydCBjb25zdCBNVUxUSUNPREVDX1BSSVZfSEVBREVSID0gbmV3IFVpbnQ4QXJyYXkoWzB4ODAsIDB4MjZdKTtcbi8vIG11bHRpa2V5IGNvbnRleHQgdjEgdXJsXG5leHBvcnQgY29uc3QgTVVMVElLRVlfQ09OVEVYVF9WMV9VUkwgPSAnaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS9tdWx0aWtleS92MSc7XG4vLyBFZDI1NTE5IHB1YmxpYyBrZXkgc2l6ZSBpbiBieXRlc1xuZXhwb3J0IGNvbnN0IFBVQkxJQ19LRVlfU0laRSA9IDMyO1xuLy8gRWQyNTUxOSBzZWNyZXQga2V5IHNpemUgaW4gYnl0ZXNcbmV4cG9ydCBjb25zdCBTRUNSRVRfS0VZX1NJWkUgPSAzMjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/ed25519.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/ed25519.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateKeyPair: () => (/* binding */ generateKeyPair),\n/* harmony export */   generateKeyPairFromSeed: () => (/* binding */ generateKeyPairFromSeed),\n/* harmony export */   sha256digest: () => (/* binding */ sha256digest),\n/* harmony export */   sign: () => (/* binding */ sign),\n/* harmony export */   verify: () => (/* binding */ verify)\n/* harmony export */ });\n/* harmony import */ var _validators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validators.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/validators.js\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:util */ \"node:util\");\n/*!\n * Copyright (c) 2020-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst randomBytesAsync = (0,node_util__WEBPACK_IMPORTED_MODULE_2__.promisify)(node_crypto__WEBPACK_IMPORTED_MODULE_1__.randomBytes);\n\n// used to export node's public keys to buffers\nconst publicKeyEncoding = {format: 'der', type: 'spki'};\n// used to turn secret key bytes into a buffer in DER format\nconst DER_PRIVATE_KEY_PREFIX = Buffer.from(\n  '302e020100300506032b657004220420', 'hex');\n// used to turn public key bytes into a buffer in DER format\nconst DER_PUBLIC_KEY_PREFIX = Buffer.from('302a300506032b6570032100', 'hex');\n\n/**\n * Generates a key using a 32 byte Uint8Array.\n *\n * @param {Uint8Array} seedBytes - The bytes for the secret key.\n *\n * @returns {object} The object with the public and secret key material.\n*/\nasync function generateKeyPairFromSeed(seedBytes) {\n  const secretKey = await node_crypto__WEBPACK_IMPORTED_MODULE_1__.createPrivateKey({\n    // node is more than happy to create a new secret key using a DER\n    key: _secretKeyDerEncode({seedBytes}),\n    format: 'der',\n    type: 'pkcs8'\n  });\n  // this expects either a PEM encoded key or a node secretKeyObject\n  const publicKey = await node_crypto__WEBPACK_IMPORTED_MODULE_1__.createPublicKey(secretKey);\n  const publicKeyBuffer = publicKey.export(publicKeyEncoding);\n  const publicKeyBytes = _getKeyMaterial(publicKeyBuffer);\n  return {\n    publicKey: publicKeyBytes,\n    secretKey: Buffer.concat([seedBytes, publicKeyBytes])\n  };\n}\n\n// generates an ed25519 key using a random seed\nasync function generateKeyPair() {\n  const seed = await randomBytesAsync(32);\n  return generateKeyPairFromSeed(seed);\n}\n\nasync function sign(secretKeyBytes, data) {\n  const secretKey = await node_crypto__WEBPACK_IMPORTED_MODULE_1__.createPrivateKey({\n    key: _secretKeyDerEncode({secretKeyBytes}),\n    format: 'der',\n    type: 'pkcs8'\n  });\n  return node_crypto__WEBPACK_IMPORTED_MODULE_1__.sign(null, data, secretKey);\n}\n\nasync function verify(publicKeyBytes, data, signature) {\n  const publicKey = await node_crypto__WEBPACK_IMPORTED_MODULE_1__.createPublicKey({\n    key: _publicKeyDerEncode({publicKeyBytes}),\n    format: 'der',\n    type: 'spki'\n  });\n  return node_crypto__WEBPACK_IMPORTED_MODULE_1__.verify(null, data, publicKey, signature);\n}\n\nasync function sha256digest({data}) {\n  return node_crypto__WEBPACK_IMPORTED_MODULE_1__.createHash('sha256').update(data).digest();\n}\n\n/**\n * The key material is the part of the buffer after the DER Prefix.\n *\n * @param {Buffer} buffer - A DER encoded key buffer.\n *\n * @throws {Error} If the buffer does not contain a valid DER Prefix.\n *\n * @returns {Buffer} The key material part of the Buffer.\n*/\nfunction _getKeyMaterial(buffer) {\n  if(buffer.indexOf(DER_PUBLIC_KEY_PREFIX) === 0) {\n    return buffer.slice(DER_PUBLIC_KEY_PREFIX.length, buffer.length);\n  }\n  if(buffer.indexOf(DER_PRIVATE_KEY_PREFIX) === 0) {\n    return buffer.slice(DER_PRIVATE_KEY_PREFIX.length, buffer.length);\n  }\n  throw new Error('Expected Buffer to match Ed25519 Public or Private Prefix');\n}\n\n/**\n * Takes a Buffer or Uint8Array with the raw secret key and encodes it\n * in DER-encoded PKCS#8 format.\n * Allows Uint8Arrays to be interoperable with node's crypto functions.\n *\n * @param {object} options - Options to use.\n * @param {Buffer} [options.secretKeyBytes] - Required if no seedBytes.\n * @param {Buffer} [options.seedBytes] - Required if no secretKeyBytes.\n *\n * @throws {TypeError} Throws if the supplied buffer is not of the right size\n *  or not a Uint8Array or Buffer.\n *\n * @returns {Buffer} DER secret key prefix + key bytes.\n*/\nfunction _secretKeyDerEncode({secretKeyBytes, seedBytes}) {\n  if(!(secretKeyBytes || seedBytes)) {\n    throw new TypeError('`secretKeyBytes` or `seedBytes` is required.');\n  }\n  if(!secretKeyBytes) {\n    (0,_validators_js__WEBPACK_IMPORTED_MODULE_0__.assertKeyBytes)({\n      bytes: seedBytes,\n      expectedLength: 32\n    });\n  }\n  if(!seedBytes) {\n    (0,_validators_js__WEBPACK_IMPORTED_MODULE_0__.assertKeyBytes)({\n      bytes: secretKeyBytes,\n      // allow 32 bytes or 64 bytes\n      expectedLength: secretKeyBytes.length === 32 ? 32 : 64\n    });\n  }\n  let p;\n  if(seedBytes) {\n    p = seedBytes;\n  } else {\n    // extract the first 32 bytes of the 64 byte secret key representation\n    p = secretKeyBytes.slice(0, 32);\n  }\n  return Buffer.concat([DER_PRIVATE_KEY_PREFIX, p]);\n}\n\n/**\n * Takes a Uint8Array of public key bytes and encodes it in DER-encoded\n * SubjectPublicKeyInfo (SPKI) format.\n * Allows Uint8Arrays to be interoperable with node's crypto functions.\n *\n * @param {object} options - Options to use.\n * @param {Uint8Array} options.publicKeyBytes - The keyBytes.\n *\n * @throws {TypeError} Throws if the bytes are not Uint8Array or of length 32.\n *\n * @returns {Buffer} DER Public key Prefix + key bytes.\n*/\nfunction _publicKeyDerEncode({publicKeyBytes}) {\n  (0,_validators_js__WEBPACK_IMPORTED_MODULE_0__.assertKeyBytes)({\n    bytes: publicKeyBytes,\n    expectedLength: 32,\n    code: 'invalidPublicKeyLength'\n  });\n  return Buffer.concat([DER_PUBLIC_KEY_PREFIX, publicKeyBytes]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvZWQyNTUxOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUMrQztBQUNkO0FBQ0c7O0FBRXBDLHlCQUF5QixvREFBUyxDQUFDLG9EQUFrQjs7QUFFckQ7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDTztBQUNQLDBCQUEwQix5REFBdUI7QUFDakQ7QUFDQSw4QkFBOEIsVUFBVTtBQUN4QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsMEJBQTBCLHdEQUFzQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNPO0FBQ1A7QUFDQTtBQUNBOztBQUVPO0FBQ1AsMEJBQTBCLHlEQUF1QjtBQUNqRCw4QkFBOEIsZUFBZTtBQUM3QztBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsNkNBQVc7QUFDcEI7O0FBRU87QUFDUCwwQkFBMEIsd0RBQXNCO0FBQ2hELDhCQUE4QixlQUFlO0FBQzdDO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUywrQ0FBYTtBQUN0Qjs7QUFFTyw2QkFBNkIsS0FBSztBQUN6QyxTQUFTLG1EQUFpQjtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSw4QkFBOEIsMEJBQTBCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4REFBYztBQUNsQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLDhEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsOEJBQThCLGVBQWU7QUFDN0MsRUFBRSw4REFBYztBQUNoQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LW11bHRpa2V5L2xpYi9lZDI1NTE5LmpzPzk1M2UiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtMjAyMiBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQge2Fzc2VydEtleUJ5dGVzfSBmcm9tICcuL3ZhbGlkYXRvcnMuanMnO1xuaW1wb3J0IGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnbm9kZTp1dGlsJztcblxuY29uc3QgcmFuZG9tQnl0ZXNBc3luYyA9IHByb21pc2lmeShjcnlwdG8ucmFuZG9tQnl0ZXMpO1xuXG4vLyB1c2VkIHRvIGV4cG9ydCBub2RlJ3MgcHVibGljIGtleXMgdG8gYnVmZmVyc1xuY29uc3QgcHVibGljS2V5RW5jb2RpbmcgPSB7Zm9ybWF0OiAnZGVyJywgdHlwZTogJ3Nwa2knfTtcbi8vIHVzZWQgdG8gdHVybiBzZWNyZXQga2V5IGJ5dGVzIGludG8gYSBidWZmZXIgaW4gREVSIGZvcm1hdFxuY29uc3QgREVSX1BSSVZBVEVfS0VZX1BSRUZJWCA9IEJ1ZmZlci5mcm9tKFxuICAnMzAyZTAyMDEwMDMwMDUwNjAzMmI2NTcwMDQyMjA0MjAnLCAnaGV4Jyk7XG4vLyB1c2VkIHRvIHR1cm4gcHVibGljIGtleSBieXRlcyBpbnRvIGEgYnVmZmVyIGluIERFUiBmb3JtYXRcbmNvbnN0IERFUl9QVUJMSUNfS0VZX1BSRUZJWCA9IEJ1ZmZlci5mcm9tKCczMDJhMzAwNTA2MDMyYjY1NzAwMzIxMDAnLCAnaGV4Jyk7XG5cbi8qKlxuICogR2VuZXJhdGVzIGEga2V5IHVzaW5nIGEgMzIgYnl0ZSBVaW50OEFycmF5LlxuICpcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gc2VlZEJ5dGVzIC0gVGhlIGJ5dGVzIGZvciB0aGUgc2VjcmV0IGtleS5cbiAqXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgb2JqZWN0IHdpdGggdGhlIHB1YmxpYyBhbmQgc2VjcmV0IGtleSBtYXRlcmlhbC5cbiovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVLZXlQYWlyRnJvbVNlZWQoc2VlZEJ5dGVzKSB7XG4gIGNvbnN0IHNlY3JldEtleSA9IGF3YWl0IGNyeXB0by5jcmVhdGVQcml2YXRlS2V5KHtcbiAgICAvLyBub2RlIGlzIG1vcmUgdGhhbiBoYXBweSB0byBjcmVhdGUgYSBuZXcgc2VjcmV0IGtleSB1c2luZyBhIERFUlxuICAgIGtleTogX3NlY3JldEtleURlckVuY29kZSh7c2VlZEJ5dGVzfSksXG4gICAgZm9ybWF0OiAnZGVyJyxcbiAgICB0eXBlOiAncGtjczgnXG4gIH0pO1xuICAvLyB0aGlzIGV4cGVjdHMgZWl0aGVyIGEgUEVNIGVuY29kZWQga2V5IG9yIGEgbm9kZSBzZWNyZXRLZXlPYmplY3RcbiAgY29uc3QgcHVibGljS2V5ID0gYXdhaXQgY3J5cHRvLmNyZWF0ZVB1YmxpY0tleShzZWNyZXRLZXkpO1xuICBjb25zdCBwdWJsaWNLZXlCdWZmZXIgPSBwdWJsaWNLZXkuZXhwb3J0KHB1YmxpY0tleUVuY29kaW5nKTtcbiAgY29uc3QgcHVibGljS2V5Qnl0ZXMgPSBfZ2V0S2V5TWF0ZXJpYWwocHVibGljS2V5QnVmZmVyKTtcbiAgcmV0dXJuIHtcbiAgICBwdWJsaWNLZXk6IHB1YmxpY0tleUJ5dGVzLFxuICAgIHNlY3JldEtleTogQnVmZmVyLmNvbmNhdChbc2VlZEJ5dGVzLCBwdWJsaWNLZXlCeXRlc10pXG4gIH07XG59XG5cbi8vIGdlbmVyYXRlcyBhbiBlZDI1NTE5IGtleSB1c2luZyBhIHJhbmRvbSBzZWVkXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVLZXlQYWlyKCkge1xuICBjb25zdCBzZWVkID0gYXdhaXQgcmFuZG9tQnl0ZXNBc3luYygzMik7XG4gIHJldHVybiBnZW5lcmF0ZUtleVBhaXJGcm9tU2VlZChzZWVkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ24oc2VjcmV0S2V5Qnl0ZXMsIGRhdGEpIHtcbiAgY29uc3Qgc2VjcmV0S2V5ID0gYXdhaXQgY3J5cHRvLmNyZWF0ZVByaXZhdGVLZXkoe1xuICAgIGtleTogX3NlY3JldEtleURlckVuY29kZSh7c2VjcmV0S2V5Qnl0ZXN9KSxcbiAgICBmb3JtYXQ6ICdkZXInLFxuICAgIHR5cGU6ICdwa2NzOCdcbiAgfSk7XG4gIHJldHVybiBjcnlwdG8uc2lnbihudWxsLCBkYXRhLCBzZWNyZXRLZXkpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5KHB1YmxpY0tleUJ5dGVzLCBkYXRhLCBzaWduYXR1cmUpIHtcbiAgY29uc3QgcHVibGljS2V5ID0gYXdhaXQgY3J5cHRvLmNyZWF0ZVB1YmxpY0tleSh7XG4gICAga2V5OiBfcHVibGljS2V5RGVyRW5jb2RlKHtwdWJsaWNLZXlCeXRlc30pLFxuICAgIGZvcm1hdDogJ2RlcicsXG4gICAgdHlwZTogJ3Nwa2knXG4gIH0pO1xuICByZXR1cm4gY3J5cHRvLnZlcmlmeShudWxsLCBkYXRhLCBwdWJsaWNLZXksIHNpZ25hdHVyZSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaGEyNTZkaWdlc3Qoe2RhdGF9KSB7XG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGRhdGEpLmRpZ2VzdCgpO1xufVxuXG4vKipcbiAqIFRoZSBrZXkgbWF0ZXJpYWwgaXMgdGhlIHBhcnQgb2YgdGhlIGJ1ZmZlciBhZnRlciB0aGUgREVSIFByZWZpeC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIC0gQSBERVIgZW5jb2RlZCBrZXkgYnVmZmVyLlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgYnVmZmVyIGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBERVIgUHJlZml4LlxuICpcbiAqIEByZXR1cm5zIHtCdWZmZXJ9IFRoZSBrZXkgbWF0ZXJpYWwgcGFydCBvZiB0aGUgQnVmZmVyLlxuKi9cbmZ1bmN0aW9uIF9nZXRLZXlNYXRlcmlhbChidWZmZXIpIHtcbiAgaWYoYnVmZmVyLmluZGV4T2YoREVSX1BVQkxJQ19LRVlfUFJFRklYKSA9PT0gMCkge1xuICAgIHJldHVybiBidWZmZXIuc2xpY2UoREVSX1BVQkxJQ19LRVlfUFJFRklYLmxlbmd0aCwgYnVmZmVyLmxlbmd0aCk7XG4gIH1cbiAgaWYoYnVmZmVyLmluZGV4T2YoREVSX1BSSVZBVEVfS0VZX1BSRUZJWCkgPT09IDApIHtcbiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKERFUl9QUklWQVRFX0tFWV9QUkVGSVgubGVuZ3RoLCBidWZmZXIubGVuZ3RoKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIEJ1ZmZlciB0byBtYXRjaCBFZDI1NTE5IFB1YmxpYyBvciBQcml2YXRlIFByZWZpeCcpO1xufVxuXG4vKipcbiAqIFRha2VzIGEgQnVmZmVyIG9yIFVpbnQ4QXJyYXkgd2l0aCB0aGUgcmF3IHNlY3JldCBrZXkgYW5kIGVuY29kZXMgaXRcbiAqIGluIERFUi1lbmNvZGVkIFBLQ1MjOCBmb3JtYXQuXG4gKiBBbGxvd3MgVWludDhBcnJheXMgdG8gYmUgaW50ZXJvcGVyYWJsZSB3aXRoIG5vZGUncyBjcnlwdG8gZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyB0byB1c2UuXG4gKiBAcGFyYW0ge0J1ZmZlcn0gW29wdGlvbnMuc2VjcmV0S2V5Qnl0ZXNdIC0gUmVxdWlyZWQgaWYgbm8gc2VlZEJ5dGVzLlxuICogQHBhcmFtIHtCdWZmZXJ9IFtvcHRpb25zLnNlZWRCeXRlc10gLSBSZXF1aXJlZCBpZiBubyBzZWNyZXRLZXlCeXRlcy5cbiAqXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IFRocm93cyBpZiB0aGUgc3VwcGxpZWQgYnVmZmVyIGlzIG5vdCBvZiB0aGUgcmlnaHQgc2l6ZVxuICogIG9yIG5vdCBhIFVpbnQ4QXJyYXkgb3IgQnVmZmVyLlxuICpcbiAqIEByZXR1cm5zIHtCdWZmZXJ9IERFUiBzZWNyZXQga2V5IHByZWZpeCArIGtleSBieXRlcy5cbiovXG5mdW5jdGlvbiBfc2VjcmV0S2V5RGVyRW5jb2RlKHtzZWNyZXRLZXlCeXRlcywgc2VlZEJ5dGVzfSkge1xuICBpZighKHNlY3JldEtleUJ5dGVzIHx8IHNlZWRCeXRlcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdgc2VjcmV0S2V5Qnl0ZXNgIG9yIGBzZWVkQnl0ZXNgIGlzIHJlcXVpcmVkLicpO1xuICB9XG4gIGlmKCFzZWNyZXRLZXlCeXRlcykge1xuICAgIGFzc2VydEtleUJ5dGVzKHtcbiAgICAgIGJ5dGVzOiBzZWVkQnl0ZXMsXG4gICAgICBleHBlY3RlZExlbmd0aDogMzJcbiAgICB9KTtcbiAgfVxuICBpZighc2VlZEJ5dGVzKSB7XG4gICAgYXNzZXJ0S2V5Qnl0ZXMoe1xuICAgICAgYnl0ZXM6IHNlY3JldEtleUJ5dGVzLFxuICAgICAgLy8gYWxsb3cgMzIgYnl0ZXMgb3IgNjQgYnl0ZXNcbiAgICAgIGV4cGVjdGVkTGVuZ3RoOiBzZWNyZXRLZXlCeXRlcy5sZW5ndGggPT09IDMyID8gMzIgOiA2NFxuICAgIH0pO1xuICB9XG4gIGxldCBwO1xuICBpZihzZWVkQnl0ZXMpIHtcbiAgICBwID0gc2VlZEJ5dGVzO1xuICB9IGVsc2Uge1xuICAgIC8vIGV4dHJhY3QgdGhlIGZpcnN0IDMyIGJ5dGVzIG9mIHRoZSA2NCBieXRlIHNlY3JldCBrZXkgcmVwcmVzZW50YXRpb25cbiAgICBwID0gc2VjcmV0S2V5Qnl0ZXMuc2xpY2UoMCwgMzIpO1xuICB9XG4gIHJldHVybiBCdWZmZXIuY29uY2F0KFtERVJfUFJJVkFURV9LRVlfUFJFRklYLCBwXSk7XG59XG5cbi8qKlxuICogVGFrZXMgYSBVaW50OEFycmF5IG9mIHB1YmxpYyBrZXkgYnl0ZXMgYW5kIGVuY29kZXMgaXQgaW4gREVSLWVuY29kZWRcbiAqIFN1YmplY3RQdWJsaWNLZXlJbmZvIChTUEtJKSBmb3JtYXQuXG4gKiBBbGxvd3MgVWludDhBcnJheXMgdG8gYmUgaW50ZXJvcGVyYWJsZSB3aXRoIG5vZGUncyBjcnlwdG8gZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyB0byB1c2UuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IG9wdGlvbnMucHVibGljS2V5Qnl0ZXMgLSBUaGUga2V5Qnl0ZXMuXG4gKlxuICogQHRocm93cyB7VHlwZUVycm9yfSBUaHJvd3MgaWYgdGhlIGJ5dGVzIGFyZSBub3QgVWludDhBcnJheSBvciBvZiBsZW5ndGggMzIuXG4gKlxuICogQHJldHVybnMge0J1ZmZlcn0gREVSIFB1YmxpYyBrZXkgUHJlZml4ICsga2V5IGJ5dGVzLlxuKi9cbmZ1bmN0aW9uIF9wdWJsaWNLZXlEZXJFbmNvZGUoe3B1YmxpY0tleUJ5dGVzfSkge1xuICBhc3NlcnRLZXlCeXRlcyh7XG4gICAgYnl0ZXM6IHB1YmxpY0tleUJ5dGVzLFxuICAgIGV4cGVjdGVkTGVuZ3RoOiAzMixcbiAgICBjb2RlOiAnaW52YWxpZFB1YmxpY0tleUxlbmd0aCdcbiAgfSk7XG4gIHJldHVybiBCdWZmZXIuY29uY2F0KFtERVJfUFVCTElDX0tFWV9QUkVGSVgsIHB1YmxpY0tleUJ5dGVzXSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/ed25519.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/factory.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/factory.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSigner: () => (/* binding */ createSigner),\n/* harmony export */   createVerifier: () => (/* binding */ createVerifier)\n/* harmony export */ });\n/* harmony import */ var _ed25519_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ed25519.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/ed25519.js\");\n/*!\n * Copyright (c) 2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\nconst ALGORITHM = 'Ed25519';\n\nfunction createSigner({id, secretKey}) {\n  if(!secretKey) {\n    throw new Error('A secret key is not available for signing.');\n  }\n  return {\n    algorithm: ALGORITHM,\n    id,\n    async sign({data}) {\n      return _ed25519_js__WEBPACK_IMPORTED_MODULE_0__.sign(secretKey, data);\n    },\n  };\n}\n\nfunction createVerifier({id, publicKey}) {\n  if(!publicKey) {\n    throw new Error('A public key is not available for verifying.');\n  }\n  return {\n    algorithm: ALGORITHM,\n    id,\n    async verify({data, signature}) {\n      return _ed25519_js__WEBPACK_IMPORTED_MODULE_0__.verify(publicKey, data, signature);\n    },\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvZmFjdG9yeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDd0M7O0FBRXhDOztBQUVPLHVCQUF1QixjQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixLQUFLO0FBQ3JCLGFBQWEsNkNBQVk7QUFDekIsS0FBSztBQUNMO0FBQ0E7O0FBRU8seUJBQXlCLGNBQWM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQyxhQUFhLCtDQUFjO0FBQzNCLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2VkMjU1MTktbXVsdGlrZXkvbGliL2ZhY3RvcnkuanM/NzhkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMiBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQgKiBhcyBlZDI1NTE5IGZyb20gJy4vZWQyNTUxOS5qcyc7XG5cbmNvbnN0IEFMR09SSVRITSA9ICdFZDI1NTE5JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNpZ25lcih7aWQsIHNlY3JldEtleX0pIHtcbiAgaWYoIXNlY3JldEtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBzZWNyZXQga2V5IGlzIG5vdCBhdmFpbGFibGUgZm9yIHNpZ25pbmcuJyk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhbGdvcml0aG06IEFMR09SSVRITSxcbiAgICBpZCxcbiAgICBhc3luYyBzaWduKHtkYXRhfSkge1xuICAgICAgcmV0dXJuIGVkMjU1MTkuc2lnbihzZWNyZXRLZXksIGRhdGEpO1xuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWZXJpZmllcih7aWQsIHB1YmxpY0tleX0pIHtcbiAgaWYoIXB1YmxpY0tleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBwdWJsaWMga2V5IGlzIG5vdCBhdmFpbGFibGUgZm9yIHZlcmlmeWluZy4nKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFsZ29yaXRobTogQUxHT1JJVEhNLFxuICAgIGlkLFxuICAgIGFzeW5jIHZlcmlmeSh7ZGF0YSwgc2lnbmF0dXJlfSkge1xuICAgICAgcmV0dXJuIGVkMjU1MTkudmVyaWZ5KHB1YmxpY0tleSwgZGF0YSwgc2lnbmF0dXJlKTtcbiAgICB9LFxuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/factory.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/helpers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/helpers.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mbDecodeKeyPair: () => (/* binding */ mbDecodeKeyPair),\n/* harmony export */   mbEncodeKeyPair: () => (/* binding */ mbEncodeKeyPair)\n/* harmony export */ });\n/* harmony import */ var base58_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base58-universal */ \"(ssr)/./node_modules/base58-universal/lib/index.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js\");\n/*!\n * Copyright (c) 2020-2024 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\nfunction mbEncodeKeyPair({keyPair}) {\n  const result = {};\n  if(keyPair.publicKey) {\n    result.publicKeyMultibase = _encodeMbKey(\n      _constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTICODEC_PUB_HEADER, keyPair.publicKey);\n  }\n  if(keyPair.secretKey) {\n    result.secretKeyMultibase = _encodeMbKey(\n      _constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTICODEC_PRIV_HEADER, keyPair.secretKey);\n  }\n  return result;\n}\n\nfunction mbDecodeKeyPair({publicKeyMultibase, secretKeyMultibase}) {\n  if(!(publicKeyMultibase && typeof publicKeyMultibase === 'string' &&\n  publicKeyMultibase[0] === 'z')) {\n    throw new Error(\n      '\"publicKeyMultibase\" must be a multibase, base58-encoded string.');\n  }\n  // remove multibase header\n  const publicKeyMulticodec = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(publicKeyMultibase.substr(1));\n  // remove multicodec header\n  const publicKey = publicKeyMulticodec.slice(_constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTICODEC_PUB_HEADER.length);\n\n  let secretKey;\n  if(secretKeyMultibase) {\n    if(!(typeof secretKeyMultibase === 'string' &&\n    secretKeyMultibase[0] === 'z')) {\n      throw new Error(\n        '\"secretKeyMultibase\" must be a multibase, base58-encoded string.');\n    }\n    // remove multibase header\n    const secretKeyMulticodec = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(secretKeyMultibase.substr(1));\n    // remove multicodec header\n    secretKey = secretKeyMulticodec.slice(_constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTICODEC_PRIV_HEADER.length);\n  }\n\n  return {\n    publicKey,\n    secretKey\n  };\n}\n\n// encode a multibase base58-btc multicodec key\nfunction _encodeMbKey(header, key) {\n  const mbKey = new Uint8Array(header.length + key.length);\n\n  mbKey.set(header);\n  mbKey.set(key, header.length);\n\n  return _constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTIBASE_BASE58BTC_HEADER + base58_universal__WEBPACK_IMPORTED_MODULE_0__.encode(mbKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzhDO0FBS3RCOztBQUVqQiwwQkFBMEIsUUFBUTtBQUN6QztBQUNBO0FBQ0E7QUFDQSxNQUFNLGdFQUFxQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLGlFQUFzQjtBQUM1QjtBQUNBO0FBQ0E7O0FBRU8sMEJBQTBCLHVDQUF1QztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0RBQWdCO0FBQzlDO0FBQ0EsOENBQThDLGdFQUFxQjs7QUFFbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvREFBZ0I7QUFDaEQ7QUFDQSwwQ0FBMEMsaUVBQXNCO0FBQ2hFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsU0FBUyxxRUFBMEIsR0FBRyxvREFBZ0I7QUFDdEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvaGVscGVycy5qcz84N2FhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjQgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0ICogYXMgYmFzZTU4YnRjIGZyb20gJ2Jhc2U1OC11bml2ZXJzYWwnO1xuaW1wb3J0IHtcbiAgTVVMVElCQVNFX0JBU0U1OEJUQ19IRUFERVIsXG4gIE1VTFRJQ09ERUNfUFJJVl9IRUFERVIsXG4gIE1VTFRJQ09ERUNfUFVCX0hFQURFUlxufSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtYkVuY29kZUtleVBhaXIoe2tleVBhaXJ9KSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBpZihrZXlQYWlyLnB1YmxpY0tleSkge1xuICAgIHJlc3VsdC5wdWJsaWNLZXlNdWx0aWJhc2UgPSBfZW5jb2RlTWJLZXkoXG4gICAgICBNVUxUSUNPREVDX1BVQl9IRUFERVIsIGtleVBhaXIucHVibGljS2V5KTtcbiAgfVxuICBpZihrZXlQYWlyLnNlY3JldEtleSkge1xuICAgIHJlc3VsdC5zZWNyZXRLZXlNdWx0aWJhc2UgPSBfZW5jb2RlTWJLZXkoXG4gICAgICBNVUxUSUNPREVDX1BSSVZfSEVBREVSLCBrZXlQYWlyLnNlY3JldEtleSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1iRGVjb2RlS2V5UGFpcih7cHVibGljS2V5TXVsdGliYXNlLCBzZWNyZXRLZXlNdWx0aWJhc2V9KSB7XG4gIGlmKCEocHVibGljS2V5TXVsdGliYXNlICYmIHR5cGVvZiBwdWJsaWNLZXlNdWx0aWJhc2UgPT09ICdzdHJpbmcnICYmXG4gIHB1YmxpY0tleU11bHRpYmFzZVswXSA9PT0gJ3onKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdcInB1YmxpY0tleU11bHRpYmFzZVwiIG11c3QgYmUgYSBtdWx0aWJhc2UsIGJhc2U1OC1lbmNvZGVkIHN0cmluZy4nKTtcbiAgfVxuICAvLyByZW1vdmUgbXVsdGliYXNlIGhlYWRlclxuICBjb25zdCBwdWJsaWNLZXlNdWx0aWNvZGVjID0gYmFzZTU4YnRjLmRlY29kZShwdWJsaWNLZXlNdWx0aWJhc2Uuc3Vic3RyKDEpKTtcbiAgLy8gcmVtb3ZlIG11bHRpY29kZWMgaGVhZGVyXG4gIGNvbnN0IHB1YmxpY0tleSA9IHB1YmxpY0tleU11bHRpY29kZWMuc2xpY2UoTVVMVElDT0RFQ19QVUJfSEVBREVSLmxlbmd0aCk7XG5cbiAgbGV0IHNlY3JldEtleTtcbiAgaWYoc2VjcmV0S2V5TXVsdGliYXNlKSB7XG4gICAgaWYoISh0eXBlb2Ygc2VjcmV0S2V5TXVsdGliYXNlID09PSAnc3RyaW5nJyAmJlxuICAgIHNlY3JldEtleU11bHRpYmFzZVswXSA9PT0gJ3onKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnXCJzZWNyZXRLZXlNdWx0aWJhc2VcIiBtdXN0IGJlIGEgbXVsdGliYXNlLCBiYXNlNTgtZW5jb2RlZCBzdHJpbmcuJyk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSBtdWx0aWJhc2UgaGVhZGVyXG4gICAgY29uc3Qgc2VjcmV0S2V5TXVsdGljb2RlYyA9IGJhc2U1OGJ0Yy5kZWNvZGUoc2VjcmV0S2V5TXVsdGliYXNlLnN1YnN0cigxKSk7XG4gICAgLy8gcmVtb3ZlIG11bHRpY29kZWMgaGVhZGVyXG4gICAgc2VjcmV0S2V5ID0gc2VjcmV0S2V5TXVsdGljb2RlYy5zbGljZShNVUxUSUNPREVDX1BSSVZfSEVBREVSLmxlbmd0aCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHB1YmxpY0tleSxcbiAgICBzZWNyZXRLZXlcbiAgfTtcbn1cblxuLy8gZW5jb2RlIGEgbXVsdGliYXNlIGJhc2U1OC1idGMgbXVsdGljb2RlYyBrZXlcbmZ1bmN0aW9uIF9lbmNvZGVNYktleShoZWFkZXIsIGtleSkge1xuICBjb25zdCBtYktleSA9IG5ldyBVaW50OEFycmF5KGhlYWRlci5sZW5ndGggKyBrZXkubGVuZ3RoKTtcblxuICBtYktleS5zZXQoaGVhZGVyKTtcbiAgbWJLZXkuc2V0KGtleSwgaGVhZGVyLmxlbmd0aCk7XG5cbiAgcmV0dXJuIE1VTFRJQkFTRV9CQVNFNThCVENfSEVBREVSICsgYmFzZTU4YnRjLmVuY29kZShtYktleSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   from: () => (/* binding */ from),\n/* harmony export */   fromJwk: () => (/* binding */ fromJwk),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   toJwk: () => (/* binding */ toJwk)\n/* harmony export */ });\n/* harmony import */ var base64url_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base64url-universal */ \"(ssr)/./node_modules/base64url-universal/lib/index.js\");\n/* harmony import */ var _ed25519_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ed25519.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/ed25519.js\");\n/* harmony import */ var _factory_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./factory.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/factory.js\");\n/* harmony import */ var _serialize_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./serialize.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/serialize.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js\");\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/helpers.js\");\n/* harmony import */ var _keyPairTranslator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./keyPairTranslator.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslator.js\");\n/*!\n * Copyright (c) 2020-2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\n\n\n\n\nasync function generate({id, controller, seed} = {}) {\n  let key;\n  if(seed) {\n    key = await _ed25519_js__WEBPACK_IMPORTED_MODULE_1__.generateKeyPairFromSeed(seed);\n  } else {\n    key = await _ed25519_js__WEBPACK_IMPORTED_MODULE_1__.generateKeyPair();\n  }\n\n  const {publicKeyMultibase, secretKeyMultibase} = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_5__.mbEncodeKeyPair)({\n    keyPair: key\n  });\n  if(controller && !id) {\n    id = `${controller}#${publicKeyMultibase}`;\n  }\n  const keyPair = {\n    id,\n    controller,\n    publicKeyMultibase,\n    secretKeyMultibase,\n    ...key,\n  };\n  return _createKeyPairInterface({keyPair});\n}\n\n// import key pair from JSON Multikey\nasync function from(key) {\n  let multikey = {...key};\n  if(multikey.type !== 'Multikey') {\n    // attempt loading from JWK if `publicKeyJwk` is present\n    if(multikey.publicKeyJwk) {\n      let id;\n      let controller;\n      if(multikey.type === 'JsonWebKey' || multikey.type === 'JsonWebKey2020') {\n        ({id, controller} = multikey);\n      }\n      return fromJwk({\n        jwk: multikey.publicKeyJwk, secretKey: false, id, controller\n      });\n    }\n    if(multikey.type) {\n      multikey = await (0,_keyPairTranslator_js__WEBPACK_IMPORTED_MODULE_6__.toMultikey)({keyPair: multikey});\n      return _createKeyPairInterface({keyPair: multikey});\n    }\n  }\n  if(!multikey.type) {\n    multikey.type = 'Multikey';\n  }\n  if(!multikey['@context']) {\n    multikey['@context'] = _constants_js__WEBPACK_IMPORTED_MODULE_4__.MULTIKEY_CONTEXT_V1_URL;\n  }\n\n  _assertMultikey(multikey);\n  return _createKeyPairInterface({keyPair: multikey});\n}\n\n// imports key pair from JWK\nasync function fromJwk({jwk, secretKey = false, id, controller} = {}) {\n  const multikey = {\n    '@context': _constants_js__WEBPACK_IMPORTED_MODULE_4__.MULTIKEY_CONTEXT_V1_URL,\n    type: 'Multikey',\n    publicKeyMultibase: (0,_serialize_js__WEBPACK_IMPORTED_MODULE_3__.jwkToPublicKeyMultibase)({jwk})\n  };\n  if(typeof id === 'string') {\n    multikey.id = id;\n  }\n  if(typeof controller === 'string') {\n    multikey.controller = controller;\n  }\n  if(secretKey && jwk.d) {\n    multikey.secretKeyMultibase = (0,_serialize_js__WEBPACK_IMPORTED_MODULE_3__.jwkToSecretKeyMultibase)({jwk});\n  }\n  return from(multikey);\n}\n\n// converts key pair to JWK\nasync function toJwk({keyPair, secretKey = false} = {}) {\n  const jwk = {\n    kty: 'OKP',\n    crv: 'Ed25519',\n    x: base64url_universal__WEBPACK_IMPORTED_MODULE_0__.encode(keyPair.publicKey)\n  };\n  const useSecretKey = secretKey && !!keyPair.secretKey;\n  if(useSecretKey) {\n    jwk.d = base64url_universal__WEBPACK_IMPORTED_MODULE_0__.encode(keyPair.secretKey);\n  }\n  return jwk;\n}\n\nasync function _createKeyPairInterface({keyPair}) {\n  if(!keyPair.publicKey) {\n    keyPair = await (0,_serialize_js__WEBPACK_IMPORTED_MODULE_3__.importKeyPair)(keyPair);\n  }\n  keyPair = {\n    ...keyPair,\n    async export({\n      publicKey = true, secretKey = false, includeContext = true, raw = false,\n      canonicalize = false\n    } = {}) {\n      if(raw) {\n        const {publicKey, secretKey} = keyPair;\n        const result = {};\n        if(publicKey) {\n          result.publicKey = publicKey.slice();\n        }\n        if(secretKey) {\n          if(canonicalize && secretKey.length > _constants_js__WEBPACK_IMPORTED_MODULE_4__.SECRET_KEY_SIZE) {\n            result.secretKey = secretKey.subarray(0, _constants_js__WEBPACK_IMPORTED_MODULE_4__.SECRET_KEY_SIZE).slice();\n          } else {\n            result.secretKey = secretKey;\n          }\n        }\n        return result;\n      }\n      return (0,_serialize_js__WEBPACK_IMPORTED_MODULE_3__.exportKeyPair)({\n        keyPair, publicKey, secretKey, includeContext, canonicalize\n      });\n    },\n    signer() {\n      const {id, secretKey} = keyPair;\n      return (0,_factory_js__WEBPACK_IMPORTED_MODULE_2__.createSigner)({id, secretKey});\n    },\n    verifier() {\n      const {id, publicKey} = keyPair;\n      return (0,_factory_js__WEBPACK_IMPORTED_MODULE_2__.createVerifier)({id, publicKey});\n    }\n  };\n\n  return keyPair;\n}\n\nfunction _assertMultikey(key) {\n  if(!(key && typeof key === 'object')) {\n    throw new TypeError('\"key\" must be an object.');\n  }\n  if(key.type !== 'Multikey') {\n    throw new Error('\"key\" must be a Multikey with type \"Multikey\".');\n  }\n  if(!(key['@context'] === _constants_js__WEBPACK_IMPORTED_MODULE_4__.MULTIKEY_CONTEXT_V1_URL ||\n    (Array.isArray(key['@context']) &&\n    key['@context'].includes(_constants_js__WEBPACK_IMPORTED_MODULE_4__.MULTIKEY_CONTEXT_V1_URL)))) {\n    throw new TypeError(\n      '\"key\" must be a Multikey with context ' +\n      `\"${_constants_js__WEBPACK_IMPORTED_MODULE_4__.MULTIKEY_CONTEXT_V1_URL}\".`);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDaUQ7QUFDVDtBQUNrQjtBQUtsQztBQUNnRDtBQUMzQjtBQUNLOztBQUUzQyx5QkFBeUIsc0JBQXNCLElBQUk7QUFDMUQ7QUFDQTtBQUNBLGdCQUFnQixnRUFBK0I7QUFDL0MsSUFBSTtBQUNKLGdCQUFnQix3REFBdUI7QUFDdkM7O0FBRUEsU0FBUyx3Q0FBd0MsRUFBRSw0REFBZTtBQUNsRTtBQUNBLEdBQUc7QUFDSDtBQUNBLFlBQVksV0FBVyxHQUFHLG1CQUFtQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7O0FBRUE7QUFDTztBQUNQLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLHVCQUF1QixpRUFBVSxFQUFFLGtCQUFrQjtBQUNyRCxzQ0FBc0Msa0JBQWtCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrRUFBdUI7QUFDbEQ7O0FBRUE7QUFDQSxrQ0FBa0Msa0JBQWtCO0FBQ3BEOztBQUVBO0FBQ08sd0JBQXdCLHdDQUF3QyxJQUFJO0FBQzNFO0FBQ0EsZ0JBQWdCLGtFQUF1QjtBQUN2QztBQUNBLHdCQUF3QixzRUFBdUIsRUFBRSxJQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0VBQXVCLEVBQUUsSUFBSTtBQUMvRDtBQUNBO0FBQ0E7O0FBRUE7QUFDTyxzQkFBc0IsNEJBQTRCLElBQUk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsT0FBTyx1REFBZ0I7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1REFBZ0I7QUFDNUI7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxRQUFRO0FBQ2hEO0FBQ0Esb0JBQW9CLDREQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBSTtBQUNWO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwwREFBZTtBQUMvRCxxREFBcUQsMERBQWU7QUFDcEUsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLDREQUFhO0FBQzFCO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGFBQWEsZUFBZTtBQUM1QixhQUFhLHlEQUFZLEVBQUUsY0FBYztBQUN6QyxLQUFLO0FBQ0w7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSwyREFBYyxFQUFFLGNBQWM7QUFDM0M7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtFQUF1QjtBQUNsRDtBQUNBLDZCQUE2QixrRUFBdUI7QUFDcEQ7QUFDQTtBQUNBLFVBQVUsa0VBQXVCLENBQUM7QUFDbEM7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LW11bHRpa2V5L2xpYi9pbmRleC5qcz9kMzVkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjMgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0ICogYXMgYmFzZTY0dXJsIGZyb20gJ2Jhc2U2NHVybC11bml2ZXJzYWwnO1xuaW1wb3J0ICogYXMgZWQyNTUxOSBmcm9tICcuL2VkMjU1MTkuanMnO1xuaW1wb3J0IHtjcmVhdGVTaWduZXIsIGNyZWF0ZVZlcmlmaWVyfSBmcm9tICcuL2ZhY3RvcnkuanMnO1xuaW1wb3J0IHtcbiAgZXhwb3J0S2V5UGFpciwgaW1wb3J0S2V5UGFpcixcbiAgandrVG9QdWJsaWNLZXlNdWx0aWJhc2UsXG4gIGp3a1RvU2VjcmV0S2V5TXVsdGliYXNlXG59IGZyb20gJy4vc2VyaWFsaXplLmpzJztcbmltcG9ydCB7TVVMVElLRVlfQ09OVEVYVF9WMV9VUkwsIFNFQ1JFVF9LRVlfU0laRX0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHttYkVuY29kZUtleVBhaXJ9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQge3RvTXVsdGlrZXl9IGZyb20gJy4va2V5UGFpclRyYW5zbGF0b3IuanMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoe2lkLCBjb250cm9sbGVyLCBzZWVkfSA9IHt9KSB7XG4gIGxldCBrZXk7XG4gIGlmKHNlZWQpIHtcbiAgICBrZXkgPSBhd2FpdCBlZDI1NTE5LmdlbmVyYXRlS2V5UGFpckZyb21TZWVkKHNlZWQpO1xuICB9IGVsc2Uge1xuICAgIGtleSA9IGF3YWl0IGVkMjU1MTkuZ2VuZXJhdGVLZXlQYWlyKCk7XG4gIH1cblxuICBjb25zdCB7cHVibGljS2V5TXVsdGliYXNlLCBzZWNyZXRLZXlNdWx0aWJhc2V9ID0gbWJFbmNvZGVLZXlQYWlyKHtcbiAgICBrZXlQYWlyOiBrZXlcbiAgfSk7XG4gIGlmKGNvbnRyb2xsZXIgJiYgIWlkKSB7XG4gICAgaWQgPSBgJHtjb250cm9sbGVyfSMke3B1YmxpY0tleU11bHRpYmFzZX1gO1xuICB9XG4gIGNvbnN0IGtleVBhaXIgPSB7XG4gICAgaWQsXG4gICAgY29udHJvbGxlcixcbiAgICBwdWJsaWNLZXlNdWx0aWJhc2UsXG4gICAgc2VjcmV0S2V5TXVsdGliYXNlLFxuICAgIC4uLmtleSxcbiAgfTtcbiAgcmV0dXJuIF9jcmVhdGVLZXlQYWlySW50ZXJmYWNlKHtrZXlQYWlyfSk7XG59XG5cbi8vIGltcG9ydCBrZXkgcGFpciBmcm9tIEpTT04gTXVsdGlrZXlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmcm9tKGtleSkge1xuICBsZXQgbXVsdGlrZXkgPSB7Li4ua2V5fTtcbiAgaWYobXVsdGlrZXkudHlwZSAhPT0gJ011bHRpa2V5Jykge1xuICAgIC8vIGF0dGVtcHQgbG9hZGluZyBmcm9tIEpXSyBpZiBgcHVibGljS2V5SndrYCBpcyBwcmVzZW50XG4gICAgaWYobXVsdGlrZXkucHVibGljS2V5SndrKSB7XG4gICAgICBsZXQgaWQ7XG4gICAgICBsZXQgY29udHJvbGxlcjtcbiAgICAgIGlmKG11bHRpa2V5LnR5cGUgPT09ICdKc29uV2ViS2V5JyB8fCBtdWx0aWtleS50eXBlID09PSAnSnNvbldlYktleTIwMjAnKSB7XG4gICAgICAgICh7aWQsIGNvbnRyb2xsZXJ9ID0gbXVsdGlrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZyb21Kd2soe1xuICAgICAgICBqd2s6IG11bHRpa2V5LnB1YmxpY0tleUp3aywgc2VjcmV0S2V5OiBmYWxzZSwgaWQsIGNvbnRyb2xsZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZihtdWx0aWtleS50eXBlKSB7XG4gICAgICBtdWx0aWtleSA9IGF3YWl0IHRvTXVsdGlrZXkoe2tleVBhaXI6IG11bHRpa2V5fSk7XG4gICAgICByZXR1cm4gX2NyZWF0ZUtleVBhaXJJbnRlcmZhY2Uoe2tleVBhaXI6IG11bHRpa2V5fSk7XG4gICAgfVxuICB9XG4gIGlmKCFtdWx0aWtleS50eXBlKSB7XG4gICAgbXVsdGlrZXkudHlwZSA9ICdNdWx0aWtleSc7XG4gIH1cbiAgaWYoIW11bHRpa2V5WydAY29udGV4dCddKSB7XG4gICAgbXVsdGlrZXlbJ0Bjb250ZXh0J10gPSBNVUxUSUtFWV9DT05URVhUX1YxX1VSTDtcbiAgfVxuXG4gIF9hc3NlcnRNdWx0aWtleShtdWx0aWtleSk7XG4gIHJldHVybiBfY3JlYXRlS2V5UGFpckludGVyZmFjZSh7a2V5UGFpcjogbXVsdGlrZXl9KTtcbn1cblxuLy8gaW1wb3J0cyBrZXkgcGFpciBmcm9tIEpXS1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZyb21Kd2soe2p3aywgc2VjcmV0S2V5ID0gZmFsc2UsIGlkLCBjb250cm9sbGVyfSA9IHt9KSB7XG4gIGNvbnN0IG11bHRpa2V5ID0ge1xuICAgICdAY29udGV4dCc6IE1VTFRJS0VZX0NPTlRFWFRfVjFfVVJMLFxuICAgIHR5cGU6ICdNdWx0aWtleScsXG4gICAgcHVibGljS2V5TXVsdGliYXNlOiBqd2tUb1B1YmxpY0tleU11bHRpYmFzZSh7andrfSlcbiAgfTtcbiAgaWYodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuICAgIG11bHRpa2V5LmlkID0gaWQ7XG4gIH1cbiAgaWYodHlwZW9mIGNvbnRyb2xsZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgbXVsdGlrZXkuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gIH1cbiAgaWYoc2VjcmV0S2V5ICYmIGp3ay5kKSB7XG4gICAgbXVsdGlrZXkuc2VjcmV0S2V5TXVsdGliYXNlID0gandrVG9TZWNyZXRLZXlNdWx0aWJhc2Uoe2p3a30pO1xuICB9XG4gIHJldHVybiBmcm9tKG11bHRpa2V5KTtcbn1cblxuLy8gY29udmVydHMga2V5IHBhaXIgdG8gSldLXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9Kd2soe2tleVBhaXIsIHNlY3JldEtleSA9IGZhbHNlfSA9IHt9KSB7XG4gIGNvbnN0IGp3ayA9IHtcbiAgICBrdHk6ICdPS1AnLFxuICAgIGNydjogJ0VkMjU1MTknLFxuICAgIHg6IGJhc2U2NHVybC5lbmNvZGUoa2V5UGFpci5wdWJsaWNLZXkpXG4gIH07XG4gIGNvbnN0IHVzZVNlY3JldEtleSA9IHNlY3JldEtleSAmJiAhIWtleVBhaXIuc2VjcmV0S2V5O1xuICBpZih1c2VTZWNyZXRLZXkpIHtcbiAgICBqd2suZCA9IGJhc2U2NHVybC5lbmNvZGUoa2V5UGFpci5zZWNyZXRLZXkpO1xuICB9XG4gIHJldHVybiBqd2s7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9jcmVhdGVLZXlQYWlySW50ZXJmYWNlKHtrZXlQYWlyfSkge1xuICBpZigha2V5UGFpci5wdWJsaWNLZXkpIHtcbiAgICBrZXlQYWlyID0gYXdhaXQgaW1wb3J0S2V5UGFpcihrZXlQYWlyKTtcbiAgfVxuICBrZXlQYWlyID0ge1xuICAgIC4uLmtleVBhaXIsXG4gICAgYXN5bmMgZXhwb3J0KHtcbiAgICAgIHB1YmxpY0tleSA9IHRydWUsIHNlY3JldEtleSA9IGZhbHNlLCBpbmNsdWRlQ29udGV4dCA9IHRydWUsIHJhdyA9IGZhbHNlLFxuICAgICAgY2Fub25pY2FsaXplID0gZmFsc2VcbiAgICB9ID0ge30pIHtcbiAgICAgIGlmKHJhdykge1xuICAgICAgICBjb25zdCB7cHVibGljS2V5LCBzZWNyZXRLZXl9ID0ga2V5UGFpcjtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGlmKHB1YmxpY0tleSkge1xuICAgICAgICAgIHJlc3VsdC5wdWJsaWNLZXkgPSBwdWJsaWNLZXkuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZihzZWNyZXRLZXkpIHtcbiAgICAgICAgICBpZihjYW5vbmljYWxpemUgJiYgc2VjcmV0S2V5Lmxlbmd0aCA+IFNFQ1JFVF9LRVlfU0laRSkge1xuICAgICAgICAgICAgcmVzdWx0LnNlY3JldEtleSA9IHNlY3JldEtleS5zdWJhcnJheSgwLCBTRUNSRVRfS0VZX1NJWkUpLnNsaWNlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdC5zZWNyZXRLZXkgPSBzZWNyZXRLZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXhwb3J0S2V5UGFpcih7XG4gICAgICAgIGtleVBhaXIsIHB1YmxpY0tleSwgc2VjcmV0S2V5LCBpbmNsdWRlQ29udGV4dCwgY2Fub25pY2FsaXplXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHNpZ25lcigpIHtcbiAgICAgIGNvbnN0IHtpZCwgc2VjcmV0S2V5fSA9IGtleVBhaXI7XG4gICAgICByZXR1cm4gY3JlYXRlU2lnbmVyKHtpZCwgc2VjcmV0S2V5fSk7XG4gICAgfSxcbiAgICB2ZXJpZmllcigpIHtcbiAgICAgIGNvbnN0IHtpZCwgcHVibGljS2V5fSA9IGtleVBhaXI7XG4gICAgICByZXR1cm4gY3JlYXRlVmVyaWZpZXIoe2lkLCBwdWJsaWNLZXl9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGtleVBhaXI7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRNdWx0aWtleShrZXkpIHtcbiAgaWYoIShrZXkgJiYgdHlwZW9mIGtleSA9PT0gJ29iamVjdCcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJrZXlcIiBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgfVxuICBpZihrZXkudHlwZSAhPT0gJ011bHRpa2V5Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignXCJrZXlcIiBtdXN0IGJlIGEgTXVsdGlrZXkgd2l0aCB0eXBlIFwiTXVsdGlrZXlcIi4nKTtcbiAgfVxuICBpZighKGtleVsnQGNvbnRleHQnXSA9PT0gTVVMVElLRVlfQ09OVEVYVF9WMV9VUkwgfHxcbiAgICAoQXJyYXkuaXNBcnJheShrZXlbJ0Bjb250ZXh0J10pICYmXG4gICAga2V5WydAY29udGV4dCddLmluY2x1ZGVzKE1VTFRJS0VZX0NPTlRFWFRfVjFfVVJMKSkpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdcImtleVwiIG11c3QgYmUgYSBNdWx0aWtleSB3aXRoIGNvbnRleHQgJyArXG4gICAgICBgXCIke01VTFRJS0VZX0NPTlRFWFRfVjFfVVJMfVwiLmApO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslationMap.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslationMap.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyPairTranslationMap: () => (/* binding */ keyPairTranslationMap)\n/* harmony export */ });\n/* harmony import */ var base58_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base58-universal */ \"(ssr)/./node_modules/base58-universal/lib/index.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js\");\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/helpers.js\");\n/*!\n * Copyright (c) 2022-2024 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst keyPairTranslationMap = new Map([\n  ['Ed25519VerificationKey2020', {\n    contextUrl: _constants_js__WEBPACK_IMPORTED_MODULE_1__.ED25519_SIGNATURE_2020_V1_URL,\n    translationFn: _translateEd25519VerificationKey2020\n  }],\n  ['Ed25519VerificationKey2018', {\n    contextUrl: _constants_js__WEBPACK_IMPORTED_MODULE_1__.ED25519_SIGNATURE_2018_V1_URL,\n    translationFn: _translateEd25519VerificationKey2018\n  }]\n]);\n\nasync function _translateEd25519VerificationKey2020({keyPair}) {\n  return {\n    ...keyPair,\n    type: 'Multikey',\n    '@context': _constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTIKEY_CONTEXT_V1_URL,\n    secretKeyMultibase: keyPair.privateKeyMultibase\n  };\n}\n\nasync function _translateEd25519VerificationKey2018({keyPair}) {\n  const key = {\n    publicKey: base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(keyPair.publicKeyBase58),\n    secretKey: undefined\n  };\n\n  if(keyPair.privateKeyBase58) {\n    key.secretKey = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(keyPair.privateKeyBase58);\n  }\n\n  const {publicKeyMultibase, secretKeyMultibase} = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_2__.mbEncodeKeyPair)({\n    keyPair: key\n  });\n\n  return {\n    '@context': _constants_js__WEBPACK_IMPORTED_MODULE_1__.MULTIKEY_CONTEXT_V1_URL,\n    id: keyPair.id,\n    type: 'Multikey',\n    controller: keyPair.controller,\n    revoked: keyPair.revoked,\n    publicKeyMultibase,\n    secretKeyMultibase,\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIva2V5UGFpclRyYW5zbGF0aW9uTWFwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDOEM7QUFLdEI7QUFDcUI7O0FBRTdDO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQTZCO0FBQzdDO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCLHdFQUE2QjtBQUM3QztBQUNBLEdBQUc7QUFDSDs7QUFFQSxxREFBcUQsUUFBUTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0VBQXVCO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQSxxREFBcUQsUUFBUTtBQUM3RDtBQUNBLGVBQWUsb0RBQWdCO0FBQy9CO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0Isb0RBQWdCO0FBQ3BDOztBQUVBLFNBQVMsd0NBQXdDLEVBQUUsNERBQWU7QUFDbEU7QUFDQSxHQUFHOztBQUVIO0FBQ0EsZ0JBQWdCLGtFQUF1QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUUrQiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LW11bHRpa2V5L2xpYi9rZXlQYWlyVHJhbnNsYXRpb25NYXAuanM/MDQ1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMi0yMDI0IERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmltcG9ydCAqIGFzIGJhc2U1OGJ0YyBmcm9tICdiYXNlNTgtdW5pdmVyc2FsJztcbmltcG9ydCB7XG4gIEVEMjU1MTlfU0lHTkFUVVJFXzIwMThfVjFfVVJMLFxuICBFRDI1NTE5X1NJR05BVFVSRV8yMDIwX1YxX1VSTCxcbiAgTVVMVElLRVlfQ09OVEVYVF9WMV9VUkxcbn0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuaW1wb3J0IHttYkVuY29kZUtleVBhaXJ9IGZyb20gJy4vaGVscGVycy5qcyc7XG5cbmNvbnN0IGtleVBhaXJUcmFuc2xhdGlvbk1hcCA9IG5ldyBNYXAoW1xuICBbJ0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwJywge1xuICAgIGNvbnRleHRVcmw6IEVEMjU1MTlfU0lHTkFUVVJFXzIwMjBfVjFfVVJMLFxuICAgIHRyYW5zbGF0aW9uRm46IF90cmFuc2xhdGVFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMFxuICB9XSxcbiAgWydFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCcsIHtcbiAgICBjb250ZXh0VXJsOiBFRDI1NTE5X1NJR05BVFVSRV8yMDE4X1YxX1VSTCxcbiAgICB0cmFuc2xhdGlvbkZuOiBfdHJhbnNsYXRlRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMThcbiAgfV1cbl0pO1xuXG5hc3luYyBmdW5jdGlvbiBfdHJhbnNsYXRlRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAoe2tleVBhaXJ9KSB7XG4gIHJldHVybiB7XG4gICAgLi4ua2V5UGFpcixcbiAgICB0eXBlOiAnTXVsdGlrZXknLFxuICAgICdAY29udGV4dCc6IE1VTFRJS0VZX0NPTlRFWFRfVjFfVVJMLFxuICAgIHNlY3JldEtleU11bHRpYmFzZToga2V5UGFpci5wcml2YXRlS2V5TXVsdGliYXNlXG4gIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF90cmFuc2xhdGVFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCh7a2V5UGFpcn0pIHtcbiAgY29uc3Qga2V5ID0ge1xuICAgIHB1YmxpY0tleTogYmFzZTU4YnRjLmRlY29kZShrZXlQYWlyLnB1YmxpY0tleUJhc2U1OCksXG4gICAgc2VjcmV0S2V5OiB1bmRlZmluZWRcbiAgfTtcblxuICBpZihrZXlQYWlyLnByaXZhdGVLZXlCYXNlNTgpIHtcbiAgICBrZXkuc2VjcmV0S2V5ID0gYmFzZTU4YnRjLmRlY29kZShrZXlQYWlyLnByaXZhdGVLZXlCYXNlNTgpO1xuICB9XG5cbiAgY29uc3Qge3B1YmxpY0tleU11bHRpYmFzZSwgc2VjcmV0S2V5TXVsdGliYXNlfSA9IG1iRW5jb2RlS2V5UGFpcih7XG4gICAga2V5UGFpcjoga2V5XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgJ0Bjb250ZXh0JzogTVVMVElLRVlfQ09OVEVYVF9WMV9VUkwsXG4gICAgaWQ6IGtleVBhaXIuaWQsXG4gICAgdHlwZTogJ011bHRpa2V5JyxcbiAgICBjb250cm9sbGVyOiBrZXlQYWlyLmNvbnRyb2xsZXIsXG4gICAgcmV2b2tlZDoga2V5UGFpci5yZXZva2VkLFxuICAgIHB1YmxpY0tleU11bHRpYmFzZSxcbiAgICBzZWNyZXRLZXlNdWx0aWJhc2UsXG4gIH07XG59XG5cbmV4cG9ydCB7a2V5UGFpclRyYW5zbGF0aW9uTWFwfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslationMap.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslator.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslator.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toMultikey: () => (/* binding */ toMultikey)\n/* harmony export */ });\n/* harmony import */ var _keyPairTranslationMap_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keyPairTranslationMap.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslationMap.js\");\n/*!\n * Copyright (c) 2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\nasync function toMultikey({keyPair}) {\n  const translationResult = _keyPairTranslationMap_js__WEBPACK_IMPORTED_MODULE_0__.keyPairTranslationMap.get(keyPair.type);\n  if(!translationResult) {\n    throw new Error(`Unsupported key type \"${keyPair.type}\".`);\n  }\n\n  const {contextUrl, translationFn} = translationResult;\n  if(!keyPair['@context']) {\n    keyPair['@context'] = contextUrl;\n  }\n  if(!_includesContext({document: keyPair, contextUrl})) {\n    throw new Error(`Context not supported \"${keyPair['@context']}\".`);\n  }\n\n  return translationFn({keyPair});\n}\n\nfunction _includesContext({document, contextUrl}) {\n  const context = document['@context'];\n  return context === contextUrl ||\n    (Array.isArray(context) && context.includes(contextUrl));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIva2V5UGFpclRyYW5zbGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDaUU7O0FBRTFELDJCQUEyQixRQUFRO0FBQzFDLDRCQUE0Qiw0RUFBcUI7QUFDakQ7QUFDQSw2Q0FBNkMsYUFBYTtBQUMxRDs7QUFFQSxTQUFTLDJCQUEyQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOEJBQThCO0FBQ3RELDhDQUE4QyxvQkFBb0I7QUFDbEU7O0FBRUEsd0JBQXdCLFFBQVE7QUFDaEM7O0FBRUEsMkJBQTJCLHFCQUFxQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LW11bHRpa2V5L2xpYi9rZXlQYWlyVHJhbnNsYXRvci5qcz8wMWMzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIyIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmltcG9ydCB7a2V5UGFpclRyYW5zbGF0aW9uTWFwfSBmcm9tICcuL2tleVBhaXJUcmFuc2xhdGlvbk1hcC5qcyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b011bHRpa2V5KHtrZXlQYWlyfSkge1xuICBjb25zdCB0cmFuc2xhdGlvblJlc3VsdCA9IGtleVBhaXJUcmFuc2xhdGlvbk1hcC5nZXQoa2V5UGFpci50eXBlKTtcbiAgaWYoIXRyYW5zbGF0aW9uUmVzdWx0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBrZXkgdHlwZSBcIiR7a2V5UGFpci50eXBlfVwiLmApO1xuICB9XG5cbiAgY29uc3Qge2NvbnRleHRVcmwsIHRyYW5zbGF0aW9uRm59ID0gdHJhbnNsYXRpb25SZXN1bHQ7XG4gIGlmKCFrZXlQYWlyWydAY29udGV4dCddKSB7XG4gICAga2V5UGFpclsnQGNvbnRleHQnXSA9IGNvbnRleHRVcmw7XG4gIH1cbiAgaWYoIV9pbmNsdWRlc0NvbnRleHQoe2RvY3VtZW50OiBrZXlQYWlyLCBjb250ZXh0VXJsfSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbnRleHQgbm90IHN1cHBvcnRlZCBcIiR7a2V5UGFpclsnQGNvbnRleHQnXX1cIi5gKTtcbiAgfVxuXG4gIHJldHVybiB0cmFuc2xhdGlvbkZuKHtrZXlQYWlyfSk7XG59XG5cbmZ1bmN0aW9uIF9pbmNsdWRlc0NvbnRleHQoe2RvY3VtZW50LCBjb250ZXh0VXJsfSkge1xuICBjb25zdCBjb250ZXh0ID0gZG9jdW1lbnRbJ0Bjb250ZXh0J107XG4gIHJldHVybiBjb250ZXh0ID09PSBjb250ZXh0VXJsIHx8XG4gICAgKEFycmF5LmlzQXJyYXkoY29udGV4dCkgJiYgY29udGV4dC5pbmNsdWRlcyhjb250ZXh0VXJsKSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/keyPairTranslator.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/serialize.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/serialize.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exportKeyPair: () => (/* binding */ exportKeyPair),\n/* harmony export */   importKeyPair: () => (/* binding */ importKeyPair),\n/* harmony export */   jwkToPublicKeyBytes: () => (/* binding */ jwkToPublicKeyBytes),\n/* harmony export */   jwkToPublicKeyMultibase: () => (/* binding */ jwkToPublicKeyMultibase),\n/* harmony export */   jwkToSecretKeyBytes: () => (/* binding */ jwkToSecretKeyBytes),\n/* harmony export */   jwkToSecretKeyMultibase: () => (/* binding */ jwkToSecretKeyMultibase),\n/* harmony export */   rawToPublicKeyMultibase: () => (/* binding */ rawToPublicKeyMultibase),\n/* harmony export */   rawToSecretKeyMultibase: () => (/* binding */ rawToSecretKeyMultibase)\n/* harmony export */ });\n/* harmony import */ var base64url_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base64url-universal */ \"(ssr)/./node_modules/base64url-universal/lib/index.js\");\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./helpers.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/helpers.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/constants.js\");\n/*!\n * Copyright (c) 2022-2024 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst LEGACY_SECRET_KEY_SIZE = _constants_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_KEY_SIZE + _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUBLIC_KEY_SIZE;\n\nasync function exportKeyPair({\n  keyPair, secretKey, publicKey, includeContext, canonicalize = false\n} = {}) {\n  if(!(publicKey || secretKey)) {\n    throw new TypeError(\n      'Export requires specifying either \"publicKey\" or \"secretKey\".');\n  }\n\n  const useSecretKey = secretKey && !!keyPair.secretKey;\n\n  // export as Multikey\n  const exported = {};\n  if(includeContext) {\n    exported['@context'] = _constants_js__WEBPACK_IMPORTED_MODULE_2__.MULTIKEY_CONTEXT_V1_URL;\n  }\n  exported.id = keyPair.id;\n  exported.type = 'Multikey';\n  exported.controller = keyPair.controller;\n\n  if(publicKey) {\n    exported.publicKeyMultibase = rawToPublicKeyMultibase(keyPair);\n  }\n  if(useSecretKey) {\n    exported.secretKeyMultibase = rawToSecretKeyMultibase({\n      ...keyPair, canonicalize\n    });\n  }\n\n  if(keyPair.revoked) {\n    exported.revoked = keyPair.revoked;\n  }\n\n  return exported;\n}\n\nasync function importKeyPair({\n  id, controller, secretKeyMultibase, publicKeyMultibase, revoked\n}) {\n  if(!publicKeyMultibase) {\n    throw new TypeError('The \"publicKeyMultibase\" property is required.');\n  }\n\n  const {\n    publicKey, secretKey\n  } = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.mbDecodeKeyPair)({publicKeyMultibase, secretKeyMultibase});\n\n  if(controller && !id) {\n    id = `${controller}#${publicKeyMultibase}`;\n  }\n\n  return {\n    id,\n    controller,\n    publicKey,\n    secretKey,\n    publicKeyMultibase,\n    secretKeyMultibase,\n    revoked,\n  };\n}\n\nfunction jwkToPublicKeyBytes({jwk} = {}) {\n  const {kty, crv, x} = jwk;\n  if(kty !== 'OKP') {\n    throw new TypeError('\"jwk.kty\" must be \"OKP\".');\n  }\n  if(crv !== 'Ed25519') {\n    throw new TypeError('\"jwk.crv\" must be \"Ed25519\".');\n  }\n  if(typeof x !== 'string') {\n    throw new TypeError('\"jwk.x\" must be a string.');\n  }\n  const publicKey = base64url_universal__WEBPACK_IMPORTED_MODULE_0__.decode(jwk.x);\n  if(publicKey.length !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUBLIC_KEY_SIZE) {\n    throw new Error(\n      `Invalid public key size (${publicKey.length}); ` +\n      `expected ${_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUBLIC_KEY_SIZE}.`);\n  }\n  return publicKey;\n}\n\nfunction jwkToPublicKeyMultibase({jwk} = {}) {\n  const publicKey = jwkToPublicKeyBytes({jwk});\n  const {publicKeyMultibase} = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.mbEncodeKeyPair)({\n    keyPair: {publicKey}\n  });\n  return publicKeyMultibase;\n}\n\nfunction jwkToSecretKeyBytes({jwk} = {}) {\n  const {kty, crv, d} = jwk;\n  if(kty !== 'OKP') {\n    throw new TypeError('\"jwk.kty\" must be \"OKP\".');\n  }\n  if(crv !== 'Ed25519') {\n    throw new TypeError('\"jwk.crv\" must be \"Ed25519\".');\n  }\n  if(typeof d !== 'string') {\n    throw new TypeError('\"jwk.d\" must be a string.');\n  }\n  const secretKey = Uint8Array.from(base64url_universal__WEBPACK_IMPORTED_MODULE_0__.decode(jwk.d));\n  if(secretKey.length !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_KEY_SIZE) {\n    throw new Error(\n      `Invalid secret key size (${secretKey.length}); ` +\n      `expected ${_constants_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_KEY_SIZE}.`);\n  }\n  return secretKey;\n}\n\nfunction jwkToSecretKeyMultibase({jwk} = {}) {\n  const secretKey = jwkToSecretKeyBytes({jwk});\n  const {secretKeyMultibase} = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.mbEncodeKeyPair)({\n    keyPair: {secretKey}\n  });\n  return secretKeyMultibase;\n}\n\nfunction rawToPublicKeyMultibase({publicKey} = {}) {\n  if(publicKey.length !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.PUBLIC_KEY_SIZE) {\n    throw new Error(\n      `Invalid public key size (${publicKey.length}); ` +\n      `expected ${_constants_js__WEBPACK_IMPORTED_MODULE_2__.PUBLIC_KEY_SIZE}.`);\n  }\n  const {publicKeyMultibase} = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.mbEncodeKeyPair)({\n    keyPair: {publicKey}\n  });\n  return publicKeyMultibase;\n}\n\nfunction rawToSecretKeyMultibase({\n  secretKey, canonicalize = false\n} = {}) {\n  if(secretKey.length !== _constants_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_KEY_SIZE) {\n    if(secretKey.length !== LEGACY_SECRET_KEY_SIZE) {\n      throw new Error(\n        `Invalid secret key size (${secretKey.length}); ` +\n        `expected ${_constants_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_KEY_SIZE}.`);\n    }\n    // handle legacy concatenated (secret key + public key)\n    if(canonicalize) {\n      secretKey = secretKey.subarray(0, _constants_js__WEBPACK_IMPORTED_MODULE_2__.SECRET_KEY_SIZE);\n    }\n  }\n  const {secretKeyMultibase} = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_1__.mbEncodeKeyPair)({\n    keyPair: {secretKey}\n  });\n  return secretKeyMultibase;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvc2VyaWFsaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ2lEO0FBQ2E7QUFLdEM7O0FBRXhCLCtCQUErQiwwREFBZSxHQUFHLDBEQUFlOztBQUV6RDtBQUNQO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtFQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRU87QUFDUDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUksRUFBRSw0REFBZSxFQUFFLHVDQUF1Qzs7QUFFOUQ7QUFDQSxZQUFZLFdBQVcsR0FBRyxtQkFBbUI7QUFDN0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU8sOEJBQThCLEtBQUssSUFBSTtBQUM5QyxTQUFTLGFBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVEQUFnQjtBQUNwQywwQkFBMEIsMERBQWU7QUFDekM7QUFDQSxrQ0FBa0MsaUJBQWlCLEdBQUc7QUFDdEQsa0JBQWtCLDBEQUFlLENBQUM7QUFDbEM7QUFDQTtBQUNBOztBQUVPLGtDQUFrQyxLQUFLLElBQUk7QUFDbEQseUNBQXlDLElBQUk7QUFDN0MsU0FBUyxvQkFBb0IsRUFBRSw0REFBZTtBQUM5QyxjQUFjO0FBQ2QsR0FBRztBQUNIO0FBQ0E7O0FBRU8sOEJBQThCLEtBQUssSUFBSTtBQUM5QyxTQUFTLGFBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHVEQUFnQjtBQUNwRCwwQkFBMEIsMERBQWU7QUFDekM7QUFDQSxrQ0FBa0MsaUJBQWlCLEdBQUc7QUFDdEQsa0JBQWtCLDBEQUFlLENBQUM7QUFDbEM7QUFDQTtBQUNBOztBQUVPLGtDQUFrQyxLQUFLLElBQUk7QUFDbEQseUNBQXlDLElBQUk7QUFDN0MsU0FBUyxvQkFBb0IsRUFBRSw0REFBZTtBQUM5QyxjQUFjO0FBQ2QsR0FBRztBQUNIO0FBQ0E7O0FBRU8sa0NBQWtDLFdBQVcsSUFBSTtBQUN4RCwwQkFBMEIsMERBQWU7QUFDekM7QUFDQSxrQ0FBa0MsaUJBQWlCLEdBQUc7QUFDdEQsa0JBQWtCLDBEQUFlLENBQUM7QUFDbEM7QUFDQSxTQUFTLG9CQUFvQixFQUFFLDREQUFlO0FBQzlDLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTs7QUFFTztBQUNQO0FBQ0EsRUFBRSxJQUFJO0FBQ04sMEJBQTBCLDBEQUFlO0FBQ3pDO0FBQ0E7QUFDQSxvQ0FBb0MsaUJBQWlCLEdBQUc7QUFDeEQsb0JBQW9CLDBEQUFlLENBQUM7QUFDcEM7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBEQUFlO0FBQ3ZEO0FBQ0E7QUFDQSxTQUFTLG9CQUFvQixFQUFFLDREQUFlO0FBQzlDLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LW11bHRpa2V5L2xpYi9zZXJpYWxpemUuanM/ZjcxMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMi0yMDI0IERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmltcG9ydCAqIGFzIGJhc2U2NHVybCBmcm9tICdiYXNlNjR1cmwtdW5pdmVyc2FsJztcbmltcG9ydCB7bWJEZWNvZGVLZXlQYWlyLCBtYkVuY29kZUtleVBhaXJ9IGZyb20gJy4vaGVscGVycy5qcyc7XG5pbXBvcnQge1xuICBNVUxUSUtFWV9DT05URVhUX1YxX1VSTCxcbiAgUFVCTElDX0tFWV9TSVpFLFxuICBTRUNSRVRfS0VZX1NJWkVcbn0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5jb25zdCBMRUdBQ1lfU0VDUkVUX0tFWV9TSVpFID0gU0VDUkVUX0tFWV9TSVpFICsgUFVCTElDX0tFWV9TSVpFO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhwb3J0S2V5UGFpcih7XG4gIGtleVBhaXIsIHNlY3JldEtleSwgcHVibGljS2V5LCBpbmNsdWRlQ29udGV4dCwgY2Fub25pY2FsaXplID0gZmFsc2Vcbn0gPSB7fSkge1xuICBpZighKHB1YmxpY0tleSB8fCBzZWNyZXRLZXkpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdFeHBvcnQgcmVxdWlyZXMgc3BlY2lmeWluZyBlaXRoZXIgXCJwdWJsaWNLZXlcIiBvciBcInNlY3JldEtleVwiLicpO1xuICB9XG5cbiAgY29uc3QgdXNlU2VjcmV0S2V5ID0gc2VjcmV0S2V5ICYmICEha2V5UGFpci5zZWNyZXRLZXk7XG5cbiAgLy8gZXhwb3J0IGFzIE11bHRpa2V5XG4gIGNvbnN0IGV4cG9ydGVkID0ge307XG4gIGlmKGluY2x1ZGVDb250ZXh0KSB7XG4gICAgZXhwb3J0ZWRbJ0Bjb250ZXh0J10gPSBNVUxUSUtFWV9DT05URVhUX1YxX1VSTDtcbiAgfVxuICBleHBvcnRlZC5pZCA9IGtleVBhaXIuaWQ7XG4gIGV4cG9ydGVkLnR5cGUgPSAnTXVsdGlrZXknO1xuICBleHBvcnRlZC5jb250cm9sbGVyID0ga2V5UGFpci5jb250cm9sbGVyO1xuXG4gIGlmKHB1YmxpY0tleSkge1xuICAgIGV4cG9ydGVkLnB1YmxpY0tleU11bHRpYmFzZSA9IHJhd1RvUHVibGljS2V5TXVsdGliYXNlKGtleVBhaXIpO1xuICB9XG4gIGlmKHVzZVNlY3JldEtleSkge1xuICAgIGV4cG9ydGVkLnNlY3JldEtleU11bHRpYmFzZSA9IHJhd1RvU2VjcmV0S2V5TXVsdGliYXNlKHtcbiAgICAgIC4uLmtleVBhaXIsIGNhbm9uaWNhbGl6ZVxuICAgIH0pO1xuICB9XG5cbiAgaWYoa2V5UGFpci5yZXZva2VkKSB7XG4gICAgZXhwb3J0ZWQucmV2b2tlZCA9IGtleVBhaXIucmV2b2tlZDtcbiAgfVxuXG4gIHJldHVybiBleHBvcnRlZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydEtleVBhaXIoe1xuICBpZCwgY29udHJvbGxlciwgc2VjcmV0S2V5TXVsdGliYXNlLCBwdWJsaWNLZXlNdWx0aWJhc2UsIHJldm9rZWRcbn0pIHtcbiAgaWYoIXB1YmxpY0tleU11bHRpYmFzZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcInB1YmxpY0tleU11bHRpYmFzZVwiIHByb3BlcnR5IGlzIHJlcXVpcmVkLicpO1xuICB9XG5cbiAgY29uc3Qge1xuICAgIHB1YmxpY0tleSwgc2VjcmV0S2V5XG4gIH0gPSBtYkRlY29kZUtleVBhaXIoe3B1YmxpY0tleU11bHRpYmFzZSwgc2VjcmV0S2V5TXVsdGliYXNlfSk7XG5cbiAgaWYoY29udHJvbGxlciAmJiAhaWQpIHtcbiAgICBpZCA9IGAke2NvbnRyb2xsZXJ9IyR7cHVibGljS2V5TXVsdGliYXNlfWA7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIGNvbnRyb2xsZXIsXG4gICAgcHVibGljS2V5LFxuICAgIHNlY3JldEtleSxcbiAgICBwdWJsaWNLZXlNdWx0aWJhc2UsXG4gICAgc2VjcmV0S2V5TXVsdGliYXNlLFxuICAgIHJldm9rZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBqd2tUb1B1YmxpY0tleUJ5dGVzKHtqd2t9ID0ge30pIHtcbiAgY29uc3Qge2t0eSwgY3J2LCB4fSA9IGp3aztcbiAgaWYoa3R5ICE9PSAnT0tQJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiandrLmt0eVwiIG11c3QgYmUgXCJPS1BcIi4nKTtcbiAgfVxuICBpZihjcnYgIT09ICdFZDI1NTE5Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiandrLmNydlwiIG11c3QgYmUgXCJFZDI1NTE5XCIuJyk7XG4gIH1cbiAgaWYodHlwZW9mIHggIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJqd2sueFwiIG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gIH1cbiAgY29uc3QgcHVibGljS2V5ID0gYmFzZTY0dXJsLmRlY29kZShqd2sueCk7XG4gIGlmKHB1YmxpY0tleS5sZW5ndGggIT09IFBVQkxJQ19LRVlfU0laRSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIHB1YmxpYyBrZXkgc2l6ZSAoJHtwdWJsaWNLZXkubGVuZ3RofSk7IGAgK1xuICAgICAgYGV4cGVjdGVkICR7UFVCTElDX0tFWV9TSVpFfS5gKTtcbiAgfVxuICByZXR1cm4gcHVibGljS2V5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gandrVG9QdWJsaWNLZXlNdWx0aWJhc2Uoe2p3a30gPSB7fSkge1xuICBjb25zdCBwdWJsaWNLZXkgPSBqd2tUb1B1YmxpY0tleUJ5dGVzKHtqd2t9KTtcbiAgY29uc3Qge3B1YmxpY0tleU11bHRpYmFzZX0gPSBtYkVuY29kZUtleVBhaXIoe1xuICAgIGtleVBhaXI6IHtwdWJsaWNLZXl9XG4gIH0pO1xuICByZXR1cm4gcHVibGljS2V5TXVsdGliYXNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gandrVG9TZWNyZXRLZXlCeXRlcyh7andrfSA9IHt9KSB7XG4gIGNvbnN0IHtrdHksIGNydiwgZH0gPSBqd2s7XG4gIGlmKGt0eSAhPT0gJ09LUCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImp3ay5rdHlcIiBtdXN0IGJlIFwiT0tQXCIuJyk7XG4gIH1cbiAgaWYoY3J2ICE9PSAnRWQyNTUxOScpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImp3ay5jcnZcIiBtdXN0IGJlIFwiRWQyNTUxOVwiLicpO1xuICB9XG4gIGlmKHR5cGVvZiBkICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiandrLmRcIiBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICB9XG4gIGNvbnN0IHNlY3JldEtleSA9IFVpbnQ4QXJyYXkuZnJvbShiYXNlNjR1cmwuZGVjb2RlKGp3ay5kKSk7XG4gIGlmKHNlY3JldEtleS5sZW5ndGggIT09IFNFQ1JFVF9LRVlfU0laRSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIHNlY3JldCBrZXkgc2l6ZSAoJHtzZWNyZXRLZXkubGVuZ3RofSk7IGAgK1xuICAgICAgYGV4cGVjdGVkICR7U0VDUkVUX0tFWV9TSVpFfS5gKTtcbiAgfVxuICByZXR1cm4gc2VjcmV0S2V5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gandrVG9TZWNyZXRLZXlNdWx0aWJhc2Uoe2p3a30gPSB7fSkge1xuICBjb25zdCBzZWNyZXRLZXkgPSBqd2tUb1NlY3JldEtleUJ5dGVzKHtqd2t9KTtcbiAgY29uc3Qge3NlY3JldEtleU11bHRpYmFzZX0gPSBtYkVuY29kZUtleVBhaXIoe1xuICAgIGtleVBhaXI6IHtzZWNyZXRLZXl9XG4gIH0pO1xuICByZXR1cm4gc2VjcmV0S2V5TXVsdGliYXNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmF3VG9QdWJsaWNLZXlNdWx0aWJhc2Uoe3B1YmxpY0tleX0gPSB7fSkge1xuICBpZihwdWJsaWNLZXkubGVuZ3RoICE9PSBQVUJMSUNfS0VZX1NJWkUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBwdWJsaWMga2V5IHNpemUgKCR7cHVibGljS2V5Lmxlbmd0aH0pOyBgICtcbiAgICAgIGBleHBlY3RlZCAke1BVQkxJQ19LRVlfU0laRX0uYCk7XG4gIH1cbiAgY29uc3Qge3B1YmxpY0tleU11bHRpYmFzZX0gPSBtYkVuY29kZUtleVBhaXIoe1xuICAgIGtleVBhaXI6IHtwdWJsaWNLZXl9XG4gIH0pO1xuICByZXR1cm4gcHVibGljS2V5TXVsdGliYXNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmF3VG9TZWNyZXRLZXlNdWx0aWJhc2Uoe1xuICBzZWNyZXRLZXksIGNhbm9uaWNhbGl6ZSA9IGZhbHNlXG59ID0ge30pIHtcbiAgaWYoc2VjcmV0S2V5Lmxlbmd0aCAhPT0gU0VDUkVUX0tFWV9TSVpFKSB7XG4gICAgaWYoc2VjcmV0S2V5Lmxlbmd0aCAhPT0gTEVHQUNZX1NFQ1JFVF9LRVlfU0laRSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSW52YWxpZCBzZWNyZXQga2V5IHNpemUgKCR7c2VjcmV0S2V5Lmxlbmd0aH0pOyBgICtcbiAgICAgICAgYGV4cGVjdGVkICR7U0VDUkVUX0tFWV9TSVpFfS5gKTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIGxlZ2FjeSBjb25jYXRlbmF0ZWQgKHNlY3JldCBrZXkgKyBwdWJsaWMga2V5KVxuICAgIGlmKGNhbm9uaWNhbGl6ZSkge1xuICAgICAgc2VjcmV0S2V5ID0gc2VjcmV0S2V5LnN1YmFycmF5KDAsIFNFQ1JFVF9LRVlfU0laRSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHtzZWNyZXRLZXlNdWx0aWJhc2V9ID0gbWJFbmNvZGVLZXlQYWlyKHtcbiAgICBrZXlQYWlyOiB7c2VjcmV0S2V5fVxuICB9KTtcbiAgcmV0dXJuIHNlY3JldEtleU11bHRpYmFzZTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/serialize.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/validators.js":
/*!************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-multikey/lib/validators.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertKeyBytes: () => (/* binding */ assertKeyBytes)\n/* harmony export */ });\n/*!\n * Copyright (c) 2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n/**\n * Asserts that key bytes have a type of Uint8Array and a specific length.\n *\n * @throws {TypeError|SyntaxError} - Throws a Type or Syntax error.\n *\n * @param {object} options - Options to use.\n * @param {Uint8Array} options.bytes - The bytes being checked.\n * @param {number} [options.expectedLength=32] - The expected bytes length.\n * @param {string} [options.code] - An optional code for the error.\n *\n * @returns {undefined} Returns on success throws on error.\n */\nfunction assertKeyBytes({bytes, expectedLength = 32, code}) {\n  if(!(bytes instanceof Uint8Array)) {\n    throw new TypeError('\"bytes\" must be a Uint8Array.');\n  }\n  if(bytes.length !== expectedLength) {\n    const error = new Error(\n      `\"bytes\" must be a ${expectedLength}-byte Uint8Array.`);\n    // we need DataError for invalid byte length\n    error.name = 'DataError';\n    // add the error code from the did:key spec if provided\n    if(code) {\n      error.code = code;\n    }\n    throw error;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleS9saWIvdmFsaWRhdG9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsWUFBWTtBQUN2QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsYUFBYSxXQUFXO0FBQ3hCO0FBQ08seUJBQXlCLGlDQUFpQztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGVBQWU7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2VkMjU1MTktbXVsdGlrZXkvbGliL3ZhbGlkYXRvcnMuanM/YjUyYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMiBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGtleSBieXRlcyBoYXZlIGEgdHlwZSBvZiBVaW50OEFycmF5IGFuZCBhIHNwZWNpZmljIGxlbmd0aC5cbiAqXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J8U3ludGF4RXJyb3J9IC0gVGhyb3dzIGEgVHlwZSBvciBTeW50YXggZXJyb3IuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIHRvIHVzZS5cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gb3B0aW9ucy5ieXRlcyAtIFRoZSBieXRlcyBiZWluZyBjaGVja2VkLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLmV4cGVjdGVkTGVuZ3RoPTMyXSAtIFRoZSBleHBlY3RlZCBieXRlcyBsZW5ndGguXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29kZV0gLSBBbiBvcHRpb25hbCBjb2RlIGZvciB0aGUgZXJyb3IuXG4gKlxuICogQHJldHVybnMge3VuZGVmaW5lZH0gUmV0dXJucyBvbiBzdWNjZXNzIHRocm93cyBvbiBlcnJvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEtleUJ5dGVzKHtieXRlcywgZXhwZWN0ZWRMZW5ndGggPSAzMiwgY29kZX0pIHtcbiAgaWYoIShieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJieXRlc1wiIG11c3QgYmUgYSBVaW50OEFycmF5LicpO1xuICB9XG4gIGlmKGJ5dGVzLmxlbmd0aCAhPT0gZXhwZWN0ZWRMZW5ndGgpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgIGBcImJ5dGVzXCIgbXVzdCBiZSBhICR7ZXhwZWN0ZWRMZW5ndGh9LWJ5dGUgVWludDhBcnJheS5gKTtcbiAgICAvLyB3ZSBuZWVkIERhdGFFcnJvciBmb3IgaW52YWxpZCBieXRlIGxlbmd0aFxuICAgIGVycm9yLm5hbWUgPSAnRGF0YUVycm9yJztcbiAgICAvLyBhZGQgdGhlIGVycm9yIGNvZGUgZnJvbSB0aGUgZGlkOmtleSBzcGVjIGlmIHByb3ZpZGVkXG4gICAgaWYoY29kZSkge1xuICAgICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/validators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-signature-2020/lib/Ed25519Signature2020.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-signature-2020/lib/Ed25519Signature2020.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ed25519Signature2020: () => (/* binding */ Ed25519Signature2020)\n/* harmony export */ });\n/* harmony import */ var base58_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base58-universal */ \"(ssr)/./node_modules/base58-universal/lib/index.js\");\n/* harmony import */ var _digitalbazaar_ed25519_multikey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @digitalbazaar/ed25519-multikey */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-multikey/lib/index.js\");\n/* harmony import */ var _digitalbazaar_ed25519_verification_key_2020__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @digitalbazaar/ed25519-verification-key-2020 */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/index.js\");\n/* harmony import */ var jsonld_signatures__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsonld-signatures */ \"(ssr)/./node_modules/jsonld-signatures/lib/jsonld-signatures.js\");\n/* harmony import */ var ed25519_signature_2020_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ed25519-signature-2020-context */ \"(ssr)/./node_modules/ed25519-signature-2020-context/dist/context.esm.js\");\n/*!\n * Copyright (c) 2020-2024 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst {suites: {LinkedDataSignature}} = jsonld_signatures__WEBPACK_IMPORTED_MODULE_3__;\n\n\n// 'https://w3id.org/security/suites/ed25519-2020/v1'\nconst SUITE_CONTEXT_URL = ed25519_signature_2020_context__WEBPACK_IMPORTED_MODULE_4__[\"default\"].constants.CONTEXT_URL;\n\n// multibase base58-btc header\nconst MULTIBASE_BASE58BTC_HEADER = 'z';\n\nclass Ed25519Signature2020 extends LinkedDataSignature {\n  /**\n   * @param {object} options - Options hashmap.\n   *\n   * Either a `key` OR at least one of `signer`/`verifier` is required:\n   *\n   * @param {object} [options.key] - An optional key object (containing an\n   *   `id` property, and either `signer` or `verifier`, depending on the\n   *   intended operation. Useful for when the application is managing keys\n   *   itself (when using a KMS, you never have access to the private key,\n   *   and so should use the `signer` param instead).\n   * @param {Function} [options.signer] - Signer function that returns an\n   *   object with an async sign() method. This is useful when interfacing\n   *   with a KMS (since you don't get access to the private key and its\n   *   `signer()`, the KMS client gives you only the signer function to use).\n   * @param {Function} [options.verifier] - Verifier function that returns\n   *   an object with an async `verify()` method. Useful when working with a\n   *   KMS-provided verifier function.\n   *\n   * Advanced optional parameters and overrides:\n   *\n   * @param {object} [options.proof] - A JSON-LD document with options to use\n   *   for the `proof` node (e.g. any other custom fields can be provided here\n   *   using a context different from security-v2).\n   * @param {string|Date} [options.date] - Signing date to use if not passed.\n   * @param {boolean} [options.useNativeCanonize] - Whether to use a native\n   *   canonize algorithm.\n   * @param {object} [options.canonizeOptions] - Options to pass to\n   *   canonize algorithm.\n   */\n  constructor({\n    key, signer, verifier, proof, date, useNativeCanonize, canonizeOptions\n  } = {}) {\n    super({\n      type: 'Ed25519Signature2020', LDKeyClass: _digitalbazaar_ed25519_verification_key_2020__WEBPACK_IMPORTED_MODULE_2__.Ed25519VerificationKey2020,\n      contextUrl: SUITE_CONTEXT_URL,\n      key, signer, verifier, proof, date, useNativeCanonize,\n      canonizeOptions\n    });\n    // some operations may be performed with `Ed25519VerificationKey2018` or\n    // `Multikey`; so, `Ed25519VerificationKey2020` is recommended, but not\n    // strictly required\n    this.requiredKeyType = 'Ed25519VerificationKey2020';\n  }\n\n  /**\n   * Adds a signature (proofValue) field to the proof object. Called by\n   * LinkedDataSignature.createProof().\n   *\n   * @param {object} options - The options to use.\n   * @param {Uint8Array} options.verifyData - Data to be signed (extracted\n   *   from document, according to the suite's spec).\n   * @param {object} options.proof - Proof object (containing the proofPurpose,\n   *   verificationMethod, etc).\n   *\n   * @returns {Promise<object>} Resolves with the proof containing the signature\n   *   value.\n   */\n  async sign({verifyData, proof}) {\n    if(!(this.signer && typeof this.signer.sign === 'function')) {\n      throw new Error('A signer API has not been specified.');\n    }\n\n    const signatureBytes = await this.signer.sign({data: verifyData});\n    proof.proofValue =\n      MULTIBASE_BASE58BTC_HEADER + base58_universal__WEBPACK_IMPORTED_MODULE_0__.encode(signatureBytes);\n\n    return proof;\n  }\n\n  /**\n   * Verifies the proof signature against the given data.\n   *\n   * @param {object} options - The options to use.\n   * @param {Uint8Array} options.verifyData - Canonicalized hashed data.\n   * @param {object} options.verificationMethod - Key object.\n   * @param {object} options.proof - The proof to be verified.\n   *\n   * @returns {Promise<boolean>} Resolves with the verification result.\n   */\n  async verifySignature({verifyData, verificationMethod, proof}) {\n    const {proofValue} = proof;\n    if(!(proofValue && typeof proofValue === 'string')) {\n      throw new TypeError(\n        'The proof does not include a valid \"proofValue\" property.');\n    }\n    if(proofValue[0] !== MULTIBASE_BASE58BTC_HEADER) {\n      throw new Error('Only base58btc multibase encoding is supported.');\n    }\n    const signatureBytes = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(proofValue.substr(1));\n\n    let {verifier} = this;\n    if(!verifier) {\n      const key = await _digitalbazaar_ed25519_multikey__WEBPACK_IMPORTED_MODULE_1__.from(verificationMethod);\n      verifier = key.verifier();\n    }\n    return verifier.verify({data: verifyData, signature: signatureBytes});\n  }\n\n  async assertVerificationMethod({verificationMethod}) {\n    let contextUrl;\n    if(verificationMethod.type === 'Ed25519VerificationKey2020') {\n      contextUrl = SUITE_CONTEXT_URL;\n    } else {\n      throw new Error(`Unsupported key type \"${verificationMethod.type}\".`);\n    }\n    if(!_includesContext({document: verificationMethod, contextUrl})) {\n      // For DID Documents, since keys do not have their own contexts,\n      // the suite context is usually provided by the documentLoader logic\n      throw new TypeError(\n        `The verification method (key) must contain \"${contextUrl}\" context.`\n      );\n    }\n\n    // ensure verification method has not been revoked\n    if(verificationMethod.revoked !== undefined) {\n      throw new Error('The verification method has been revoked.');\n    }\n  }\n\n  async getVerificationMethod({proof, documentLoader}) {\n    if(this.key) {\n      // This happens most often during sign() operations. For verify(),\n      // the expectation is that the verification method will be fetched\n      // by the documentLoader (below), not provided as a `key` parameter.\n      return this.key.export({publicKey: true});\n    }\n\n    let {verificationMethod} = proof;\n\n    if(typeof verificationMethod === 'object') {\n      verificationMethod = verificationMethod.id;\n    }\n\n    if(!verificationMethod) {\n      throw new Error('No \"verificationMethod\" found in proof.');\n    }\n\n    const {document} = await documentLoader(verificationMethod);\n\n    verificationMethod = typeof document === 'string' ?\n      JSON.parse(document) : document;\n\n    // for maximum compatibility, import using multikey library and convert to\n    // type `Ed25519Signature2020`\n    const key = await _digitalbazaar_ed25519_multikey__WEBPACK_IMPORTED_MODULE_1__.from(verificationMethod);\n    verificationMethod = {\n      ...await key.export({publicKey: true, includeContext: true}),\n      '@context': SUITE_CONTEXT_URL,\n      type: 'Ed25519VerificationKey2020'\n    };\n    await this.assertVerificationMethod({verificationMethod});\n\n    return verificationMethod;\n  }\n\n  async matchProof({proof, document, purpose, documentLoader}) {\n    if(!_includesContext({document, contextUrl: SUITE_CONTEXT_URL})) {\n      return false;\n    }\n\n    if(!await super.matchProof({proof, document, purpose, documentLoader})) {\n      return false;\n    }\n    if(!this.key) {\n      // no key specified, so assume this suite matches and it can be retrieved\n      return true;\n    }\n\n    const {verificationMethod} = proof;\n\n    // only match if the key specified matches the one in the proof\n    if(typeof verificationMethod === 'object') {\n      return verificationMethod.id === this.key.id;\n    }\n    return verificationMethod === this.key.id;\n  }\n}\n\n/**\n * Tests whether a provided JSON-LD document includes a context url in its\n * `@context` property.\n *\n * @param {object} options - Options hashmap.\n * @param {object} options.document - A JSON-LD document.\n * @param {string} options.contextUrl - A context url.\n *\n * @returns {boolean} Returns true if document includes context.\n */\nfunction _includesContext({document, contextUrl}) {\n  const context = document['@context'];\n  return context === contextUrl ||\n    (Array.isArray(context) && context.includes(contextUrl));\n}\n\nEd25519Signature2020.CONTEXT_URL = SUITE_CONTEXT_URL;\nEd25519Signature2020.CONTEXT = ed25519_signature_2020_context__WEBPACK_IMPORTED_MODULE_4__[\"default\"].contexts.get(SUITE_CONTEXT_URL);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1zaWduYXR1cmUtMjAyMC9saWIvRWQyNTUxOVNpZ25hdHVyZTIwMjAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzhDO0FBQ3FCO0FBR2I7QUFDaEI7QUFDdEMsT0FBTyxTQUFTLHNCQUFzQixFQUFFLDhDQUFLO0FBQ2lCOztBQUU5RDtBQUNBLDBCQUEwQixnRkFBMEI7O0FBRXBEO0FBQ0E7O0FBRU87QUFDUDtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLGFBQWEsYUFBYTtBQUMxQixhQUFhLFNBQVM7QUFDdEI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBLGdEQUFnRCxvR0FBMEI7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFlBQVk7QUFDekI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDO0FBQ0E7QUFDQSxjQUFjLGtCQUFrQjtBQUNoQztBQUNBO0FBQ0E7O0FBRUEsbURBQW1ELGlCQUFpQjtBQUNwRTtBQUNBLG1DQUFtQyxvREFBZ0I7O0FBRW5EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsWUFBWTtBQUN6QixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakM7QUFDQSx5QkFBeUIsc0NBQXNDO0FBQy9ELFdBQVcsWUFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvREFBZ0I7O0FBRTNDLFNBQVMsVUFBVTtBQUNuQjtBQUNBLHdCQUF3QixpRUFBb0I7QUFDNUM7QUFDQTtBQUNBLDRCQUE0Qiw0Q0FBNEM7QUFDeEU7O0FBRUEsa0NBQWtDLG1CQUFtQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sK0NBQStDLHdCQUF3QjtBQUN2RTtBQUNBLDBCQUEwQix5Q0FBeUM7QUFDbkU7QUFDQTtBQUNBO0FBQ0EsdURBQXVELFdBQVc7QUFDbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLCtCQUErQixzQkFBc0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsZ0JBQWdCO0FBQzlDOztBQUVBLFNBQVMsb0JBQW9COztBQUU3QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFdBQVcsVUFBVTs7QUFFckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0JBQXNCLGlFQUFvQjtBQUMxQztBQUNBLDJCQUEyQixzQ0FBc0M7QUFDakU7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG1CQUFtQjs7QUFFNUQ7QUFDQTs7QUFFQSxvQkFBb0IseUNBQXlDO0FBQzdELDBCQUEwQix3Q0FBd0M7QUFDbEU7QUFDQTs7QUFFQSxnQ0FBZ0MseUNBQXlDO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLG9CQUFvQjs7QUFFL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBLDJCQUEyQixxQkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsK0VBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2VkMjU1MTktc2lnbmF0dXJlLTIwMjAvbGliL0VkMjU1MTlTaWduYXR1cmUyMDIwLmpzP2E1ZGMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjAtMjAyNCBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQgKiBhcyBiYXNlNThidGMgZnJvbSAnYmFzZTU4LXVuaXZlcnNhbCc7XG5pbXBvcnQgKiBhcyBFZDI1NTE5TXVsdGlrZXkgZnJvbSAnQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1tdWx0aWtleSc7XG5pbXBvcnQge1xuICBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMFxufSBmcm9tICdAZGlnaXRhbGJhemFhci9lZDI1NTE5LXZlcmlmaWNhdGlvbi1rZXktMjAyMCc7XG5pbXBvcnQganNpZ3MgZnJvbSAnanNvbmxkLXNpZ25hdHVyZXMnO1xuY29uc3Qge3N1aXRlczoge0xpbmtlZERhdGFTaWduYXR1cmV9fSA9IGpzaWdzO1xuaW1wb3J0IHN1aXRlQ29udGV4dDIwMjAgZnJvbSAnZWQyNTUxOS1zaWduYXR1cmUtMjAyMC1jb250ZXh0JztcblxuLy8gJ2h0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvc3VpdGVzL2VkMjU1MTktMjAyMC92MSdcbmNvbnN0IFNVSVRFX0NPTlRFWFRfVVJMID0gc3VpdGVDb250ZXh0MjAyMC5jb25zdGFudHMuQ09OVEVYVF9VUkw7XG5cbi8vIG11bHRpYmFzZSBiYXNlNTgtYnRjIGhlYWRlclxuY29uc3QgTVVMVElCQVNFX0JBU0U1OEJUQ19IRUFERVIgPSAneic7XG5cbmV4cG9ydCBjbGFzcyBFZDI1NTE5U2lnbmF0dXJlMjAyMCBleHRlbmRzIExpbmtlZERhdGFTaWduYXR1cmUge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gICAqXG4gICAqIEVpdGhlciBhIGBrZXlgIE9SIGF0IGxlYXN0IG9uZSBvZiBgc2lnbmVyYC9gdmVyaWZpZXJgIGlzIHJlcXVpcmVkOlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMua2V5XSAtIEFuIG9wdGlvbmFsIGtleSBvYmplY3QgKGNvbnRhaW5pbmcgYW5cbiAgICogICBgaWRgIHByb3BlcnR5LCBhbmQgZWl0aGVyIGBzaWduZXJgIG9yIGB2ZXJpZmllcmAsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogICBpbnRlbmRlZCBvcGVyYXRpb24uIFVzZWZ1bCBmb3Igd2hlbiB0aGUgYXBwbGljYXRpb24gaXMgbWFuYWdpbmcga2V5c1xuICAgKiAgIGl0c2VsZiAod2hlbiB1c2luZyBhIEtNUywgeW91IG5ldmVyIGhhdmUgYWNjZXNzIHRvIHRoZSBwcml2YXRlIGtleSxcbiAgICogICBhbmQgc28gc2hvdWxkIHVzZSB0aGUgYHNpZ25lcmAgcGFyYW0gaW5zdGVhZCkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnNpZ25lcl0gLSBTaWduZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuXG4gICAqICAgb2JqZWN0IHdpdGggYW4gYXN5bmMgc2lnbigpIG1ldGhvZC4gVGhpcyBpcyB1c2VmdWwgd2hlbiBpbnRlcmZhY2luZ1xuICAgKiAgIHdpdGggYSBLTVMgKHNpbmNlIHlvdSBkb24ndCBnZXQgYWNjZXNzIHRvIHRoZSBwcml2YXRlIGtleSBhbmQgaXRzXG4gICAqICAgYHNpZ25lcigpYCwgdGhlIEtNUyBjbGllbnQgZ2l2ZXMgeW91IG9ubHkgdGhlIHNpZ25lciBmdW5jdGlvbiB0byB1c2UpLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy52ZXJpZmllcl0gLSBWZXJpZmllciBmdW5jdGlvbiB0aGF0IHJldHVybnNcbiAgICogICBhbiBvYmplY3Qgd2l0aCBhbiBhc3luYyBgdmVyaWZ5KClgIG1ldGhvZC4gVXNlZnVsIHdoZW4gd29ya2luZyB3aXRoIGFcbiAgICogICBLTVMtcHJvdmlkZWQgdmVyaWZpZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEFkdmFuY2VkIG9wdGlvbmFsIHBhcmFtZXRlcnMgYW5kIG92ZXJyaWRlczpcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLnByb29mXSAtIEEgSlNPTi1MRCBkb2N1bWVudCB3aXRoIG9wdGlvbnMgdG8gdXNlXG4gICAqICAgZm9yIHRoZSBgcHJvb2ZgIG5vZGUgKGUuZy4gYW55IG90aGVyIGN1c3RvbSBmaWVsZHMgY2FuIGJlIHByb3ZpZGVkIGhlcmVcbiAgICogICB1c2luZyBhIGNvbnRleHQgZGlmZmVyZW50IGZyb20gc2VjdXJpdHktdjIpLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xEYXRlfSBbb3B0aW9ucy5kYXRlXSAtIFNpZ25pbmcgZGF0ZSB0byB1c2UgaWYgbm90IHBhc3NlZC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51c2VOYXRpdmVDYW5vbml6ZV0gLSBXaGV0aGVyIHRvIHVzZSBhIG5hdGl2ZVxuICAgKiAgIGNhbm9uaXplIGFsZ29yaXRobS5cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLmNhbm9uaXplT3B0aW9uc10gLSBPcHRpb25zIHRvIHBhc3MgdG9cbiAgICogICBjYW5vbml6ZSBhbGdvcml0aG0uXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAga2V5LCBzaWduZXIsIHZlcmlmaWVyLCBwcm9vZiwgZGF0ZSwgdXNlTmF0aXZlQ2Fub25pemUsIGNhbm9uaXplT3B0aW9uc1xuICB9ID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiAnRWQyNTUxOVNpZ25hdHVyZTIwMjAnLCBMREtleUNsYXNzOiBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCxcbiAgICAgIGNvbnRleHRVcmw6IFNVSVRFX0NPTlRFWFRfVVJMLFxuICAgICAga2V5LCBzaWduZXIsIHZlcmlmaWVyLCBwcm9vZiwgZGF0ZSwgdXNlTmF0aXZlQ2Fub25pemUsXG4gICAgICBjYW5vbml6ZU9wdGlvbnNcbiAgICB9KTtcbiAgICAvLyBzb21lIG9wZXJhdGlvbnMgbWF5IGJlIHBlcmZvcm1lZCB3aXRoIGBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOGAgb3JcbiAgICAvLyBgTXVsdGlrZXlgOyBzbywgYEVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwYCBpcyByZWNvbW1lbmRlZCwgYnV0IG5vdFxuICAgIC8vIHN0cmljdGx5IHJlcXVpcmVkXG4gICAgdGhpcy5yZXF1aXJlZEtleVR5cGUgPSAnRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAnO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzaWduYXR1cmUgKHByb29mVmFsdWUpIGZpZWxkIHRvIHRoZSBwcm9vZiBvYmplY3QuIENhbGxlZCBieVxuICAgKiBMaW5rZWREYXRhU2lnbmF0dXJlLmNyZWF0ZVByb29mKCkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgdG8gdXNlLlxuICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IG9wdGlvbnMudmVyaWZ5RGF0YSAtIERhdGEgdG8gYmUgc2lnbmVkIChleHRyYWN0ZWRcbiAgICogICBmcm9tIGRvY3VtZW50LCBhY2NvcmRpbmcgdG8gdGhlIHN1aXRlJ3Mgc3BlYykuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLnByb29mIC0gUHJvb2Ygb2JqZWN0IChjb250YWluaW5nIHRoZSBwcm9vZlB1cnBvc2UsXG4gICAqICAgdmVyaWZpY2F0aW9uTWV0aG9kLCBldGMpLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fSBSZXNvbHZlcyB3aXRoIHRoZSBwcm9vZiBjb250YWluaW5nIHRoZSBzaWduYXR1cmVcbiAgICogICB2YWx1ZS5cbiAgICovXG4gIGFzeW5jIHNpZ24oe3ZlcmlmeURhdGEsIHByb29mfSkge1xuICAgIGlmKCEodGhpcy5zaWduZXIgJiYgdHlwZW9mIHRoaXMuc2lnbmVyLnNpZ24gPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Egc2lnbmVyIEFQSSBoYXMgbm90IGJlZW4gc3BlY2lmaWVkLicpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpZ25hdHVyZUJ5dGVzID0gYXdhaXQgdGhpcy5zaWduZXIuc2lnbih7ZGF0YTogdmVyaWZ5RGF0YX0pO1xuICAgIHByb29mLnByb29mVmFsdWUgPVxuICAgICAgTVVMVElCQVNFX0JBU0U1OEJUQ19IRUFERVIgKyBiYXNlNThidGMuZW5jb2RlKHNpZ25hdHVyZUJ5dGVzKTtcblxuICAgIHJldHVybiBwcm9vZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmllcyB0aGUgcHJvb2Ygc2lnbmF0dXJlIGFnYWluc3QgdGhlIGdpdmVuIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgdG8gdXNlLlxuICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IG9wdGlvbnMudmVyaWZ5RGF0YSAtIENhbm9uaWNhbGl6ZWQgaGFzaGVkIGRhdGEuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLnZlcmlmaWNhdGlvbk1ldGhvZCAtIEtleSBvYmplY3QuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLnByb29mIC0gVGhlIHByb29mIHRvIGJlIHZlcmlmaWVkLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gUmVzb2x2ZXMgd2l0aCB0aGUgdmVyaWZpY2F0aW9uIHJlc3VsdC5cbiAgICovXG4gIGFzeW5jIHZlcmlmeVNpZ25hdHVyZSh7dmVyaWZ5RGF0YSwgdmVyaWZpY2F0aW9uTWV0aG9kLCBwcm9vZn0pIHtcbiAgICBjb25zdCB7cHJvb2ZWYWx1ZX0gPSBwcm9vZjtcbiAgICBpZighKHByb29mVmFsdWUgJiYgdHlwZW9mIHByb29mVmFsdWUgPT09ICdzdHJpbmcnKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ1RoZSBwcm9vZiBkb2VzIG5vdCBpbmNsdWRlIGEgdmFsaWQgXCJwcm9vZlZhbHVlXCIgcHJvcGVydHkuJyk7XG4gICAgfVxuICAgIGlmKHByb29mVmFsdWVbMF0gIT09IE1VTFRJQkFTRV9CQVNFNThCVENfSEVBREVSKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgYmFzZTU4YnRjIG11bHRpYmFzZSBlbmNvZGluZyBpcyBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHNpZ25hdHVyZUJ5dGVzID0gYmFzZTU4YnRjLmRlY29kZShwcm9vZlZhbHVlLnN1YnN0cigxKSk7XG5cbiAgICBsZXQge3ZlcmlmaWVyfSA9IHRoaXM7XG4gICAgaWYoIXZlcmlmaWVyKSB7XG4gICAgICBjb25zdCBrZXkgPSBhd2FpdCBFZDI1NTE5TXVsdGlrZXkuZnJvbSh2ZXJpZmljYXRpb25NZXRob2QpO1xuICAgICAgdmVyaWZpZXIgPSBrZXkudmVyaWZpZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcmlmaWVyLnZlcmlmeSh7ZGF0YTogdmVyaWZ5RGF0YSwgc2lnbmF0dXJlOiBzaWduYXR1cmVCeXRlc30pO1xuICB9XG5cbiAgYXN5bmMgYXNzZXJ0VmVyaWZpY2F0aW9uTWV0aG9kKHt2ZXJpZmljYXRpb25NZXRob2R9KSB7XG4gICAgbGV0IGNvbnRleHRVcmw7XG4gICAgaWYodmVyaWZpY2F0aW9uTWV0aG9kLnR5cGUgPT09ICdFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCcpIHtcbiAgICAgIGNvbnRleHRVcmwgPSBTVUlURV9DT05URVhUX1VSTDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBrZXkgdHlwZSBcIiR7dmVyaWZpY2F0aW9uTWV0aG9kLnR5cGV9XCIuYCk7XG4gICAgfVxuICAgIGlmKCFfaW5jbHVkZXNDb250ZXh0KHtkb2N1bWVudDogdmVyaWZpY2F0aW9uTWV0aG9kLCBjb250ZXh0VXJsfSkpIHtcbiAgICAgIC8vIEZvciBESUQgRG9jdW1lbnRzLCBzaW5jZSBrZXlzIGRvIG5vdCBoYXZlIHRoZWlyIG93biBjb250ZXh0cyxcbiAgICAgIC8vIHRoZSBzdWl0ZSBjb250ZXh0IGlzIHVzdWFsbHkgcHJvdmlkZWQgYnkgdGhlIGRvY3VtZW50TG9hZGVyIGxvZ2ljXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICBgVGhlIHZlcmlmaWNhdGlvbiBtZXRob2QgKGtleSkgbXVzdCBjb250YWluIFwiJHtjb250ZXh0VXJsfVwiIGNvbnRleHQuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBlbnN1cmUgdmVyaWZpY2F0aW9uIG1ldGhvZCBoYXMgbm90IGJlZW4gcmV2b2tlZFxuICAgIGlmKHZlcmlmaWNhdGlvbk1ldGhvZC5yZXZva2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHZlcmlmaWNhdGlvbiBtZXRob2QgaGFzIGJlZW4gcmV2b2tlZC4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRWZXJpZmljYXRpb25NZXRob2Qoe3Byb29mLCBkb2N1bWVudExvYWRlcn0pIHtcbiAgICBpZih0aGlzLmtleSkge1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIG1vc3Qgb2Z0ZW4gZHVyaW5nIHNpZ24oKSBvcGVyYXRpb25zLiBGb3IgdmVyaWZ5KCksXG4gICAgICAvLyB0aGUgZXhwZWN0YXRpb24gaXMgdGhhdCB0aGUgdmVyaWZpY2F0aW9uIG1ldGhvZCB3aWxsIGJlIGZldGNoZWRcbiAgICAgIC8vIGJ5IHRoZSBkb2N1bWVudExvYWRlciAoYmVsb3cpLCBub3QgcHJvdmlkZWQgYXMgYSBga2V5YCBwYXJhbWV0ZXIuXG4gICAgICByZXR1cm4gdGhpcy5rZXkuZXhwb3J0KHtwdWJsaWNLZXk6IHRydWV9KTtcbiAgICB9XG5cbiAgICBsZXQge3ZlcmlmaWNhdGlvbk1ldGhvZH0gPSBwcm9vZjtcblxuICAgIGlmKHR5cGVvZiB2ZXJpZmljYXRpb25NZXRob2QgPT09ICdvYmplY3QnKSB7XG4gICAgICB2ZXJpZmljYXRpb25NZXRob2QgPSB2ZXJpZmljYXRpb25NZXRob2QuaWQ7XG4gICAgfVxuXG4gICAgaWYoIXZlcmlmaWNhdGlvbk1ldGhvZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBcInZlcmlmaWNhdGlvbk1ldGhvZFwiIGZvdW5kIGluIHByb29mLicpO1xuICAgIH1cblxuICAgIGNvbnN0IHtkb2N1bWVudH0gPSBhd2FpdCBkb2N1bWVudExvYWRlcih2ZXJpZmljYXRpb25NZXRob2QpO1xuXG4gICAgdmVyaWZpY2F0aW9uTWV0aG9kID0gdHlwZW9mIGRvY3VtZW50ID09PSAnc3RyaW5nJyA/XG4gICAgICBKU09OLnBhcnNlKGRvY3VtZW50KSA6IGRvY3VtZW50O1xuXG4gICAgLy8gZm9yIG1heGltdW0gY29tcGF0aWJpbGl0eSwgaW1wb3J0IHVzaW5nIG11bHRpa2V5IGxpYnJhcnkgYW5kIGNvbnZlcnQgdG9cbiAgICAvLyB0eXBlIGBFZDI1NTE5U2lnbmF0dXJlMjAyMGBcbiAgICBjb25zdCBrZXkgPSBhd2FpdCBFZDI1NTE5TXVsdGlrZXkuZnJvbSh2ZXJpZmljYXRpb25NZXRob2QpO1xuICAgIHZlcmlmaWNhdGlvbk1ldGhvZCA9IHtcbiAgICAgIC4uLmF3YWl0IGtleS5leHBvcnQoe3B1YmxpY0tleTogdHJ1ZSwgaW5jbHVkZUNvbnRleHQ6IHRydWV9KSxcbiAgICAgICdAY29udGV4dCc6IFNVSVRFX0NPTlRFWFRfVVJMLFxuICAgICAgdHlwZTogJ0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwJ1xuICAgIH07XG4gICAgYXdhaXQgdGhpcy5hc3NlcnRWZXJpZmljYXRpb25NZXRob2Qoe3ZlcmlmaWNhdGlvbk1ldGhvZH0pO1xuXG4gICAgcmV0dXJuIHZlcmlmaWNhdGlvbk1ldGhvZDtcbiAgfVxuXG4gIGFzeW5jIG1hdGNoUHJvb2Yoe3Byb29mLCBkb2N1bWVudCwgcHVycG9zZSwgZG9jdW1lbnRMb2FkZXJ9KSB7XG4gICAgaWYoIV9pbmNsdWRlc0NvbnRleHQoe2RvY3VtZW50LCBjb250ZXh0VXJsOiBTVUlURV9DT05URVhUX1VSTH0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYoIWF3YWl0IHN1cGVyLm1hdGNoUHJvb2Yoe3Byb29mLCBkb2N1bWVudCwgcHVycG9zZSwgZG9jdW1lbnRMb2FkZXJ9KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZighdGhpcy5rZXkpIHtcbiAgICAgIC8vIG5vIGtleSBzcGVjaWZpZWQsIHNvIGFzc3VtZSB0aGlzIHN1aXRlIG1hdGNoZXMgYW5kIGl0IGNhbiBiZSByZXRyaWV2ZWRcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHt2ZXJpZmljYXRpb25NZXRob2R9ID0gcHJvb2Y7XG5cbiAgICAvLyBvbmx5IG1hdGNoIGlmIHRoZSBrZXkgc3BlY2lmaWVkIG1hdGNoZXMgdGhlIG9uZSBpbiB0aGUgcHJvb2ZcbiAgICBpZih0eXBlb2YgdmVyaWZpY2F0aW9uTWV0aG9kID09PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHZlcmlmaWNhdGlvbk1ldGhvZC5pZCA9PT0gdGhpcy5rZXkuaWQ7XG4gICAgfVxuICAgIHJldHVybiB2ZXJpZmljYXRpb25NZXRob2QgPT09IHRoaXMua2V5LmlkO1xuICB9XG59XG5cbi8qKlxuICogVGVzdHMgd2hldGhlciBhIHByb3ZpZGVkIEpTT04tTEQgZG9jdW1lbnQgaW5jbHVkZXMgYSBjb250ZXh0IHVybCBpbiBpdHNcbiAqIGBAY29udGV4dGAgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5kb2N1bWVudCAtIEEgSlNPTi1MRCBkb2N1bWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNvbnRleHRVcmwgLSBBIGNvbnRleHQgdXJsLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgZG9jdW1lbnQgaW5jbHVkZXMgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gX2luY2x1ZGVzQ29udGV4dCh7ZG9jdW1lbnQsIGNvbnRleHRVcmx9KSB7XG4gIGNvbnN0IGNvbnRleHQgPSBkb2N1bWVudFsnQGNvbnRleHQnXTtcbiAgcmV0dXJuIGNvbnRleHQgPT09IGNvbnRleHRVcmwgfHxcbiAgICAoQXJyYXkuaXNBcnJheShjb250ZXh0KSAmJiBjb250ZXh0LmluY2x1ZGVzKGNvbnRleHRVcmwpKTtcbn1cblxuRWQyNTUxOVNpZ25hdHVyZTIwMjAuQ09OVEVYVF9VUkwgPSBTVUlURV9DT05URVhUX1VSTDtcbkVkMjU1MTlTaWduYXR1cmUyMDIwLkNPTlRFWFQgPSBzdWl0ZUNvbnRleHQyMDIwLmNvbnRleHRzLmdldChTVUlURV9DT05URVhUX1VSTCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-signature-2020/lib/Ed25519Signature2020.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-signature-2020/lib/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-signature-2020/lib/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ed25519Signature2020: () => (/* reexport safe */ _Ed25519Signature2020_js__WEBPACK_IMPORTED_MODULE_1__.Ed25519Signature2020),\n/* harmony export */   suiteContext: () => (/* reexport safe */ ed25519_signature_2020_context__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var ed25519_signature_2020_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ed25519-signature-2020-context */ \"(ssr)/./node_modules/ed25519-signature-2020-context/dist/context.esm.js\");\n/* harmony import */ var _Ed25519Signature2020_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Ed25519Signature2020.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-signature-2020/lib/Ed25519Signature2020.js\");\n/*!\n * Copyright (c) 2020-2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS1zaWduYXR1cmUtMjAyMC9saWIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUMwRDs7QUFFSztBQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LXNpZ25hdHVyZS0yMDIwL2xpYi9pbmRleC5qcz8xMjA5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjEgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0IHN1aXRlQ29udGV4dCBmcm9tICdlZDI1NTE5LXNpZ25hdHVyZS0yMDIwLWNvbnRleHQnO1xuXG5leHBvcnQge0VkMjU1MTlTaWduYXR1cmUyMDIwfSBmcm9tICcuL0VkMjU1MTlTaWduYXR1cmUyMDIwLmpzJztcbmV4cG9ydCB7c3VpdGVDb250ZXh0fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-signature-2020/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/Ed25519VerificationKey2020.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/Ed25519VerificationKey2020.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ed25519VerificationKey2020: () => (/* binding */ Ed25519VerificationKey2020)\n/* harmony export */ });\n/* harmony import */ var base58_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base58-universal */ \"(ssr)/./node_modules/base58-universal/lib/index.js\");\n/* harmony import */ var base64url_universal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! base64url-universal */ \"(ssr)/./node_modules/base64url-universal/lib/index.js\");\n/* harmony import */ var _validators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validators.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/validators.js\");\n/* harmony import */ var _ed25519_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ed25519.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/ed25519.js\");\n/* harmony import */ var crypto_ld__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto-ld */ \"(ssr)/./node_modules/crypto-ld/lib/index.js\");\n/*!\n * Copyright (c) 2021-2024 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\n\n\nconst SUITE_ID = 'Ed25519VerificationKey2020';\n// multibase base58-btc header\nconst MULTIBASE_BASE58BTC_HEADER = 'z';\n// multicodec ed25519-pub header as varint\nconst MULTICODEC_ED25519_PUB_HEADER = new Uint8Array([0xed, 0x01]);\n// multicodec ed25519-priv header as varint\nconst MULTICODEC_ED25519_PRIV_HEADER = new Uint8Array([0x80, 0x26]);\n\nclass Ed25519VerificationKey2020 extends crypto_ld__WEBPACK_IMPORTED_MODULE_4__.LDKeyPair {\n  /**\n   * An implementation of the Ed25519VerificationKey2020 spec, for use with\n   * Linked Data Proofs.\n   *\n   * @see https://w3c-ccg.github.io/lds-ed25519-2020/#ed25519verificationkey2020\n   * @see https://github.com/digitalbazaar/jsonld-signatures\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.controller - Controller DID or document url.\n   * @param {string} [options.id] - The key ID. If not provided, will be\n   *   composed of controller and key fingerprint as hash fragment.\n   * @param {string} options.publicKeyMultibase - Multibase encoded public key\n   *   with a multicodec ed25519-pub varint header [0xed, 0x01].\n   * @param {string} [options.privateKeyMultibase] - Multibase private key\n   *   with a multicodec ed25519-priv varint header [0x80, 0x26].\n   * @param {string} [options.revoked] - Timestamp of when the key has been\n   *   revoked, in RFC3339 format. If not present, the key itself is considered\n   *   not revoked. Note that this mechanism is slightly different than DID\n   *   Document key revocation, where a DID controller can revoke a key from\n   *   that DID by removing it from the DID Document.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.type = SUITE_ID;\n    const {publicKeyMultibase, privateKeyMultibase} = options;\n\n    if(!publicKeyMultibase) {\n      throw new TypeError('The \"publicKeyMultibase\" property is required.');\n    }\n\n    if(!publicKeyMultibase || !_isValidKeyHeader(\n      publicKeyMultibase, MULTICODEC_ED25519_PUB_HEADER)) {\n      throw new Error(\n        '\"publicKeyMultibase\" has invalid header bytes: ' +\n        `\"${publicKeyMultibase}\".`);\n    }\n\n    if(privateKeyMultibase && !_isValidKeyHeader(\n      privateKeyMultibase, MULTICODEC_ED25519_PRIV_HEADER)) {\n      throw new Error('\"privateKeyMultibase\" has invalid header bytes.');\n    }\n\n    // assign valid key values\n    this.publicKeyMultibase = publicKeyMultibase;\n    this.privateKeyMultibase = privateKeyMultibase;\n\n    // set key identifier if controller is provided\n    if(this.controller && !this.id) {\n      this.id = `${this.controller}#${this.fingerprint()}`;\n    }\n    // check that the passed in keyBytes are 32 bytes\n    (0,_validators_js__WEBPACK_IMPORTED_MODULE_2__.assertKeyBytes)({\n      bytes: this._publicKeyBuffer,\n      code: 'invalidPublicKeyLength',\n      expectedLength: 32\n    });\n  }\n\n  /**\n   * Creates an Ed25519 Key Pair from an existing serialized key pair.\n   *\n   * @param {object} options - Key pair options (see constructor).\n   * @example\n   * > const keyPair = await Ed25519VerificationKey2020.from({\n   * controller: 'did:ex:1234',\n   * type: 'Ed25519VerificationKey2020',\n   * publicKeyMultibase,\n   * privateKeyMultibase\n   * });\n   *\n   * @returns {Promise<Ed25519VerificationKey2020>} An Ed25519 Key Pair.\n   */\n  static async from(options) {\n    if(options.type === 'Ed25519VerificationKey2018') {\n      return Ed25519VerificationKey2020.fromEd25519VerificationKey2018(options);\n    }\n    if(options.type === 'JsonWebKey' || options.type === 'JsonWebKey2020') {\n      return Ed25519VerificationKey2020.fromJsonWebKey(options);\n    }\n    return new Ed25519VerificationKey2020(options);\n  }\n\n  /**\n   * Instance creation method for backwards compatibility with the\n   * `Ed25519VerificationKey2018` key suite.\n   *\n   * @see https://github.com/digitalbazaar/ed25519-verification-key-2018\n   * @typedef {object} Ed25519VerificationKey2018\n   * @param {Ed25519VerificationKey2018} keyPair - Ed25519 2018 suite key pair.\n   *\n   * @returns {Ed25519VerificationKey2020} - 2020 suite instance.\n   */\n  static fromEd25519VerificationKey2018({keyPair} = {}) {\n    const publicKeyMultibase = _encodeMbKey(\n      MULTICODEC_ED25519_PUB_HEADER, base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(keyPair.publicKeyBase58));\n    const keyPair2020 = new Ed25519VerificationKey2020({\n      id: keyPair.id,\n      controller: keyPair.controller,\n      publicKeyMultibase\n    });\n\n    if(keyPair.privateKeyBase58) {\n      keyPair2020.privateKeyMultibase = _encodeMbKey(\n        MULTICODEC_ED25519_PRIV_HEADER,\n        base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(keyPair.privateKeyBase58));\n    }\n\n    return keyPair2020;\n  }\n\n  /**\n   * Creates a key pair instance (public key only) from a JsonWebKey2020\n   * object.\n   *\n   * @see https://w3c-ccg.github.io/lds-jws2020/#json-web-key-2020\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.id - Key id.\n   * @param {string} options.type - Key suite type.\n   * @param {string} options.controller - Key controller.\n   * @param {object} options.publicKeyJwk - JWK object.\n   *\n   * @returns {Promise<Ed25519VerificationKey2020>} Resolves with key pair.\n   */\n  static fromJsonWebKey2020({id, type, controller, publicKeyJwk} = {}) {\n    if(type !== 'JsonWebKey2020') {\n      throw new TypeError(`Invalid key type: \"${type}\".`);\n    }\n    return Ed25519VerificationKey2020.fromJsonWebKey({\n      id, type, controller, publicKeyJwk\n    });\n  }\n\n  /**\n   * Creates a key pair instance (public key only) from a JsonWebKey object.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.id - Key id.\n   * @param {string} options.type - Key suite type.\n   * @param {string} options.controller - Key controller.\n   * @param {object} options.publicKeyJwk - JWK object.\n   *\n   * @returns {Promise<Ed25519VerificationKey2020>} Resolves with key pair.\n   */\n  static fromJsonWebKey({id, type, controller, publicKeyJwk} = {}) {\n    if(!(type === 'JsonWebKey' || type === 'JsonWebKey2020')) {\n      throw new TypeError(`Invalid key type: \"${type}\".`);\n    }\n    if(!publicKeyJwk) {\n      throw new TypeError('\"publicKeyJwk\" property is required.');\n    }\n    const {kty, crv} = publicKeyJwk;\n    if(kty !== 'OKP') {\n      throw new TypeError('\"kty\" is required to be \"OKP\".');\n    }\n    if(crv !== 'Ed25519') {\n      throw new TypeError('\"crv\" is required to be \"Ed25519\".');\n    }\n    const {x: publicKeyBase64Url} = publicKeyJwk;\n    const publicKeyMultibase = _encodeMbKey(\n      MULTICODEC_ED25519_PUB_HEADER,\n      base64url_universal__WEBPACK_IMPORTED_MODULE_1__.decode(publicKeyBase64Url));\n\n    return Ed25519VerificationKey2020.from({\n      id, controller, publicKeyMultibase\n    });\n  }\n\n  /**\n   * Generates a KeyPair with an optional deterministic seed.\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {Uint8Array} [options.seed] - A 32-byte array seed for a\n   *   deterministic key.\n   *\n   * @returns {Promise<Ed25519VerificationKey2020>} Resolves with generated\n   *   public/private key pair.\n   */\n  static async generate({seed, ...keyPairOptions} = {}) {\n    let keyObject;\n    if(seed) {\n      keyObject = await _ed25519_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].generateKeyPairFromSeed(seed);\n    } else {\n      keyObject = await _ed25519_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].generateKeyPair();\n    }\n    const publicKeyMultibase =\n      _encodeMbKey(MULTICODEC_ED25519_PUB_HEADER, keyObject.publicKey);\n\n    const privateKeyMultibase =\n      _encodeMbKey(MULTICODEC_ED25519_PRIV_HEADER, keyObject.secretKey);\n\n    return new Ed25519VerificationKey2020({\n      publicKeyMultibase,\n      privateKeyMultibase,\n      ...keyPairOptions\n    });\n  }\n\n  /**\n   * Creates an instance of Ed25519VerificationKey2020 from a key fingerprint.\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.fingerprint - Multibase encoded key fingerprint.\n   *\n   * @returns {Ed25519VerificationKey2020} Returns key pair instance (with\n   *   public key only).\n   */\n  static fromFingerprint({fingerprint} = {}) {\n    return new Ed25519VerificationKey2020({publicKeyMultibase: fingerprint});\n  }\n\n  /**\n   * @returns {Uint8Array} Public key bytes.\n   */\n  get _publicKeyBuffer() {\n    if(!this.publicKeyMultibase) {\n      return;\n    }\n    // remove multibase header\n    const publicKeyMulticodec =\n      base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(this.publicKeyMultibase.substr(1));\n    // remove multicodec header\n    const publicKeyBytes =\n      publicKeyMulticodec.slice(MULTICODEC_ED25519_PUB_HEADER.length);\n\n    return publicKeyBytes;\n  }\n\n  /**\n   * @returns {Uint8Array} Private key bytes.\n   */\n  get _privateKeyBuffer() {\n    if(!this.privateKeyMultibase) {\n      return;\n    }\n    // remove multibase header\n    const privateKeyMulticodec =\n      base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(this.privateKeyMultibase.substr(1));\n    // remove multicodec header\n    const privateKeyBytes =\n      privateKeyMulticodec.slice(MULTICODEC_ED25519_PRIV_HEADER.length);\n\n    return privateKeyBytes;\n  }\n\n  /**\n   * Generates and returns a multiformats encoded\n   * ed25519 public key fingerprint (for use with cryptonyms, for example).\n   *\n   * @see https://github.com/multiformats/multicodec\n   *\n   * @returns {string} The fingerprint.\n   */\n  fingerprint() {\n    return this.publicKeyMultibase;\n  }\n\n  /**\n   * Exports the serialized representation of the KeyPair\n   * and other information that JSON-LD Signatures can use to form a proof.\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {boolean} [options.publicKey] - Export public key material?\n   * @param {boolean} [options.privateKey] - Export private key material?\n   * @param {boolean} [options.includeContext] - Include JSON-LD context?\n   *\n   * @returns {object} A plain js object that's ready for serialization\n   *   (to JSON, etc), for use in DIDs, Linked Data Proofs, etc.\n   */\n  export({publicKey = false, privateKey = false, includeContext = false} = {}) {\n    if(!(publicKey || privateKey)) {\n      throw new TypeError(\n        'Export requires specifying either \"publicKey\" or \"privateKey\".');\n    }\n    const exportedKey = {\n      id: this.id,\n      type: this.type\n    };\n    if(includeContext) {\n      exportedKey['@context'] = Ed25519VerificationKey2020.SUITE_CONTEXT;\n    }\n    if(this.controller) {\n      exportedKey.controller = this.controller;\n    }\n    if(publicKey) {\n      exportedKey.publicKeyMultibase = this.publicKeyMultibase;\n    }\n    if(privateKey) {\n      exportedKey.privateKeyMultibase = this.privateKeyMultibase;\n    }\n    if(this.revoked) {\n      exportedKey.revoked = this.revoked;\n    }\n    return exportedKey;\n  }\n\n  /**\n   * Returns the JWK representation of this key pair.\n   *\n   * @see https://datatracker.ietf.org/doc/html/rfc8037\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {boolean} [options.publicKey] - Include public key?\n   * @param {boolean} [options.privateKey] - Include private key?\n   *\n   * @returns {{kty: string, crv: string, x: string, d: string}} JWK\n   *   representation.\n   */\n  toJwk({publicKey = true, privateKey = false} = {}) {\n    if(!(publicKey || privateKey)) {\n      throw TypeError('Either a \"publicKey\" or a \"privateKey\" is required.');\n    }\n    const jwk = {crv: 'Ed25519', kty: 'OKP'};\n    if(publicKey) {\n      jwk.x = base64url_universal__WEBPACK_IMPORTED_MODULE_1__.encode(this._publicKeyBuffer);\n    }\n    if(privateKey) {\n      jwk.d = base64url_universal__WEBPACK_IMPORTED_MODULE_1__.encode(this._privateKeyBuffer);\n    }\n    return jwk;\n  }\n\n  /**\n   * @see https://datatracker.ietf.org/doc/html/rfc8037#appendix-A.3\n   *\n   * @returns {Promise<string>} JWK Thumbprint.\n   */\n  async jwkThumbprint() {\n    const publicKey = base64url_universal__WEBPACK_IMPORTED_MODULE_1__.encode(this._publicKeyBuffer);\n    const serialized = `{\"crv\":\"Ed25519\",\"kty\":\"OKP\",\"x\":\"${publicKey}\"}`;\n    const data = new TextEncoder().encode(serialized);\n    return base64url_universal__WEBPACK_IMPORTED_MODULE_1__.encode(\n      new Uint8Array(await _ed25519_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sha256digest({data})));\n  }\n\n  /**\n   * Returns the JsonWebKey representation of this key pair.\n   *\n   * @returns {Promise<object>} JsonWebKey representation.\n   */\n  async toJsonWebKey() {\n    return {\n      '@context': 'https://w3id.org/security/jwk/v1',\n      id: this.controller + '#' + await this.jwkThumbprint(),\n      type: 'JsonWebKey',\n      controller: this.controller,\n      publicKeyJwk: this.toJwk({publicKey: true})\n    };\n  }\n\n  /**\n   * Returns the JsonWebKey2020 representation of this key pair.\n   *\n   * @see https://w3c-ccg.github.io/lds-jws2020/#json-web-key-2020\n   *\n   * @returns {Promise<object>} JsonWebKey2020 representation.\n   */\n  async toJsonWebKey2020() {\n    return {\n      '@context': 'https://w3id.org/security/jws/v1',\n      id: this.controller + '#' + await this.jwkThumbprint(),\n      type: 'JsonWebKey2020',\n      controller: this.controller,\n      publicKeyJwk: this.toJwk({publicKey: true})\n    };\n  }\n\n  /**\n   * Tests whether the fingerprint was generated from a given key pair.\n   *\n   * @example\n   * > edKeyPair.verifyFingerprint({fingerprint: 'z6Mk2S2Q...6MkaFJewa'});\n   * {valid: true};\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.fingerprint - A public key fingerprint.\n   *\n   * @returns {{valid: boolean, error: *}} Result of verification.\n   */\n  verifyFingerprint({fingerprint} = {}) {\n    // fingerprint should have multibase base58-btc header\n    if(!(typeof fingerprint === 'string' &&\n      fingerprint[0] === MULTIBASE_BASE58BTC_HEADER)) {\n      return {\n        error: new Error('\"fingerprint\" must be a multibase encoded string.'),\n        valid: false\n      };\n    }\n    let fingerprintBuffer;\n    try {\n      fingerprintBuffer = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(fingerprint.substr(1));\n      if(!fingerprintBuffer) {\n        throw new TypeError('Invalid encoding of fingerprint.');\n      }\n    } catch(e) {\n      return {error: e, valid: false};\n    }\n\n    const buffersEqual = _isEqualBuffer(this._publicKeyBuffer,\n      fingerprintBuffer.slice(2));\n\n    // validate the first two multicodec bytes\n    const valid =\n      fingerprintBuffer[0] === MULTICODEC_ED25519_PUB_HEADER[0] &&\n      fingerprintBuffer[1] === MULTICODEC_ED25519_PUB_HEADER[1] &&\n      buffersEqual;\n    if(!valid) {\n      return {\n        error: new Error('The fingerprint does not match the public key.'),\n        valid: false\n      };\n    }\n    return {valid};\n  }\n\n  signer() {\n    const privateKeyBuffer = this._privateKeyBuffer;\n\n    return {\n      async sign({data}) {\n        if(!privateKeyBuffer) {\n          throw new Error('A private key is not available for signing.');\n        }\n        return _ed25519_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].sign(privateKeyBuffer, data);\n      },\n      id: this.id\n    };\n  }\n\n  verifier() {\n    const publicKeyBuffer = this._publicKeyBuffer;\n\n    return {\n      async verify({data, signature}) {\n        if(!publicKeyBuffer) {\n          throw new Error('A public key is not available for verifying.');\n        }\n        return _ed25519_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].verify(publicKeyBuffer, data, signature);\n      },\n      id: this.id\n    };\n  }\n}\n// Used by CryptoLD harness for dispatching.\nEd25519VerificationKey2020.suite = SUITE_ID;\n// Used by CryptoLD harness's fromKeyId() method.\nEd25519VerificationKey2020.SUITE_CONTEXT =\n  'https://w3id.org/security/suites/ed25519-2020/v1';\n\n// check to ensure that two buffers are byte-for-byte equal\n// WARNING: this function must only be used to check public information as\n//          timing attacks can be used for non-constant time checks on\n//          secret information.\nfunction _isEqualBuffer(buf1, buf2) {\n  if(buf1.length !== buf2.length) {\n    return false;\n  }\n  for(let i = 0; i < buf1.length; i++) {\n    if(buf1[i] !== buf2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// check a multibase key for an expected header\nfunction _isValidKeyHeader(multibaseKey, expectedHeader) {\n  if(!(typeof multibaseKey === 'string' &&\n    multibaseKey[0] === MULTIBASE_BASE58BTC_HEADER)) {\n    return false;\n  }\n\n  const keyBytes = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(multibaseKey.slice(1));\n  return expectedHeader.every((val, i) => keyBytes[i] === val);\n}\n\n// encode a multibase base58-btc multicodec key\nfunction _encodeMbKey(header, key) {\n  const mbKey = new Uint8Array(header.length + key.length);\n\n  mbKey.set(header);\n  mbKey.set(key, header.length);\n\n  return MULTIBASE_BASE58BTC_HEADER + base58_universal__WEBPACK_IMPORTED_MODULE_0__.encode(mbKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS12ZXJpZmljYXRpb24ta2V5LTIwMjAvbGliL0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUM4QztBQUNHO0FBQ0Y7QUFDWjtBQUNDOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTyx5Q0FBeUMsZ0RBQVM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxXQUFXLHlDQUF5Qzs7QUFFcEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCLEdBQUcsbUJBQW1CO0FBQ3pEO0FBQ0E7QUFDQSxJQUFJLDhEQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsZUFBZSxxQ0FBcUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixhQUFhLDRCQUE0QjtBQUN6QztBQUNBLGVBQWUsNEJBQTRCO0FBQzNDO0FBQ0EseUNBQXlDLFNBQVMsSUFBSTtBQUN0RDtBQUNBLHFDQUFxQyxvREFBZ0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0RBQWdCO0FBQ3hCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0EsNkJBQTZCLG9DQUFvQyxJQUFJO0FBQ3JFO0FBQ0EsZ0RBQWdELEtBQUs7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLHFDQUFxQztBQUNwRDtBQUNBLHlCQUF5QixvQ0FBb0MsSUFBSTtBQUNqRTtBQUNBLGdEQUFnRCxLQUFLO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsdUJBQXVCO0FBQ2xDO0FBQ0E7QUFDQSxNQUFNLHVEQUFnQjs7QUFFdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQyxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQSx5QkFBeUIseUJBQXlCLElBQUk7QUFDdEQ7QUFDQTtBQUNBLHdCQUF3QixtREFBTztBQUMvQixNQUFNO0FBQ04sd0JBQXdCLG1EQUFPO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLDRCQUE0QjtBQUMzQztBQUNBO0FBQ0EsMEJBQTBCLGFBQWEsSUFBSTtBQUMzQywyQ0FBMkMsZ0NBQWdDO0FBQzNFOztBQUVBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxvREFBZ0I7QUFDdEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFnQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQyxhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUztBQUN0QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsVUFBVSwrREFBK0QsSUFBSTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRLFdBQVc7QUFDaEMsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUztBQUN0QjtBQUNBLGdCQUFnQixpREFBaUQ7QUFDakU7QUFDQTtBQUNBLFNBQVMsc0NBQXNDLElBQUk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsY0FBYyx1REFBZ0I7QUFDOUI7QUFDQTtBQUNBLGNBQWMsdURBQWdCO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0Esc0JBQXNCLHVEQUFnQjtBQUN0Qyx5QkFBeUIsbUNBQW1DLFVBQVUsRUFBRTtBQUN4RTtBQUNBLFdBQVcsdURBQWdCO0FBQzNCLDJCQUEyQixtREFBTyxlQUFlLEtBQUs7QUFDdEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdCQUFnQjtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG9DQUFvQztBQUN4RSxNQUFNO0FBQ047QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsZ0JBQWdCLDJCQUEyQjtBQUMzQztBQUNBLHFCQUFxQixhQUFhLElBQUk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsS0FBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1EQUFPO0FBQ3RCLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtREFBTztBQUN0QixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsaUJBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLG9EQUFnQjtBQUNuQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHNDQUFzQyxvREFBZ0I7QUFDdEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS12ZXJpZmljYXRpb24ta2V5LTIwMjAvbGliL0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwLmpzPzRlYmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyNCBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQgKiBhcyBiYXNlNThidGMgZnJvbSAnYmFzZTU4LXVuaXZlcnNhbCc7XG5pbXBvcnQgKiBhcyBiYXNlNjR1cmwgZnJvbSAnYmFzZTY0dXJsLXVuaXZlcnNhbCc7XG5pbXBvcnQge2Fzc2VydEtleUJ5dGVzfSBmcm9tICcuL3ZhbGlkYXRvcnMuanMnO1xuaW1wb3J0IGVkMjU1MTkgZnJvbSAnLi9lZDI1NTE5LmpzJztcbmltcG9ydCB7TERLZXlQYWlyfSBmcm9tICdjcnlwdG8tbGQnO1xuXG5jb25zdCBTVUlURV9JRCA9ICdFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCc7XG4vLyBtdWx0aWJhc2UgYmFzZTU4LWJ0YyBoZWFkZXJcbmNvbnN0IE1VTFRJQkFTRV9CQVNFNThCVENfSEVBREVSID0gJ3onO1xuLy8gbXVsdGljb2RlYyBlZDI1NTE5LXB1YiBoZWFkZXIgYXMgdmFyaW50XG5jb25zdCBNVUxUSUNPREVDX0VEMjU1MTlfUFVCX0hFQURFUiA9IG5ldyBVaW50OEFycmF5KFsweGVkLCAweDAxXSk7XG4vLyBtdWx0aWNvZGVjIGVkMjU1MTktcHJpdiBoZWFkZXIgYXMgdmFyaW50XG5jb25zdCBNVUxUSUNPREVDX0VEMjU1MTlfUFJJVl9IRUFERVIgPSBuZXcgVWludDhBcnJheShbMHg4MCwgMHgyNl0pO1xuXG5leHBvcnQgY2xhc3MgRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAgZXh0ZW5kcyBMREtleVBhaXIge1xuICAvKipcbiAgICogQW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIEVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwIHNwZWMsIGZvciB1c2Ugd2l0aFxuICAgKiBMaW5rZWQgRGF0YSBQcm9vZnMuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93M2MtY2NnLmdpdGh1Yi5pby9sZHMtZWQyNTUxOS0yMDIwLyNlZDI1NTE5dmVyaWZpY2F0aW9ua2V5MjAyMFxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kaWdpdGFsYmF6YWFyL2pzb25sZC1zaWduYXR1cmVzXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5jb250cm9sbGVyIC0gQ29udHJvbGxlciBESUQgb3IgZG9jdW1lbnQgdXJsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuaWRdIC0gVGhlIGtleSBJRC4gSWYgbm90IHByb3ZpZGVkLCB3aWxsIGJlXG4gICAqICAgY29tcG9zZWQgb2YgY29udHJvbGxlciBhbmQga2V5IGZpbmdlcnByaW50IGFzIGhhc2ggZnJhZ21lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnB1YmxpY0tleU11bHRpYmFzZSAtIE11bHRpYmFzZSBlbmNvZGVkIHB1YmxpYyBrZXlcbiAgICogICB3aXRoIGEgbXVsdGljb2RlYyBlZDI1NTE5LXB1YiB2YXJpbnQgaGVhZGVyIFsweGVkLCAweDAxXS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnByaXZhdGVLZXlNdWx0aWJhc2VdIC0gTXVsdGliYXNlIHByaXZhdGUga2V5XG4gICAqICAgd2l0aCBhIG11bHRpY29kZWMgZWQyNTUxOS1wcml2IHZhcmludCBoZWFkZXIgWzB4ODAsIDB4MjZdLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucmV2b2tlZF0gLSBUaW1lc3RhbXAgb2Ygd2hlbiB0aGUga2V5IGhhcyBiZWVuXG4gICAqICAgcmV2b2tlZCwgaW4gUkZDMzMzOSBmb3JtYXQuIElmIG5vdCBwcmVzZW50LCB0aGUga2V5IGl0c2VsZiBpcyBjb25zaWRlcmVkXG4gICAqICAgbm90IHJldm9rZWQuIE5vdGUgdGhhdCB0aGlzIG1lY2hhbmlzbSBpcyBzbGlnaHRseSBkaWZmZXJlbnQgdGhhbiBESURcbiAgICogICBEb2N1bWVudCBrZXkgcmV2b2NhdGlvbiwgd2hlcmUgYSBESUQgY29udHJvbGxlciBjYW4gcmV2b2tlIGEga2V5IGZyb21cbiAgICogICB0aGF0IERJRCBieSByZW1vdmluZyBpdCBmcm9tIHRoZSBESUQgRG9jdW1lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihvcHRpb25zKTtcbiAgICB0aGlzLnR5cGUgPSBTVUlURV9JRDtcbiAgICBjb25zdCB7cHVibGljS2V5TXVsdGliYXNlLCBwcml2YXRlS2V5TXVsdGliYXNlfSA9IG9wdGlvbnM7XG5cbiAgICBpZighcHVibGljS2V5TXVsdGliYXNlKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJwdWJsaWNLZXlNdWx0aWJhc2VcIiBwcm9wZXJ0eSBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG5cbiAgICBpZighcHVibGljS2V5TXVsdGliYXNlIHx8ICFfaXNWYWxpZEtleUhlYWRlcihcbiAgICAgIHB1YmxpY0tleU11bHRpYmFzZSwgTVVMVElDT0RFQ19FRDI1NTE5X1BVQl9IRUFERVIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdcInB1YmxpY0tleU11bHRpYmFzZVwiIGhhcyBpbnZhbGlkIGhlYWRlciBieXRlczogJyArXG4gICAgICAgIGBcIiR7cHVibGljS2V5TXVsdGliYXNlfVwiLmApO1xuICAgIH1cblxuICAgIGlmKHByaXZhdGVLZXlNdWx0aWJhc2UgJiYgIV9pc1ZhbGlkS2V5SGVhZGVyKFxuICAgICAgcHJpdmF0ZUtleU11bHRpYmFzZSwgTVVMVElDT0RFQ19FRDI1NTE5X1BSSVZfSEVBREVSKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcInByaXZhdGVLZXlNdWx0aWJhc2VcIiBoYXMgaW52YWxpZCBoZWFkZXIgYnl0ZXMuJyk7XG4gICAgfVxuXG4gICAgLy8gYXNzaWduIHZhbGlkIGtleSB2YWx1ZXNcbiAgICB0aGlzLnB1YmxpY0tleU11bHRpYmFzZSA9IHB1YmxpY0tleU11bHRpYmFzZTtcbiAgICB0aGlzLnByaXZhdGVLZXlNdWx0aWJhc2UgPSBwcml2YXRlS2V5TXVsdGliYXNlO1xuXG4gICAgLy8gc2V0IGtleSBpZGVudGlmaWVyIGlmIGNvbnRyb2xsZXIgaXMgcHJvdmlkZWRcbiAgICBpZih0aGlzLmNvbnRyb2xsZXIgJiYgIXRoaXMuaWQpIHtcbiAgICAgIHRoaXMuaWQgPSBgJHt0aGlzLmNvbnRyb2xsZXJ9IyR7dGhpcy5maW5nZXJwcmludCgpfWA7XG4gICAgfVxuICAgIC8vIGNoZWNrIHRoYXQgdGhlIHBhc3NlZCBpbiBrZXlCeXRlcyBhcmUgMzIgYnl0ZXNcbiAgICBhc3NlcnRLZXlCeXRlcyh7XG4gICAgICBieXRlczogdGhpcy5fcHVibGljS2V5QnVmZmVyLFxuICAgICAgY29kZTogJ2ludmFsaWRQdWJsaWNLZXlMZW5ndGgnLFxuICAgICAgZXhwZWN0ZWRMZW5ndGg6IDMyXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBFZDI1NTE5IEtleSBQYWlyIGZyb20gYW4gZXhpc3Rpbmcgc2VyaWFsaXplZCBrZXkgcGFpci5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBLZXkgcGFpciBvcHRpb25zIChzZWUgY29uc3RydWN0b3IpLlxuICAgKiBAZXhhbXBsZVxuICAgKiA+IGNvbnN0IGtleVBhaXIgPSBhd2FpdCBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMC5mcm9tKHtcbiAgICogY29udHJvbGxlcjogJ2RpZDpleDoxMjM0JyxcbiAgICogdHlwZTogJ0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwJyxcbiAgICogcHVibGljS2V5TXVsdGliYXNlLFxuICAgKiBwcml2YXRlS2V5TXVsdGliYXNlXG4gICAqIH0pO1xuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMD59IEFuIEVkMjU1MTkgS2V5IFBhaXIuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbShvcHRpb25zKSB7XG4gICAgaWYob3B0aW9ucy50eXBlID09PSAnRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMTgnKSB7XG4gICAgICByZXR1cm4gRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAuZnJvbUVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDE4KG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZihvcHRpb25zLnR5cGUgPT09ICdKc29uV2ViS2V5JyB8fCBvcHRpb25zLnR5cGUgPT09ICdKc29uV2ViS2V5MjAyMCcpIHtcbiAgICAgIHJldHVybiBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMC5mcm9tSnNvbldlYktleShvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMChvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnN0YW5jZSBjcmVhdGlvbiBtZXRob2QgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggdGhlXG4gICAqIGBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOGAga2V5IHN1aXRlLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kaWdpdGFsYmF6YWFyL2VkMjU1MTktdmVyaWZpY2F0aW9uLWtleS0yMDE4XG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IEVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDE4XG4gICAqIEBwYXJhbSB7RWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMTh9IGtleVBhaXIgLSBFZDI1NTE5IDIwMTggc3VpdGUga2V5IHBhaXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMH0gLSAyMDIwIHN1aXRlIGluc3RhbmNlLlxuICAgKi9cbiAgc3RhdGljIGZyb21FZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCh7a2V5UGFpcn0gPSB7fSkge1xuICAgIGNvbnN0IHB1YmxpY0tleU11bHRpYmFzZSA9IF9lbmNvZGVNYktleShcbiAgICAgIE1VTFRJQ09ERUNfRUQyNTUxOV9QVUJfSEVBREVSLCBiYXNlNThidGMuZGVjb2RlKGtleVBhaXIucHVibGljS2V5QmFzZTU4KSk7XG4gICAgY29uc3Qga2V5UGFpcjIwMjAgPSBuZXcgRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAoe1xuICAgICAgaWQ6IGtleVBhaXIuaWQsXG4gICAgICBjb250cm9sbGVyOiBrZXlQYWlyLmNvbnRyb2xsZXIsXG4gICAgICBwdWJsaWNLZXlNdWx0aWJhc2VcbiAgICB9KTtcblxuICAgIGlmKGtleVBhaXIucHJpdmF0ZUtleUJhc2U1OCkge1xuICAgICAga2V5UGFpcjIwMjAucHJpdmF0ZUtleU11bHRpYmFzZSA9IF9lbmNvZGVNYktleShcbiAgICAgICAgTVVMVElDT0RFQ19FRDI1NTE5X1BSSVZfSEVBREVSLFxuICAgICAgICBiYXNlNThidGMuZGVjb2RlKGtleVBhaXIucHJpdmF0ZUtleUJhc2U1OCkpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlQYWlyMjAyMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEga2V5IHBhaXIgaW5zdGFuY2UgKHB1YmxpYyBrZXkgb25seSkgZnJvbSBhIEpzb25XZWJLZXkyMDIwXG4gICAqIG9iamVjdC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL3czYy1jY2cuZ2l0aHViLmlvL2xkcy1qd3MyMDIwLyNqc29uLXdlYi1rZXktMjAyMFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuaWQgLSBLZXkgaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnR5cGUgLSBLZXkgc3VpdGUgdHlwZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuY29udHJvbGxlciAtIEtleSBjb250cm9sbGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5wdWJsaWNLZXlKd2sgLSBKV0sgb2JqZWN0LlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMD59IFJlc29sdmVzIHdpdGgga2V5IHBhaXIuXG4gICAqL1xuICBzdGF0aWMgZnJvbUpzb25XZWJLZXkyMDIwKHtpZCwgdHlwZSwgY29udHJvbGxlciwgcHVibGljS2V5SndrfSA9IHt9KSB7XG4gICAgaWYodHlwZSAhPT0gJ0pzb25XZWJLZXkyMDIwJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBrZXkgdHlwZTogXCIke3R5cGV9XCIuYCk7XG4gICAgfVxuICAgIHJldHVybiBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMC5mcm9tSnNvbldlYktleSh7XG4gICAgICBpZCwgdHlwZSwgY29udHJvbGxlciwgcHVibGljS2V5SndrXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGtleSBwYWlyIGluc3RhbmNlIChwdWJsaWMga2V5IG9ubHkpIGZyb20gYSBKc29uV2ViS2V5IG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmlkIC0gS2V5IGlkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy50eXBlIC0gS2V5IHN1aXRlIHR5cGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNvbnRyb2xsZXIgLSBLZXkgY29udHJvbGxlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMucHVibGljS2V5SndrIC0gSldLIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjA+fSBSZXNvbHZlcyB3aXRoIGtleSBwYWlyLlxuICAgKi9cbiAgc3RhdGljIGZyb21Kc29uV2ViS2V5KHtpZCwgdHlwZSwgY29udHJvbGxlciwgcHVibGljS2V5SndrfSA9IHt9KSB7XG4gICAgaWYoISh0eXBlID09PSAnSnNvbldlYktleScgfHwgdHlwZSA9PT0gJ0pzb25XZWJLZXkyMDIwJykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQga2V5IHR5cGU6IFwiJHt0eXBlfVwiLmApO1xuICAgIH1cbiAgICBpZighcHVibGljS2V5SndrKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInB1YmxpY0tleUp3a1wiIHByb3BlcnR5IGlzIHJlcXVpcmVkLicpO1xuICAgIH1cbiAgICBjb25zdCB7a3R5LCBjcnZ9ID0gcHVibGljS2V5SndrO1xuICAgIGlmKGt0eSAhPT0gJ09LUCcpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wia3R5XCIgaXMgcmVxdWlyZWQgdG8gYmUgXCJPS1BcIi4nKTtcbiAgICB9XG4gICAgaWYoY3J2ICE9PSAnRWQyNTUxOScpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY3J2XCIgaXMgcmVxdWlyZWQgdG8gYmUgXCJFZDI1NTE5XCIuJyk7XG4gICAgfVxuICAgIGNvbnN0IHt4OiBwdWJsaWNLZXlCYXNlNjRVcmx9ID0gcHVibGljS2V5SndrO1xuICAgIGNvbnN0IHB1YmxpY0tleU11bHRpYmFzZSA9IF9lbmNvZGVNYktleShcbiAgICAgIE1VTFRJQ09ERUNfRUQyNTUxOV9QVUJfSEVBREVSLFxuICAgICAgYmFzZTY0dXJsLmRlY29kZShwdWJsaWNLZXlCYXNlNjRVcmwpKTtcblxuICAgIHJldHVybiBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMC5mcm9tKHtcbiAgICAgIGlkLCBjb250cm9sbGVyLCBwdWJsaWNLZXlNdWx0aWJhc2VcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBLZXlQYWlyIHdpdGggYW4gb3B0aW9uYWwgZGV0ZXJtaW5pc3RpYyBzZWVkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IFtvcHRpb25zLnNlZWRdIC0gQSAzMi1ieXRlIGFycmF5IHNlZWQgZm9yIGFcbiAgICogICBkZXRlcm1pbmlzdGljIGtleS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjA+fSBSZXNvbHZlcyB3aXRoIGdlbmVyYXRlZFxuICAgKiAgIHB1YmxpYy9wcml2YXRlIGtleSBwYWlyLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlKHtzZWVkLCAuLi5rZXlQYWlyT3B0aW9uc30gPSB7fSkge1xuICAgIGxldCBrZXlPYmplY3Q7XG4gICAgaWYoc2VlZCkge1xuICAgICAga2V5T2JqZWN0ID0gYXdhaXQgZWQyNTUxOS5nZW5lcmF0ZUtleVBhaXJGcm9tU2VlZChzZWVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5T2JqZWN0ID0gYXdhaXQgZWQyNTUxOS5nZW5lcmF0ZUtleVBhaXIoKTtcbiAgICB9XG4gICAgY29uc3QgcHVibGljS2V5TXVsdGliYXNlID1cbiAgICAgIF9lbmNvZGVNYktleShNVUxUSUNPREVDX0VEMjU1MTlfUFVCX0hFQURFUiwga2V5T2JqZWN0LnB1YmxpY0tleSk7XG5cbiAgICBjb25zdCBwcml2YXRlS2V5TXVsdGliYXNlID1cbiAgICAgIF9lbmNvZGVNYktleShNVUxUSUNPREVDX0VEMjU1MTlfUFJJVl9IRUFERVIsIGtleU9iamVjdC5zZWNyZXRLZXkpO1xuXG4gICAgcmV0dXJuIG5ldyBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCh7XG4gICAgICBwdWJsaWNLZXlNdWx0aWJhc2UsXG4gICAgICBwcml2YXRlS2V5TXVsdGliYXNlLFxuICAgICAgLi4ua2V5UGFpck9wdGlvbnNcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwIGZyb20gYSBrZXkgZmluZ2VycHJpbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5maW5nZXJwcmludCAtIE11bHRpYmFzZSBlbmNvZGVkIGtleSBmaW5nZXJwcmludC5cbiAgICpcbiAgICogQHJldHVybnMge0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwfSBSZXR1cm5zIGtleSBwYWlyIGluc3RhbmNlICh3aXRoXG4gICAqICAgcHVibGljIGtleSBvbmx5KS5cbiAgICovXG4gIHN0YXRpYyBmcm9tRmluZ2VycHJpbnQoe2ZpbmdlcnByaW50fSA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCh7cHVibGljS2V5TXVsdGliYXNlOiBmaW5nZXJwcmludH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBQdWJsaWMga2V5IGJ5dGVzLlxuICAgKi9cbiAgZ2V0IF9wdWJsaWNLZXlCdWZmZXIoKSB7XG4gICAgaWYoIXRoaXMucHVibGljS2V5TXVsdGliYXNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHJlbW92ZSBtdWx0aWJhc2UgaGVhZGVyXG4gICAgY29uc3QgcHVibGljS2V5TXVsdGljb2RlYyA9XG4gICAgICBiYXNlNThidGMuZGVjb2RlKHRoaXMucHVibGljS2V5TXVsdGliYXNlLnN1YnN0cigxKSk7XG4gICAgLy8gcmVtb3ZlIG11bHRpY29kZWMgaGVhZGVyXG4gICAgY29uc3QgcHVibGljS2V5Qnl0ZXMgPVxuICAgICAgcHVibGljS2V5TXVsdGljb2RlYy5zbGljZShNVUxUSUNPREVDX0VEMjU1MTlfUFVCX0hFQURFUi5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHB1YmxpY0tleUJ5dGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBQcml2YXRlIGtleSBieXRlcy5cbiAgICovXG4gIGdldCBfcHJpdmF0ZUtleUJ1ZmZlcigpIHtcbiAgICBpZighdGhpcy5wcml2YXRlS2V5TXVsdGliYXNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHJlbW92ZSBtdWx0aWJhc2UgaGVhZGVyXG4gICAgY29uc3QgcHJpdmF0ZUtleU11bHRpY29kZWMgPVxuICAgICAgYmFzZTU4YnRjLmRlY29kZSh0aGlzLnByaXZhdGVLZXlNdWx0aWJhc2Uuc3Vic3RyKDEpKTtcbiAgICAvLyByZW1vdmUgbXVsdGljb2RlYyBoZWFkZXJcbiAgICBjb25zdCBwcml2YXRlS2V5Qnl0ZXMgPVxuICAgICAgcHJpdmF0ZUtleU11bHRpY29kZWMuc2xpY2UoTVVMVElDT0RFQ19FRDI1NTE5X1BSSVZfSEVBREVSLmxlbmd0aCk7XG5cbiAgICByZXR1cm4gcHJpdmF0ZUtleUJ5dGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIG11bHRpZm9ybWF0cyBlbmNvZGVkXG4gICAqIGVkMjU1MTkgcHVibGljIGtleSBmaW5nZXJwcmludCAoZm9yIHVzZSB3aXRoIGNyeXB0b255bXMsIGZvciBleGFtcGxlKS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbXVsdGlmb3JtYXRzL211bHRpY29kZWNcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGZpbmdlcnByaW50LlxuICAgKi9cbiAgZmluZ2VycHJpbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHVibGljS2V5TXVsdGliYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydHMgdGhlIHNlcmlhbGl6ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIEtleVBhaXJcbiAgICogYW5kIG90aGVyIGluZm9ybWF0aW9uIHRoYXQgSlNPTi1MRCBTaWduYXR1cmVzIGNhbiB1c2UgdG8gZm9ybSBhIHByb29mLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnB1YmxpY0tleV0gLSBFeHBvcnQgcHVibGljIGtleSBtYXRlcmlhbD9cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wcml2YXRlS2V5XSAtIEV4cG9ydCBwcml2YXRlIGtleSBtYXRlcmlhbD9cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pbmNsdWRlQ29udGV4dF0gLSBJbmNsdWRlIEpTT04tTEQgY29udGV4dD9cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gQSBwbGFpbiBqcyBvYmplY3QgdGhhdCdzIHJlYWR5IGZvciBzZXJpYWxpemF0aW9uXG4gICAqICAgKHRvIEpTT04sIGV0YyksIGZvciB1c2UgaW4gRElEcywgTGlua2VkIERhdGEgUHJvb2ZzLCBldGMuXG4gICAqL1xuICBleHBvcnQoe3B1YmxpY0tleSA9IGZhbHNlLCBwcml2YXRlS2V5ID0gZmFsc2UsIGluY2x1ZGVDb250ZXh0ID0gZmFsc2V9ID0ge30pIHtcbiAgICBpZighKHB1YmxpY0tleSB8fCBwcml2YXRlS2V5KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0V4cG9ydCByZXF1aXJlcyBzcGVjaWZ5aW5nIGVpdGhlciBcInB1YmxpY0tleVwiIG9yIFwicHJpdmF0ZUtleVwiLicpO1xuICAgIH1cbiAgICBjb25zdCBleHBvcnRlZEtleSA9IHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdHlwZTogdGhpcy50eXBlXG4gICAgfTtcbiAgICBpZihpbmNsdWRlQ29udGV4dCkge1xuICAgICAgZXhwb3J0ZWRLZXlbJ0Bjb250ZXh0J10gPSBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMC5TVUlURV9DT05URVhUO1xuICAgIH1cbiAgICBpZih0aGlzLmNvbnRyb2xsZXIpIHtcbiAgICAgIGV4cG9ydGVkS2V5LmNvbnRyb2xsZXIgPSB0aGlzLmNvbnRyb2xsZXI7XG4gICAgfVxuICAgIGlmKHB1YmxpY0tleSkge1xuICAgICAgZXhwb3J0ZWRLZXkucHVibGljS2V5TXVsdGliYXNlID0gdGhpcy5wdWJsaWNLZXlNdWx0aWJhc2U7XG4gICAgfVxuICAgIGlmKHByaXZhdGVLZXkpIHtcbiAgICAgIGV4cG9ydGVkS2V5LnByaXZhdGVLZXlNdWx0aWJhc2UgPSB0aGlzLnByaXZhdGVLZXlNdWx0aWJhc2U7XG4gICAgfVxuICAgIGlmKHRoaXMucmV2b2tlZCkge1xuICAgICAgZXhwb3J0ZWRLZXkucmV2b2tlZCA9IHRoaXMucmV2b2tlZDtcbiAgICB9XG4gICAgcmV0dXJuIGV4cG9ydGVkS2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEpXSyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGtleSBwYWlyLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjODAzN1xuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnB1YmxpY0tleV0gLSBJbmNsdWRlIHB1YmxpYyBrZXk/XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucHJpdmF0ZUtleV0gLSBJbmNsdWRlIHByaXZhdGUga2V5P1xuICAgKlxuICAgKiBAcmV0dXJucyB7e2t0eTogc3RyaW5nLCBjcnY6IHN0cmluZywgeDogc3RyaW5nLCBkOiBzdHJpbmd9fSBKV0tcbiAgICogICByZXByZXNlbnRhdGlvbi5cbiAgICovXG4gIHRvSndrKHtwdWJsaWNLZXkgPSB0cnVlLCBwcml2YXRlS2V5ID0gZmFsc2V9ID0ge30pIHtcbiAgICBpZighKHB1YmxpY0tleSB8fCBwcml2YXRlS2V5KSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdFaXRoZXIgYSBcInB1YmxpY0tleVwiIG9yIGEgXCJwcml2YXRlS2V5XCIgaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIGNvbnN0IGp3ayA9IHtjcnY6ICdFZDI1NTE5Jywga3R5OiAnT0tQJ307XG4gICAgaWYocHVibGljS2V5KSB7XG4gICAgICBqd2sueCA9IGJhc2U2NHVybC5lbmNvZGUodGhpcy5fcHVibGljS2V5QnVmZmVyKTtcbiAgICB9XG4gICAgaWYocHJpdmF0ZUtleSkge1xuICAgICAgandrLmQgPSBiYXNlNjR1cmwuZW5jb2RlKHRoaXMuX3ByaXZhdGVLZXlCdWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gandrO1xuICB9XG5cbiAgLyoqXG4gICAqIEBzZWUgaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM4MDM3I2FwcGVuZGl4LUEuM1xuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBKV0sgVGh1bWJwcmludC5cbiAgICovXG4gIGFzeW5jIGp3a1RodW1icHJpbnQoKSB7XG4gICAgY29uc3QgcHVibGljS2V5ID0gYmFzZTY0dXJsLmVuY29kZSh0aGlzLl9wdWJsaWNLZXlCdWZmZXIpO1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBge1wiY3J2XCI6XCJFZDI1NTE5XCIsXCJrdHlcIjpcIk9LUFwiLFwieFwiOlwiJHtwdWJsaWNLZXl9XCJ9YDtcbiAgICBjb25zdCBkYXRhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlcmlhbGl6ZWQpO1xuICAgIHJldHVybiBiYXNlNjR1cmwuZW5jb2RlKFxuICAgICAgbmV3IFVpbnQ4QXJyYXkoYXdhaXQgZWQyNTUxOS5zaGEyNTZkaWdlc3Qoe2RhdGF9KSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEpzb25XZWJLZXkgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBrZXkgcGFpci5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gSnNvbldlYktleSByZXByZXNlbnRhdGlvbi5cbiAgICovXG4gIGFzeW5jIHRvSnNvbldlYktleSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ0Bjb250ZXh0JzogJ2h0dHBzOi8vdzNpZC5vcmcvc2VjdXJpdHkvandrL3YxJyxcbiAgICAgIGlkOiB0aGlzLmNvbnRyb2xsZXIgKyAnIycgKyBhd2FpdCB0aGlzLmp3a1RodW1icHJpbnQoKSxcbiAgICAgIHR5cGU6ICdKc29uV2ViS2V5JyxcbiAgICAgIGNvbnRyb2xsZXI6IHRoaXMuY29udHJvbGxlcixcbiAgICAgIHB1YmxpY0tleUp3azogdGhpcy50b0p3ayh7cHVibGljS2V5OiB0cnVlfSlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEpzb25XZWJLZXkyMDIwIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMga2V5IHBhaXIuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly93M2MtY2NnLmdpdGh1Yi5pby9sZHMtandzMjAyMC8janNvbi13ZWIta2V5LTIwMjBcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gSnNvbldlYktleTIwMjAgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBhc3luYyB0b0pzb25XZWJLZXkyMDIwKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnQGNvbnRleHQnOiAnaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS9qd3MvdjEnLFxuICAgICAgaWQ6IHRoaXMuY29udHJvbGxlciArICcjJyArIGF3YWl0IHRoaXMuandrVGh1bWJwcmludCgpLFxuICAgICAgdHlwZTogJ0pzb25XZWJLZXkyMDIwJyxcbiAgICAgIGNvbnRyb2xsZXI6IHRoaXMuY29udHJvbGxlcixcbiAgICAgIHB1YmxpY0tleUp3azogdGhpcy50b0p3ayh7cHVibGljS2V5OiB0cnVlfSlcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3RzIHdoZXRoZXIgdGhlIGZpbmdlcnByaW50IHdhcyBnZW5lcmF0ZWQgZnJvbSBhIGdpdmVuIGtleSBwYWlyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiA+IGVkS2V5UGFpci52ZXJpZnlGaW5nZXJwcmludCh7ZmluZ2VycHJpbnQ6ICd6Nk1rMlMyUS4uLjZNa2FGSmV3YSd9KTtcbiAgICoge3ZhbGlkOiB0cnVlfTtcbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmZpbmdlcnByaW50IC0gQSBwdWJsaWMga2V5IGZpbmdlcnByaW50LlxuICAgKlxuICAgKiBAcmV0dXJucyB7e3ZhbGlkOiBib29sZWFuLCBlcnJvcjogKn19IFJlc3VsdCBvZiB2ZXJpZmljYXRpb24uXG4gICAqL1xuICB2ZXJpZnlGaW5nZXJwcmludCh7ZmluZ2VycHJpbnR9ID0ge30pIHtcbiAgICAvLyBmaW5nZXJwcmludCBzaG91bGQgaGF2ZSBtdWx0aWJhc2UgYmFzZTU4LWJ0YyBoZWFkZXJcbiAgICBpZighKHR5cGVvZiBmaW5nZXJwcmludCA9PT0gJ3N0cmluZycgJiZcbiAgICAgIGZpbmdlcnByaW50WzBdID09PSBNVUxUSUJBU0VfQkFTRTU4QlRDX0hFQURFUikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiBuZXcgRXJyb3IoJ1wiZmluZ2VycHJpbnRcIiBtdXN0IGJlIGEgbXVsdGliYXNlIGVuY29kZWQgc3RyaW5nLicpLFxuICAgICAgICB2YWxpZDogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICAgIGxldCBmaW5nZXJwcmludEJ1ZmZlcjtcbiAgICB0cnkge1xuICAgICAgZmluZ2VycHJpbnRCdWZmZXIgPSBiYXNlNThidGMuZGVjb2RlKGZpbmdlcnByaW50LnN1YnN0cigxKSk7XG4gICAgICBpZighZmluZ2VycHJpbnRCdWZmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBlbmNvZGluZyBvZiBmaW5nZXJwcmludC4nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiB7ZXJyb3I6IGUsIHZhbGlkOiBmYWxzZX07XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyc0VxdWFsID0gX2lzRXF1YWxCdWZmZXIodGhpcy5fcHVibGljS2V5QnVmZmVyLFxuICAgICAgZmluZ2VycHJpbnRCdWZmZXIuc2xpY2UoMikpO1xuXG4gICAgLy8gdmFsaWRhdGUgdGhlIGZpcnN0IHR3byBtdWx0aWNvZGVjIGJ5dGVzXG4gICAgY29uc3QgdmFsaWQgPVxuICAgICAgZmluZ2VycHJpbnRCdWZmZXJbMF0gPT09IE1VTFRJQ09ERUNfRUQyNTUxOV9QVUJfSEVBREVSWzBdICYmXG4gICAgICBmaW5nZXJwcmludEJ1ZmZlclsxXSA9PT0gTVVMVElDT0RFQ19FRDI1NTE5X1BVQl9IRUFERVJbMV0gJiZcbiAgICAgIGJ1ZmZlcnNFcXVhbDtcbiAgICBpZighdmFsaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiBuZXcgRXJyb3IoJ1RoZSBmaW5nZXJwcmludCBkb2VzIG5vdCBtYXRjaCB0aGUgcHVibGljIGtleS4nKSxcbiAgICAgICAgdmFsaWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge3ZhbGlkfTtcbiAgfVxuXG4gIHNpZ25lcigpIHtcbiAgICBjb25zdCBwcml2YXRlS2V5QnVmZmVyID0gdGhpcy5fcHJpdmF0ZUtleUJ1ZmZlcjtcblxuICAgIHJldHVybiB7XG4gICAgICBhc3luYyBzaWduKHtkYXRhfSkge1xuICAgICAgICBpZighcHJpdmF0ZUtleUJ1ZmZlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQSBwcml2YXRlIGtleSBpcyBub3QgYXZhaWxhYmxlIGZvciBzaWduaW5nLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlZDI1NTE5LnNpZ24ocHJpdmF0ZUtleUJ1ZmZlciwgZGF0YSk7XG4gICAgICB9LFxuICAgICAgaWQ6IHRoaXMuaWRcbiAgICB9O1xuICB9XG5cbiAgdmVyaWZpZXIoKSB7XG4gICAgY29uc3QgcHVibGljS2V5QnVmZmVyID0gdGhpcy5fcHVibGljS2V5QnVmZmVyO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFzeW5jIHZlcmlmeSh7ZGF0YSwgc2lnbmF0dXJlfSkge1xuICAgICAgICBpZighcHVibGljS2V5QnVmZmVyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHB1YmxpYyBrZXkgaXMgbm90IGF2YWlsYWJsZSBmb3IgdmVyaWZ5aW5nLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlZDI1NTE5LnZlcmlmeShwdWJsaWNLZXlCdWZmZXIsIGRhdGEsIHNpZ25hdHVyZSk7XG4gICAgICB9LFxuICAgICAgaWQ6IHRoaXMuaWRcbiAgICB9O1xuICB9XG59XG4vLyBVc2VkIGJ5IENyeXB0b0xEIGhhcm5lc3MgZm9yIGRpc3BhdGNoaW5nLlxuRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAuc3VpdGUgPSBTVUlURV9JRDtcbi8vIFVzZWQgYnkgQ3J5cHRvTEQgaGFybmVzcydzIGZyb21LZXlJZCgpIG1ldGhvZC5cbkVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwLlNVSVRFX0NPTlRFWFQgPVxuICAnaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS9zdWl0ZXMvZWQyNTUxOS0yMDIwL3YxJztcblxuLy8gY2hlY2sgdG8gZW5zdXJlIHRoYXQgdHdvIGJ1ZmZlcnMgYXJlIGJ5dGUtZm9yLWJ5dGUgZXF1YWxcbi8vIFdBUk5JTkc6IHRoaXMgZnVuY3Rpb24gbXVzdCBvbmx5IGJlIHVzZWQgdG8gY2hlY2sgcHVibGljIGluZm9ybWF0aW9uIGFzXG4vLyAgICAgICAgICB0aW1pbmcgYXR0YWNrcyBjYW4gYmUgdXNlZCBmb3Igbm9uLWNvbnN0YW50IHRpbWUgY2hlY2tzIG9uXG4vLyAgICAgICAgICBzZWNyZXQgaW5mb3JtYXRpb24uXG5mdW5jdGlvbiBfaXNFcXVhbEJ1ZmZlcihidWYxLCBidWYyKSB7XG4gIGlmKGJ1ZjEubGVuZ3RoICE9PSBidWYyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IobGV0IGkgPSAwOyBpIDwgYnVmMS5sZW5ndGg7IGkrKykge1xuICAgIGlmKGJ1ZjFbaV0gIT09IGJ1ZjJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGNoZWNrIGEgbXVsdGliYXNlIGtleSBmb3IgYW4gZXhwZWN0ZWQgaGVhZGVyXG5mdW5jdGlvbiBfaXNWYWxpZEtleUhlYWRlcihtdWx0aWJhc2VLZXksIGV4cGVjdGVkSGVhZGVyKSB7XG4gIGlmKCEodHlwZW9mIG11bHRpYmFzZUtleSA9PT0gJ3N0cmluZycgJiZcbiAgICBtdWx0aWJhc2VLZXlbMF0gPT09IE1VTFRJQkFTRV9CQVNFNThCVENfSEVBREVSKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGtleUJ5dGVzID0gYmFzZTU4YnRjLmRlY29kZShtdWx0aWJhc2VLZXkuc2xpY2UoMSkpO1xuICByZXR1cm4gZXhwZWN0ZWRIZWFkZXIuZXZlcnkoKHZhbCwgaSkgPT4ga2V5Qnl0ZXNbaV0gPT09IHZhbCk7XG59XG5cbi8vIGVuY29kZSBhIG11bHRpYmFzZSBiYXNlNTgtYnRjIG11bHRpY29kZWMga2V5XG5mdW5jdGlvbiBfZW5jb2RlTWJLZXkoaGVhZGVyLCBrZXkpIHtcbiAgY29uc3QgbWJLZXkgPSBuZXcgVWludDhBcnJheShoZWFkZXIubGVuZ3RoICsga2V5Lmxlbmd0aCk7XG5cbiAgbWJLZXkuc2V0KGhlYWRlcik7XG4gIG1iS2V5LnNldChrZXksIGhlYWRlci5sZW5ndGgpO1xuXG4gIHJldHVybiBNVUxUSUJBU0VfQkFTRTU4QlRDX0hFQURFUiArIGJhc2U1OGJ0Yy5lbmNvZGUobWJLZXkpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/Ed25519VerificationKey2020.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/ed25519.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/ed25519.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var _validators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validators.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/validators.js\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:util */ \"node:util\");\n/*!\n * Copyright (c) 2020-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst randomBytesAsync = (0,node_util__WEBPACK_IMPORTED_MODULE_2__.promisify)(node_crypto__WEBPACK_IMPORTED_MODULE_0__.randomBytes);\n\n// used to export node's public keys to buffers\nconst publicKeyEncoding = {format: 'der', type: 'spki'};\n// used to turn private key bytes into a buffer in DER format\nconst DER_PRIVATE_KEY_PREFIX = Buffer.from(\n  '302e020100300506032b657004220420', 'hex');\n// used to turn public key bytes into a buffer in DER format\nconst DER_PUBLIC_KEY_PREFIX = Buffer.from('302a300506032b6570032100', 'hex');\n\nconst api = {\n  /**\n   * Generates a key using a 32 byte Uint8Array.\n   *\n   * @param {Uint8Array} seedBytes - The bytes for the private key.\n   *\n   * @returns {object} The object with the public and private key material.\n  */\n  async generateKeyPairFromSeed(seedBytes) {\n    const privateKey = await (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPrivateKey)({\n      // node is more than happy to create a new private key using a DER\n      key: privateKeyDerEncode({seedBytes}),\n      format: 'der',\n      type: 'pkcs8'\n    });\n    // this expects either a PEM encoded key or a node privateKeyObject\n    const publicKey = await (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPublicKey)(privateKey);\n    const publicKeyBuffer = publicKey.export(publicKeyEncoding);\n    const publicKeyBytes = getKeyMaterial(publicKeyBuffer);\n    return {\n      publicKey: publicKeyBytes,\n      secretKey: Buffer.concat([seedBytes, publicKeyBytes])\n    };\n  },\n  // generates an ed25519 key using a random seed\n  async generateKeyPair() {\n    const seed = await randomBytesAsync(32);\n    return api.generateKeyPairFromSeed(seed);\n  },\n  async sign(privateKeyBytes, data) {\n    const privateKey = await (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPrivateKey)({\n      key: privateKeyDerEncode({privateKeyBytes}),\n      format: 'der',\n      type: 'pkcs8'\n    });\n    return (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.sign)(null, data, privateKey);\n  },\n  async verify(publicKeyBytes, data, signature) {\n    const publicKey = await (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPublicKey)({\n      key: publicKeyDerEncode({publicKeyBytes}),\n      format: 'der',\n      type: 'spki'\n    });\n    return (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.verify)(null, data, publicKey, signature);\n  },\n  async sha256digest({data}) {\n    return (0,node_crypto__WEBPACK_IMPORTED_MODULE_0__.createHash)('sha256').update(data).digest();\n  }\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (api);\n\n/**\n * The key material is the part of the buffer after the DER Prefix.\n *\n * @param {Buffer} buffer - A DER encoded key buffer.\n *\n * @throws {Error} If the buffer does not contain a valid DER Prefix.\n *\n * @returns {Buffer} The key material part of the Buffer.\n*/\nfunction getKeyMaterial(buffer) {\n  if(buffer.indexOf(DER_PUBLIC_KEY_PREFIX) === 0) {\n    return buffer.slice(DER_PUBLIC_KEY_PREFIX.length, buffer.length);\n  }\n  if(buffer.indexOf(DER_PRIVATE_KEY_PREFIX) === 0) {\n    return buffer.slice(DER_PRIVATE_KEY_PREFIX.length, buffer.length);\n  }\n  throw new Error('Expected Buffer to match Ed25519 Public or Private Prefix');\n}\n\n/**\n * Takes a Buffer or Uint8Array with the raw private key and encodes it\n * in DER-encoded PKCS#8 format.\n * Allows Uint8Arrays to be interoperable with node's crypto functions.\n *\n * @param {object} options - Options to use.\n * @param {Buffer} [options.privateKeyBytes] - Required if no seedBytes.\n * @param {Buffer} [options.seedBytes] - Required if no privateKeyBytes.\n *\n * @throws {TypeError} Throws if the supplied buffer is not of the right size\n *  or not a Uint8Array or Buffer.\n *\n * @returns {Buffer} DER private key prefix + key bytes.\n*/\nfunction privateKeyDerEncode({privateKeyBytes, seedBytes}) {\n  if(!(privateKeyBytes || seedBytes)) {\n    throw new TypeError('`privateKeyBytes` or `seedBytes` is required.');\n  }\n  if(!privateKeyBytes) {\n    (0,_validators_js__WEBPACK_IMPORTED_MODULE_1__.assertKeyBytes)({\n      bytes: seedBytes,\n      expectedLength: 32\n    });\n  }\n  if(!seedBytes) {\n    (0,_validators_js__WEBPACK_IMPORTED_MODULE_1__.assertKeyBytes)({\n      bytes: privateKeyBytes,\n      expectedLength: 64\n    });\n  }\n  let p;\n  if(seedBytes) {\n    p = seedBytes;\n  } else {\n    // extract the first 32 bytes of the 64 byte private key representation\n    p = privateKeyBytes.slice(0, 32);\n  }\n  return Buffer.concat([DER_PRIVATE_KEY_PREFIX, p]);\n}\n\n/**\n * Takes a Uint8Array of public key bytes and encodes it in DER-encoded\n * SubjectPublicKeyInfo (SPKI) format.\n * Allows Uint8Arrays to be interoperable with node's crypto functions.\n *\n * @param {object} options - Options to use.\n * @param {Uint8Array} options.publicKeyBytes - The keyBytes.\n *\n * @throws {TypeError} Throws if the bytes are not Uint8Array or of length 32.\n *\n * @returns {Buffer} DER Public key Prefix + key bytes.\n*/\nfunction publicKeyDerEncode({publicKeyBytes}) {\n  (0,_validators_js__WEBPACK_IMPORTED_MODULE_1__.assertKeyBytes)({\n    bytes: publicKeyBytes,\n    expectedLength: 32,\n    code: 'invalidPublicKeyLength'\n  });\n  return Buffer.concat([DER_PUBLIC_KEY_PREFIX, publicKeyBytes]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS12ZXJpZmljYXRpb24ta2V5LTIwMjAvbGliL2VkMjU1MTkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQVFxQjtBQUMwQjtBQUNYOztBQUVwQyx5QkFBeUIsb0RBQVMsQ0FBQyxvREFBVzs7QUFFOUM7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsNkJBQTZCLDZEQUFnQjtBQUM3QztBQUNBLGdDQUFnQyxVQUFVO0FBQzFDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0QkFBNEIsNERBQWU7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsNkJBQTZCLDZEQUFnQjtBQUM3QyxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsV0FBVyxpREFBSTtBQUNmLEdBQUc7QUFDSDtBQUNBLDRCQUE0Qiw0REFBZTtBQUMzQywrQkFBK0IsZUFBZTtBQUM5QztBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcsbURBQU07QUFDakIsR0FBRztBQUNILHNCQUFzQixLQUFLO0FBQzNCLFdBQVcsdURBQVU7QUFDckI7QUFDQTs7QUFFQSxpRUFBZSxHQUFHLEVBQUM7O0FBRW5CO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLDhCQUE4QiwyQkFBMkI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDhEQUFjO0FBQ2xCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUksOERBQWM7QUFDbEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsNkJBQTZCLGVBQWU7QUFDNUMsRUFBRSw4REFBYztBQUNoQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LXZlcmlmaWNhdGlvbi1rZXktMjAyMC9saWIvZWQyNTUxOS5qcz83M2MyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjIgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0IHtcbiAgc2lnbixcbiAgdmVyaWZ5LFxuICBjcmVhdGVIYXNoLFxuICBjcmVhdGVQcml2YXRlS2V5LFxuICBjcmVhdGVQdWJsaWNLZXksXG4gIHJhbmRvbUJ5dGVzXG59IGZyb20gJ25vZGU6Y3J5cHRvJztcbmltcG9ydCB7YXNzZXJ0S2V5Qnl0ZXN9IGZyb20gJy4vdmFsaWRhdG9ycy5qcyc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnbm9kZTp1dGlsJztcblxuY29uc3QgcmFuZG9tQnl0ZXNBc3luYyA9IHByb21pc2lmeShyYW5kb21CeXRlcyk7XG5cbi8vIHVzZWQgdG8gZXhwb3J0IG5vZGUncyBwdWJsaWMga2V5cyB0byBidWZmZXJzXG5jb25zdCBwdWJsaWNLZXlFbmNvZGluZyA9IHtmb3JtYXQ6ICdkZXInLCB0eXBlOiAnc3BraSd9O1xuLy8gdXNlZCB0byB0dXJuIHByaXZhdGUga2V5IGJ5dGVzIGludG8gYSBidWZmZXIgaW4gREVSIGZvcm1hdFxuY29uc3QgREVSX1BSSVZBVEVfS0VZX1BSRUZJWCA9IEJ1ZmZlci5mcm9tKFxuICAnMzAyZTAyMDEwMDMwMDUwNjAzMmI2NTcwMDQyMjA0MjAnLCAnaGV4Jyk7XG4vLyB1c2VkIHRvIHR1cm4gcHVibGljIGtleSBieXRlcyBpbnRvIGEgYnVmZmVyIGluIERFUiBmb3JtYXRcbmNvbnN0IERFUl9QVUJMSUNfS0VZX1BSRUZJWCA9IEJ1ZmZlci5mcm9tKCczMDJhMzAwNTA2MDMyYjY1NzAwMzIxMDAnLCAnaGV4Jyk7XG5cbmNvbnN0IGFwaSA9IHtcbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIGtleSB1c2luZyBhIDMyIGJ5dGUgVWludDhBcnJheS5cbiAgICpcbiAgICogQHBhcmFtIHtVaW50OEFycmF5fSBzZWVkQnl0ZXMgLSBUaGUgYnl0ZXMgZm9yIHRoZSBwcml2YXRlIGtleS5cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gVGhlIG9iamVjdCB3aXRoIHRoZSBwdWJsaWMgYW5kIHByaXZhdGUga2V5IG1hdGVyaWFsLlxuICAqL1xuICBhc3luYyBnZW5lcmF0ZUtleVBhaXJGcm9tU2VlZChzZWVkQnl0ZXMpIHtcbiAgICBjb25zdCBwcml2YXRlS2V5ID0gYXdhaXQgY3JlYXRlUHJpdmF0ZUtleSh7XG4gICAgICAvLyBub2RlIGlzIG1vcmUgdGhhbiBoYXBweSB0byBjcmVhdGUgYSBuZXcgcHJpdmF0ZSBrZXkgdXNpbmcgYSBERVJcbiAgICAgIGtleTogcHJpdmF0ZUtleURlckVuY29kZSh7c2VlZEJ5dGVzfSksXG4gICAgICBmb3JtYXQ6ICdkZXInLFxuICAgICAgdHlwZTogJ3BrY3M4J1xuICAgIH0pO1xuICAgIC8vIHRoaXMgZXhwZWN0cyBlaXRoZXIgYSBQRU0gZW5jb2RlZCBrZXkgb3IgYSBub2RlIHByaXZhdGVLZXlPYmplY3RcbiAgICBjb25zdCBwdWJsaWNLZXkgPSBhd2FpdCBjcmVhdGVQdWJsaWNLZXkocHJpdmF0ZUtleSk7XG4gICAgY29uc3QgcHVibGljS2V5QnVmZmVyID0gcHVibGljS2V5LmV4cG9ydChwdWJsaWNLZXlFbmNvZGluZyk7XG4gICAgY29uc3QgcHVibGljS2V5Qnl0ZXMgPSBnZXRLZXlNYXRlcmlhbChwdWJsaWNLZXlCdWZmZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBwdWJsaWNLZXk6IHB1YmxpY0tleUJ5dGVzLFxuICAgICAgc2VjcmV0S2V5OiBCdWZmZXIuY29uY2F0KFtzZWVkQnl0ZXMsIHB1YmxpY0tleUJ5dGVzXSlcbiAgICB9O1xuICB9LFxuICAvLyBnZW5lcmF0ZXMgYW4gZWQyNTUxOSBrZXkgdXNpbmcgYSByYW5kb20gc2VlZFxuICBhc3luYyBnZW5lcmF0ZUtleVBhaXIoKSB7XG4gICAgY29uc3Qgc2VlZCA9IGF3YWl0IHJhbmRvbUJ5dGVzQXN5bmMoMzIpO1xuICAgIHJldHVybiBhcGkuZ2VuZXJhdGVLZXlQYWlyRnJvbVNlZWQoc2VlZCk7XG4gIH0sXG4gIGFzeW5jIHNpZ24ocHJpdmF0ZUtleUJ5dGVzLCBkYXRhKSB7XG4gICAgY29uc3QgcHJpdmF0ZUtleSA9IGF3YWl0IGNyZWF0ZVByaXZhdGVLZXkoe1xuICAgICAga2V5OiBwcml2YXRlS2V5RGVyRW5jb2RlKHtwcml2YXRlS2V5Qnl0ZXN9KSxcbiAgICAgIGZvcm1hdDogJ2RlcicsXG4gICAgICB0eXBlOiAncGtjczgnXG4gICAgfSk7XG4gICAgcmV0dXJuIHNpZ24obnVsbCwgZGF0YSwgcHJpdmF0ZUtleSk7XG4gIH0sXG4gIGFzeW5jIHZlcmlmeShwdWJsaWNLZXlCeXRlcywgZGF0YSwgc2lnbmF0dXJlKSB7XG4gICAgY29uc3QgcHVibGljS2V5ID0gYXdhaXQgY3JlYXRlUHVibGljS2V5KHtcbiAgICAgIGtleTogcHVibGljS2V5RGVyRW5jb2RlKHtwdWJsaWNLZXlCeXRlc30pLFxuICAgICAgZm9ybWF0OiAnZGVyJyxcbiAgICAgIHR5cGU6ICdzcGtpJ1xuICAgIH0pO1xuICAgIHJldHVybiB2ZXJpZnkobnVsbCwgZGF0YSwgcHVibGljS2V5LCBzaWduYXR1cmUpO1xuICB9LFxuICBhc3luYyBzaGEyNTZkaWdlc3Qoe2RhdGF9KSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShkYXRhKS5kaWdlc3QoKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuXG4vKipcbiAqIFRoZSBrZXkgbWF0ZXJpYWwgaXMgdGhlIHBhcnQgb2YgdGhlIGJ1ZmZlciBhZnRlciB0aGUgREVSIFByZWZpeC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIC0gQSBERVIgZW5jb2RlZCBrZXkgYnVmZmVyLlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgYnVmZmVyIGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBERVIgUHJlZml4LlxuICpcbiAqIEByZXR1cm5zIHtCdWZmZXJ9IFRoZSBrZXkgbWF0ZXJpYWwgcGFydCBvZiB0aGUgQnVmZmVyLlxuKi9cbmZ1bmN0aW9uIGdldEtleU1hdGVyaWFsKGJ1ZmZlcikge1xuICBpZihidWZmZXIuaW5kZXhPZihERVJfUFVCTElDX0tFWV9QUkVGSVgpID09PSAwKSB7XG4gICAgcmV0dXJuIGJ1ZmZlci5zbGljZShERVJfUFVCTElDX0tFWV9QUkVGSVgubGVuZ3RoLCBidWZmZXIubGVuZ3RoKTtcbiAgfVxuICBpZihidWZmZXIuaW5kZXhPZihERVJfUFJJVkFURV9LRVlfUFJFRklYKSA9PT0gMCkge1xuICAgIHJldHVybiBidWZmZXIuc2xpY2UoREVSX1BSSVZBVEVfS0VZX1BSRUZJWC5sZW5ndGgsIGJ1ZmZlci5sZW5ndGgpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgQnVmZmVyIHRvIG1hdGNoIEVkMjU1MTkgUHVibGljIG9yIFByaXZhdGUgUHJlZml4Jyk7XG59XG5cbi8qKlxuICogVGFrZXMgYSBCdWZmZXIgb3IgVWludDhBcnJheSB3aXRoIHRoZSByYXcgcHJpdmF0ZSBrZXkgYW5kIGVuY29kZXMgaXRcbiAqIGluIERFUi1lbmNvZGVkIFBLQ1MjOCBmb3JtYXQuXG4gKiBBbGxvd3MgVWludDhBcnJheXMgdG8gYmUgaW50ZXJvcGVyYWJsZSB3aXRoIG5vZGUncyBjcnlwdG8gZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyB0byB1c2UuXG4gKiBAcGFyYW0ge0J1ZmZlcn0gW29wdGlvbnMucHJpdmF0ZUtleUJ5dGVzXSAtIFJlcXVpcmVkIGlmIG5vIHNlZWRCeXRlcy5cbiAqIEBwYXJhbSB7QnVmZmVyfSBbb3B0aW9ucy5zZWVkQnl0ZXNdIC0gUmVxdWlyZWQgaWYgbm8gcHJpdmF0ZUtleUJ5dGVzLlxuICpcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gVGhyb3dzIGlmIHRoZSBzdXBwbGllZCBidWZmZXIgaXMgbm90IG9mIHRoZSByaWdodCBzaXplXG4gKiAgb3Igbm90IGEgVWludDhBcnJheSBvciBCdWZmZXIuXG4gKlxuICogQHJldHVybnMge0J1ZmZlcn0gREVSIHByaXZhdGUga2V5IHByZWZpeCArIGtleSBieXRlcy5cbiovXG5mdW5jdGlvbiBwcml2YXRlS2V5RGVyRW5jb2RlKHtwcml2YXRlS2V5Qnl0ZXMsIHNlZWRCeXRlc30pIHtcbiAgaWYoIShwcml2YXRlS2V5Qnl0ZXMgfHwgc2VlZEJ5dGVzKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Bwcml2YXRlS2V5Qnl0ZXNgIG9yIGBzZWVkQnl0ZXNgIGlzIHJlcXVpcmVkLicpO1xuICB9XG4gIGlmKCFwcml2YXRlS2V5Qnl0ZXMpIHtcbiAgICBhc3NlcnRLZXlCeXRlcyh7XG4gICAgICBieXRlczogc2VlZEJ5dGVzLFxuICAgICAgZXhwZWN0ZWRMZW5ndGg6IDMyXG4gICAgfSk7XG4gIH1cbiAgaWYoIXNlZWRCeXRlcykge1xuICAgIGFzc2VydEtleUJ5dGVzKHtcbiAgICAgIGJ5dGVzOiBwcml2YXRlS2V5Qnl0ZXMsXG4gICAgICBleHBlY3RlZExlbmd0aDogNjRcbiAgICB9KTtcbiAgfVxuICBsZXQgcDtcbiAgaWYoc2VlZEJ5dGVzKSB7XG4gICAgcCA9IHNlZWRCeXRlcztcbiAgfSBlbHNlIHtcbiAgICAvLyBleHRyYWN0IHRoZSBmaXJzdCAzMiBieXRlcyBvZiB0aGUgNjQgYnl0ZSBwcml2YXRlIGtleSByZXByZXNlbnRhdGlvblxuICAgIHAgPSBwcml2YXRlS2V5Qnl0ZXMuc2xpY2UoMCwgMzIpO1xuICB9XG4gIHJldHVybiBCdWZmZXIuY29uY2F0KFtERVJfUFJJVkFURV9LRVlfUFJFRklYLCBwXSk7XG59XG5cbi8qKlxuICogVGFrZXMgYSBVaW50OEFycmF5IG9mIHB1YmxpYyBrZXkgYnl0ZXMgYW5kIGVuY29kZXMgaXQgaW4gREVSLWVuY29kZWRcbiAqIFN1YmplY3RQdWJsaWNLZXlJbmZvIChTUEtJKSBmb3JtYXQuXG4gKiBBbGxvd3MgVWludDhBcnJheXMgdG8gYmUgaW50ZXJvcGVyYWJsZSB3aXRoIG5vZGUncyBjcnlwdG8gZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyB0byB1c2UuXG4gKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IG9wdGlvbnMucHVibGljS2V5Qnl0ZXMgLSBUaGUga2V5Qnl0ZXMuXG4gKlxuICogQHRocm93cyB7VHlwZUVycm9yfSBUaHJvd3MgaWYgdGhlIGJ5dGVzIGFyZSBub3QgVWludDhBcnJheSBvciBvZiBsZW5ndGggMzIuXG4gKlxuICogQHJldHVybnMge0J1ZmZlcn0gREVSIFB1YmxpYyBrZXkgUHJlZml4ICsga2V5IGJ5dGVzLlxuKi9cbmZ1bmN0aW9uIHB1YmxpY0tleURlckVuY29kZSh7cHVibGljS2V5Qnl0ZXN9KSB7XG4gIGFzc2VydEtleUJ5dGVzKHtcbiAgICBieXRlczogcHVibGljS2V5Qnl0ZXMsXG4gICAgZXhwZWN0ZWRMZW5ndGg6IDMyLFxuICAgIGNvZGU6ICdpbnZhbGlkUHVibGljS2V5TGVuZ3RoJ1xuICB9KTtcbiAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoW0RFUl9QVUJMSUNfS0VZX1BSRUZJWCwgcHVibGljS2V5Qnl0ZXNdKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/ed25519.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ed25519VerificationKey2020: () => (/* reexport safe */ _Ed25519VerificationKey2020_js__WEBPACK_IMPORTED_MODULE_0__.Ed25519VerificationKey2020)\n/* harmony export */ });\n/* harmony import */ var _Ed25519VerificationKey2020_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Ed25519VerificationKey2020.js */ \"(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/Ed25519VerificationKey2020.js\");\n/*!\n * Copyright (c) 2020 Digital Bazaar, Inc. All rights reserved.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS12ZXJpZmljYXRpb24ta2V5LTIwMjAvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzJFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2VkMjU1MTktdmVyaWZpY2F0aW9uLWtleS0yMDIwL2xpYi9pbmRleC5qcz84Yjk2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmV4cG9ydCB7RWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjB9IGZyb20gJy4vRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAuanMnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/validators.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/validators.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertKeyBytes: () => (/* binding */ assertKeyBytes)\n/* harmony export */ });\n/*!\n * Copyright (c) 2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n/**\n * Asserts that key bytes have a type of Uint8Array and a specific length.\n *\n * @throws {TypeError|SyntaxError} - Throws a Type or Syntax error.\n *\n * @param {object} options - Options to use.\n * @param {Uint8Array} options.bytes - The bytes being checked.\n * @param {number} [options.expectedLength=32] - The expected bytes length.\n * @param {string} [options.code] - An optional code for the error.\n *\n * @returns {undefined} Returns on success throws on error.\n */\nfunction assertKeyBytes({bytes, expectedLength = 32, code}) {\n  if(!(bytes instanceof Uint8Array)) {\n    throw new TypeError('\"bytes\" must be a Uint8Array.');\n  }\n  if(bytes.length !== expectedLength) {\n    const error = new Error(\n      `\"bytes\" must be a ${expectedLength}-byte Uint8Array.`);\n    // we need DataError for invalid byte length\n    error.name = 'DataError';\n    // add the error code from the did:key spec if provided\n    if(code) {\n      error.code = code;\n    }\n    throw error;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvZWQyNTUxOS12ZXJpZmljYXRpb24ta2V5LTIwMjAvbGliL3ZhbGlkYXRvcnMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLGFBQWEsV0FBVztBQUN4QjtBQUNPLHlCQUF5QixpQ0FBaUM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixlQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9lZDI1NTE5LXZlcmlmaWNhdGlvbi1rZXktMjAyMC9saWIvdmFsaWRhdG9ycy5qcz8wZTYwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIyIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQga2V5IGJ5dGVzIGhhdmUgYSB0eXBlIG9mIFVpbnQ4QXJyYXkgYW5kIGEgc3BlY2lmaWMgbGVuZ3RoLlxuICpcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcnxTeW50YXhFcnJvcn0gLSBUaHJvd3MgYSBUeXBlIG9yIFN5bnRheCBlcnJvci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgdG8gdXNlLlxuICogQHBhcmFtIHtVaW50OEFycmF5fSBvcHRpb25zLmJ5dGVzIC0gVGhlIGJ5dGVzIGJlaW5nIGNoZWNrZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMuZXhwZWN0ZWRMZW5ndGg9MzJdIC0gVGhlIGV4cGVjdGVkIGJ5dGVzIGxlbmd0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jb2RlXSAtIEFuIG9wdGlvbmFsIGNvZGUgZm9yIHRoZSBlcnJvci5cbiAqXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfSBSZXR1cm5zIG9uIHN1Y2Nlc3MgdGhyb3dzIG9uIGVycm9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0S2V5Qnl0ZXMoe2J5dGVzLCBleHBlY3RlZExlbmd0aCA9IDMyLCBjb2RlfSkge1xuICBpZighKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ5dGVzXCIgbXVzdCBiZSBhIFVpbnQ4QXJyYXkuJyk7XG4gIH1cbiAgaWYoYnl0ZXMubGVuZ3RoICE9PSBleHBlY3RlZExlbmd0aCkge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgYFwiYnl0ZXNcIiBtdXN0IGJlIGEgJHtleHBlY3RlZExlbmd0aH0tYnl0ZSBVaW50OEFycmF5LmApO1xuICAgIC8vIHdlIG5lZWQgRGF0YUVycm9yIGZvciBpbnZhbGlkIGJ5dGUgbGVuZ3RoXG4gICAgZXJyb3IubmFtZSA9ICdEYXRhRXJyb3InO1xuICAgIC8vIGFkZCB0aGUgZXJyb3IgY29kZSBmcm9tIHRoZSBkaWQ6a2V5IHNwZWMgaWYgcHJvdmlkZWRcbiAgICBpZihjb2RlKSB7XG4gICAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/ed25519-verification-key-2020/lib/validators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/lru-memoize/lib/LruCache.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@digitalbazaar/lru-memoize/lib/LruCache.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LruCache: () => (/* binding */ LruCache)\n/* harmony export */ });\n/* harmony import */ var lru_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lru-cache */ \"(ssr)/./node_modules/@digitalbazaar/lru-memoize/node_modules/lru-cache/index.js\");\n/*!\n * Copyright (c) 2020-2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n/**\n * LruCache uses the npm module `lru-cache` to memoize promises.\n *\n * @see https://www.npmjs.com/package/lru-cache\n * @see https://en.wikipedia.org/wiki/Memoization\n * @param {object} cacheOptions - Options for `lru-cache`.\n *   See the npm docs for more options.\n * @param {number} [cacheOptions.max] - The max size of the cache.\n * @param {number} [cacheOptions.maxAge] - The maxAge of an item in ms.\n * @param {boolean} [cacheOptions.updateAgeOnGet=false] - When using\n *   time-expiring entries with maxAge, setting this to true will make\n *   each entry's effective time update to the current time whenever it is\n *   retrieved from cache, thereby extending the expiration date of the entry.\n  * @param {boolean} [cacheOptions.disposeOnSettle=false] - When set to true\n *   entries will be removed from cache once they've settled. This is to only\n *   be used when one needs a promise queue.\n *\n * @returns {LruCache} The class.\n*/\nclass LruCache {\n  constructor(cacheOptions = {}) {\n    this.options = cacheOptions;\n    this.cache = new lru_cache__WEBPACK_IMPORTED_MODULE_0__(cacheOptions);\n  }\n\n  /**\n   * Deletes a key from the LRU cache.\n   *\n   * @param {string} key - A key for the cache.\n   *\n   * @returns {undefined}\n  */\n  delete(key) {\n    return this.cache.del(key);\n  }\n\n  /**\n   * Memoizes a promise via an LRU cache.\n   *\n   * @param {object} options - Options to use.\n   * @param {string} options.key - A key for the cache.\n   * @param {Function<Promise>} options.fn - A Function that returns a\n   *   promise to memoize.\n   * @param {object} options.options - The LRU cache options to pass\n   *   if setting the value in the cache; note: only those options supported\n   *   by the underlying LRU cache instance will be supported.\n   *\n   * @returns {Promise} - The result of the memoized promise.\n  */\n  async memoize({key, fn, options = {}} = {}) {\n    let promise = this.cache.get(key);\n    if(promise) {\n      return promise;\n    }\n\n    // cache miss\n    const cacheOptions = {...this.options, ...options};\n    promise = fn();\n    // this version only supports `maxAge` and `disposeOnSettle`; a future\n    // version will support more cache options\n    const {maxAge} = cacheOptions;\n    this.cache.set(key, promise, maxAge);\n\n    try {\n      await promise;\n    } catch(e) {\n      // if the promise rejects, delete it if the cache entry hasn't changed\n      if(promise === this.cache.get(key)) {\n        this.cache.del(key);\n      }\n      throw e;\n    }\n\n    // dispose promise once settled (provided the cache entry hasn't changed)\n    if(cacheOptions.disposeOnSettle && promise === this.cache.get(key)) {\n      this.cache.del(key);\n    }\n\n    return promise;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvbHJ1LW1lbW9pemUvbGliL0xydUNhY2hlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzRCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNPO0FBQ1AsK0JBQStCO0FBQy9CO0FBQ0EscUJBQXFCLHNDQUFHO0FBQ3hCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsbUJBQW1CO0FBQ2hDO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLDBDQUEwQztBQUMxQztBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0EsaUJBQWlCLHVCQUF1QixJQUFJO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0Esa0VBQWtFO0FBQ2xFO0FBQ0EsV0FBVyxRQUFRO0FBQ25COztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci9scnUtbWVtb2l6ZS9saWIvTHJ1Q2FjaGUuanM/YzliZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMC0yMDIzIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmltcG9ydCBMUlUgZnJvbSAnbHJ1LWNhY2hlJztcblxuLyoqXG4gKiBMcnVDYWNoZSB1c2VzIHRoZSBucG0gbW9kdWxlIGBscnUtY2FjaGVgIHRvIG1lbW9pemUgcHJvbWlzZXMuXG4gKlxuICogQHNlZSBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9scnUtY2FjaGVcbiAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWVtb2l6YXRpb25cbiAqIEBwYXJhbSB7b2JqZWN0fSBjYWNoZU9wdGlvbnMgLSBPcHRpb25zIGZvciBgbHJ1LWNhY2hlYC5cbiAqICAgU2VlIHRoZSBucG0gZG9jcyBmb3IgbW9yZSBvcHRpb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjYWNoZU9wdGlvbnMubWF4XSAtIFRoZSBtYXggc2l6ZSBvZiB0aGUgY2FjaGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NhY2hlT3B0aW9ucy5tYXhBZ2VdIC0gVGhlIG1heEFnZSBvZiBhbiBpdGVtIGluIG1zLlxuICogQHBhcmFtIHtib29sZWFufSBbY2FjaGVPcHRpb25zLnVwZGF0ZUFnZU9uR2V0PWZhbHNlXSAtIFdoZW4gdXNpbmdcbiAqICAgdGltZS1leHBpcmluZyBlbnRyaWVzIHdpdGggbWF4QWdlLCBzZXR0aW5nIHRoaXMgdG8gdHJ1ZSB3aWxsIG1ha2VcbiAqICAgZWFjaCBlbnRyeSdzIGVmZmVjdGl2ZSB0aW1lIHVwZGF0ZSB0byB0aGUgY3VycmVudCB0aW1lIHdoZW5ldmVyIGl0IGlzXG4gKiAgIHJldHJpZXZlZCBmcm9tIGNhY2hlLCB0aGVyZWJ5IGV4dGVuZGluZyB0aGUgZXhwaXJhdGlvbiBkYXRlIG9mIHRoZSBlbnRyeS5cbiAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjYWNoZU9wdGlvbnMuZGlzcG9zZU9uU2V0dGxlPWZhbHNlXSAtIFdoZW4gc2V0IHRvIHRydWVcbiAqICAgZW50cmllcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSBjYWNoZSBvbmNlIHRoZXkndmUgc2V0dGxlZC4gVGhpcyBpcyB0byBvbmx5XG4gKiAgIGJlIHVzZWQgd2hlbiBvbmUgbmVlZHMgYSBwcm9taXNlIHF1ZXVlLlxuICpcbiAqIEByZXR1cm5zIHtMcnVDYWNoZX0gVGhlIGNsYXNzLlxuKi9cbmV4cG9ydCBjbGFzcyBMcnVDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKGNhY2hlT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5vcHRpb25zID0gY2FjaGVPcHRpb25zO1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgTFJVKGNhY2hlT3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhIGtleSBmcm9tIHRoZSBMUlUgY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBBIGtleSBmb3IgdGhlIGNhY2hlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAqL1xuICBkZWxldGUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZGVsKGtleSk7XG4gIH1cblxuICAvKipcbiAgICogTWVtb2l6ZXMgYSBwcm9taXNlIHZpYSBhbiBMUlUgY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyB0byB1c2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmtleSAtIEEga2V5IGZvciB0aGUgY2FjaGUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb248UHJvbWlzZT59IG9wdGlvbnMuZm4gLSBBIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhXG4gICAqICAgcHJvbWlzZSB0byBtZW1vaXplLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5vcHRpb25zIC0gVGhlIExSVSBjYWNoZSBvcHRpb25zIHRvIHBhc3NcbiAgICogICBpZiBzZXR0aW5nIHRoZSB2YWx1ZSBpbiB0aGUgY2FjaGU7IG5vdGU6IG9ubHkgdGhvc2Ugb3B0aW9ucyBzdXBwb3J0ZWRcbiAgICogICBieSB0aGUgdW5kZXJseWluZyBMUlUgY2FjaGUgaW5zdGFuY2Ugd2lsbCBiZSBzdXBwb3J0ZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFRoZSByZXN1bHQgb2YgdGhlIG1lbW9pemVkIHByb21pc2UuXG4gICovXG4gIGFzeW5jIG1lbW9pemUoe2tleSwgZm4sIG9wdGlvbnMgPSB7fX0gPSB7fSkge1xuICAgIGxldCBwcm9taXNlID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgICBpZihwcm9taXNlKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG5cbiAgICAvLyBjYWNoZSBtaXNzXG4gICAgY29uc3QgY2FjaGVPcHRpb25zID0gey4uLnRoaXMub3B0aW9ucywgLi4ub3B0aW9uc307XG4gICAgcHJvbWlzZSA9IGZuKCk7XG4gICAgLy8gdGhpcyB2ZXJzaW9uIG9ubHkgc3VwcG9ydHMgYG1heEFnZWAgYW5kIGBkaXNwb3NlT25TZXR0bGVgOyBhIGZ1dHVyZVxuICAgIC8vIHZlcnNpb24gd2lsbCBzdXBwb3J0IG1vcmUgY2FjaGUgb3B0aW9uc1xuICAgIGNvbnN0IHttYXhBZ2V9ID0gY2FjaGVPcHRpb25zO1xuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgcHJvbWlzZSwgbWF4QWdlKTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwcm9taXNlO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgLy8gaWYgdGhlIHByb21pc2UgcmVqZWN0cywgZGVsZXRlIGl0IGlmIHRoZSBjYWNoZSBlbnRyeSBoYXNuJ3QgY2hhbmdlZFxuICAgICAgaWYocHJvbWlzZSA9PT0gdGhpcy5jYWNoZS5nZXQoa2V5KSkge1xuICAgICAgICB0aGlzLmNhY2hlLmRlbChrZXkpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICAvLyBkaXNwb3NlIHByb21pc2Ugb25jZSBzZXR0bGVkIChwcm92aWRlZCB0aGUgY2FjaGUgZW50cnkgaGFzbid0IGNoYW5nZWQpXG4gICAgaWYoY2FjaGVPcHRpb25zLmRpc3Bvc2VPblNldHRsZSAmJiBwcm9taXNlID09PSB0aGlzLmNhY2hlLmdldChrZXkpKSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbChrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/lru-memoize/lib/LruCache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/lru-memoize/lib/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@digitalbazaar/lru-memoize/lib/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LruCache: () => (/* reexport safe */ _LruCache_js__WEBPACK_IMPORTED_MODULE_0__.LruCache)\n/* harmony export */ });\n/* harmony import */ var _LruCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LruCache.js */ \"(ssr)/./node_modules/@digitalbazaar/lru-memoize/lib/LruCache.js\");\n/*!\n * Copyright (c) 2020-2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvbHJ1LW1lbW9pemUvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ3VDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL2xydS1tZW1vaXplL2xpYi9pbmRleC5qcz82Zjg5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwLTIwMjEgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuZXhwb3J0IHtMcnVDYWNoZX0gZnJvbSAnLi9McnVDYWNoZS5qcyc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/lru-memoize/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/vc/lib/CredentialIssuancePurpose.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/vc/lib/CredentialIssuancePurpose.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CredentialIssuancePurpose: () => (/* binding */ CredentialIssuancePurpose)\n/* harmony export */ });\n/* harmony import */ var jsonld_signatures__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonld-signatures */ \"(ssr)/./node_modules/jsonld-signatures/lib/jsonld-signatures.js\");\n/* harmony import */ var jsonld__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonld */ \"(ssr)/./node_modules/jsonld/lib/index.js\");\n/*!\n * Copyright (c) 2019-2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\nconst {purposes: {AssertionProofPurpose}} = jsonld_signatures__WEBPACK_IMPORTED_MODULE_0__;\n\n/**\n * Creates a proof purpose that will validate whether or not the verification\n * method in a proof was authorized by its declared controller for the\n * proof's purpose.\n */\nclass CredentialIssuancePurpose extends AssertionProofPurpose {\n  /**\n   * @param {object} options - The options to use.\n   * @param {object} [options.controller] - The description of the controller,\n   *   if it is not to be dereferenced via a `documentLoader`.\n   * @param {string|Date|number} [options.date] - The expected date for\n   *   the creation of the proof.\n   * @param {number} [options.maxTimestampDelta=Infinity] - A maximum number\n   *   of seconds that the date on the signature can deviate from.\n   */\n  constructor({controller, date, maxTimestampDelta} = {}) {\n    super({controller, date, maxTimestampDelta});\n  }\n\n  /**\n   * Validates the purpose of a proof. This method is called during\n   * proof verification, after the proof value has been checked against the\n   * given verification method (in the case of a digital signature, the\n   * signature has been cryptographically verified against the public key).\n   *\n   * @param {object} proof - The proof to validate.\n   * @param {object} options - The options to use.\n   * @param {object} options.document - The document whose signature is\n   *   being verified.\n   * @param {object} options.suite - Signature suite used in\n   *   the proof.\n   * @param {string} options.verificationMethod - Key id URL to the paired\n   *   public key.\n   * @param {object} [options.documentLoader] - A document loader.\n   *\n   * @throws {Error} If verification method not authorized by controller.\n   * @throws {Error} If proof's created timestamp is out of range.\n   *\n   * @returns {Promise<{valid: boolean, error: Error}>} Resolves on completion.\n   */\n  async validate(proof, {\n    document, suite, verificationMethod, documentLoader\n  }) {\n    try {\n      const result = await super.validate(proof, {\n        document, suite, verificationMethod, documentLoader\n      });\n\n      if(!result.valid) {\n        throw result.error;\n      }\n\n      const issuer = jsonld__WEBPACK_IMPORTED_MODULE_1__.getValues(document, 'issuer');\n\n      if(!issuer || issuer.length === 0) {\n        throw new Error('Credential issuer is required.');\n      }\n\n      const issuerId = typeof issuer[0] === 'string' ? issuer[0] : issuer[0].id;\n\n      if(result.controller.id !== issuerId) {\n        throw new Error(\n          'Credential issuer must match the verification method controller.');\n      }\n\n      return {valid: true};\n    } catch(error) {\n      return {valid: false, error};\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL0NyZWRlbnRpYWxJc3N1YW5jZVB1cnBvc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ3NDO0FBQ1Y7O0FBRTVCLE9BQU8sV0FBVyx3QkFBd0IsRUFBRSw4Q0FBSzs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakM7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBLGVBQWUscUNBQXFDLElBQUk7QUFDeEQsV0FBVyxvQ0FBb0M7QUFDL0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSxjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCO0FBQ0EsZUFBZSxTQUFTLDZCQUE2QixHQUFHO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsNkNBQWdCOztBQUVyQztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYztBQUNkLE1BQU07QUFDTixjQUFjO0FBQ2Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL3ZjL2xpYi9DcmVkZW50aWFsSXNzdWFuY2VQdXJwb3NlLmpzPzNmNDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTktMjAyMyBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQganNpZ3MgZnJvbSAnanNvbmxkLXNpZ25hdHVyZXMnO1xuaW1wb3J0IGpzb25sZCBmcm9tICdqc29ubGQnO1xuXG5jb25zdCB7cHVycG9zZXM6IHtBc3NlcnRpb25Qcm9vZlB1cnBvc2V9fSA9IGpzaWdzO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBwcm9vZiBwdXJwb3NlIHRoYXQgd2lsbCB2YWxpZGF0ZSB3aGV0aGVyIG9yIG5vdCB0aGUgdmVyaWZpY2F0aW9uXG4gKiBtZXRob2QgaW4gYSBwcm9vZiB3YXMgYXV0aG9yaXplZCBieSBpdHMgZGVjbGFyZWQgY29udHJvbGxlciBmb3IgdGhlXG4gKiBwcm9vZidzIHB1cnBvc2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBDcmVkZW50aWFsSXNzdWFuY2VQdXJwb3NlIGV4dGVuZHMgQXNzZXJ0aW9uUHJvb2ZQdXJwb3NlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgdG8gdXNlLlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuY29udHJvbGxlcl0gLSBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIGNvbnRyb2xsZXIsXG4gICAqICAgaWYgaXQgaXMgbm90IHRvIGJlIGRlcmVmZXJlbmNlZCB2aWEgYSBgZG9jdW1lbnRMb2FkZXJgLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xEYXRlfG51bWJlcn0gW29wdGlvbnMuZGF0ZV0gLSBUaGUgZXhwZWN0ZWQgZGF0ZSBmb3JcbiAgICogICB0aGUgY3JlYXRpb24gb2YgdGhlIHByb29mLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4VGltZXN0YW1wRGVsdGE9SW5maW5pdHldIC0gQSBtYXhpbXVtIG51bWJlclxuICAgKiAgIG9mIHNlY29uZHMgdGhhdCB0aGUgZGF0ZSBvbiB0aGUgc2lnbmF0dXJlIGNhbiBkZXZpYXRlIGZyb20uXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7Y29udHJvbGxlciwgZGF0ZSwgbWF4VGltZXN0YW1wRGVsdGF9ID0ge30pIHtcbiAgICBzdXBlcih7Y29udHJvbGxlciwgZGF0ZSwgbWF4VGltZXN0YW1wRGVsdGF9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhlIHB1cnBvc2Ugb2YgYSBwcm9vZi4gVGhpcyBtZXRob2QgaXMgY2FsbGVkIGR1cmluZ1xuICAgKiBwcm9vZiB2ZXJpZmljYXRpb24sIGFmdGVyIHRoZSBwcm9vZiB2YWx1ZSBoYXMgYmVlbiBjaGVja2VkIGFnYWluc3QgdGhlXG4gICAqIGdpdmVuIHZlcmlmaWNhdGlvbiBtZXRob2QgKGluIHRoZSBjYXNlIG9mIGEgZGlnaXRhbCBzaWduYXR1cmUsIHRoZVxuICAgKiBzaWduYXR1cmUgaGFzIGJlZW4gY3J5cHRvZ3JhcGhpY2FsbHkgdmVyaWZpZWQgYWdhaW5zdCB0aGUgcHVibGljIGtleSkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9vZiAtIFRoZSBwcm9vZiB0byB2YWxpZGF0ZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBUaGUgb3B0aW9ucyB0byB1c2UuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHdob3NlIHNpZ25hdHVyZSBpc1xuICAgKiAgIGJlaW5nIHZlcmlmaWVkLlxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5zdWl0ZSAtIFNpZ25hdHVyZSBzdWl0ZSB1c2VkIGluXG4gICAqICAgdGhlIHByb29mLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy52ZXJpZmljYXRpb25NZXRob2QgLSBLZXkgaWQgVVJMIHRvIHRoZSBwYWlyZWRcbiAgICogICBwdWJsaWMga2V5LlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuZG9jdW1lbnRMb2FkZXJdIC0gQSBkb2N1bWVudCBsb2FkZXIuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB2ZXJpZmljYXRpb24gbWV0aG9kIG5vdCBhdXRob3JpemVkIGJ5IGNvbnRyb2xsZXIuXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBJZiBwcm9vZidzIGNyZWF0ZWQgdGltZXN0YW1wIGlzIG91dCBvZiByYW5nZS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8e3ZhbGlkOiBib29sZWFuLCBlcnJvcjogRXJyb3J9Pn0gUmVzb2x2ZXMgb24gY29tcGxldGlvbi5cbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlKHByb29mLCB7XG4gICAgZG9jdW1lbnQsIHN1aXRlLCB2ZXJpZmljYXRpb25NZXRob2QsIGRvY3VtZW50TG9hZGVyXG4gIH0pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3VwZXIudmFsaWRhdGUocHJvb2YsIHtcbiAgICAgICAgZG9jdW1lbnQsIHN1aXRlLCB2ZXJpZmljYXRpb25NZXRob2QsIGRvY3VtZW50TG9hZGVyXG4gICAgICB9KTtcblxuICAgICAgaWYoIXJlc3VsdC52YWxpZCkge1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzc3VlciA9IGpzb25sZC5nZXRWYWx1ZXMoZG9jdW1lbnQsICdpc3N1ZXInKTtcblxuICAgICAgaWYoIWlzc3VlciB8fCBpc3N1ZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ3JlZGVudGlhbCBpc3N1ZXIgaXMgcmVxdWlyZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzc3VlcklkID0gdHlwZW9mIGlzc3VlclswXSA9PT0gJ3N0cmluZycgPyBpc3N1ZXJbMF0gOiBpc3N1ZXJbMF0uaWQ7XG5cbiAgICAgIGlmKHJlc3VsdC5jb250cm9sbGVyLmlkICE9PSBpc3N1ZXJJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0NyZWRlbnRpYWwgaXNzdWVyIG11c3QgbWF0Y2ggdGhlIHZlcmlmaWNhdGlvbiBtZXRob2QgY29udHJvbGxlci4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHt2YWxpZDogdHJ1ZX07XG4gICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgcmV0dXJuIHt2YWxpZDogZmFsc2UsIGVycm9yfTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/vc/lib/CredentialIssuancePurpose.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/vc/lib/contexts/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@digitalbazaar/vc/lib/contexts/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   contexts: () => (/* binding */ contexts)\n/* harmony export */ });\n/* harmony import */ var credentials_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! credentials-context */ \"(ssr)/./node_modules/credentials-context/dist/context.esm.js\");\n/*!\n * Copyright (c) 2019-2023 Digital Bazaar, Inc. All rights reserved.\n */\n\n\nconst contexts = new Map();\n\nfor(const [url, context] of credentials_context__WEBPACK_IMPORTED_MODULE_0__.contexts.entries()) {\n  contexts.set(url, context);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL2NvbnRleHRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRzZCOztBQUV0Qjs7QUFFUCw0QkFBNEIseURBQWtCO0FBQzlDO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL2NvbnRleHRzL2luZGV4LmpzPzZmMzgiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTktMjAyMyBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQge1xuICBjb250ZXh0cyBhcyBjcmVkZW50aWFsQ29udGV4dHNcbn0gZnJvbSAnY3JlZGVudGlhbHMtY29udGV4dCc7XG5cbmV4cG9ydCBjb25zdCBjb250ZXh0cyA9IG5ldyBNYXAoKTtcblxuZm9yKGNvbnN0IFt1cmwsIGNvbnRleHRdIG9mIGNyZWRlbnRpYWxDb250ZXh0cy5lbnRyaWVzKCkpIHtcbiAgY29udGV4dHMuc2V0KHVybCwgY29udGV4dCk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/vc/lib/contexts/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/vc/lib/documentLoader.js":
/*!**************************************************************!*\
  !*** ./node_modules/@digitalbazaar/vc/lib/documentLoader.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   documentLoader: () => (/* binding */ documentLoader)\n/* harmony export */ });\n/* harmony import */ var _contexts_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./contexts/index.js */ \"(ssr)/./node_modules/@digitalbazaar/vc/lib/contexts/index.js\");\n/*!\n * Copyright (c) 2019-2023 Digital Bazaar, Inc. All rights reserved.\n */\n// load locally embedded contexts\n\n\nasync function documentLoader(url) {\n  const context = _contexts_index_js__WEBPACK_IMPORTED_MODULE_0__.contexts.get(url);\n  if(context !== undefined) {\n    return {\n      contextUrl: null,\n      documentUrl: url,\n      document: context\n    };\n  }\n  throw new Error(`Document loader unable to load URL \"${url}\".`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL2RvY3VtZW50TG9hZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNkM7O0FBRXRDO0FBQ1Asa0JBQWtCLHdEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELElBQUk7QUFDN0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL2RvY3VtZW50TG9hZGVyLmpzP2YwZGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTktMjAyMyBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG4vLyBsb2FkIGxvY2FsbHkgZW1iZWRkZWQgY29udGV4dHNcbmltcG9ydCB7Y29udGV4dHN9IGZyb20gJy4vY29udGV4dHMvaW5kZXguanMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG9jdW1lbnRMb2FkZXIodXJsKSB7XG4gIGNvbnN0IGNvbnRleHQgPSBjb250ZXh0cy5nZXQodXJsKTtcbiAgaWYoY29udGV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRleHRVcmw6IG51bGwsXG4gICAgICBkb2N1bWVudFVybDogdXJsLFxuICAgICAgZG9jdW1lbnQ6IGNvbnRleHRcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgRG9jdW1lbnQgbG9hZGVyIHVuYWJsZSB0byBsb2FkIFVSTCBcIiR7dXJsfVwiLmApO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/vc/lib/documentLoader.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/vc/lib/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@digitalbazaar/vc/lib/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CredentialIssuancePurpose: () => (/* reexport safe */ _CredentialIssuancePurpose_js__WEBPACK_IMPORTED_MODULE_1__.CredentialIssuancePurpose),\n/* harmony export */   _checkCredential: () => (/* binding */ _checkCredential),\n/* harmony export */   _checkPresentation: () => (/* binding */ _checkPresentation),\n/* harmony export */   createPresentation: () => (/* binding */ createPresentation),\n/* harmony export */   dateRegex: () => (/* binding */ dateRegex),\n/* harmony export */   defaultDocumentLoader: () => (/* binding */ defaultDocumentLoader),\n/* harmony export */   derive: () => (/* binding */ derive),\n/* harmony export */   issue: () => (/* binding */ issue),\n/* harmony export */   signPresentation: () => (/* binding */ signPresentation),\n/* harmony export */   verify: () => (/* binding */ verify),\n/* harmony export */   verifyCredential: () => (/* binding */ verifyCredential)\n/* harmony export */ });\n/* harmony import */ var _documentLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./documentLoader.js */ \"(ssr)/./node_modules/@digitalbazaar/vc/lib/documentLoader.js\");\n/* harmony import */ var _CredentialIssuancePurpose_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CredentialIssuancePurpose.js */ \"(ssr)/./node_modules/@digitalbazaar/vc/lib/CredentialIssuancePurpose.js\");\n/* harmony import */ var jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonld-signatures */ \"(ssr)/./node_modules/jsonld-signatures/lib/jsonld-signatures.js\");\n/* harmony import */ var jsonld__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsonld */ \"(ssr)/./node_modules/jsonld/lib/index.js\");\n/* harmony import */ var credentials_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! credentials-context */ \"(ssr)/./node_modules/credentials-context/dist/context.esm.js\");\n/**\n * A JavaScript implementation of Verifiable Credentials.\n *\n * @author Dave Longley\n * @author David I. Lehn\n *\n * @license BSD 3-Clause License\n * Copyright (c) 2017-2023 Digital Bazaar, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n *\n * Neither the name of the Digital Bazaar, Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n\n\n\nconst defaultDocumentLoader =\n  jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.extendContextLoader(_documentLoader_js__WEBPACK_IMPORTED_MODULE_0__.documentLoader);\n\n\nconst {AssertionProofPurpose, AuthenticationProofPurpose} = jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.purposes;\nconst {constants: {CREDENTIALS_CONTEXT_V1_URL}} = credentials_context__WEBPACK_IMPORTED_MODULE_4__;\n\n\n\n// Z and T can be lowercase\n// RFC3339 regex\nconst dateRegex = new RegExp('^(\\\\d{4})-(0[1-9]|1[0-2])-' +\n    '(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):' +\n    '([0-5][0-9]):([0-5][0-9]|60)' +\n    '(\\\\.[0-9]+)?(Z|(\\\\+|-)([01][0-9]|2[0-3]):' +\n    '([0-5][0-9]))$', 'i');\n\n/**\n * @typedef {object} LinkedDataSignature\n */\n\n/**\n * @typedef {object} Presentation\n */\n\n/**\n * @typedef {object} ProofPurpose\n */\n\n/**\n * @typedef {object} VerifiableCredential\n */\n\n/**\n * @typedef {object} VerifiablePresentation\n */\n\n/**\n * @typedef {object} VerifyPresentationResult\n * @property {boolean} verified - True if verified, false if not.\n * @property {object} presentationResult\n * @property {Array} credentialResults\n * @property {object} error\n */\n\n/**\n * @typedef {object} VerifyCredentialResult\n * @property {boolean} verified - True if verified, false if not.\n * @property {object} statusResult\n * @property {Array} results\n * @property {object} error\n */\n\n/**\n * Issues a verifiable credential (by taking a base credential document,\n * and adding a digital signature to it).\n *\n * @param {object} [options={}] - The options to use.\n *\n * @param {object} options.credential - Base credential document.\n * @param {LinkedDataSignature} options.suite - Signature suite (with private\n *   key material or an API to use it), passed in to sign().\n *\n * @param {ProofPurpose} [options.purpose] - A ProofPurpose. If not specified,\n *   a default purpose will be created.\n *\n * Other optional params passed to `sign()`:\n * @param {object} [options.documentLoader] - A document loader.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n *\n * @throws {Error} If missing required properties.\n *\n * @returns {Promise<VerifiableCredential>} Resolves on completion.\n */\nasync function issue({\n  credential, suite,\n  purpose = new _CredentialIssuancePurpose_js__WEBPACK_IMPORTED_MODULE_1__.CredentialIssuancePurpose(),\n  documentLoader = defaultDocumentLoader,\n  now\n} = {}) {\n  // check to make sure the `suite` has required params\n  // Note: verificationMethod defaults to publicKey.id, in suite constructor\n  if(!suite) {\n    throw new TypeError('\"suite\" parameter is required for issuing.');\n  }\n  if(!suite.verificationMethod) {\n    throw new TypeError('\"suite.verificationMethod\" property is required.');\n  }\n\n  if(!credential) {\n    throw new TypeError('\"credential\" parameter is required for issuing.');\n  }\n\n  // Set the issuance date to now(), if missing\n  if(!credential.issuanceDate) {\n    const now = (new Date()).toJSON();\n    credential.issuanceDate = `${now.slice(0, now.length - 5)}Z`;\n  }\n\n  // run common credential checks\n  _checkCredential({credential, now, mode: 'issue'});\n\n  return jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.sign(credential, {purpose, documentLoader, suite});\n}\n\n/**\n * Derives a proof from the given verifiable credential, resulting in a new\n * verifiable credential. This method is usually used to generate selective\n * disclosure and / or unlinkable proofs.\n *\n * @param {object} [options={}] - The options to use.\n *\n * @param {object} options.verifiableCredential - The verifiable credential\n *   containing a base proof to derive another proof from.\n * @param {LinkedDataSignature} options.suite - Derived proof signature suite.\n *\n * Other optional params passed to `derive()`:\n * @param {object} [options.documentLoader] - A document loader.\n *\n * @throws {Error} If missing required properties.\n *\n * @returns {Promise<VerifiableCredential>} Resolves on completion.\n */\nasync function derive({\n  verifiableCredential, suite,\n  documentLoader = defaultDocumentLoader\n} = {}) {\n  if(!verifiableCredential) {\n    throw new TypeError(\n      '\"verifiableCredential\" parameter is required for deriving.');\n  }\n  if(!suite) {\n    throw new TypeError('\"suite\" parameter is required for deriving.');\n  }\n\n  // run common credential checks\n  _checkCredential({credential: verifiableCredential, mode: 'issue'});\n\n  return jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.derive(verifiableCredential, {\n    purpose: new AssertionProofPurpose(),\n    documentLoader,\n    suite\n  });\n}\n\n/**\n * Verifies a verifiable presentation:\n *   - Checks that the presentation is well-formed\n *   - Checks the proofs (for example, checks digital signatures against the\n *     provided public keys).\n *\n * @param {object} [options={}] - The options to use.\n *\n * @param {VerifiablePresentation} options.presentation - Verifiable\n *   presentation, signed or unsigned, that may contain within it a\n *   verifiable credential.\n *\n * @param {LinkedDataSignature|LinkedDataSignature[]} options.suite - One or\n *   more signature suites that are supported by the caller's use case. This is\n *   an explicit design decision -- the calling code must specify which\n *   signature types (ed25519, RSA, etc) are allowed.\n *   Although it is expected that the secure resolution/fetching of the public\n *   key material (to verify against) is to be handled by the documentLoader,\n *   the suite param can optionally include the key directly.\n *\n * @param {boolean} [options.unsignedPresentation=false] - By default, this\n *   function assumes that a presentation is signed (and will return an error if\n *   a `proof` section is missing). Set this to `true` if you're using an\n *   unsigned presentation.\n *\n * Either pass in a proof purpose,\n * @param {AuthenticationProofPurpose} [options.presentationPurpose] - Optional\n *   proof purpose (a default one will be created if not passed in).\n *\n * or a default purpose will be created with params:\n * @param {string} [options.challenge] - Required if purpose is not passed in.\n * @param {string} [options.controller] - A controller.\n * @param {string} [options.domain] - A domain.\n *\n * @param {Function} [options.documentLoader] - A document loader.\n * @param {Function} [options.checkStatus] - Optional function for checking\n *   credential status if `credentialStatus` is present on the credential.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n *\n * @returns {Promise<VerifyPresentationResult>} The verification result.\n */\nasync function verify(options = {}) {\n  const {presentation} = options;\n  try {\n    if(!presentation) {\n      throw new TypeError(\n        'A \"presentation\" property is required for verifying.');\n    }\n    return _verifyPresentation(options);\n  } catch(error) {\n    return {\n      verified: false,\n      results: [{presentation, verified: false, error}],\n      error\n    };\n  }\n}\n\n/**\n * Verifies a verifiable credential:\n *   - Checks that the credential is well-formed\n *   - Checks the proofs (for example, checks digital signatures against the\n *     provided public keys).\n *\n * @param {object} [options={}] - The options.\n *\n * @param {object} options.credential - Verifiable credential.\n *\n * @param {LinkedDataSignature|LinkedDataSignature[]} options.suite - One or\n *   more signature suites that are supported by the caller's use case. This is\n *   an explicit design decision -- the calling code must specify which\n *   signature types (ed25519, RSA, etc) are allowed.\n *   Although it is expected that the secure resolution/fetching of the public\n *   key material (to verify against) is to be handled by the documentLoader,\n *   the suite param can optionally include the key directly.\n *\n * @param {CredentialIssuancePurpose} [options.purpose] - Optional\n *   proof purpose (a default one will be created if not passed in).\n * @param {Function} [options.documentLoader] - A document loader.\n * @param {Function} [options.checkStatus] - Optional function for checking\n *   credential status if `credentialStatus` is present on the credential.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n *\n * @returns {Promise<VerifyCredentialResult>} The verification result.\n */\nasync function verifyCredential(options = {}) {\n  const {credential} = options;\n  try {\n    if(!credential) {\n      throw new TypeError(\n        'A \"credential\" property is required for verifying.');\n    }\n    return await _verifyCredential(options);\n  } catch(error) {\n    return {\n      verified: false,\n      results: [{credential, verified: false, error}],\n      error\n    };\n  }\n}\n\n/**\n * Verifies a verifiable credential.\n *\n * @private\n * @param {object} [options={}] - The options.\n *\n * @param {object} options.credential - Verifiable credential.\n * @param {LinkedDataSignature|LinkedDataSignature[]} options.suite - See the\n *   definition in the `verify()` docstring, for this param.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n *\n * @throws {Error} If required parameters are missing (in `_checkCredential`).\n *\n * @param {CredentialIssuancePurpose} [options.purpose] - A purpose.\n * @param {Function} [options.documentLoader] - A document loader.\n * @param {Function} [options.checkStatus] - Optional function for checking\n *   credential status if `credentialStatus` is present on the credential.\n *\n * @returns {Promise<VerifyCredentialResult>} The verification result.\n */\nasync function _verifyCredential(options = {}) {\n  const {credential, checkStatus, now} = options;\n\n  // run common credential checks\n  _checkCredential({credential, now});\n\n  // if credential status is provided, a `checkStatus` function must be given\n  if(credential.credentialStatus && typeof options.checkStatus !== 'function') {\n    throw new TypeError(\n      'A \"checkStatus\" function must be given to verify credentials with ' +\n      '\"credentialStatus\".');\n  }\n\n  const documentLoader = options.documentLoader || defaultDocumentLoader;\n\n  const {controller} = options;\n  const purpose = options.purpose || new _CredentialIssuancePurpose_js__WEBPACK_IMPORTED_MODULE_1__.CredentialIssuancePurpose({\n    controller\n  });\n\n  const result = await jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.verify(\n    credential, {...options, purpose, documentLoader});\n\n  // if verification has already failed, skip status check\n  if(!result.verified) {\n    return result;\n  }\n\n  if(credential.credentialStatus) {\n    result.statusResult = await checkStatus(options);\n    if(!result.statusResult.verified) {\n      result.verified = false;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Creates an unsigned presentation from a given verifiable credential.\n *\n * @param {object} options - Options to use.\n * @param {object|Array<object>} [options.verifiableCredential] - One or more\n *   verifiable credential.\n * @param {string} [options.id] - Optional VP id.\n * @param {string} [options.holder] - Optional presentation holder url.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n *\n * @throws {TypeError} If verifiableCredential param is missing.\n * @throws {Error} If the credential (or the presentation params) are missing\n *   required properties.\n *\n * @returns {Presentation} The credential wrapped inside of a\n *   VerifiablePresentation.\n */\nfunction createPresentation({\n  verifiableCredential, id, holder, now\n} = {}) {\n  const presentation = {\n    '@context': [CREDENTIALS_CONTEXT_V1_URL],\n    type: ['VerifiablePresentation']\n  };\n  if(verifiableCredential) {\n    const credentials = [].concat(verifiableCredential);\n    // ensure all credentials are valid\n    for(const credential of credentials) {\n      _checkCredential({credential, now});\n    }\n    presentation.verifiableCredential = credentials;\n  }\n  if(id) {\n    presentation.id = id;\n  }\n  if(holder) {\n    presentation.holder = holder;\n  }\n\n  _checkPresentation(presentation);\n\n  return presentation;\n}\n\n/**\n * Signs a given presentation.\n *\n * @param {object} [options={}] - Options to use.\n *\n * Required:\n * @param {Presentation} options.presentation - A presentation.\n * @param {LinkedDataSignature} options.suite - passed in to sign()\n *\n * Either pass in a ProofPurpose, or a default one will be created with params:\n * @param {ProofPurpose} [options.purpose] - A ProofPurpose. If not specified,\n *   a default purpose will be created with the domain and challenge options.\n *\n * @param {string} [options.domain] - A domain.\n * @param {string} options.challenge - A required challenge.\n *\n * @param {Function} [options.documentLoader] - A document loader.\n *\n * @returns {Promise<{VerifiablePresentation}>} A VerifiablePresentation with\n *   a proof.\n */\nasync function signPresentation(options = {}) {\n  const {presentation, domain, challenge} = options;\n  const purpose = options.purpose || new AuthenticationProofPurpose({\n    domain,\n    challenge\n  });\n\n  const documentLoader = options.documentLoader || defaultDocumentLoader;\n\n  return jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.sign(presentation, {...options, purpose, documentLoader});\n}\n\n/**\n * Verifies that the VerifiablePresentation is well formed, and checks the\n * proof signature if it's present. Also verifies all the VerifiableCredentials\n * that are present in the presentation, if any.\n *\n * @param {object} [options={}] - The options.\n * @param {VerifiablePresentation} options.presentation - A\n *   VerifiablePresentation.\n *\n * @param {LinkedDataSignature|LinkedDataSignature[]} options.suite - See the\n *   definition in the `verify()` docstring, for this param.\n *\n * @param {boolean} [options.unsignedPresentation=false] - By default, this\n *   function assumes that a presentation is signed (and will return an error if\n *   a `proof` section is missing). Set this to `true` if you're using an\n *   unsigned presentation.\n *\n * Either pass in a proof purpose,\n * @param {AuthenticationProofPurpose} [options.presentationPurpose] - A\n *   ProofPurpose. If not specified, a default purpose will be created with\n *   the challenge, controller, and domain options.\n *\n * @param {string} [options.challenge] - A challenge. Required if purpose is\n *   not passed in.\n * @param {string} [options.controller] - A controller. Required if purpose is\n *   not passed in.\n * @param {string} [options.domain] - A domain. Required if purpose is not\n *   passed in.\n *\n * @param {Function} [options.documentLoader] - A document loader.\n * @param {Function} [options.checkStatus] - Optional function for checking\n *   credential status if `credentialStatus` is present on the credential.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n *\n * @throws {Error} If presentation is missing required params.\n *\n * @returns {Promise<VerifyPresentationResult>} The verification result.\n */\nasync function _verifyPresentation(options = {}) {\n  const {presentation, unsignedPresentation} = options;\n\n  _checkPresentation(presentation);\n\n  const documentLoader = options.documentLoader || defaultDocumentLoader;\n\n  // FIXME: verify presentation first, then each individual credential\n  // only if that proof is verified\n\n  // if verifiableCredentials are present, verify them, individually\n  let credentialResults;\n  let verified = true;\n  const credentials = jsonld__WEBPACK_IMPORTED_MODULE_3__.getValues(presentation, 'verifiableCredential');\n  if(credentials.length > 0) {\n    // verify every credential in `verifiableCredential`\n    credentialResults = await Promise.all(credentials.map(credential => {\n      return verifyCredential({...options, credential, documentLoader});\n    }));\n\n    for(const [i, credentialResult] of credentialResults.entries()) {\n      credentialResult.credentialId = credentials[i].id;\n    }\n\n    const allCredentialsVerified = credentialResults.every(r => r.verified);\n    if(!allCredentialsVerified) {\n      verified = false;\n    }\n  }\n\n  if(unsignedPresentation) {\n    // No need to verify the proof section of this presentation\n    return {verified, results: [presentation], credentialResults};\n  }\n\n  const {controller, domain, challenge} = options;\n  if(!options.presentationPurpose && !challenge) {\n    throw new Error(\n      'A \"challenge\" param is required for AuthenticationProofPurpose.');\n  }\n\n  const purpose = options.presentationPurpose ||\n    new AuthenticationProofPurpose({controller, domain, challenge});\n\n  const presentationResult = await jsonld_signatures__WEBPACK_IMPORTED_MODULE_2__.verify(\n    presentation, {...options, purpose, documentLoader});\n\n  return {\n    presentationResult,\n    verified: verified && presentationResult.verified,\n    credentialResults,\n    error: presentationResult.error\n  };\n}\n\n/**\n * @param {string|object} obj - Either an object with an id property\n *   or a string that is an id.\n * @returns {string|undefined} Either an id or undefined.\n * @private\n */\nfunction _getId(obj) {\n  if(typeof obj === 'string') {\n    return obj;\n  }\n\n  if(!('id' in obj)) {\n    return;\n  }\n\n  return obj.id;\n}\n\n// export for testing\n/**\n * @param {object} presentation - An object that could be a presentation.\n *\n * @throws {Error}\n * @private\n */\nfunction _checkPresentation(presentation) {\n  // normalize to an array to allow the common case of context being a string\n  const context = Array.isArray(presentation['@context']) ?\n    presentation['@context'] : [presentation['@context']];\n\n  // ensure first context is 'https://www.w3.org/2018/credentials/v1'\n  if(context[0] !== CREDENTIALS_CONTEXT_V1_URL) {\n    throw new Error(\n      `\"${CREDENTIALS_CONTEXT_V1_URL}\" needs to be first in the ` +\n      'list of contexts.');\n  }\n\n  const types = jsonld__WEBPACK_IMPORTED_MODULE_3__.getValues(presentation, 'type');\n\n  // check type presence\n  if(!types.includes('VerifiablePresentation')) {\n    throw new Error('\"type\" must include \"VerifiablePresentation\".');\n  }\n}\n\n// export for testing\n/**\n * @param {object} options - The options.\n * @param {object} options.credential - An object that could be a\n *   VerifiableCredential.\n * @param {string|Date} [options.now] - A string representing date time in\n *   ISO 8601 format or an instance of Date. Defaults to current date time.\n * @param {string} [options.mode] - The mode of operation for this\n *   validation function, either `issue` or `verify`.\n *\n * @throws {Error}\n * @private\n */\nfunction _checkCredential({\n  credential, now = new Date(), mode = 'verify'\n} = {}) {\n  if(typeof now === 'string') {\n    now = new Date(now);\n  }\n  // ensure first context is 'https://www.w3.org/2018/credentials/v1'\n  if(credential['@context'][0] !== CREDENTIALS_CONTEXT_V1_URL) {\n    throw new Error(\n      `\"${CREDENTIALS_CONTEXT_V1_URL}\" needs to be first in the ` +\n      'list of contexts.');\n  }\n\n  // check type presence and cardinality\n  if(!credential.type) {\n    throw new Error('\"type\" property is required.');\n  }\n\n  if(!jsonld__WEBPACK_IMPORTED_MODULE_3__.getValues(credential, 'type').includes('VerifiableCredential')) {\n    throw new Error('\"type\" must include `VerifiableCredential`.');\n  }\n\n  if(!credential.credentialSubject) {\n    throw new Error('\"credentialSubject\" property is required.');\n  }\n\n  // If credentialSubject.id is present and is not a URI, reject it\n  if(credential.credentialSubject.id) {\n    _validateUriId({\n      id: credential.credentialSubject.id, propertyName: 'credentialSubject.id'\n    });\n  }\n\n  if(!credential.issuer) {\n    throw new Error('\"issuer\" property is required.');\n  }\n\n  // check issuanceDate cardinality\n  if(jsonld__WEBPACK_IMPORTED_MODULE_3__.getValues(credential, 'issuanceDate').length > 1) {\n    throw new Error('\"issuanceDate\" property can only have one value.');\n  }\n\n  // check issued is a date\n  if(!credential.issuanceDate) {\n    throw new Error('\"issuanceDate\" property is required.');\n  }\n\n  if('issuanceDate' in credential) {\n    let {issuanceDate} = credential;\n    if(!dateRegex.test(issuanceDate)) {\n      throw new Error(`\"issuanceDate\" must be a valid date: ${issuanceDate}`);\n    }\n    // check if `now` is before `issuanceDate` on verification\n    if(mode === 'verify') {\n      issuanceDate = new Date(issuanceDate);\n      if(now < issuanceDate) {\n        throw new Error(\n          `The current date time (${now.toISOString()}) is before the ` +\n          `\"issuanceDate\" (${issuanceDate.toISOString()}).`);\n      }\n    }\n  }\n\n  // check issuer cardinality\n  if(jsonld__WEBPACK_IMPORTED_MODULE_3__.getValues(credential, 'issuer').length > 1) {\n    throw new Error('\"issuer\" property can only have one value.');\n  }\n\n  // check issuer is a URL\n  if('issuer' in credential) {\n    const issuer = _getId(credential.issuer);\n    if(!issuer) {\n      throw new Error(`\"issuer\" id is required.`);\n    }\n    _validateUriId({id: issuer, propertyName: 'issuer'});\n  }\n\n  if('credentialStatus' in credential) {\n    const {credentialStatus} = credential;\n    if(Array.isArray(credentialStatus) ?\n      credentialStatus.some(cs => !cs.id) : !credentialStatus.id) {\n      throw new Error('\"credentialStatus\" must include an id.');\n    }\n    if(Array.isArray(credentialStatus) ?\n      credentialStatus.some(cs => !cs.type) : !credentialStatus.type) {\n      throw new Error('\"credentialStatus\" must include a type.');\n    }\n  }\n\n  // check evidences are URLs\n  jsonld__WEBPACK_IMPORTED_MODULE_3__.getValues(credential, 'evidence').forEach(evidence => {\n    const evidenceId = _getId(evidence);\n    if(evidenceId) {\n      _validateUriId({id: evidenceId, propertyName: 'evidence'});\n    }\n  });\n\n  if('expirationDate' in credential) {\n    const {expirationDate} = credential;\n    // check if `expirationDate` property is a date\n    if(!dateRegex.test(expirationDate)) {\n      throw new Error(\n        `\"expirationDate\" must be a valid date: ${expirationDate}`);\n    }\n    // check if `now` is after `expirationDate`\n    if(now > new Date(expirationDate)) {\n      throw new Error('Credential has expired.');\n    }\n  }\n}\n\nfunction _validateUriId({id, propertyName}) {\n  let parsed;\n  try {\n    parsed = new URL(id);\n  } catch(e) {\n    const error = new TypeError(`\"${propertyName}\" must be a URI: \"${id}\".`);\n    error.cause = e;\n    throw error;\n  }\n\n  if(!parsed.protocol) {\n    throw new TypeError(`\"${propertyName}\" must be a URI: \"${id}\".`);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ3NFO0FBQ0c7QUFDbkM7QUFDVjtBQUNyQjtBQUNQLEVBQUUsa0VBQXlCLENBQUMsOERBQWU7QUFDZTs7QUFFMUQsT0FBTyxtREFBbUQsRUFBRSx1REFBYztBQUMxRSxPQUFPLFlBQVksNkJBQTZCLEVBQUUsZ0RBQWtCOztBQUVqQzs7QUFFbkM7QUFDQTtBQUNPLG9DQUFvQyxFQUFFO0FBQzdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGNBQWMsU0FBUztBQUN2QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxPQUFPO0FBQ3JCLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixjQUFjLFNBQVM7QUFDdkIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsT0FBTztBQUNyQixjQUFjLFFBQVE7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVEsV0FBVztBQUM5QjtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLHFCQUFxQjtBQUNoQztBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBLGFBQWEsK0JBQStCO0FBQzVDO0FBQ087QUFDUDtBQUNBLGdCQUFnQixvRkFBeUI7QUFDekM7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw2QkFBNkI7QUFDOUQ7O0FBRUE7QUFDQSxvQkFBb0IsK0JBQStCOztBQUVuRCxTQUFTLG1EQUFVLGNBQWMsK0JBQStCO0FBQ2hFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVEsV0FBVztBQUM5QjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQSxhQUFhLCtCQUErQjtBQUM1QztBQUNPO0FBQ1A7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLGdEQUFnRDs7QUFFcEUsU0FBUyxxREFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRLFdBQVc7QUFDOUI7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxXQUFXLDJDQUEyQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw0QkFBNEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQSxXQUFXLFVBQVU7QUFDckIsV0FBVyxVQUFVO0FBQ3JCO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQSxhQUFhLG1DQUFtQztBQUNoRDtBQUNPLGtDQUFrQztBQUN6QyxTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxpQkFBaUIscUNBQXFDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUSxXQUFXO0FBQzlCO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVywyQ0FBMkM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJCQUEyQjtBQUN0QztBQUNBLFdBQVcsVUFBVTtBQUNyQixXQUFXLFVBQVU7QUFDckI7QUFDQSxXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLGFBQWEsaUNBQWlDO0FBQzlDO0FBQ08sNENBQTRDO0FBQ25ELFNBQVMsWUFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGlCQUFpQixtQ0FBbUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVEsV0FBVztBQUM5QjtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLDJDQUEyQztBQUN0RDtBQUNBLFdBQVcsYUFBYTtBQUN4QjtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0EsV0FBVywyQkFBMkI7QUFDdEMsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0EsYUFBYSxpQ0FBaUM7QUFDOUM7QUFDQSw2Q0FBNkM7QUFDN0MsU0FBUyw4QkFBOEI7O0FBRXZDO0FBQ0Esb0JBQW9CLGdCQUFnQjs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFNBQVMsWUFBWTtBQUNyQix5Q0FBeUMsb0ZBQXlCO0FBQ2xFO0FBQ0EsR0FBRzs7QUFFSCx1QkFBdUIscURBQVk7QUFDbkMsaUJBQWlCLG9DQUFvQzs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsc0JBQXNCO0FBQ2pDO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QixZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBLGFBQWEsY0FBYztBQUMzQjtBQUNBO0FBQ087QUFDUDtBQUNBLEVBQUUsSUFBSTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0JBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUSxXQUFXO0FBQzlCO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxxQkFBcUI7QUFDaEM7QUFDQTtBQUNBLFdBQVcsY0FBYztBQUN6QjtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBLGFBQWEsU0FBUyx1QkFBdUIsR0FBRztBQUNoRDtBQUNBO0FBQ08sNENBQTRDO0FBQ25ELFNBQVMsaUNBQWlDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsU0FBUyxtREFBVSxnQkFBZ0Isb0NBQW9DO0FBQ3ZFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVEsV0FBVztBQUM5QixXQUFXLHdCQUF3QjtBQUNuQztBQUNBO0FBQ0EsV0FBVywyQ0FBMkM7QUFDdEQ7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw0QkFBNEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLFVBQVU7QUFDckIsV0FBVyxVQUFVO0FBQ3JCO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQSxhQUFhLG1DQUFtQztBQUNoRDtBQUNBLCtDQUErQztBQUMvQyxTQUFTLG9DQUFvQzs7QUFFN0M7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQWdCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix1Q0FBdUM7QUFDdEUsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVBLFNBQVMsK0JBQStCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0NBQW9DLDhCQUE4Qjs7QUFFbEUsbUNBQW1DLHFEQUFZO0FBQy9DLG1CQUFtQixvQ0FBb0M7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCO0FBQ0EsYUFBYSxrQkFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMkJBQTJCO0FBQ3JDO0FBQ0E7O0FBRUEsZ0JBQWdCLDZDQUFnQjs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFdBQVcsYUFBYTtBQUN4QjtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDTztBQUNQO0FBQ0EsRUFBRSxJQUFJO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwyQkFBMkI7QUFDckM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNLDZDQUFnQjtBQUN0QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLLDZDQUFnQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUyxjQUFjO0FBQ3ZCO0FBQ0EsOERBQThELGFBQWE7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGtCQUFrQjtBQUN0RCw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUssNkNBQWdCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1DQUFtQztBQUN2RDs7QUFFQTtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUUsNkNBQWdCO0FBQ2xCO0FBQ0E7QUFDQSxzQkFBc0IseUNBQXlDO0FBQy9EO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxlQUFlO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixpQkFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG9DQUFvQyxhQUFhLG9CQUFvQixHQUFHO0FBQ3hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QixhQUFhLG9CQUFvQixHQUFHO0FBQ2hFO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIvdmMvbGliL2luZGV4LmpzP2M3NTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgVmVyaWZpYWJsZSBDcmVkZW50aWFscy5cbiAqXG4gKiBAYXV0aG9yIERhdmUgTG9uZ2xleVxuICogQGF1dGhvciBEYXZpZCBJLiBMZWhuXG4gKlxuICogQGxpY2Vuc2UgQlNEIDMtQ2xhdXNlIExpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNy0yMDIzIERpZ2l0YWwgQmF6YWFyLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKlxuICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuICogbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuICogZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBEaWdpdGFsIEJhemFhciwgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICogY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAqIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTXG4gKiBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEXG4gKiBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEFcbiAqIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuICogSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLFxuICogU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEXG4gKiBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SXG4gKiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElOR1xuICogTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG4gKiBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqL1xuaW1wb3J0IHtkb2N1bWVudExvYWRlciBhcyBfZG9jdW1lbnRMb2FkZXJ9IGZyb20gJy4vZG9jdW1lbnRMb2FkZXIuanMnO1xuaW1wb3J0IHtDcmVkZW50aWFsSXNzdWFuY2VQdXJwb3NlfSBmcm9tICcuL0NyZWRlbnRpYWxJc3N1YW5jZVB1cnBvc2UuanMnO1xuaW1wb3J0IGpzaWdzIGZyb20gJ2pzb25sZC1zaWduYXR1cmVzJztcbmltcG9ydCBqc29ubGQgZnJvbSAnanNvbmxkJztcbmV4cG9ydCBjb25zdCBkZWZhdWx0RG9jdW1lbnRMb2FkZXIgPVxuICBqc2lncy5leHRlbmRDb250ZXh0TG9hZGVyKF9kb2N1bWVudExvYWRlcik7XG5pbXBvcnQgKiBhcyBjcmVkZW50aWFsc0NvbnRleHQgZnJvbSAnY3JlZGVudGlhbHMtY29udGV4dCc7XG5cbmNvbnN0IHtBc3NlcnRpb25Qcm9vZlB1cnBvc2UsIEF1dGhlbnRpY2F0aW9uUHJvb2ZQdXJwb3NlfSA9IGpzaWdzLnB1cnBvc2VzO1xuY29uc3Qge2NvbnN0YW50czoge0NSRURFTlRJQUxTX0NPTlRFWFRfVjFfVVJMfX0gPSBjcmVkZW50aWFsc0NvbnRleHQ7XG5cbmV4cG9ydCB7Q3JlZGVudGlhbElzc3VhbmNlUHVycG9zZX07XG5cbi8vIFogYW5kIFQgY2FuIGJlIGxvd2VyY2FzZVxuLy8gUkZDMzMzOSByZWdleFxuZXhwb3J0IGNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoJ14oXFxcXGR7NH0pLSgwWzEtOV18MVswLTJdKS0nICtcbiAgICAnKDBbMS05XXxbMTJdWzAtOV18M1swMV0pVChbMDFdWzAtOV18MlswLTNdKTonICtcbiAgICAnKFswLTVdWzAtOV0pOihbMC01XVswLTldfDYwKScgK1xuICAgICcoXFxcXC5bMC05XSspPyhafChcXFxcK3wtKShbMDFdWzAtOV18MlswLTNdKTonICtcbiAgICAnKFswLTVdWzAtOV0pKSQnLCAnaScpO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IExpbmtlZERhdGFTaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IFByZXNlbnRhdGlvblxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gUHJvb2ZQdXJwb3NlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBWZXJpZmlhYmxlQ3JlZGVudGlhbFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gVmVyaWZpYWJsZVByZXNlbnRhdGlvblxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gVmVyaWZ5UHJlc2VudGF0aW9uUmVzdWx0XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHZlcmlmaWVkIC0gVHJ1ZSBpZiB2ZXJpZmllZCwgZmFsc2UgaWYgbm90LlxuICogQHByb3BlcnR5IHtvYmplY3R9IHByZXNlbnRhdGlvblJlc3VsdFxuICogQHByb3BlcnR5IHtBcnJheX0gY3JlZGVudGlhbFJlc3VsdHNcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBlcnJvclxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gVmVyaWZ5Q3JlZGVudGlhbFJlc3VsdFxuICogQHByb3BlcnR5IHtib29sZWFufSB2ZXJpZmllZCAtIFRydWUgaWYgdmVyaWZpZWQsIGZhbHNlIGlmIG5vdC5cbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBzdGF0dXNSZXN1bHRcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IHJlc3VsdHNcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBlcnJvclxuICovXG5cbi8qKlxuICogSXNzdWVzIGEgdmVyaWZpYWJsZSBjcmVkZW50aWFsIChieSB0YWtpbmcgYSBiYXNlIGNyZWRlbnRpYWwgZG9jdW1lbnQsXG4gKiBhbmQgYWRkaW5nIGEgZGlnaXRhbCBzaWduYXR1cmUgdG8gaXQpLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBUaGUgb3B0aW9ucyB0byB1c2UuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuY3JlZGVudGlhbCAtIEJhc2UgY3JlZGVudGlhbCBkb2N1bWVudC5cbiAqIEBwYXJhbSB7TGlua2VkRGF0YVNpZ25hdHVyZX0gb3B0aW9ucy5zdWl0ZSAtIFNpZ25hdHVyZSBzdWl0ZSAod2l0aCBwcml2YXRlXG4gKiAgIGtleSBtYXRlcmlhbCBvciBhbiBBUEkgdG8gdXNlIGl0KSwgcGFzc2VkIGluIHRvIHNpZ24oKS5cbiAqXG4gKiBAcGFyYW0ge1Byb29mUHVycG9zZX0gW29wdGlvbnMucHVycG9zZV0gLSBBIFByb29mUHVycG9zZS4gSWYgbm90IHNwZWNpZmllZCxcbiAqICAgYSBkZWZhdWx0IHB1cnBvc2Ugd2lsbCBiZSBjcmVhdGVkLlxuICpcbiAqIE90aGVyIG9wdGlvbmFsIHBhcmFtcyBwYXNzZWQgdG8gYHNpZ24oKWA6XG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMuZG9jdW1lbnRMb2FkZXJdIC0gQSBkb2N1bWVudCBsb2FkZXIuXG4gKiBAcGFyYW0ge3N0cmluZ3xEYXRlfSBbb3B0aW9ucy5ub3ddIC0gQSBzdHJpbmcgcmVwcmVzZW50aW5nIGRhdGUgdGltZSBpblxuICogICBJU08gODYwMSBmb3JtYXQgb3IgYW4gaW5zdGFuY2Ugb2YgRGF0ZS4gRGVmYXVsdHMgdG8gY3VycmVudCBkYXRlIHRpbWUuXG4gKlxuICogQHRocm93cyB7RXJyb3J9IElmIG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllcy5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxWZXJpZmlhYmxlQ3JlZGVudGlhbD59IFJlc29sdmVzIG9uIGNvbXBsZXRpb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc3N1ZSh7XG4gIGNyZWRlbnRpYWwsIHN1aXRlLFxuICBwdXJwb3NlID0gbmV3IENyZWRlbnRpYWxJc3N1YW5jZVB1cnBvc2UoKSxcbiAgZG9jdW1lbnRMb2FkZXIgPSBkZWZhdWx0RG9jdW1lbnRMb2FkZXIsXG4gIG5vd1xufSA9IHt9KSB7XG4gIC8vIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYHN1aXRlYCBoYXMgcmVxdWlyZWQgcGFyYW1zXG4gIC8vIE5vdGU6IHZlcmlmaWNhdGlvbk1ldGhvZCBkZWZhdWx0cyB0byBwdWJsaWNLZXkuaWQsIGluIHN1aXRlIGNvbnN0cnVjdG9yXG4gIGlmKCFzdWl0ZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic3VpdGVcIiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgZm9yIGlzc3VpbmcuJyk7XG4gIH1cbiAgaWYoIXN1aXRlLnZlcmlmaWNhdGlvbk1ldGhvZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic3VpdGUudmVyaWZpY2F0aW9uTWV0aG9kXCIgcHJvcGVydHkgaXMgcmVxdWlyZWQuJyk7XG4gIH1cblxuICBpZighY3JlZGVudGlhbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY3JlZGVudGlhbFwiIHBhcmFtZXRlciBpcyByZXF1aXJlZCBmb3IgaXNzdWluZy4nKTtcbiAgfVxuXG4gIC8vIFNldCB0aGUgaXNzdWFuY2UgZGF0ZSB0byBub3coKSwgaWYgbWlzc2luZ1xuICBpZighY3JlZGVudGlhbC5pc3N1YW5jZURhdGUpIHtcbiAgICBjb25zdCBub3cgPSAobmV3IERhdGUoKSkudG9KU09OKCk7XG4gICAgY3JlZGVudGlhbC5pc3N1YW5jZURhdGUgPSBgJHtub3cuc2xpY2UoMCwgbm93Lmxlbmd0aCAtIDUpfVpgO1xuICB9XG5cbiAgLy8gcnVuIGNvbW1vbiBjcmVkZW50aWFsIGNoZWNrc1xuICBfY2hlY2tDcmVkZW50aWFsKHtjcmVkZW50aWFsLCBub3csIG1vZGU6ICdpc3N1ZSd9KTtcblxuICByZXR1cm4ganNpZ3Muc2lnbihjcmVkZW50aWFsLCB7cHVycG9zZSwgZG9jdW1lbnRMb2FkZXIsIHN1aXRlfSk7XG59XG5cbi8qKlxuICogRGVyaXZlcyBhIHByb29mIGZyb20gdGhlIGdpdmVuIHZlcmlmaWFibGUgY3JlZGVudGlhbCwgcmVzdWx0aW5nIGluIGEgbmV3XG4gKiB2ZXJpZmlhYmxlIGNyZWRlbnRpYWwuIFRoaXMgbWV0aG9kIGlzIHVzdWFsbHkgdXNlZCB0byBnZW5lcmF0ZSBzZWxlY3RpdmVcbiAqIGRpc2Nsb3N1cmUgYW5kIC8gb3IgdW5saW5rYWJsZSBwcm9vZnMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIFRoZSBvcHRpb25zIHRvIHVzZS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy52ZXJpZmlhYmxlQ3JlZGVudGlhbCAtIFRoZSB2ZXJpZmlhYmxlIGNyZWRlbnRpYWxcbiAqICAgY29udGFpbmluZyBhIGJhc2UgcHJvb2YgdG8gZGVyaXZlIGFub3RoZXIgcHJvb2YgZnJvbS5cbiAqIEBwYXJhbSB7TGlua2VkRGF0YVNpZ25hdHVyZX0gb3B0aW9ucy5zdWl0ZSAtIERlcml2ZWQgcHJvb2Ygc2lnbmF0dXJlIHN1aXRlLlxuICpcbiAqIE90aGVyIG9wdGlvbmFsIHBhcmFtcyBwYXNzZWQgdG8gYGRlcml2ZSgpYDpcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5kb2N1bWVudExvYWRlcl0gLSBBIGRvY3VtZW50IGxvYWRlci5cbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPFZlcmlmaWFibGVDcmVkZW50aWFsPn0gUmVzb2x2ZXMgb24gY29tcGxldGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcml2ZSh7XG4gIHZlcmlmaWFibGVDcmVkZW50aWFsLCBzdWl0ZSxcbiAgZG9jdW1lbnRMb2FkZXIgPSBkZWZhdWx0RG9jdW1lbnRMb2FkZXJcbn0gPSB7fSkge1xuICBpZighdmVyaWZpYWJsZUNyZWRlbnRpYWwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1widmVyaWZpYWJsZUNyZWRlbnRpYWxcIiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgZm9yIGRlcml2aW5nLicpO1xuICB9XG4gIGlmKCFzdWl0ZSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic3VpdGVcIiBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgZm9yIGRlcml2aW5nLicpO1xuICB9XG5cbiAgLy8gcnVuIGNvbW1vbiBjcmVkZW50aWFsIGNoZWNrc1xuICBfY2hlY2tDcmVkZW50aWFsKHtjcmVkZW50aWFsOiB2ZXJpZmlhYmxlQ3JlZGVudGlhbCwgbW9kZTogJ2lzc3VlJ30pO1xuXG4gIHJldHVybiBqc2lncy5kZXJpdmUodmVyaWZpYWJsZUNyZWRlbnRpYWwsIHtcbiAgICBwdXJwb3NlOiBuZXcgQXNzZXJ0aW9uUHJvb2ZQdXJwb3NlKCksXG4gICAgZG9jdW1lbnRMb2FkZXIsXG4gICAgc3VpdGVcbiAgfSk7XG59XG5cbi8qKlxuICogVmVyaWZpZXMgYSB2ZXJpZmlhYmxlIHByZXNlbnRhdGlvbjpcbiAqICAgLSBDaGVja3MgdGhhdCB0aGUgcHJlc2VudGF0aW9uIGlzIHdlbGwtZm9ybWVkXG4gKiAgIC0gQ2hlY2tzIHRoZSBwcm9vZnMgKGZvciBleGFtcGxlLCBjaGVja3MgZGlnaXRhbCBzaWduYXR1cmVzIGFnYWluc3QgdGhlXG4gKiAgICAgcHJvdmlkZWQgcHVibGljIGtleXMpLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBUaGUgb3B0aW9ucyB0byB1c2UuXG4gKlxuICogQHBhcmFtIHtWZXJpZmlhYmxlUHJlc2VudGF0aW9ufSBvcHRpb25zLnByZXNlbnRhdGlvbiAtIFZlcmlmaWFibGVcbiAqICAgcHJlc2VudGF0aW9uLCBzaWduZWQgb3IgdW5zaWduZWQsIHRoYXQgbWF5IGNvbnRhaW4gd2l0aGluIGl0IGFcbiAqICAgdmVyaWZpYWJsZSBjcmVkZW50aWFsLlxuICpcbiAqIEBwYXJhbSB7TGlua2VkRGF0YVNpZ25hdHVyZXxMaW5rZWREYXRhU2lnbmF0dXJlW119IG9wdGlvbnMuc3VpdGUgLSBPbmUgb3JcbiAqICAgbW9yZSBzaWduYXR1cmUgc3VpdGVzIHRoYXQgYXJlIHN1cHBvcnRlZCBieSB0aGUgY2FsbGVyJ3MgdXNlIGNhc2UuIFRoaXMgaXNcbiAqICAgYW4gZXhwbGljaXQgZGVzaWduIGRlY2lzaW9uIC0tIHRoZSBjYWxsaW5nIGNvZGUgbXVzdCBzcGVjaWZ5IHdoaWNoXG4gKiAgIHNpZ25hdHVyZSB0eXBlcyAoZWQyNTUxOSwgUlNBLCBldGMpIGFyZSBhbGxvd2VkLlxuICogICBBbHRob3VnaCBpdCBpcyBleHBlY3RlZCB0aGF0IHRoZSBzZWN1cmUgcmVzb2x1dGlvbi9mZXRjaGluZyBvZiB0aGUgcHVibGljXG4gKiAgIGtleSBtYXRlcmlhbCAodG8gdmVyaWZ5IGFnYWluc3QpIGlzIHRvIGJlIGhhbmRsZWQgYnkgdGhlIGRvY3VtZW50TG9hZGVyLFxuICogICB0aGUgc3VpdGUgcGFyYW0gY2FuIG9wdGlvbmFsbHkgaW5jbHVkZSB0aGUga2V5IGRpcmVjdGx5LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudW5zaWduZWRQcmVzZW50YXRpb249ZmFsc2VdIC0gQnkgZGVmYXVsdCwgdGhpc1xuICogICBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBwcmVzZW50YXRpb24gaXMgc2lnbmVkIChhbmQgd2lsbCByZXR1cm4gYW4gZXJyb3IgaWZcbiAqICAgYSBgcHJvb2ZgIHNlY3Rpb24gaXMgbWlzc2luZykuIFNldCB0aGlzIHRvIGB0cnVlYCBpZiB5b3UncmUgdXNpbmcgYW5cbiAqICAgdW5zaWduZWQgcHJlc2VudGF0aW9uLlxuICpcbiAqIEVpdGhlciBwYXNzIGluIGEgcHJvb2YgcHVycG9zZSxcbiAqIEBwYXJhbSB7QXV0aGVudGljYXRpb25Qcm9vZlB1cnBvc2V9IFtvcHRpb25zLnByZXNlbnRhdGlvblB1cnBvc2VdIC0gT3B0aW9uYWxcbiAqICAgcHJvb2YgcHVycG9zZSAoYSBkZWZhdWx0IG9uZSB3aWxsIGJlIGNyZWF0ZWQgaWYgbm90IHBhc3NlZCBpbikuXG4gKlxuICogb3IgYSBkZWZhdWx0IHB1cnBvc2Ugd2lsbCBiZSBjcmVhdGVkIHdpdGggcGFyYW1zOlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmNoYWxsZW5nZV0gLSBSZXF1aXJlZCBpZiBwdXJwb3NlIGlzIG5vdCBwYXNzZWQgaW4uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29udHJvbGxlcl0gLSBBIGNvbnRyb2xsZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuZG9tYWluXSAtIEEgZG9tYWluLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmRvY3VtZW50TG9hZGVyXSAtIEEgZG9jdW1lbnQgbG9hZGVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuY2hlY2tTdGF0dXNdIC0gT3B0aW9uYWwgZnVuY3Rpb24gZm9yIGNoZWNraW5nXG4gKiAgIGNyZWRlbnRpYWwgc3RhdHVzIGlmIGBjcmVkZW50aWFsU3RhdHVzYCBpcyBwcmVzZW50IG9uIHRoZSBjcmVkZW50aWFsLlxuICogQHBhcmFtIHtzdHJpbmd8RGF0ZX0gW29wdGlvbnMubm93XSAtIEEgc3RyaW5nIHJlcHJlc2VudGluZyBkYXRlIHRpbWUgaW5cbiAqICAgSVNPIDg2MDEgZm9ybWF0IG9yIGFuIGluc3RhbmNlIG9mIERhdGUuIERlZmF1bHRzIHRvIGN1cnJlbnQgZGF0ZSB0aW1lLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPFZlcmlmeVByZXNlbnRhdGlvblJlc3VsdD59IFRoZSB2ZXJpZmljYXRpb24gcmVzdWx0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5KG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7cHJlc2VudGF0aW9ufSA9IG9wdGlvbnM7XG4gIHRyeSB7XG4gICAgaWYoIXByZXNlbnRhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0EgXCJwcmVzZW50YXRpb25cIiBwcm9wZXJ0eSBpcyByZXF1aXJlZCBmb3IgdmVyaWZ5aW5nLicpO1xuICAgIH1cbiAgICByZXR1cm4gX3ZlcmlmeVByZXNlbnRhdGlvbihvcHRpb25zKTtcbiAgfSBjYXRjaChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJpZmllZDogZmFsc2UsXG4gICAgICByZXN1bHRzOiBbe3ByZXNlbnRhdGlvbiwgdmVyaWZpZWQ6IGZhbHNlLCBlcnJvcn1dLFxuICAgICAgZXJyb3JcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogVmVyaWZpZXMgYSB2ZXJpZmlhYmxlIGNyZWRlbnRpYWw6XG4gKiAgIC0gQ2hlY2tzIHRoYXQgdGhlIGNyZWRlbnRpYWwgaXMgd2VsbC1mb3JtZWRcbiAqICAgLSBDaGVja3MgdGhlIHByb29mcyAoZm9yIGV4YW1wbGUsIGNoZWNrcyBkaWdpdGFsIHNpZ25hdHVyZXMgYWdhaW5zdCB0aGVcbiAqICAgICBwcm92aWRlZCBwdWJsaWMga2V5cykuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIFRoZSBvcHRpb25zLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmNyZWRlbnRpYWwgLSBWZXJpZmlhYmxlIGNyZWRlbnRpYWwuXG4gKlxuICogQHBhcmFtIHtMaW5rZWREYXRhU2lnbmF0dXJlfExpbmtlZERhdGFTaWduYXR1cmVbXX0gb3B0aW9ucy5zdWl0ZSAtIE9uZSBvclxuICogICBtb3JlIHNpZ25hdHVyZSBzdWl0ZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBjYWxsZXIncyB1c2UgY2FzZS4gVGhpcyBpc1xuICogICBhbiBleHBsaWNpdCBkZXNpZ24gZGVjaXNpb24gLS0gdGhlIGNhbGxpbmcgY29kZSBtdXN0IHNwZWNpZnkgd2hpY2hcbiAqICAgc2lnbmF0dXJlIHR5cGVzIChlZDI1NTE5LCBSU0EsIGV0YykgYXJlIGFsbG93ZWQuXG4gKiAgIEFsdGhvdWdoIGl0IGlzIGV4cGVjdGVkIHRoYXQgdGhlIHNlY3VyZSByZXNvbHV0aW9uL2ZldGNoaW5nIG9mIHRoZSBwdWJsaWNcbiAqICAga2V5IG1hdGVyaWFsICh0byB2ZXJpZnkgYWdhaW5zdCkgaXMgdG8gYmUgaGFuZGxlZCBieSB0aGUgZG9jdW1lbnRMb2FkZXIsXG4gKiAgIHRoZSBzdWl0ZSBwYXJhbSBjYW4gb3B0aW9uYWxseSBpbmNsdWRlIHRoZSBrZXkgZGlyZWN0bHkuXG4gKlxuICogQHBhcmFtIHtDcmVkZW50aWFsSXNzdWFuY2VQdXJwb3NlfSBbb3B0aW9ucy5wdXJwb3NlXSAtIE9wdGlvbmFsXG4gKiAgIHByb29mIHB1cnBvc2UgKGEgZGVmYXVsdCBvbmUgd2lsbCBiZSBjcmVhdGVkIGlmIG5vdCBwYXNzZWQgaW4pLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZG9jdW1lbnRMb2FkZXJdIC0gQSBkb2N1bWVudCBsb2FkZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5jaGVja1N0YXR1c10gLSBPcHRpb25hbCBmdW5jdGlvbiBmb3IgY2hlY2tpbmdcbiAqICAgY3JlZGVudGlhbCBzdGF0dXMgaWYgYGNyZWRlbnRpYWxTdGF0dXNgIGlzIHByZXNlbnQgb24gdGhlIGNyZWRlbnRpYWwuXG4gKiBAcGFyYW0ge3N0cmluZ3xEYXRlfSBbb3B0aW9ucy5ub3ddIC0gQSBzdHJpbmcgcmVwcmVzZW50aW5nIGRhdGUgdGltZSBpblxuICogICBJU08gODYwMSBmb3JtYXQgb3IgYW4gaW5zdGFuY2Ugb2YgRGF0ZS4gRGVmYXVsdHMgdG8gY3VycmVudCBkYXRlIHRpbWUuXG4gKlxuICogQHJldHVybnMge1Byb21pc2U8VmVyaWZ5Q3JlZGVudGlhbFJlc3VsdD59IFRoZSB2ZXJpZmljYXRpb24gcmVzdWx0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5Q3JlZGVudGlhbChvcHRpb25zID0ge30pIHtcbiAgY29uc3Qge2NyZWRlbnRpYWx9ID0gb3B0aW9ucztcbiAgdHJ5IHtcbiAgICBpZighY3JlZGVudGlhbCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0EgXCJjcmVkZW50aWFsXCIgcHJvcGVydHkgaXMgcmVxdWlyZWQgZm9yIHZlcmlmeWluZy4nKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IF92ZXJpZnlDcmVkZW50aWFsKG9wdGlvbnMpO1xuICB9IGNhdGNoKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZlcmlmaWVkOiBmYWxzZSxcbiAgICAgIHJlc3VsdHM6IFt7Y3JlZGVudGlhbCwgdmVyaWZpZWQ6IGZhbHNlLCBlcnJvcn1dLFxuICAgICAgZXJyb3JcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogVmVyaWZpZXMgYSB2ZXJpZmlhYmxlIGNyZWRlbnRpYWwuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBUaGUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5jcmVkZW50aWFsIC0gVmVyaWZpYWJsZSBjcmVkZW50aWFsLlxuICogQHBhcmFtIHtMaW5rZWREYXRhU2lnbmF0dXJlfExpbmtlZERhdGFTaWduYXR1cmVbXX0gb3B0aW9ucy5zdWl0ZSAtIFNlZSB0aGVcbiAqICAgZGVmaW5pdGlvbiBpbiB0aGUgYHZlcmlmeSgpYCBkb2NzdHJpbmcsIGZvciB0aGlzIHBhcmFtLlxuICogQHBhcmFtIHtzdHJpbmd8RGF0ZX0gW29wdGlvbnMubm93XSAtIEEgc3RyaW5nIHJlcHJlc2VudGluZyBkYXRlIHRpbWUgaW5cbiAqICAgSVNPIDg2MDEgZm9ybWF0IG9yIGFuIGluc3RhbmNlIG9mIERhdGUuIERlZmF1bHRzIHRvIGN1cnJlbnQgZGF0ZSB0aW1lLlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiByZXF1aXJlZCBwYXJhbWV0ZXJzIGFyZSBtaXNzaW5nIChpbiBgX2NoZWNrQ3JlZGVudGlhbGApLlxuICpcbiAqIEBwYXJhbSB7Q3JlZGVudGlhbElzc3VhbmNlUHVycG9zZX0gW29wdGlvbnMucHVycG9zZV0gLSBBIHB1cnBvc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5kb2N1bWVudExvYWRlcl0gLSBBIGRvY3VtZW50IGxvYWRlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmNoZWNrU3RhdHVzXSAtIE9wdGlvbmFsIGZ1bmN0aW9uIGZvciBjaGVja2luZ1xuICogICBjcmVkZW50aWFsIHN0YXR1cyBpZiBgY3JlZGVudGlhbFN0YXR1c2AgaXMgcHJlc2VudCBvbiB0aGUgY3JlZGVudGlhbC5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxWZXJpZnlDcmVkZW50aWFsUmVzdWx0Pn0gVGhlIHZlcmlmaWNhdGlvbiByZXN1bHQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF92ZXJpZnlDcmVkZW50aWFsKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7Y3JlZGVudGlhbCwgY2hlY2tTdGF0dXMsIG5vd30gPSBvcHRpb25zO1xuXG4gIC8vIHJ1biBjb21tb24gY3JlZGVudGlhbCBjaGVja3NcbiAgX2NoZWNrQ3JlZGVudGlhbCh7Y3JlZGVudGlhbCwgbm93fSk7XG5cbiAgLy8gaWYgY3JlZGVudGlhbCBzdGF0dXMgaXMgcHJvdmlkZWQsIGEgYGNoZWNrU3RhdHVzYCBmdW5jdGlvbiBtdXN0IGJlIGdpdmVuXG4gIGlmKGNyZWRlbnRpYWwuY3JlZGVudGlhbFN0YXR1cyAmJiB0eXBlb2Ygb3B0aW9ucy5jaGVja1N0YXR1cyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnQSBcImNoZWNrU3RhdHVzXCIgZnVuY3Rpb24gbXVzdCBiZSBnaXZlbiB0byB2ZXJpZnkgY3JlZGVudGlhbHMgd2l0aCAnICtcbiAgICAgICdcImNyZWRlbnRpYWxTdGF0dXNcIi4nKTtcbiAgfVxuXG4gIGNvbnN0IGRvY3VtZW50TG9hZGVyID0gb3B0aW9ucy5kb2N1bWVudExvYWRlciB8fCBkZWZhdWx0RG9jdW1lbnRMb2FkZXI7XG5cbiAgY29uc3Qge2NvbnRyb2xsZXJ9ID0gb3B0aW9ucztcbiAgY29uc3QgcHVycG9zZSA9IG9wdGlvbnMucHVycG9zZSB8fCBuZXcgQ3JlZGVudGlhbElzc3VhbmNlUHVycG9zZSh7XG4gICAgY29udHJvbGxlclxuICB9KTtcblxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBqc2lncy52ZXJpZnkoXG4gICAgY3JlZGVudGlhbCwgey4uLm9wdGlvbnMsIHB1cnBvc2UsIGRvY3VtZW50TG9hZGVyfSk7XG5cbiAgLy8gaWYgdmVyaWZpY2F0aW9uIGhhcyBhbHJlYWR5IGZhaWxlZCwgc2tpcCBzdGF0dXMgY2hlY2tcbiAgaWYoIXJlc3VsdC52ZXJpZmllZCkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZihjcmVkZW50aWFsLmNyZWRlbnRpYWxTdGF0dXMpIHtcbiAgICByZXN1bHQuc3RhdHVzUmVzdWx0ID0gYXdhaXQgY2hlY2tTdGF0dXMob3B0aW9ucyk7XG4gICAgaWYoIXJlc3VsdC5zdGF0dXNSZXN1bHQudmVyaWZpZWQpIHtcbiAgICAgIHJlc3VsdC52ZXJpZmllZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiB1bnNpZ25lZCBwcmVzZW50YXRpb24gZnJvbSBhIGdpdmVuIHZlcmlmaWFibGUgY3JlZGVudGlhbC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgdG8gdXNlLlxuICogQHBhcmFtIHtvYmplY3R8QXJyYXk8b2JqZWN0Pn0gW29wdGlvbnMudmVyaWZpYWJsZUNyZWRlbnRpYWxdIC0gT25lIG9yIG1vcmVcbiAqICAgdmVyaWZpYWJsZSBjcmVkZW50aWFsLlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmlkXSAtIE9wdGlvbmFsIFZQIGlkLlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmhvbGRlcl0gLSBPcHRpb25hbCBwcmVzZW50YXRpb24gaG9sZGVyIHVybC5cbiAqIEBwYXJhbSB7c3RyaW5nfERhdGV9IFtvcHRpb25zLm5vd10gLSBBIHN0cmluZyByZXByZXNlbnRpbmcgZGF0ZSB0aW1lIGluXG4gKiAgIElTTyA4NjAxIGZvcm1hdCBvciBhbiBpbnN0YW5jZSBvZiBEYXRlLiBEZWZhdWx0cyB0byBjdXJyZW50IGRhdGUgdGltZS5cbiAqXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHZlcmlmaWFibGVDcmVkZW50aWFsIHBhcmFtIGlzIG1pc3NpbmcuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNyZWRlbnRpYWwgKG9yIHRoZSBwcmVzZW50YXRpb24gcGFyYW1zKSBhcmUgbWlzc2luZ1xuICogICByZXF1aXJlZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEByZXR1cm5zIHtQcmVzZW50YXRpb259IFRoZSBjcmVkZW50aWFsIHdyYXBwZWQgaW5zaWRlIG9mIGFcbiAqICAgVmVyaWZpYWJsZVByZXNlbnRhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByZXNlbnRhdGlvbih7XG4gIHZlcmlmaWFibGVDcmVkZW50aWFsLCBpZCwgaG9sZGVyLCBub3dcbn0gPSB7fSkge1xuICBjb25zdCBwcmVzZW50YXRpb24gPSB7XG4gICAgJ0Bjb250ZXh0JzogW0NSRURFTlRJQUxTX0NPTlRFWFRfVjFfVVJMXSxcbiAgICB0eXBlOiBbJ1ZlcmlmaWFibGVQcmVzZW50YXRpb24nXVxuICB9O1xuICBpZih2ZXJpZmlhYmxlQ3JlZGVudGlhbCkge1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gW10uY29uY2F0KHZlcmlmaWFibGVDcmVkZW50aWFsKTtcbiAgICAvLyBlbnN1cmUgYWxsIGNyZWRlbnRpYWxzIGFyZSB2YWxpZFxuICAgIGZvcihjb25zdCBjcmVkZW50aWFsIG9mIGNyZWRlbnRpYWxzKSB7XG4gICAgICBfY2hlY2tDcmVkZW50aWFsKHtjcmVkZW50aWFsLCBub3d9KTtcbiAgICB9XG4gICAgcHJlc2VudGF0aW9uLnZlcmlmaWFibGVDcmVkZW50aWFsID0gY3JlZGVudGlhbHM7XG4gIH1cbiAgaWYoaWQpIHtcbiAgICBwcmVzZW50YXRpb24uaWQgPSBpZDtcbiAgfVxuICBpZihob2xkZXIpIHtcbiAgICBwcmVzZW50YXRpb24uaG9sZGVyID0gaG9sZGVyO1xuICB9XG5cbiAgX2NoZWNrUHJlc2VudGF0aW9uKHByZXNlbnRhdGlvbik7XG5cbiAgcmV0dXJuIHByZXNlbnRhdGlvbjtcbn1cblxuLyoqXG4gKiBTaWducyBhIGdpdmVuIHByZXNlbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyB0byB1c2UuXG4gKlxuICogUmVxdWlyZWQ6XG4gKiBAcGFyYW0ge1ByZXNlbnRhdGlvbn0gb3B0aW9ucy5wcmVzZW50YXRpb24gLSBBIHByZXNlbnRhdGlvbi5cbiAqIEBwYXJhbSB7TGlua2VkRGF0YVNpZ25hdHVyZX0gb3B0aW9ucy5zdWl0ZSAtIHBhc3NlZCBpbiB0byBzaWduKClcbiAqXG4gKiBFaXRoZXIgcGFzcyBpbiBhIFByb29mUHVycG9zZSwgb3IgYSBkZWZhdWx0IG9uZSB3aWxsIGJlIGNyZWF0ZWQgd2l0aCBwYXJhbXM6XG4gKiBAcGFyYW0ge1Byb29mUHVycG9zZX0gW29wdGlvbnMucHVycG9zZV0gLSBBIFByb29mUHVycG9zZS4gSWYgbm90IHNwZWNpZmllZCxcbiAqICAgYSBkZWZhdWx0IHB1cnBvc2Ugd2lsbCBiZSBjcmVhdGVkIHdpdGggdGhlIGRvbWFpbiBhbmQgY2hhbGxlbmdlIG9wdGlvbnMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmRvbWFpbl0gLSBBIGRvbWFpbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNoYWxsZW5nZSAtIEEgcmVxdWlyZWQgY2hhbGxlbmdlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmRvY3VtZW50TG9hZGVyXSAtIEEgZG9jdW1lbnQgbG9hZGVyLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPHtWZXJpZmlhYmxlUHJlc2VudGF0aW9ufT59IEEgVmVyaWZpYWJsZVByZXNlbnRhdGlvbiB3aXRoXG4gKiAgIGEgcHJvb2YuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaWduUHJlc2VudGF0aW9uKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7cHJlc2VudGF0aW9uLCBkb21haW4sIGNoYWxsZW5nZX0gPSBvcHRpb25zO1xuICBjb25zdCBwdXJwb3NlID0gb3B0aW9ucy5wdXJwb3NlIHx8IG5ldyBBdXRoZW50aWNhdGlvblByb29mUHVycG9zZSh7XG4gICAgZG9tYWluLFxuICAgIGNoYWxsZW5nZVxuICB9KTtcblxuICBjb25zdCBkb2N1bWVudExvYWRlciA9IG9wdGlvbnMuZG9jdW1lbnRMb2FkZXIgfHwgZGVmYXVsdERvY3VtZW50TG9hZGVyO1xuXG4gIHJldHVybiBqc2lncy5zaWduKHByZXNlbnRhdGlvbiwgey4uLm9wdGlvbnMsIHB1cnBvc2UsIGRvY3VtZW50TG9hZGVyfSk7XG59XG5cbi8qKlxuICogVmVyaWZpZXMgdGhhdCB0aGUgVmVyaWZpYWJsZVByZXNlbnRhdGlvbiBpcyB3ZWxsIGZvcm1lZCwgYW5kIGNoZWNrcyB0aGVcbiAqIHByb29mIHNpZ25hdHVyZSBpZiBpdCdzIHByZXNlbnQuIEFsc28gdmVyaWZpZXMgYWxsIHRoZSBWZXJpZmlhYmxlQ3JlZGVudGlhbHNcbiAqIHRoYXQgYXJlIHByZXNlbnQgaW4gdGhlIHByZXNlbnRhdGlvbiwgaWYgYW55LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBUaGUgb3B0aW9ucy5cbiAqIEBwYXJhbSB7VmVyaWZpYWJsZVByZXNlbnRhdGlvbn0gb3B0aW9ucy5wcmVzZW50YXRpb24gLSBBXG4gKiAgIFZlcmlmaWFibGVQcmVzZW50YXRpb24uXG4gKlxuICogQHBhcmFtIHtMaW5rZWREYXRhU2lnbmF0dXJlfExpbmtlZERhdGFTaWduYXR1cmVbXX0gb3B0aW9ucy5zdWl0ZSAtIFNlZSB0aGVcbiAqICAgZGVmaW5pdGlvbiBpbiB0aGUgYHZlcmlmeSgpYCBkb2NzdHJpbmcsIGZvciB0aGlzIHBhcmFtLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudW5zaWduZWRQcmVzZW50YXRpb249ZmFsc2VdIC0gQnkgZGVmYXVsdCwgdGhpc1xuICogICBmdW5jdGlvbiBhc3N1bWVzIHRoYXQgYSBwcmVzZW50YXRpb24gaXMgc2lnbmVkIChhbmQgd2lsbCByZXR1cm4gYW4gZXJyb3IgaWZcbiAqICAgYSBgcHJvb2ZgIHNlY3Rpb24gaXMgbWlzc2luZykuIFNldCB0aGlzIHRvIGB0cnVlYCBpZiB5b3UncmUgdXNpbmcgYW5cbiAqICAgdW5zaWduZWQgcHJlc2VudGF0aW9uLlxuICpcbiAqIEVpdGhlciBwYXNzIGluIGEgcHJvb2YgcHVycG9zZSxcbiAqIEBwYXJhbSB7QXV0aGVudGljYXRpb25Qcm9vZlB1cnBvc2V9IFtvcHRpb25zLnByZXNlbnRhdGlvblB1cnBvc2VdIC0gQVxuICogICBQcm9vZlB1cnBvc2UuIElmIG5vdCBzcGVjaWZpZWQsIGEgZGVmYXVsdCBwdXJwb3NlIHdpbGwgYmUgY3JlYXRlZCB3aXRoXG4gKiAgIHRoZSBjaGFsbGVuZ2UsIGNvbnRyb2xsZXIsIGFuZCBkb21haW4gb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY2hhbGxlbmdlXSAtIEEgY2hhbGxlbmdlLiBSZXF1aXJlZCBpZiBwdXJwb3NlIGlzXG4gKiAgIG5vdCBwYXNzZWQgaW4uXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29udHJvbGxlcl0gLSBBIGNvbnRyb2xsZXIuIFJlcXVpcmVkIGlmIHB1cnBvc2UgaXNcbiAqICAgbm90IHBhc3NlZCBpbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5kb21haW5dIC0gQSBkb21haW4uIFJlcXVpcmVkIGlmIHB1cnBvc2UgaXMgbm90XG4gKiAgIHBhc3NlZCBpbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5kb2N1bWVudExvYWRlcl0gLSBBIGRvY3VtZW50IGxvYWRlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmNoZWNrU3RhdHVzXSAtIE9wdGlvbmFsIGZ1bmN0aW9uIGZvciBjaGVja2luZ1xuICogICBjcmVkZW50aWFsIHN0YXR1cyBpZiBgY3JlZGVudGlhbFN0YXR1c2AgaXMgcHJlc2VudCBvbiB0aGUgY3JlZGVudGlhbC5cbiAqIEBwYXJhbSB7c3RyaW5nfERhdGV9IFtvcHRpb25zLm5vd10gLSBBIHN0cmluZyByZXByZXNlbnRpbmcgZGF0ZSB0aW1lIGluXG4gKiAgIElTTyA4NjAxIGZvcm1hdCBvciBhbiBpbnN0YW5jZSBvZiBEYXRlLiBEZWZhdWx0cyB0byBjdXJyZW50IGRhdGUgdGltZS5cbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgcHJlc2VudGF0aW9uIGlzIG1pc3NpbmcgcmVxdWlyZWQgcGFyYW1zLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPFZlcmlmeVByZXNlbnRhdGlvblJlc3VsdD59IFRoZSB2ZXJpZmljYXRpb24gcmVzdWx0LlxuICovXG5hc3luYyBmdW5jdGlvbiBfdmVyaWZ5UHJlc2VudGF0aW9uKG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7cHJlc2VudGF0aW9uLCB1bnNpZ25lZFByZXNlbnRhdGlvbn0gPSBvcHRpb25zO1xuXG4gIF9jaGVja1ByZXNlbnRhdGlvbihwcmVzZW50YXRpb24pO1xuXG4gIGNvbnN0IGRvY3VtZW50TG9hZGVyID0gb3B0aW9ucy5kb2N1bWVudExvYWRlciB8fCBkZWZhdWx0RG9jdW1lbnRMb2FkZXI7XG5cbiAgLy8gRklYTUU6IHZlcmlmeSBwcmVzZW50YXRpb24gZmlyc3QsIHRoZW4gZWFjaCBpbmRpdmlkdWFsIGNyZWRlbnRpYWxcbiAgLy8gb25seSBpZiB0aGF0IHByb29mIGlzIHZlcmlmaWVkXG5cbiAgLy8gaWYgdmVyaWZpYWJsZUNyZWRlbnRpYWxzIGFyZSBwcmVzZW50LCB2ZXJpZnkgdGhlbSwgaW5kaXZpZHVhbGx5XG4gIGxldCBjcmVkZW50aWFsUmVzdWx0cztcbiAgbGV0IHZlcmlmaWVkID0gdHJ1ZTtcbiAgY29uc3QgY3JlZGVudGlhbHMgPSBqc29ubGQuZ2V0VmFsdWVzKHByZXNlbnRhdGlvbiwgJ3ZlcmlmaWFibGVDcmVkZW50aWFsJyk7XG4gIGlmKGNyZWRlbnRpYWxzLmxlbmd0aCA+IDApIHtcbiAgICAvLyB2ZXJpZnkgZXZlcnkgY3JlZGVudGlhbCBpbiBgdmVyaWZpYWJsZUNyZWRlbnRpYWxgXG4gICAgY3JlZGVudGlhbFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChjcmVkZW50aWFscy5tYXAoY3JlZGVudGlhbCA9PiB7XG4gICAgICByZXR1cm4gdmVyaWZ5Q3JlZGVudGlhbCh7Li4ub3B0aW9ucywgY3JlZGVudGlhbCwgZG9jdW1lbnRMb2FkZXJ9KTtcbiAgICB9KSk7XG5cbiAgICBmb3IoY29uc3QgW2ksIGNyZWRlbnRpYWxSZXN1bHRdIG9mIGNyZWRlbnRpYWxSZXN1bHRzLmVudHJpZXMoKSkge1xuICAgICAgY3JlZGVudGlhbFJlc3VsdC5jcmVkZW50aWFsSWQgPSBjcmVkZW50aWFsc1tpXS5pZDtcbiAgICB9XG5cbiAgICBjb25zdCBhbGxDcmVkZW50aWFsc1ZlcmlmaWVkID0gY3JlZGVudGlhbFJlc3VsdHMuZXZlcnkociA9PiByLnZlcmlmaWVkKTtcbiAgICBpZighYWxsQ3JlZGVudGlhbHNWZXJpZmllZCkge1xuICAgICAgdmVyaWZpZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZih1bnNpZ25lZFByZXNlbnRhdGlvbikge1xuICAgIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoZSBwcm9vZiBzZWN0aW9uIG9mIHRoaXMgcHJlc2VudGF0aW9uXG4gICAgcmV0dXJuIHt2ZXJpZmllZCwgcmVzdWx0czogW3ByZXNlbnRhdGlvbl0sIGNyZWRlbnRpYWxSZXN1bHRzfTtcbiAgfVxuXG4gIGNvbnN0IHtjb250cm9sbGVyLCBkb21haW4sIGNoYWxsZW5nZX0gPSBvcHRpb25zO1xuICBpZighb3B0aW9ucy5wcmVzZW50YXRpb25QdXJwb3NlICYmICFjaGFsbGVuZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQSBcImNoYWxsZW5nZVwiIHBhcmFtIGlzIHJlcXVpcmVkIGZvciBBdXRoZW50aWNhdGlvblByb29mUHVycG9zZS4nKTtcbiAgfVxuXG4gIGNvbnN0IHB1cnBvc2UgPSBvcHRpb25zLnByZXNlbnRhdGlvblB1cnBvc2UgfHxcbiAgICBuZXcgQXV0aGVudGljYXRpb25Qcm9vZlB1cnBvc2Uoe2NvbnRyb2xsZXIsIGRvbWFpbiwgY2hhbGxlbmdlfSk7XG5cbiAgY29uc3QgcHJlc2VudGF0aW9uUmVzdWx0ID0gYXdhaXQganNpZ3MudmVyaWZ5KFxuICAgIHByZXNlbnRhdGlvbiwgey4uLm9wdGlvbnMsIHB1cnBvc2UsIGRvY3VtZW50TG9hZGVyfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcmVzZW50YXRpb25SZXN1bHQsXG4gICAgdmVyaWZpZWQ6IHZlcmlmaWVkICYmIHByZXNlbnRhdGlvblJlc3VsdC52ZXJpZmllZCxcbiAgICBjcmVkZW50aWFsUmVzdWx0cyxcbiAgICBlcnJvcjogcHJlc2VudGF0aW9uUmVzdWx0LmVycm9yXG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBvYmogLSBFaXRoZXIgYW4gb2JqZWN0IHdpdGggYW4gaWQgcHJvcGVydHlcbiAqICAgb3IgYSBzdHJpbmcgdGhhdCBpcyBhbiBpZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBFaXRoZXIgYW4gaWQgb3IgdW5kZWZpbmVkLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2dldElkKG9iaikge1xuICBpZih0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBpZighKCdpZCcgaW4gb2JqKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBvYmouaWQ7XG59XG5cbi8vIGV4cG9ydCBmb3IgdGVzdGluZ1xuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gcHJlc2VudGF0aW9uIC0gQW4gb2JqZWN0IHRoYXQgY291bGQgYmUgYSBwcmVzZW50YXRpb24uXG4gKlxuICogQHRocm93cyB7RXJyb3J9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2NoZWNrUHJlc2VudGF0aW9uKHByZXNlbnRhdGlvbikge1xuICAvLyBub3JtYWxpemUgdG8gYW4gYXJyYXkgdG8gYWxsb3cgdGhlIGNvbW1vbiBjYXNlIG9mIGNvbnRleHQgYmVpbmcgYSBzdHJpbmdcbiAgY29uc3QgY29udGV4dCA9IEFycmF5LmlzQXJyYXkocHJlc2VudGF0aW9uWydAY29udGV4dCddKSA/XG4gICAgcHJlc2VudGF0aW9uWydAY29udGV4dCddIDogW3ByZXNlbnRhdGlvblsnQGNvbnRleHQnXV07XG5cbiAgLy8gZW5zdXJlIGZpcnN0IGNvbnRleHQgaXMgJ2h0dHBzOi8vd3d3LnczLm9yZy8yMDE4L2NyZWRlbnRpYWxzL3YxJ1xuICBpZihjb250ZXh0WzBdICE9PSBDUkVERU5USUFMU19DT05URVhUX1YxX1VSTCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBcIiR7Q1JFREVOVElBTFNfQ09OVEVYVF9WMV9VUkx9XCIgbmVlZHMgdG8gYmUgZmlyc3QgaW4gdGhlIGAgK1xuICAgICAgJ2xpc3Qgb2YgY29udGV4dHMuJyk7XG4gIH1cblxuICBjb25zdCB0eXBlcyA9IGpzb25sZC5nZXRWYWx1ZXMocHJlc2VudGF0aW9uLCAndHlwZScpO1xuXG4gIC8vIGNoZWNrIHR5cGUgcHJlc2VuY2VcbiAgaWYoIXR5cGVzLmluY2x1ZGVzKCdWZXJpZmlhYmxlUHJlc2VudGF0aW9uJykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1widHlwZVwiIG11c3QgaW5jbHVkZSBcIlZlcmlmaWFibGVQcmVzZW50YXRpb25cIi4nKTtcbiAgfVxufVxuXG4vLyBleHBvcnQgZm9yIHRlc3Rpbmdcbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBUaGUgb3B0aW9ucy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmNyZWRlbnRpYWwgLSBBbiBvYmplY3QgdGhhdCBjb3VsZCBiZSBhXG4gKiAgIFZlcmlmaWFibGVDcmVkZW50aWFsLlxuICogQHBhcmFtIHtzdHJpbmd8RGF0ZX0gW29wdGlvbnMubm93XSAtIEEgc3RyaW5nIHJlcHJlc2VudGluZyBkYXRlIHRpbWUgaW5cbiAqICAgSVNPIDg2MDEgZm9ybWF0IG9yIGFuIGluc3RhbmNlIG9mIERhdGUuIERlZmF1bHRzIHRvIGN1cnJlbnQgZGF0ZSB0aW1lLlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm1vZGVdIC0gVGhlIG1vZGUgb2Ygb3BlcmF0aW9uIGZvciB0aGlzXG4gKiAgIHZhbGlkYXRpb24gZnVuY3Rpb24sIGVpdGhlciBgaXNzdWVgIG9yIGB2ZXJpZnlgLlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9jaGVja0NyZWRlbnRpYWwoe1xuICBjcmVkZW50aWFsLCBub3cgPSBuZXcgRGF0ZSgpLCBtb2RlID0gJ3ZlcmlmeSdcbn0gPSB7fSkge1xuICBpZih0eXBlb2Ygbm93ID09PSAnc3RyaW5nJykge1xuICAgIG5vdyA9IG5ldyBEYXRlKG5vdyk7XG4gIH1cbiAgLy8gZW5zdXJlIGZpcnN0IGNvbnRleHQgaXMgJ2h0dHBzOi8vd3d3LnczLm9yZy8yMDE4L2NyZWRlbnRpYWxzL3YxJ1xuICBpZihjcmVkZW50aWFsWydAY29udGV4dCddWzBdICE9PSBDUkVERU5USUFMU19DT05URVhUX1YxX1VSTCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBcIiR7Q1JFREVOVElBTFNfQ09OVEVYVF9WMV9VUkx9XCIgbmVlZHMgdG8gYmUgZmlyc3QgaW4gdGhlIGAgK1xuICAgICAgJ2xpc3Qgb2YgY29udGV4dHMuJyk7XG4gIH1cblxuICAvLyBjaGVjayB0eXBlIHByZXNlbmNlIGFuZCBjYXJkaW5hbGl0eVxuICBpZighY3JlZGVudGlhbC50eXBlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcInR5cGVcIiBwcm9wZXJ0eSBpcyByZXF1aXJlZC4nKTtcbiAgfVxuXG4gIGlmKCFqc29ubGQuZ2V0VmFsdWVzKGNyZWRlbnRpYWwsICd0eXBlJykuaW5jbHVkZXMoJ1ZlcmlmaWFibGVDcmVkZW50aWFsJykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1widHlwZVwiIG11c3QgaW5jbHVkZSBgVmVyaWZpYWJsZUNyZWRlbnRpYWxgLicpO1xuICB9XG5cbiAgaWYoIWNyZWRlbnRpYWwuY3JlZGVudGlhbFN1YmplY3QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiY3JlZGVudGlhbFN1YmplY3RcIiBwcm9wZXJ0eSBpcyByZXF1aXJlZC4nKTtcbiAgfVxuXG4gIC8vIElmIGNyZWRlbnRpYWxTdWJqZWN0LmlkIGlzIHByZXNlbnQgYW5kIGlzIG5vdCBhIFVSSSwgcmVqZWN0IGl0XG4gIGlmKGNyZWRlbnRpYWwuY3JlZGVudGlhbFN1YmplY3QuaWQpIHtcbiAgICBfdmFsaWRhdGVVcmlJZCh7XG4gICAgICBpZDogY3JlZGVudGlhbC5jcmVkZW50aWFsU3ViamVjdC5pZCwgcHJvcGVydHlOYW1lOiAnY3JlZGVudGlhbFN1YmplY3QuaWQnXG4gICAgfSk7XG4gIH1cblxuICBpZighY3JlZGVudGlhbC5pc3N1ZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiaXNzdWVyXCIgcHJvcGVydHkgaXMgcmVxdWlyZWQuJyk7XG4gIH1cblxuICAvLyBjaGVjayBpc3N1YW5jZURhdGUgY2FyZGluYWxpdHlcbiAgaWYoanNvbmxkLmdldFZhbHVlcyhjcmVkZW50aWFsLCAnaXNzdWFuY2VEYXRlJykubGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignXCJpc3N1YW5jZURhdGVcIiBwcm9wZXJ0eSBjYW4gb25seSBoYXZlIG9uZSB2YWx1ZS4nKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGlzc3VlZCBpcyBhIGRhdGVcbiAgaWYoIWNyZWRlbnRpYWwuaXNzdWFuY2VEYXRlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcImlzc3VhbmNlRGF0ZVwiIHByb3BlcnR5IGlzIHJlcXVpcmVkLicpO1xuICB9XG5cbiAgaWYoJ2lzc3VhbmNlRGF0ZScgaW4gY3JlZGVudGlhbCkge1xuICAgIGxldCB7aXNzdWFuY2VEYXRlfSA9IGNyZWRlbnRpYWw7XG4gICAgaWYoIWRhdGVSZWdleC50ZXN0KGlzc3VhbmNlRGF0ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJpc3N1YW5jZURhdGVcIiBtdXN0IGJlIGEgdmFsaWQgZGF0ZTogJHtpc3N1YW5jZURhdGV9YCk7XG4gICAgfVxuICAgIC8vIGNoZWNrIGlmIGBub3dgIGlzIGJlZm9yZSBgaXNzdWFuY2VEYXRlYCBvbiB2ZXJpZmljYXRpb25cbiAgICBpZihtb2RlID09PSAndmVyaWZ5Jykge1xuICAgICAgaXNzdWFuY2VEYXRlID0gbmV3IERhdGUoaXNzdWFuY2VEYXRlKTtcbiAgICAgIGlmKG5vdyA8IGlzc3VhbmNlRGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFRoZSBjdXJyZW50IGRhdGUgdGltZSAoJHtub3cudG9JU09TdHJpbmcoKX0pIGlzIGJlZm9yZSB0aGUgYCArXG4gICAgICAgICAgYFwiaXNzdWFuY2VEYXRlXCIgKCR7aXNzdWFuY2VEYXRlLnRvSVNPU3RyaW5nKCl9KS5gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBjaGVjayBpc3N1ZXIgY2FyZGluYWxpdHlcbiAgaWYoanNvbmxkLmdldFZhbHVlcyhjcmVkZW50aWFsLCAnaXNzdWVyJykubGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignXCJpc3N1ZXJcIiBwcm9wZXJ0eSBjYW4gb25seSBoYXZlIG9uZSB2YWx1ZS4nKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGlzc3VlciBpcyBhIFVSTFxuICBpZignaXNzdWVyJyBpbiBjcmVkZW50aWFsKSB7XG4gICAgY29uc3QgaXNzdWVyID0gX2dldElkKGNyZWRlbnRpYWwuaXNzdWVyKTtcbiAgICBpZighaXNzdWVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiaXNzdWVyXCIgaWQgaXMgcmVxdWlyZWQuYCk7XG4gICAgfVxuICAgIF92YWxpZGF0ZVVyaUlkKHtpZDogaXNzdWVyLCBwcm9wZXJ0eU5hbWU6ICdpc3N1ZXInfSk7XG4gIH1cblxuICBpZignY3JlZGVudGlhbFN0YXR1cycgaW4gY3JlZGVudGlhbCkge1xuICAgIGNvbnN0IHtjcmVkZW50aWFsU3RhdHVzfSA9IGNyZWRlbnRpYWw7XG4gICAgaWYoQXJyYXkuaXNBcnJheShjcmVkZW50aWFsU3RhdHVzKSA/XG4gICAgICBjcmVkZW50aWFsU3RhdHVzLnNvbWUoY3MgPT4gIWNzLmlkKSA6ICFjcmVkZW50aWFsU3RhdHVzLmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiY3JlZGVudGlhbFN0YXR1c1wiIG11c3QgaW5jbHVkZSBhbiBpZC4nKTtcbiAgICB9XG4gICAgaWYoQXJyYXkuaXNBcnJheShjcmVkZW50aWFsU3RhdHVzKSA/XG4gICAgICBjcmVkZW50aWFsU3RhdHVzLnNvbWUoY3MgPT4gIWNzLnR5cGUpIDogIWNyZWRlbnRpYWxTdGF0dXMudHlwZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcImNyZWRlbnRpYWxTdGF0dXNcIiBtdXN0IGluY2x1ZGUgYSB0eXBlLicpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGNoZWNrIGV2aWRlbmNlcyBhcmUgVVJMc1xuICBqc29ubGQuZ2V0VmFsdWVzKGNyZWRlbnRpYWwsICdldmlkZW5jZScpLmZvckVhY2goZXZpZGVuY2UgPT4ge1xuICAgIGNvbnN0IGV2aWRlbmNlSWQgPSBfZ2V0SWQoZXZpZGVuY2UpO1xuICAgIGlmKGV2aWRlbmNlSWQpIHtcbiAgICAgIF92YWxpZGF0ZVVyaUlkKHtpZDogZXZpZGVuY2VJZCwgcHJvcGVydHlOYW1lOiAnZXZpZGVuY2UnfSk7XG4gICAgfVxuICB9KTtcblxuICBpZignZXhwaXJhdGlvbkRhdGUnIGluIGNyZWRlbnRpYWwpIHtcbiAgICBjb25zdCB7ZXhwaXJhdGlvbkRhdGV9ID0gY3JlZGVudGlhbDtcbiAgICAvLyBjaGVjayBpZiBgZXhwaXJhdGlvbkRhdGVgIHByb3BlcnR5IGlzIGEgZGF0ZVxuICAgIGlmKCFkYXRlUmVnZXgudGVzdChleHBpcmF0aW9uRGF0ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFwiZXhwaXJhdGlvbkRhdGVcIiBtdXN0IGJlIGEgdmFsaWQgZGF0ZTogJHtleHBpcmF0aW9uRGF0ZX1gKTtcbiAgICB9XG4gICAgLy8gY2hlY2sgaWYgYG5vd2AgaXMgYWZ0ZXIgYGV4cGlyYXRpb25EYXRlYFxuICAgIGlmKG5vdyA+IG5ldyBEYXRlKGV4cGlyYXRpb25EYXRlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDcmVkZW50aWFsIGhhcyBleHBpcmVkLicpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfdmFsaWRhdGVVcmlJZCh7aWQsIHByb3BlcnR5TmFtZX0pIHtcbiAgbGV0IHBhcnNlZDtcbiAgdHJ5IHtcbiAgICBwYXJzZWQgPSBuZXcgVVJMKGlkKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgVHlwZUVycm9yKGBcIiR7cHJvcGVydHlOYW1lfVwiIG11c3QgYmUgYSBVUkk6IFwiJHtpZH1cIi5gKTtcbiAgICBlcnJvci5jYXVzZSA9IGU7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICBpZighcGFyc2VkLnByb3RvY29sKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgXCIke3Byb3BlcnR5TmFtZX1cIiBtdXN0IGJlIGEgVVJJOiBcIiR7aWR9XCIuYCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/vc/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/X25519KeyAgreementKey2019.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/X25519KeyAgreementKey2019.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   X25519KeyAgreementKey2019: () => (/* binding */ X25519KeyAgreementKey2019)\n/* harmony export */ });\n/* harmony import */ var crypto_ld__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto-ld */ \"(ssr)/./node_modules/crypto-ld/lib/index.js\");\n/* harmony import */ var ed2curve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ed2curve */ \"(ssr)/./node_modules/ed2curve/ed2curve.js\");\n/* harmony import */ var base58_universal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! base58-universal */ \"(ssr)/./node_modules/base58-universal/lib/index.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto.js\");\n/* harmony import */ var _noble_ed25519__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @noble/ed25519 */ \"(ssr)/./node_modules/@noble/ed25519/lib/esm/index.js\");\n/*!\n * Copyright (c) 2019-2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\n\n\nconst SUITE_ID = 'X25519KeyAgreementKey2019';\n\n// multicodec ed25519-pub header as varint\nconst MULTICODEC_ED25519_PUB_HEADER = new Uint8Array([0xed, 0x01]);\n// multicodec ed25519-priv header as varint\nconst MULTICODEC_ED25519_PRIV_HEADER = new Uint8Array([0x80, 0x26]);\n\nclass X25519KeyAgreementKey2019 extends crypto_ld__WEBPACK_IMPORTED_MODULE_0__.LDKeyPair {\n  /**\n   * An implementation of x25519\n   * [X25519 Key Agreement 2019]{@link https://w3c-dvcg.github.io/}\n   * representation.\n   *\n   * @example\n   * > const privateKeyBase58 =\n   *   '...';\n   * > const options = {\n   *   publicKeyBase58: '...',\n   *   privateKeyBase58\n   * };\n   * > const DHKey = new X25519KeyAgreementKey2019(options);\n   * > DHKey\n   * X25519KeyAgreementKey2019 { ...\n   *\n   * @param {object} options - Options hashmap.\n   * @param {string} options.controller - Controller DID or document url.\n   * @param {string} [options.id] - Key ID, typically composed of controller\n   *   URL and key fingerprint as hash fragment.\n   * @param {string} options.publicKeyBase58 - Base58 encoded public key.\n   * @param {string} [options.privateKeyBase58] - Base58 private key.\n   * @param {string} [options.revoked] - Timestamp of when the key has been\n   *   revoked, in RFC3339 format. If not present, the key itself is considered\n   *   not revoked. Note that this mechanism is slightly different than DID\n   *   Document key revocation, where a DID controller can revoke a key from\n   *   that DID by removing it from the DID Document.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.type = SUITE_ID;\n    this.publicKeyBase58 = options.publicKeyBase58;\n    if(!this.publicKeyBase58) {\n      throw TypeError('The \"publicKeyBase58\" property is required.');\n    }\n    this.privateKeyBase58 = options.privateKeyBase58;\n    if(this.controller && !this.id) {\n      this.id = `${this.controller}#${this.fingerprint()}`;\n    }\n  }\n\n  /**\n   * Generates a new public/private X25519 Key Pair.\n   *\n   * @example\n   * > const keyPair = await X25519KeyAgreementKey2019.generate();\n   * > keyPair\n   * X25519KeyAgreementKey2019 { ...\n   *\n   * @param {object} [options={}] - The options.\n   * @param {string} [options.controller] - A controller.\n   * @param {string} [options.id] - An id.\n   *\n   * @returns {Promise<X25519KeyAgreementKey2019>} Generates a key pair.\n   */\n  static async generate(options = {}) {\n    const {publicKey, privateKey} = await (0,_crypto_js__WEBPACK_IMPORTED_MODULE_3__.generateKeyPair)();\n\n    return new X25519KeyAgreementKey2019({\n      publicKeyBase58: (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(publicKey),\n      privateKeyBase58: (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(privateKey),\n      ...options\n    });\n  }\n\n  /**\n   * Creates an X25519KeyAgreementKey2019 Key Pair from an existing key\n   * (constructor method).\n   *\n   * @example\n   * > const options = {\n   *   id,\n   *   controller,\n   *   publicKeyBase58,\n   *   privateKeyBase58: privateKey\n   * };\n   * > const key = await X25519KeyAgreementKey2019.from(options);\n   * > key\n   * X25519KeyAgreementKey2019 { ...\n   *\n   * @param {object} options - The options.\n   * @param {string} [options.privateKeyBase58] - A Base58 encoded Private key.\n   *\n   * @returns {X25519KeyAgreementKey2019} An X25519 Key Pair.\n   */\n  static async from(options) {\n    return new X25519KeyAgreementKey2019(options);\n  }\n\n  /**\n   * Converts a keypair instance of type Ed25519VerificationKey2018 to an\n   * instance of this class.\n   *\n   * @see https://github.com/digitalbazaar/ed25519-verification-key-2018\n   *\n   * @typedef {object} Ed25519VerificationKey2018\n   *\n   * @param {Ed25519VerificationKey2018} keyPair - The source key pair.\n   *\n   * @returns {X25519KeyAgreementKey2019} The converted output.\n   */\n  static fromEd25519VerificationKey2018({keyPair}) {\n    const xKey = new X25519KeyAgreementKey2019({\n      controller: keyPair.controller,\n      publicKeyBase58: X25519KeyAgreementKey2019\n        .convertFromEdPublicKey(keyPair)\n    });\n\n    if(keyPair.privateKeyBase58) {\n      xKey.privateKeyBase58 = X25519KeyAgreementKey2019\n        .convertFromEdPrivateKey(keyPair);\n    }\n\n    return xKey;\n  }\n\n  /**\n   * Converts a keypair instance of type Ed25519VerificationKey2020 to an\n   * instance of this class.\n   *\n   * @see https://github.com/digitalbazaar/ed25519-verification-key-2020\n   *\n   * @typedef {object} Ed25519VerificationKey2020\n   *\n   * @param {Ed25519VerificationKey2020} keyPair - The source key pair.\n   *\n   * @returns {X25519KeyAgreementKey2019} - The converted output.\n   */\n  static fromEd25519VerificationKey2020({keyPair}) {\n    if(!keyPair.publicKeyMultibase) {\n      throw new Error('Source public key is required to convert.');\n    }\n\n    if(!keyPair.publicKeyMultibase.startsWith('z')) {\n      throw new TypeError(\n        'Expecting source public Ed25519 2020 key to have base58btc encoding.'\n      );\n    }\n\n    const publicKeyBase58 = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(_multibaseDecode(\n      MULTICODEC_ED25519_PUB_HEADER,\n      keyPair.publicKeyMultibase));\n\n    const xKey = new X25519KeyAgreementKey2019({\n      controller: keyPair.controller,\n      publicKeyBase58: X25519KeyAgreementKey2019\n        .convertFromEdPublicKey({publicKeyBase58})\n    });\n\n    if(keyPair.privateKeyMultibase) {\n      if(!keyPair.privateKeyMultibase.startsWith('z')) {\n        throw new TypeError(\n          // eslint-disable-next-line max-len\n          'Expecting source private Ed25519 2020 key to have base58btc encoding.'\n        );\n      }\n\n      const privateKeyBase58 = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(_multibaseDecode(\n        MULTICODEC_ED25519_PRIV_HEADER, keyPair.privateKeyMultibase));\n\n      xKey.privateKeyBase58 = X25519KeyAgreementKey2019\n        .convertFromEdPrivateKey({privateKeyBase58});\n    }\n\n    return xKey;\n  }\n\n  /**\n   * @deprecated\n   * NOTE: This is now an alias of `fromEd25519VerificationKey2018()`, to\n   * maintain backwards compatibility. Going forward, code should be using\n   * the conversion method specific to the Ed25519 suite it's using.\n   *\n   * Converts a keypair instance of type Ed25519VerificationKey2018 to an\n   * instance of this class.\n   *\n   * @param {Ed25519VerificationKey2018} keyPair - The source key pair.\n   *\n   * @returns {X25519KeyAgreementKey2019} - The converted output.\n   */\n  static fromEdKeyPair({keyPair}) {\n    return this.fromEd25519VerificationKey2018({keyPair});\n  }\n\n  /**\n   * @param {string} publicKeyBase58 - The base58 encoded Ed25519 Public key.\n   *\n   * @returns {string} The base58 encoded X25519 Public key.\n   */\n  static convertFromEdPublicKey({publicKeyBase58}) {\n    const edPubkeyBytes = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(publicKeyBase58);\n\n    // Converts a 32-byte Ed25519 public key into a 32-byte Curve25519 key\n    // Returns null if the given public key in not a valid Ed25519 public key.\n    const dhPubkeyBytes = _noble_ed25519__WEBPACK_IMPORTED_MODULE_4__.Point.fromHex(edPubkeyBytes).toX25519();\n    if(!dhPubkeyBytes) {\n      throw new Error(\n        'Error converting to X25519; Invalid Ed25519 public key.');\n    }\n    const dhPublicKeyBase58 = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(dhPubkeyBytes);\n    return dhPublicKeyBase58;\n  }\n\n  /**\n   * @param {string} privateKeyBase58 - The base58 encoded Ed25519 Private key.\n   *\n   * @returns {string} The base58 encoded X25519 Private key.\n   */\n  static convertFromEdPrivateKey({privateKeyBase58}) {\n    const edPrivkeyBytes = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(privateKeyBase58);\n    // Converts a 64-byte Ed25519 secret key (or just the first 32-byte part of\n    // it, which is the secret value) into a 32-byte Curve25519 secret key\n    const dhPrivkeyBytes = ed2curve__WEBPACK_IMPORTED_MODULE_1__.convertSecretKey(edPrivkeyBytes);\n    // note: a future version should make this method async to allow use of\n    // noble to convert private keys -- but `ed2curve` is much faster x100:\n    // const {head: dhPrivkeyBytes} = await utils.getExtendedPublicKey(\n    //   edPrivkeyBytes.slice(0, 32));\n    if(!dhPrivkeyBytes) {\n      throw new Error(\n        'Error converting to X25519; Invalid Ed25519 private key.');\n    }\n    const dhPrivateKeyBase58 = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(dhPrivkeyBytes);\n    return dhPrivateKeyBase58;\n  }\n\n  /**\n   * Exports the serialized representation of the KeyPair.\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {boolean} [options.publicKey] - Export public key material?\n   * @param {boolean} [options.privateKey] - Export private key material?\n   * @param {boolean} [options.includeContext] - Include JSON-LD context?\n   *\n   * @returns {object} A plain js object that's ready for serialization\n   *   (to JSON, etc), for use in DIDs etc.\n   */\n  export({publicKey = false, privateKey = false, includeContext = false} = {}) {\n    if(!(publicKey || privateKey)) {\n      throw new TypeError(\n        'Export requires specifying either \"publicKey\" or \"privateKey\".');\n    }\n    const exportedKey = {\n      id: this.id,\n      type: this.type\n    };\n    if(includeContext) {\n      exportedKey['@context'] = X25519KeyAgreementKey2019.SUITE_CONTEXT;\n    }\n    if(this.controller) {\n      exportedKey.controller = this.controller;\n    }\n    if(publicKey) {\n      exportedKey.publicKeyBase58 = this.publicKeyBase58;\n    }\n    if(privateKey) {\n      exportedKey.privateKeyBase58 = this.privateKeyBase58;\n    }\n    if(this.revoked) {\n      exportedKey.revoked = this.revoked;\n    }\n    return exportedKey;\n  }\n\n  /**\n   * Generates and returns a multiformats encoded X25519 public key\n   * fingerprint (for use with cryptonyms, for example).\n   *\n   * @see https://github.com/multiformats/multicodec\n   *\n   * @param {string} publicKeyBase58 - The base58 encoded public key material.\n   *\n   * @returns {string} The fingerprint.\n   */\n  static fingerprintFromPublicKey({publicKeyBase58}) {\n    // X25519 cryptonyms are multicodec encoded values, specifically:\n    // (multicodec('x25519-pub') + key bytes)\n    const pubkeyBytes = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(publicKeyBase58);\n    const buffer = new Uint8Array(2 + pubkeyBytes.length);\n    // See https://github.com/multiformats/multicodec/blob/master/table.csv\n    // 0xec is the value for X25519 public key\n    // 0x01 is from varint.encode(0xec) -> [0xec, 0x01]\n    // See https://github.com/multiformats/unsigned-varint\n    buffer[0] = 0xec; //\n    buffer[1] = 0x01;\n    buffer.set(pubkeyBytes, 2);\n    // prefix with `z` to indicate multi-base base58btc encoding\n    return `z${(0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(buffer)}`;\n  }\n\n  /**\n   * Creates an instance of X25519KeyAgreementKey2019 from a key fingerprint.\n   *\n   * @param {string} fingerprint - The fingerprint.\n   *\n   * @throws Unsupported Fingerprint Type.\n   * @returns {X25519KeyAgreementKey2019} The key.\n   */\n  static fromFingerprint({fingerprint} = {}) {\n    if(!fingerprint ||\n      !(typeof fingerprint === 'string' && fingerprint[0] === 'z')) {\n      throw new Error('`fingerprint` must be a multibase encoded string.');\n    }\n    // skip leading `z` that indicates base58 encoding\n    const buffer = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(fingerprint.substr(1));\n\n    // buffer is: 0xec 0x01 <public key bytes>\n    if(buffer[0] !== 0xec || buffer[1] !== 0x01) {\n      throw new Error(`Unsupported Fingerprint Type: ${fingerprint}`);\n    }\n\n    return new X25519KeyAgreementKey2019({\n      publicKeyBase58: (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.encode)(buffer.slice(2))\n    });\n  }\n\n  /**\n   * Derives a shared secret via a given public key, typically for use\n   * as one parameter for computing a shared key. It should not be used as\n   * a shared key itself, but rather input into a key derivation function (KDF)\n   * to produce a shared key.\n   *\n   * @param {LDKeyPair} publicKey - Remote key pair.\n   *\n   * @throws {TypeError} On invalid base58 encoding of public or private keys.\n   * @returns {Promise<Uint8Array>} The derived secret.\n   */\n  async deriveSecret({publicKey}) {\n    const remotePublicKey = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(publicKey.publicKeyBase58);\n    const privateKey = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(this.privateKeyBase58);\n\n    return (0,_crypto_js__WEBPACK_IMPORTED_MODULE_3__.deriveSecret)({privateKey, remotePublicKey});\n  }\n\n  /**\n   * Generates and returns a multiformats encoded X25519 public key\n   * fingerprint (for use with cryptonyms, for example).\n   *\n   * @see https://github.com/multiformats/multicodec\n   *\n   * @returns {string} The fingerprint.\n   */\n  fingerprint() {\n    const {publicKeyBase58} = this;\n    return X25519KeyAgreementKey2019\n      .fingerprintFromPublicKey({publicKeyBase58});\n  }\n\n  /**\n   * Tests whether the fingerprint was generated from a given key pair.\n   *\n   * @example\n   * > xKeyPair.verifyFingerprint('...');\n   * {valid: true};\n   *\n   * @param {string} fingerprint - A Base58 public key.\n   *\n   * @returns {object} An object indicating valid is true or false.\n   */\n  verifyFingerprint({fingerprint} = {}) {\n    // fingerprint should have `z` prefix indicating\n    // that it's multi-base encoded\n    if(!(typeof fingerprint === 'string' && fingerprint[0] === 'z')) {\n      return {\n        error: new Error('`fingerprint` must be a multibase encoded string.'),\n        valid: false\n      };\n    }\n    let fingerprintBuffer;\n    try {\n      fingerprintBuffer = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(fingerprint.slice(1));\n    } catch(e) {\n      return {error: e, valid: false};\n    }\n    let publicKeyBuffer;\n    try {\n      publicKeyBuffer = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(this.publicKeyBase58);\n    } catch(e) {\n      return {error: e, valid: false};\n    }\n    // validate the first buffer multicodec bytes 0xec 0x01\n    const valid = fingerprintBuffer[0] === 0xec &&\n      fingerprintBuffer[1] === 0x01 &&\n      publicKeyBuffer.toString() === fingerprintBuffer.slice(2).toString();\n    if(!valid) {\n      return {\n        error: new Error('The fingerprint does not match the public key.'),\n        valid: false\n      };\n    }\n    return {valid};\n  }\n}\n\n// Used by CryptoLD harness for dispatching.\nX25519KeyAgreementKey2019.suite = SUITE_ID;\nX25519KeyAgreementKey2019.SUITE_CONTEXT =\n  'https://w3id.org/security/suites/x25519-2019/v1';\n\n/**\n * Decodes a given string as a multibase-encoded multicodec value.\n *\n * @param {Uint8Array} header - Expected header bytes for the multicodec value.\n * @param {string} text - Multibase encoded string to decode.\n * @returns {Uint8Array} Decoded bytes.\n */\nfunction _multibaseDecode(header, text) {\n  const mcValue = (0,base58_universal__WEBPACK_IMPORTED_MODULE_2__.decode)(text.slice(1));\n\n  if(!header.every((val, i) => mcValue[i] === val)) {\n    throw new Error('Multibase value does not have expected header.');\n  }\n\n  return mcValue.slice(header.length);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMTkvbGliL1gyNTUxOUtleUFncmVlbWVudEtleTIwMTkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ29DO0FBQ0o7QUFDZ0I7QUFDVTtBQUNyQjs7QUFFckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRU8sd0NBQXdDLGdEQUFTO0FBQ3hEO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQixHQUFHLG1CQUFtQjtBQUN6RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBLG9DQUFvQztBQUNwQyxXQUFXLHVCQUF1QixRQUFRLDJEQUFlOztBQUV6RDtBQUNBLHVCQUF1Qix3REFBTTtBQUM3Qix3QkFBd0Isd0RBQU07QUFDOUI7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsYUFBYSw0QkFBNEI7QUFDekM7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBLHlDQUF5QyxRQUFRO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQSx5Q0FBeUMsUUFBUTtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEIsd0RBQU07QUFDbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZ0JBQWdCO0FBQ2pELEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLHdEQUFNO0FBQ3JDOztBQUVBO0FBQ0Esa0NBQWtDLGlCQUFpQjtBQUNuRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0EsZUFBZSwyQkFBMkI7QUFDMUM7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQyxnREFBZ0QsUUFBUTtBQUN4RDs7QUFFQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlDQUFpQyxnQkFBZ0I7QUFDakQsMEJBQTBCLHdEQUFNOztBQUVoQztBQUNBO0FBQ0EsMEJBQTBCLGlEQUFLO0FBQy9CO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSw4QkFBOEIsd0RBQU07QUFDcEM7QUFDQTs7QUFFQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGtDQUFrQyxpQkFBaUI7QUFDbkQsMkJBQTJCLHdEQUFNO0FBQ2pDO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQXlCO0FBQ3BEO0FBQ0E7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSwrQkFBK0Isd0RBQU07QUFDckM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQyxhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUztBQUN0QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsVUFBVSwrREFBK0QsSUFBSTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxtQ0FBbUMsZ0JBQWdCO0FBQ25EO0FBQ0E7QUFDQSx3QkFBd0Isd0RBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdEQUFNLFNBQVM7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBLDBCQUEwQixhQUFhLElBQUk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix3REFBTTs7QUFFekI7QUFDQTtBQUNBLHVEQUF1RCxZQUFZO0FBQ25FOztBQUVBO0FBQ0EsdUJBQXVCLHdEQUFNO0FBQzdCLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFdBQVc7QUFDeEI7QUFDQSxjQUFjLFdBQVc7QUFDekIsZUFBZSxxQkFBcUI7QUFDcEM7QUFDQSxzQkFBc0IsVUFBVTtBQUNoQyw0QkFBNEIsd0RBQU07QUFDbEMsdUJBQXVCLHdEQUFNOztBQUU3QixXQUFXLHdEQUFZLEVBQUUsNEJBQTRCO0FBQ3JEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUI7QUFDQSxpQ0FBaUMsZ0JBQWdCO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxxQkFBcUIsYUFBYSxJQUFJO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdEQUFNO0FBQ2hDLE1BQU07QUFDTixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdEQUFNO0FBQzlCLE1BQU07QUFDTixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFFBQVE7QUFDbkIsYUFBYSxZQUFZO0FBQ3pCO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQU07O0FBRXhCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL3gyNTUxOS1rZXktYWdyZWVtZW50LWtleS0yMDE5L2xpYi9YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5LmpzP2Y4NjciXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTktMjAyMSBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQge0xES2V5UGFpcn0gZnJvbSAnY3J5cHRvLWxkJztcbmltcG9ydCBlZDJjdXJ2ZSBmcm9tICdlZDJjdXJ2ZSc7XG5pbXBvcnQge2VuY29kZSwgZGVjb2RlfSBmcm9tICdiYXNlNTgtdW5pdmVyc2FsJztcbmltcG9ydCB7Z2VuZXJhdGVLZXlQYWlyLCBkZXJpdmVTZWNyZXR9IGZyb20gJy4vY3J5cHRvLmpzJztcbmltcG9ydCB7UG9pbnR9IGZyb20gJ0Bub2JsZS9lZDI1NTE5JztcblxuY29uc3QgU1VJVEVfSUQgPSAnWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOSc7XG5cbi8vIG11bHRpY29kZWMgZWQyNTUxOS1wdWIgaGVhZGVyIGFzIHZhcmludFxuY29uc3QgTVVMVElDT0RFQ19FRDI1NTE5X1BVQl9IRUFERVIgPSBuZXcgVWludDhBcnJheShbMHhlZCwgMHgwMV0pO1xuLy8gbXVsdGljb2RlYyBlZDI1NTE5LXByaXYgaGVhZGVyIGFzIHZhcmludFxuY29uc3QgTVVMVElDT0RFQ19FRDI1NTE5X1BSSVZfSEVBREVSID0gbmV3IFVpbnQ4QXJyYXkoWzB4ODAsIDB4MjZdKTtcblxuZXhwb3J0IGNsYXNzIFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkgZXh0ZW5kcyBMREtleVBhaXIge1xuICAvKipcbiAgICogQW4gaW1wbGVtZW50YXRpb24gb2YgeDI1NTE5XG4gICAqIFtYMjU1MTkgS2V5IEFncmVlbWVudCAyMDE5XXtAbGluayBodHRwczovL3czYy1kdmNnLmdpdGh1Yi5pby99XG4gICAqIHJlcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiA+IGNvbnN0IHByaXZhdGVLZXlCYXNlNTggPVxuICAgKiAgICcuLi4nO1xuICAgKiA+IGNvbnN0IG9wdGlvbnMgPSB7XG4gICAqICAgcHVibGljS2V5QmFzZTU4OiAnLi4uJyxcbiAgICogICBwcml2YXRlS2V5QmFzZTU4XG4gICAqIH07XG4gICAqID4gY29uc3QgREhLZXkgPSBuZXcgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOShvcHRpb25zKTtcbiAgICogPiBESEtleVxuICAgKiBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5IHsgLi4uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5jb250cm9sbGVyIC0gQ29udHJvbGxlciBESUQgb3IgZG9jdW1lbnQgdXJsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuaWRdIC0gS2V5IElELCB0eXBpY2FsbHkgY29tcG9zZWQgb2YgY29udHJvbGxlclxuICAgKiAgIFVSTCBhbmQga2V5IGZpbmdlcnByaW50IGFzIGhhc2ggZnJhZ21lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnB1YmxpY0tleUJhc2U1OCAtIEJhc2U1OCBlbmNvZGVkIHB1YmxpYyBrZXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wcml2YXRlS2V5QmFzZTU4XSAtIEJhc2U1OCBwcml2YXRlIGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnJldm9rZWRdIC0gVGltZXN0YW1wIG9mIHdoZW4gdGhlIGtleSBoYXMgYmVlblxuICAgKiAgIHJldm9rZWQsIGluIFJGQzMzMzkgZm9ybWF0LiBJZiBub3QgcHJlc2VudCwgdGhlIGtleSBpdHNlbGYgaXMgY29uc2lkZXJlZFxuICAgKiAgIG5vdCByZXZva2VkLiBOb3RlIHRoYXQgdGhpcyBtZWNoYW5pc20gaXMgc2xpZ2h0bHkgZGlmZmVyZW50IHRoYW4gRElEXG4gICAqICAgRG9jdW1lbnQga2V5IHJldm9jYXRpb24sIHdoZXJlIGEgRElEIGNvbnRyb2xsZXIgY2FuIHJldm9rZSBhIGtleSBmcm9tXG4gICAqICAgdGhhdCBESUQgYnkgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgRElEIERvY3VtZW50LlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG4gICAgdGhpcy50eXBlID0gU1VJVEVfSUQ7XG4gICAgdGhpcy5wdWJsaWNLZXlCYXNlNTggPSBvcHRpb25zLnB1YmxpY0tleUJhc2U1ODtcbiAgICBpZighdGhpcy5wdWJsaWNLZXlCYXNlNTgpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignVGhlIFwicHVibGljS2V5QmFzZTU4XCIgcHJvcGVydHkgaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIHRoaXMucHJpdmF0ZUtleUJhc2U1OCA9IG9wdGlvbnMucHJpdmF0ZUtleUJhc2U1ODtcbiAgICBpZih0aGlzLmNvbnRyb2xsZXIgJiYgIXRoaXMuaWQpIHtcbiAgICAgIHRoaXMuaWQgPSBgJHt0aGlzLmNvbnRyb2xsZXJ9IyR7dGhpcy5maW5nZXJwcmludCgpfWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIG5ldyBwdWJsaWMvcHJpdmF0ZSBYMjU1MTkgS2V5IFBhaXIuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqID4gY29uc3Qga2V5UGFpciA9IGF3YWl0IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkuZ2VuZXJhdGUoKTtcbiAgICogPiBrZXlQYWlyXG4gICAqIFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkgeyAuLi5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIFRoZSBvcHRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuY29udHJvbGxlcl0gLSBBIGNvbnRyb2xsZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZF0gLSBBbiBpZC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8WDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOT59IEdlbmVyYXRlcyBhIGtleSBwYWlyLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHtwdWJsaWNLZXksIHByaXZhdGVLZXl9ID0gYXdhaXQgZ2VuZXJhdGVLZXlQYWlyKCk7XG5cbiAgICByZXR1cm4gbmV3IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkoe1xuICAgICAgcHVibGljS2V5QmFzZTU4OiBlbmNvZGUocHVibGljS2V5KSxcbiAgICAgIHByaXZhdGVLZXlCYXNlNTg6IGVuY29kZShwcml2YXRlS2V5KSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkgS2V5IFBhaXIgZnJvbSBhbiBleGlzdGluZyBrZXlcbiAgICogKGNvbnN0cnVjdG9yIG1ldGhvZCkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqID4gY29uc3Qgb3B0aW9ucyA9IHtcbiAgICogICBpZCxcbiAgICogICBjb250cm9sbGVyLFxuICAgKiAgIHB1YmxpY0tleUJhc2U1OCxcbiAgICogICBwcml2YXRlS2V5QmFzZTU4OiBwcml2YXRlS2V5XG4gICAqIH07XG4gICAqID4gY29uc3Qga2V5ID0gYXdhaXQgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOS5mcm9tKG9wdGlvbnMpO1xuICAgKiA+IGtleVxuICAgKiBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5IHsgLi4uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5wcml2YXRlS2V5QmFzZTU4XSAtIEEgQmFzZTU4IGVuY29kZWQgUHJpdmF0ZSBrZXkuXG4gICAqXG4gICAqIEByZXR1cm5zIHtYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5fSBBbiBYMjU1MTkgS2V5IFBhaXIuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbShvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEga2V5cGFpciBpbnN0YW5jZSBvZiB0eXBlIEVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDE4IHRvIGFuXG4gICAqIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RpZ2l0YWxiYXphYXIvZWQyNTUxOS12ZXJpZmljYXRpb24ta2V5LTIwMThcbiAgICpcbiAgICogQHR5cGVkZWYge29iamVjdH0gRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMThcbiAgICpcbiAgICogQHBhcmFtIHtFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOH0ga2V5UGFpciAtIFRoZSBzb3VyY2Uga2V5IHBhaXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5fSBUaGUgY29udmVydGVkIG91dHB1dC5cbiAgICovXG4gIHN0YXRpYyBmcm9tRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMTgoe2tleVBhaXJ9KSB7XG4gICAgY29uc3QgeEtleSA9IG5ldyBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5KHtcbiAgICAgIGNvbnRyb2xsZXI6IGtleVBhaXIuY29udHJvbGxlcixcbiAgICAgIHB1YmxpY0tleUJhc2U1ODogWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOVxuICAgICAgICAuY29udmVydEZyb21FZFB1YmxpY0tleShrZXlQYWlyKVxuICAgIH0pO1xuXG4gICAgaWYoa2V5UGFpci5wcml2YXRlS2V5QmFzZTU4KSB7XG4gICAgICB4S2V5LnByaXZhdGVLZXlCYXNlNTggPSBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5XG4gICAgICAgIC5jb252ZXJ0RnJvbUVkUHJpdmF0ZUtleShrZXlQYWlyKTtcbiAgICB9XG5cbiAgICByZXR1cm4geEtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIGtleXBhaXIgaW5zdGFuY2Ugb2YgdHlwZSBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMCB0byBhblxuICAgKiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kaWdpdGFsYmF6YWFyL2VkMjU1MTktdmVyaWZpY2F0aW9uLWtleS0yMDIwXG4gICAqXG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IEVkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwXG4gICAqXG4gICAqIEBwYXJhbSB7RWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjB9IGtleVBhaXIgLSBUaGUgc291cmNlIGtleSBwYWlyLlxuICAgKlxuICAgKiBAcmV0dXJucyB7WDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOX0gLSBUaGUgY29udmVydGVkIG91dHB1dC5cbiAgICovXG4gIHN0YXRpYyBmcm9tRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAoe2tleVBhaXJ9KSB7XG4gICAgaWYoIWtleVBhaXIucHVibGljS2V5TXVsdGliYXNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvdXJjZSBwdWJsaWMga2V5IGlzIHJlcXVpcmVkIHRvIGNvbnZlcnQuJyk7XG4gICAgfVxuXG4gICAgaWYoIWtleVBhaXIucHVibGljS2V5TXVsdGliYXNlLnN0YXJ0c1dpdGgoJ3onKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0V4cGVjdGluZyBzb3VyY2UgcHVibGljIEVkMjU1MTkgMjAyMCBrZXkgdG8gaGF2ZSBiYXNlNThidGMgZW5jb2RpbmcuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwdWJsaWNLZXlCYXNlNTggPSBlbmNvZGUoX211bHRpYmFzZURlY29kZShcbiAgICAgIE1VTFRJQ09ERUNfRUQyNTUxOV9QVUJfSEVBREVSLFxuICAgICAga2V5UGFpci5wdWJsaWNLZXlNdWx0aWJhc2UpKTtcblxuICAgIGNvbnN0IHhLZXkgPSBuZXcgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOSh7XG4gICAgICBjb250cm9sbGVyOiBrZXlQYWlyLmNvbnRyb2xsZXIsXG4gICAgICBwdWJsaWNLZXlCYXNlNTg6IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTlcbiAgICAgICAgLmNvbnZlcnRGcm9tRWRQdWJsaWNLZXkoe3B1YmxpY0tleUJhc2U1OH0pXG4gICAgfSk7XG5cbiAgICBpZihrZXlQYWlyLnByaXZhdGVLZXlNdWx0aWJhc2UpIHtcbiAgICAgIGlmKCFrZXlQYWlyLnByaXZhdGVLZXlNdWx0aWJhc2Uuc3RhcnRzV2l0aCgneicpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgICAnRXhwZWN0aW5nIHNvdXJjZSBwcml2YXRlIEVkMjU1MTkgMjAyMCBrZXkgdG8gaGF2ZSBiYXNlNThidGMgZW5jb2RpbmcuJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwcml2YXRlS2V5QmFzZTU4ID0gZW5jb2RlKF9tdWx0aWJhc2VEZWNvZGUoXG4gICAgICAgIE1VTFRJQ09ERUNfRUQyNTUxOV9QUklWX0hFQURFUiwga2V5UGFpci5wcml2YXRlS2V5TXVsdGliYXNlKSk7XG5cbiAgICAgIHhLZXkucHJpdmF0ZUtleUJhc2U1OCA9IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTlcbiAgICAgICAgLmNvbnZlcnRGcm9tRWRQcml2YXRlS2V5KHtwcml2YXRlS2V5QmFzZTU4fSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHhLZXk7XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogTk9URTogVGhpcyBpcyBub3cgYW4gYWxpYXMgb2YgYGZyb21FZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCgpYCwgdG9cbiAgICogbWFpbnRhaW4gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIEdvaW5nIGZvcndhcmQsIGNvZGUgc2hvdWxkIGJlIHVzaW5nXG4gICAqIHRoZSBjb252ZXJzaW9uIG1ldGhvZCBzcGVjaWZpYyB0byB0aGUgRWQyNTUxOSBzdWl0ZSBpdCdzIHVzaW5nLlxuICAgKlxuICAgKiBDb252ZXJ0cyBhIGtleXBhaXIgaW5zdGFuY2Ugb2YgdHlwZSBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAxOCB0byBhblxuICAgKiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBAcGFyYW0ge0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDE4fSBrZXlQYWlyIC0gVGhlIHNvdXJjZSBrZXkgcGFpci5cbiAgICpcbiAgICogQHJldHVybnMge1gyNTUxOUtleUFncmVlbWVudEtleTIwMTl9IC0gVGhlIGNvbnZlcnRlZCBvdXRwdXQuXG4gICAqL1xuICBzdGF0aWMgZnJvbUVkS2V5UGFpcih7a2V5UGFpcn0pIHtcbiAgICByZXR1cm4gdGhpcy5mcm9tRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMTgoe2tleVBhaXJ9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHVibGljS2V5QmFzZTU4IC0gVGhlIGJhc2U1OCBlbmNvZGVkIEVkMjU1MTkgUHVibGljIGtleS5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGJhc2U1OCBlbmNvZGVkIFgyNTUxOSBQdWJsaWMga2V5LlxuICAgKi9cbiAgc3RhdGljIGNvbnZlcnRGcm9tRWRQdWJsaWNLZXkoe3B1YmxpY0tleUJhc2U1OH0pIHtcbiAgICBjb25zdCBlZFB1YmtleUJ5dGVzID0gZGVjb2RlKHB1YmxpY0tleUJhc2U1OCk7XG5cbiAgICAvLyBDb252ZXJ0cyBhIDMyLWJ5dGUgRWQyNTUxOSBwdWJsaWMga2V5IGludG8gYSAzMi1ieXRlIEN1cnZlMjU1MTkga2V5XG4gICAgLy8gUmV0dXJucyBudWxsIGlmIHRoZSBnaXZlbiBwdWJsaWMga2V5IGluIG5vdCBhIHZhbGlkIEVkMjU1MTkgcHVibGljIGtleS5cbiAgICBjb25zdCBkaFB1YmtleUJ5dGVzID0gUG9pbnQuZnJvbUhleChlZFB1YmtleUJ5dGVzKS50b1gyNTUxOSgpO1xuICAgIGlmKCFkaFB1YmtleUJ5dGVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdFcnJvciBjb252ZXJ0aW5nIHRvIFgyNTUxOTsgSW52YWxpZCBFZDI1NTE5IHB1YmxpYyBrZXkuJyk7XG4gICAgfVxuICAgIGNvbnN0IGRoUHVibGljS2V5QmFzZTU4ID0gZW5jb2RlKGRoUHVia2V5Qnl0ZXMpO1xuICAgIHJldHVybiBkaFB1YmxpY0tleUJhc2U1ODtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJpdmF0ZUtleUJhc2U1OCAtIFRoZSBiYXNlNTggZW5jb2RlZCBFZDI1NTE5IFByaXZhdGUga2V5LlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgYmFzZTU4IGVuY29kZWQgWDI1NTE5IFByaXZhdGUga2V5LlxuICAgKi9cbiAgc3RhdGljIGNvbnZlcnRGcm9tRWRQcml2YXRlS2V5KHtwcml2YXRlS2V5QmFzZTU4fSkge1xuICAgIGNvbnN0IGVkUHJpdmtleUJ5dGVzID0gZGVjb2RlKHByaXZhdGVLZXlCYXNlNTgpO1xuICAgIC8vIENvbnZlcnRzIGEgNjQtYnl0ZSBFZDI1NTE5IHNlY3JldCBrZXkgKG9yIGp1c3QgdGhlIGZpcnN0IDMyLWJ5dGUgcGFydCBvZlxuICAgIC8vIGl0LCB3aGljaCBpcyB0aGUgc2VjcmV0IHZhbHVlKSBpbnRvIGEgMzItYnl0ZSBDdXJ2ZTI1NTE5IHNlY3JldCBrZXlcbiAgICBjb25zdCBkaFByaXZrZXlCeXRlcyA9IGVkMmN1cnZlLmNvbnZlcnRTZWNyZXRLZXkoZWRQcml2a2V5Qnl0ZXMpO1xuICAgIC8vIG5vdGU6IGEgZnV0dXJlIHZlcnNpb24gc2hvdWxkIG1ha2UgdGhpcyBtZXRob2QgYXN5bmMgdG8gYWxsb3cgdXNlIG9mXG4gICAgLy8gbm9ibGUgdG8gY29udmVydCBwcml2YXRlIGtleXMgLS0gYnV0IGBlZDJjdXJ2ZWAgaXMgbXVjaCBmYXN0ZXIgeDEwMDpcbiAgICAvLyBjb25zdCB7aGVhZDogZGhQcml2a2V5Qnl0ZXN9ID0gYXdhaXQgdXRpbHMuZ2V0RXh0ZW5kZWRQdWJsaWNLZXkoXG4gICAgLy8gICBlZFByaXZrZXlCeXRlcy5zbGljZSgwLCAzMikpO1xuICAgIGlmKCFkaFByaXZrZXlCeXRlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnRXJyb3IgY29udmVydGluZyB0byBYMjU1MTk7IEludmFsaWQgRWQyNTUxOSBwcml2YXRlIGtleS4nKTtcbiAgICB9XG4gICAgY29uc3QgZGhQcml2YXRlS2V5QmFzZTU4ID0gZW5jb2RlKGRoUHJpdmtleUJ5dGVzKTtcbiAgICByZXR1cm4gZGhQcml2YXRlS2V5QmFzZTU4O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydHMgdGhlIHNlcmlhbGl6ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIEtleVBhaXIuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucHVibGljS2V5XSAtIEV4cG9ydCBwdWJsaWMga2V5IG1hdGVyaWFsP1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnByaXZhdGVLZXldIC0gRXhwb3J0IHByaXZhdGUga2V5IG1hdGVyaWFsP1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmluY2x1ZGVDb250ZXh0XSAtIEluY2x1ZGUgSlNPTi1MRCBjb250ZXh0P1xuICAgKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBBIHBsYWluIGpzIG9iamVjdCB0aGF0J3MgcmVhZHkgZm9yIHNlcmlhbGl6YXRpb25cbiAgICogICAodG8gSlNPTiwgZXRjKSwgZm9yIHVzZSBpbiBESURzIGV0Yy5cbiAgICovXG4gIGV4cG9ydCh7cHVibGljS2V5ID0gZmFsc2UsIHByaXZhdGVLZXkgPSBmYWxzZSwgaW5jbHVkZUNvbnRleHQgPSBmYWxzZX0gPSB7fSkge1xuICAgIGlmKCEocHVibGljS2V5IHx8IHByaXZhdGVLZXkpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnRXhwb3J0IHJlcXVpcmVzIHNwZWNpZnlpbmcgZWl0aGVyIFwicHVibGljS2V5XCIgb3IgXCJwcml2YXRlS2V5XCIuJyk7XG4gICAgfVxuICAgIGNvbnN0IGV4cG9ydGVkS2V5ID0ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICB0eXBlOiB0aGlzLnR5cGVcbiAgICB9O1xuICAgIGlmKGluY2x1ZGVDb250ZXh0KSB7XG4gICAgICBleHBvcnRlZEtleVsnQGNvbnRleHQnXSA9IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkuU1VJVEVfQ09OVEVYVDtcbiAgICB9XG4gICAgaWYodGhpcy5jb250cm9sbGVyKSB7XG4gICAgICBleHBvcnRlZEtleS5jb250cm9sbGVyID0gdGhpcy5jb250cm9sbGVyO1xuICAgIH1cbiAgICBpZihwdWJsaWNLZXkpIHtcbiAgICAgIGV4cG9ydGVkS2V5LnB1YmxpY0tleUJhc2U1OCA9IHRoaXMucHVibGljS2V5QmFzZTU4O1xuICAgIH1cbiAgICBpZihwcml2YXRlS2V5KSB7XG4gICAgICBleHBvcnRlZEtleS5wcml2YXRlS2V5QmFzZTU4ID0gdGhpcy5wcml2YXRlS2V5QmFzZTU4O1xuICAgIH1cbiAgICBpZih0aGlzLnJldm9rZWQpIHtcbiAgICAgIGV4cG9ydGVkS2V5LnJldm9rZWQgPSB0aGlzLnJldm9rZWQ7XG4gICAgfVxuICAgIHJldHVybiBleHBvcnRlZEtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSBtdWx0aWZvcm1hdHMgZW5jb2RlZCBYMjU1MTkgcHVibGljIGtleVxuICAgKiBmaW5nZXJwcmludCAoZm9yIHVzZSB3aXRoIGNyeXB0b255bXMsIGZvciBleGFtcGxlKS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbXVsdGlmb3JtYXRzL211bHRpY29kZWNcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHB1YmxpY0tleUJhc2U1OCAtIFRoZSBiYXNlNTggZW5jb2RlZCBwdWJsaWMga2V5IG1hdGVyaWFsLlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZmluZ2VycHJpbnQuXG4gICAqL1xuICBzdGF0aWMgZmluZ2VycHJpbnRGcm9tUHVibGljS2V5KHtwdWJsaWNLZXlCYXNlNTh9KSB7XG4gICAgLy8gWDI1NTE5IGNyeXB0b255bXMgYXJlIG11bHRpY29kZWMgZW5jb2RlZCB2YWx1ZXMsIHNwZWNpZmljYWxseTpcbiAgICAvLyAobXVsdGljb2RlYygneDI1NTE5LXB1YicpICsga2V5IGJ5dGVzKVxuICAgIGNvbnN0IHB1YmtleUJ5dGVzID0gZGVjb2RlKHB1YmxpY0tleUJhc2U1OCk7XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoMiArIHB1YmtleUJ5dGVzLmxlbmd0aCk7XG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWx0aWZvcm1hdHMvbXVsdGljb2RlYy9ibG9iL21hc3Rlci90YWJsZS5jc3ZcbiAgICAvLyAweGVjIGlzIHRoZSB2YWx1ZSBmb3IgWDI1NTE5IHB1YmxpYyBrZXlcbiAgICAvLyAweDAxIGlzIGZyb20gdmFyaW50LmVuY29kZSgweGVjKSAtPiBbMHhlYywgMHgwMV1cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL211bHRpZm9ybWF0cy91bnNpZ25lZC12YXJpbnRcbiAgICBidWZmZXJbMF0gPSAweGVjOyAvL1xuICAgIGJ1ZmZlclsxXSA9IDB4MDE7XG4gICAgYnVmZmVyLnNldChwdWJrZXlCeXRlcywgMik7XG4gICAgLy8gcHJlZml4IHdpdGggYHpgIHRvIGluZGljYXRlIG11bHRpLWJhc2UgYmFzZTU4YnRjIGVuY29kaW5nXG4gICAgcmV0dXJuIGB6JHtlbmNvZGUoYnVmZmVyKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOSBmcm9tIGEga2V5IGZpbmdlcnByaW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmluZ2VycHJpbnQgLSBUaGUgZmluZ2VycHJpbnQuXG4gICAqXG4gICAqIEB0aHJvd3MgVW5zdXBwb3J0ZWQgRmluZ2VycHJpbnQgVHlwZS5cbiAgICogQHJldHVybnMge1gyNTUxOUtleUFncmVlbWVudEtleTIwMTl9IFRoZSBrZXkuXG4gICAqL1xuICBzdGF0aWMgZnJvbUZpbmdlcnByaW50KHtmaW5nZXJwcmludH0gPSB7fSkge1xuICAgIGlmKCFmaW5nZXJwcmludCB8fFxuICAgICAgISh0eXBlb2YgZmluZ2VycHJpbnQgPT09ICdzdHJpbmcnICYmIGZpbmdlcnByaW50WzBdID09PSAneicpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5nZXJwcmludGAgbXVzdCBiZSBhIG11bHRpYmFzZSBlbmNvZGVkIHN0cmluZy4nKTtcbiAgICB9XG4gICAgLy8gc2tpcCBsZWFkaW5nIGB6YCB0aGF0IGluZGljYXRlcyBiYXNlNTggZW5jb2RpbmdcbiAgICBjb25zdCBidWZmZXIgPSBkZWNvZGUoZmluZ2VycHJpbnQuc3Vic3RyKDEpKTtcblxuICAgIC8vIGJ1ZmZlciBpczogMHhlYyAweDAxIDxwdWJsaWMga2V5IGJ5dGVzPlxuICAgIGlmKGJ1ZmZlclswXSAhPT0gMHhlYyB8fCBidWZmZXJbMV0gIT09IDB4MDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgRmluZ2VycHJpbnQgVHlwZTogJHtmaW5nZXJwcmludH1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFgyNTUxOUtleUFncmVlbWVudEtleTIwMTkoe1xuICAgICAgcHVibGljS2V5QmFzZTU4OiBlbmNvZGUoYnVmZmVyLnNsaWNlKDIpKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlcml2ZXMgYSBzaGFyZWQgc2VjcmV0IHZpYSBhIGdpdmVuIHB1YmxpYyBrZXksIHR5cGljYWxseSBmb3IgdXNlXG4gICAqIGFzIG9uZSBwYXJhbWV0ZXIgZm9yIGNvbXB1dGluZyBhIHNoYXJlZCBrZXkuIEl0IHNob3VsZCBub3QgYmUgdXNlZCBhc1xuICAgKiBhIHNoYXJlZCBrZXkgaXRzZWxmLCBidXQgcmF0aGVyIGlucHV0IGludG8gYSBrZXkgZGVyaXZhdGlvbiBmdW5jdGlvbiAoS0RGKVxuICAgKiB0byBwcm9kdWNlIGEgc2hhcmVkIGtleS5cbiAgICpcbiAgICogQHBhcmFtIHtMREtleVBhaXJ9IHB1YmxpY0tleSAtIFJlbW90ZSBrZXkgcGFpci5cbiAgICpcbiAgICogQHRocm93cyB7VHlwZUVycm9yfSBPbiBpbnZhbGlkIGJhc2U1OCBlbmNvZGluZyBvZiBwdWJsaWMgb3IgcHJpdmF0ZSBrZXlzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxVaW50OEFycmF5Pn0gVGhlIGRlcml2ZWQgc2VjcmV0LlxuICAgKi9cbiAgYXN5bmMgZGVyaXZlU2VjcmV0KHtwdWJsaWNLZXl9KSB7XG4gICAgY29uc3QgcmVtb3RlUHVibGljS2V5ID0gZGVjb2RlKHB1YmxpY0tleS5wdWJsaWNLZXlCYXNlNTgpO1xuICAgIGNvbnN0IHByaXZhdGVLZXkgPSBkZWNvZGUodGhpcy5wcml2YXRlS2V5QmFzZTU4KTtcblxuICAgIHJldHVybiBkZXJpdmVTZWNyZXQoe3ByaXZhdGVLZXksIHJlbW90ZVB1YmxpY0tleX0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIG11bHRpZm9ybWF0cyBlbmNvZGVkIFgyNTUxOSBwdWJsaWMga2V5XG4gICAqIGZpbmdlcnByaW50IChmb3IgdXNlIHdpdGggY3J5cHRvbnltcywgZm9yIGV4YW1wbGUpLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tdWx0aWZvcm1hdHMvbXVsdGljb2RlY1xuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZmluZ2VycHJpbnQuXG4gICAqL1xuICBmaW5nZXJwcmludCgpIHtcbiAgICBjb25zdCB7cHVibGljS2V5QmFzZTU4fSA9IHRoaXM7XG4gICAgcmV0dXJuIFgyNTUxOUtleUFncmVlbWVudEtleTIwMTlcbiAgICAgIC5maW5nZXJwcmludEZyb21QdWJsaWNLZXkoe3B1YmxpY0tleUJhc2U1OH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3RzIHdoZXRoZXIgdGhlIGZpbmdlcnByaW50IHdhcyBnZW5lcmF0ZWQgZnJvbSBhIGdpdmVuIGtleSBwYWlyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiA+IHhLZXlQYWlyLnZlcmlmeUZpbmdlcnByaW50KCcuLi4nKTtcbiAgICoge3ZhbGlkOiB0cnVlfTtcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbmdlcnByaW50IC0gQSBCYXNlNTggcHVibGljIGtleS5cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gQW4gb2JqZWN0IGluZGljYXRpbmcgdmFsaWQgaXMgdHJ1ZSBvciBmYWxzZS5cbiAgICovXG4gIHZlcmlmeUZpbmdlcnByaW50KHtmaW5nZXJwcmludH0gPSB7fSkge1xuICAgIC8vIGZpbmdlcnByaW50IHNob3VsZCBoYXZlIGB6YCBwcmVmaXggaW5kaWNhdGluZ1xuICAgIC8vIHRoYXQgaXQncyBtdWx0aS1iYXNlIGVuY29kZWRcbiAgICBpZighKHR5cGVvZiBmaW5nZXJwcmludCA9PT0gJ3N0cmluZycgJiYgZmluZ2VycHJpbnRbMF0gPT09ICd6JykpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yOiBuZXcgRXJyb3IoJ2BmaW5nZXJwcmludGAgbXVzdCBiZSBhIG11bHRpYmFzZSBlbmNvZGVkIHN0cmluZy4nKSxcbiAgICAgICAgdmFsaWQ6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgICBsZXQgZmluZ2VycHJpbnRCdWZmZXI7XG4gICAgdHJ5IHtcbiAgICAgIGZpbmdlcnByaW50QnVmZmVyID0gZGVjb2RlKGZpbmdlcnByaW50LnNsaWNlKDEpKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiB7ZXJyb3I6IGUsIHZhbGlkOiBmYWxzZX07XG4gICAgfVxuICAgIGxldCBwdWJsaWNLZXlCdWZmZXI7XG4gICAgdHJ5IHtcbiAgICAgIHB1YmxpY0tleUJ1ZmZlciA9IGRlY29kZSh0aGlzLnB1YmxpY0tleUJhc2U1OCk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICByZXR1cm4ge2Vycm9yOiBlLCB2YWxpZDogZmFsc2V9O1xuICAgIH1cbiAgICAvLyB2YWxpZGF0ZSB0aGUgZmlyc3QgYnVmZmVyIG11bHRpY29kZWMgYnl0ZXMgMHhlYyAweDAxXG4gICAgY29uc3QgdmFsaWQgPSBmaW5nZXJwcmludEJ1ZmZlclswXSA9PT0gMHhlYyAmJlxuICAgICAgZmluZ2VycHJpbnRCdWZmZXJbMV0gPT09IDB4MDEgJiZcbiAgICAgIHB1YmxpY0tleUJ1ZmZlci50b1N0cmluZygpID09PSBmaW5nZXJwcmludEJ1ZmZlci5zbGljZSgyKS50b1N0cmluZygpO1xuICAgIGlmKCF2YWxpZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IG5ldyBFcnJvcignVGhlIGZpbmdlcnByaW50IGRvZXMgbm90IG1hdGNoIHRoZSBwdWJsaWMga2V5LicpLFxuICAgICAgICB2YWxpZDogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7dmFsaWR9O1xuICB9XG59XG5cbi8vIFVzZWQgYnkgQ3J5cHRvTEQgaGFybmVzcyBmb3IgZGlzcGF0Y2hpbmcuXG5YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5LnN1aXRlID0gU1VJVEVfSUQ7XG5YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5LlNVSVRFX0NPTlRFWFQgPVxuICAnaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS9zdWl0ZXMveDI1NTE5LTIwMTkvdjEnO1xuXG4vKipcbiAqIERlY29kZXMgYSBnaXZlbiBzdHJpbmcgYXMgYSBtdWx0aWJhc2UtZW5jb2RlZCBtdWx0aWNvZGVjIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gaGVhZGVyIC0gRXhwZWN0ZWQgaGVhZGVyIGJ5dGVzIGZvciB0aGUgbXVsdGljb2RlYyB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gTXVsdGliYXNlIGVuY29kZWQgc3RyaW5nIHRvIGRlY29kZS5cbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBEZWNvZGVkIGJ5dGVzLlxuICovXG5mdW5jdGlvbiBfbXVsdGliYXNlRGVjb2RlKGhlYWRlciwgdGV4dCkge1xuICBjb25zdCBtY1ZhbHVlID0gZGVjb2RlKHRleHQuc2xpY2UoMSkpO1xuXG4gIGlmKCFoZWFkZXIuZXZlcnkoKHZhbCwgaSkgPT4gbWNWYWx1ZVtpXSA9PT0gdmFsKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTXVsdGliYXNlIHZhbHVlIGRvZXMgbm90IGhhdmUgZXhwZWN0ZWQgaGVhZGVyLicpO1xuICB9XG5cbiAgcmV0dXJuIG1jVmFsdWUuc2xpY2UoaGVhZGVyLmxlbmd0aCk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/X25519KeyAgreementKey2019.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto-nacl.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto-nacl.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deriveSecret: () => (/* binding */ deriveSecret),\n/* harmony export */   generateKeyPair: () => (/* binding */ generateKeyPair)\n/* harmony export */ });\n/* harmony import */ var tweetnacl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tweetnacl */ \"(ssr)/./node_modules/tweetnacl/nacl-fast.js\");\n/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n\nasync function deriveSecret({privateKey, remotePublicKey}) {\n  return tweetnacl__WEBPACK_IMPORTED_MODULE_0__.scalarMult(privateKey, remotePublicKey);\n}\n\nasync function generateKeyPair() {\n  // Each is a Uint8Array with 32-byte key\n  const {publicKey, secretKey: privateKey} = tweetnacl__WEBPACK_IMPORTED_MODULE_0__.box.keyPair();\n  return {publicKey, privateKey};\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMTkvbGliL2NyeXB0by1uYWNsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUM2Qjs7QUFFdEIsNkJBQTZCLDRCQUE0QjtBQUNoRSxTQUFTLGlEQUFlO0FBQ3hCOztBQUVPO0FBQ1A7QUFDQSxTQUFTLGtDQUFrQyxFQUFFLDBDQUFRO0FBQ3JELFVBQVU7QUFDViIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci94MjU1MTkta2V5LWFncmVlbWVudC1rZXktMjAxOS9saWIvY3J5cHRvLW5hY2wuanM/ODhiMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyMSBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQgbmFjbCBmcm9tICd0d2VldG5hY2wnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVyaXZlU2VjcmV0KHtwcml2YXRlS2V5LCByZW1vdGVQdWJsaWNLZXl9KSB7XG4gIHJldHVybiBuYWNsLnNjYWxhck11bHQocHJpdmF0ZUtleSwgcmVtb3RlUHVibGljS2V5KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5UGFpcigpIHtcbiAgLy8gRWFjaCBpcyBhIFVpbnQ4QXJyYXkgd2l0aCAzMi1ieXRlIGtleVxuICBjb25zdCB7cHVibGljS2V5LCBzZWNyZXRLZXk6IHByaXZhdGVLZXl9ID0gbmFjbC5ib3gua2V5UGFpcigpO1xuICByZXR1cm4ge3B1YmxpY0tleSwgcHJpdmF0ZUtleX07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto-nacl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deriveSecret: () => (/* binding */ deriveSecret),\n/* harmony export */   generateKeyPair: () => (/* binding */ generateKeyPair)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:util */ \"node:util\");\n/* harmony import */ var _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./crypto-nacl.js */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto-nacl.js\");\n/*!\n * Copyright (c) 2020 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst PUBLIC_KEY_DER_PREFIX = new Uint8Array([\n  48, 42, 48, 5, 6, 3, 43, 101, 110, 3, 33, 0\n]);\n\nconst PRIVATE_KEY_DER_PREFIX = new Uint8Array([\n  48, 46, 2, 1, 0, 48, 5, 6, 3, 43, 101, 110, 4, 34, 4, 32\n]);\n\nasync function deriveSecretNative({privateKey, remotePublicKey}) {\n  const nodePrivateKey = node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPrivateKey({\n    key: Buffer.concat([PRIVATE_KEY_DER_PREFIX, privateKey]),\n    format: 'der',\n    type: 'pkcs8'\n  });\n  const nodePublicKey = node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPublicKey({\n    key: Buffer.concat([PUBLIC_KEY_DER_PREFIX, remotePublicKey]),\n    format: 'der',\n    type: 'spki'\n  });\n  return node_crypto__WEBPACK_IMPORTED_MODULE_0__.diffieHellman({\n    privateKey: nodePrivateKey,\n    publicKey: nodePublicKey,\n  });\n}\n\nasync function generateKeyPairNative() {\n  const generateKeyPairAsync = (0,node_util__WEBPACK_IMPORTED_MODULE_1__.promisify)(node_crypto__WEBPACK_IMPORTED_MODULE_0__.generateKeyPair);\n  const publicKeyEncoding = {format: 'der', type: 'spki'};\n  const privateKeyEncoding = {format: 'der', type: 'pkcs8'};\n  const {publicKey: publicDerBytes, privateKey: privateDerBytes} =\n    await generateKeyPairAsync('x25519', {\n      publicKeyEncoding, privateKeyEncoding\n    });\n  const publicKey = publicDerBytes.slice(12, 12 + 32);\n  const privateKey = privateDerBytes.slice(16, 16 + 32);\n  return {publicKey, privateKey};\n}\n\nlet deriveSecret;\nlet generateKeyPair;\nif(node_crypto__WEBPACK_IMPORTED_MODULE_0__.diffieHellman) {\n  deriveSecret = deriveSecretNative;\n  generateKeyPair = generateKeyPairNative;\n} else {\n  deriveSecret = _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_2__.deriveSecret;\n  generateKeyPair = _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_2__.generateKeyPair;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMTkvbGliL2NyeXB0by5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNzQztBQUNGO0FBQ1c7O0FBRS9DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsbUNBQW1DLDRCQUE0QjtBQUMvRCx5QkFBeUIseURBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx3QkFBd0Isd0RBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLHNEQUFvQjtBQUM3QjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsK0JBQStCLG9EQUFTLENBQUMsd0RBQXNCO0FBQy9ELDZCQUE2QjtBQUM3Qiw4QkFBOEI7QUFDOUIsU0FBUyx3REFBd0Q7QUFDakU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQSxHQUFHLHNEQUFvQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGLGlCQUFpQix5REFBdUI7QUFDeEMsb0JBQW9CLDREQUEwQjtBQUM5Qzs7QUFFdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMTkvbGliL2NyeXB0by5qcz9lOTdlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmltcG9ydCAqIGFzIGNyeXB0byBmcm9tICdub2RlOmNyeXB0byc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnbm9kZTp1dGlsJztcbmltcG9ydCAqIGFzIGNyeXB0b05hY2wgZnJvbSAnLi9jcnlwdG8tbmFjbC5qcyc7XG5cbmNvbnN0IFBVQkxJQ19LRVlfREVSX1BSRUZJWCA9IG5ldyBVaW50OEFycmF5KFtcbiAgNDgsIDQyLCA0OCwgNSwgNiwgMywgNDMsIDEwMSwgMTEwLCAzLCAzMywgMFxuXSk7XG5cbmNvbnN0IFBSSVZBVEVfS0VZX0RFUl9QUkVGSVggPSBuZXcgVWludDhBcnJheShbXG4gIDQ4LCA0NiwgMiwgMSwgMCwgNDgsIDUsIDYsIDMsIDQzLCAxMDEsIDExMCwgNCwgMzQsIDQsIDMyXG5dKTtcblxuYXN5bmMgZnVuY3Rpb24gZGVyaXZlU2VjcmV0TmF0aXZlKHtwcml2YXRlS2V5LCByZW1vdGVQdWJsaWNLZXl9KSB7XG4gIGNvbnN0IG5vZGVQcml2YXRlS2V5ID0gY3J5cHRvLmNyZWF0ZVByaXZhdGVLZXkoe1xuICAgIGtleTogQnVmZmVyLmNvbmNhdChbUFJJVkFURV9LRVlfREVSX1BSRUZJWCwgcHJpdmF0ZUtleV0pLFxuICAgIGZvcm1hdDogJ2RlcicsXG4gICAgdHlwZTogJ3BrY3M4J1xuICB9KTtcbiAgY29uc3Qgbm9kZVB1YmxpY0tleSA9IGNyeXB0by5jcmVhdGVQdWJsaWNLZXkoe1xuICAgIGtleTogQnVmZmVyLmNvbmNhdChbUFVCTElDX0tFWV9ERVJfUFJFRklYLCByZW1vdGVQdWJsaWNLZXldKSxcbiAgICBmb3JtYXQ6ICdkZXInLFxuICAgIHR5cGU6ICdzcGtpJ1xuICB9KTtcbiAgcmV0dXJuIGNyeXB0by5kaWZmaWVIZWxsbWFuKHtcbiAgICBwcml2YXRlS2V5OiBub2RlUHJpdmF0ZUtleSxcbiAgICBwdWJsaWNLZXk6IG5vZGVQdWJsaWNLZXksXG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUtleVBhaXJOYXRpdmUoKSB7XG4gIGNvbnN0IGdlbmVyYXRlS2V5UGFpckFzeW5jID0gcHJvbWlzaWZ5KGNyeXB0by5nZW5lcmF0ZUtleVBhaXIpO1xuICBjb25zdCBwdWJsaWNLZXlFbmNvZGluZyA9IHtmb3JtYXQ6ICdkZXInLCB0eXBlOiAnc3BraSd9O1xuICBjb25zdCBwcml2YXRlS2V5RW5jb2RpbmcgPSB7Zm9ybWF0OiAnZGVyJywgdHlwZTogJ3BrY3M4J307XG4gIGNvbnN0IHtwdWJsaWNLZXk6IHB1YmxpY0RlckJ5dGVzLCBwcml2YXRlS2V5OiBwcml2YXRlRGVyQnl0ZXN9ID1cbiAgICBhd2FpdCBnZW5lcmF0ZUtleVBhaXJBc3luYygneDI1NTE5Jywge1xuICAgICAgcHVibGljS2V5RW5jb2RpbmcsIHByaXZhdGVLZXlFbmNvZGluZ1xuICAgIH0pO1xuICBjb25zdCBwdWJsaWNLZXkgPSBwdWJsaWNEZXJCeXRlcy5zbGljZSgxMiwgMTIgKyAzMik7XG4gIGNvbnN0IHByaXZhdGVLZXkgPSBwcml2YXRlRGVyQnl0ZXMuc2xpY2UoMTYsIDE2ICsgMzIpO1xuICByZXR1cm4ge3B1YmxpY0tleSwgcHJpdmF0ZUtleX07XG59XG5cbmxldCBkZXJpdmVTZWNyZXQ7XG5sZXQgZ2VuZXJhdGVLZXlQYWlyO1xuaWYoY3J5cHRvLmRpZmZpZUhlbGxtYW4pIHtcbiAgZGVyaXZlU2VjcmV0ID0gZGVyaXZlU2VjcmV0TmF0aXZlO1xuICBnZW5lcmF0ZUtleVBhaXIgPSBnZW5lcmF0ZUtleVBhaXJOYXRpdmU7XG59IGVsc2Uge1xuICBkZXJpdmVTZWNyZXQgPSBjcnlwdG9OYWNsLmRlcml2ZVNlY3JldDtcbiAgZ2VuZXJhdGVLZXlQYWlyID0gY3J5cHRvTmFjbC5nZW5lcmF0ZUtleVBhaXI7XG59XG5cbmV4cG9ydCB7ZGVyaXZlU2VjcmV0LCBnZW5lcmF0ZUtleVBhaXJ9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/crypto.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   X25519KeyAgreementKey2019: () => (/* reexport safe */ _X25519KeyAgreementKey2019_js__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2019)\n/* harmony export */ });\n/* harmony import */ var _X25519KeyAgreementKey2019_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./X25519KeyAgreementKey2019.js */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/X25519KeyAgreementKey2019.js\");\n/*!\n * Copyright (c) 2020 Digital Bazaar, Inc. All rights reserved.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMTkvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ3lFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL3gyNTUxOS1rZXktYWdyZWVtZW50LWtleS0yMDE5L2xpYi9pbmRleC5qcz82YjA1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIwIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmV4cG9ydCB7WDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOX0gZnJvbSAnLi9YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDE5LmpzJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2019/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/X25519KeyAgreementKey2020.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/X25519KeyAgreementKey2020.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   X25519KeyAgreementKey2020: () => (/* binding */ X25519KeyAgreementKey2020)\n/* harmony export */ });\n/* harmony import */ var base58_universal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base58-universal */ \"(ssr)/./node_modules/base58-universal/lib/index.js\");\n/* harmony import */ var crypto_ld__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto-ld */ \"(ssr)/./node_modules/crypto-ld/lib/index.js\");\n/* harmony import */ var _noble_ed25519__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @noble/ed25519 */ \"(ssr)/./node_modules/@noble/ed25519/lib/esm/index.js\");\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto.js\");\n/*!\n * Copyright (c) 2021-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\n\n\nconst SUITE_ID = 'X25519KeyAgreementKey2020';\n// multibase base58-btc header\nconst MULTIBASE_BASE58BTC_HEADER = 'z';\n// multicodec ed25519-pub header as varint\nconst MULTICODEC_ED25519_PUB_HEADER = new Uint8Array([0xed, 0x01]);\n// multicodec ed25519-priv header as varint\nconst MULTICODEC_ED25519_PRIV_HEADER = new Uint8Array([0x80, 0x26]);\n// multicodec x25519-pub header as varint\nconst MULTICODEC_X25519_PUB_HEADER = new Uint8Array([0xec, 0x01]);\n// multicodec x25519-priv header as varint\nconst MULTICODEC_X25519_PRIV_HEADER = new Uint8Array([0x82, 0x26]);\n\nclass X25519KeyAgreementKey2020 extends crypto_ld__WEBPACK_IMPORTED_MODULE_1__.LDKeyPair {\n  /**\n   * @param {object} options - Options hashmap.\n   * @param {string} options.controller - Controller DID or document url.\n   * @param {string} [options.id] - Key ID, typically composed of controller\n   *   URL and key fingerprint as hash fragment.\n   * @param {string} options.publicKeyMultibase - Multibase encoded public key.\n   * @param {string} [options.privateKeyMultibase] - Multibase private key.\n   * @param {string} [options.revoked] - Timestamp of when the key has been\n   *   revoked, in RFC3339 format. If not present, the key itself is considered\n   *   not revoked. Note that this mechanism is slightly different than DID\n   *   Document key revocation, where a DID controller can revoke a key from\n   *   that DID by removing it from the DID Document.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.type = SUITE_ID;\n    const {publicKeyMultibase, privateKeyMultibase} = options;\n\n    if(!publicKeyMultibase) {\n      throw new TypeError('The \"publicKeyMultibase\" property is required.');\n    }\n\n    if(!publicKeyMultibase || !_isValidKeyHeader(\n      publicKeyMultibase, MULTICODEC_X25519_PUB_HEADER)) {\n      throw new Error(\n        '\"publicKeyMultibase\" has invalid header bytes: ' +\n        `\"${publicKeyMultibase}\".`);\n    }\n\n    if(privateKeyMultibase && !_isValidKeyHeader(\n      privateKeyMultibase, MULTICODEC_X25519_PRIV_HEADER)) {\n      throw new Error('\"privateKeyMultibase\" has invalid header bytes.');\n    }\n\n    // assign valid key values\n    this.publicKeyMultibase = publicKeyMultibase;\n    this.privateKeyMultibase = privateKeyMultibase;\n\n    if(this.controller && !this.id) {\n      this.id = `${this.controller}#${this.fingerprint()}`;\n    }\n  }\n\n  /**\n   * Generates a new public/private X25519 Key Pair.\n   *\n   * @param {object} [options={}] - Keypair options (see controller docstring).\n   *\n   * @returns {Promise<X25519KeyAgreementKey2020>} Generated key pair.\n   */\n  static async generate(options = {}) {\n    const {publicKey, privateKey} = await (0,_crypto_js__WEBPACK_IMPORTED_MODULE_3__.generateKeyPair)();\n\n    return new X25519KeyAgreementKey2020({\n      publicKeyMultibase:\n        _multibaseEncode(MULTICODEC_X25519_PUB_HEADER, publicKey),\n      privateKeyMultibase:\n        _multibaseEncode(MULTICODEC_X25519_PRIV_HEADER, privateKey),\n      ...options\n    });\n  }\n\n  /**\n   * Creates an X25519KeyAgreementKey2020 Key Pair from an existing key\n   * (constructor method).\n   *\n   * @param {object} [options={}] - Keypair options (see controller docstring).\n   *\n   * @returns {X25519KeyAgreementKey2020} An X25519 Key Pair.\n   */\n  static async from(options = {}) {\n    // Check to see if this is an X25519KeyAgreementKey2019\n    if(options.publicKeyBase58) {\n      // Convert it to a 2020 key pair instance\n      return this.fromX25519KeyAgreementKey2019(options);\n    }\n    return new X25519KeyAgreementKey2020(options);\n  }\n\n  /**\n   * Creates an X25519KeyAgreementKey2020 Key Pair from an existing 2019 key\n   * (backwards compatibility method).\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {string} options.publicKeyBase58 - Base58btc encoded public key.\n   * @param {string} [options.privateKeyBase58] - Base58btc encoded private key.\n   * @param {object} [options.keyPairOptions] - Other options.\n   *\n   * @returns {Promise<X25519KeyAgreementKey2020>} 2020 Crypto suite key pair.\n   */\n  static async fromX25519KeyAgreementKey2019({\n    publicKeyBase58, privateKeyBase58, ...keyPairOptions\n  } = {}) {\n    let publicKeyMultibase;\n    let privateKeyMultibase;\n\n    if(publicKeyBase58) {\n      // prefix with `z` to indicate multi-base base58btc encoding\n      publicKeyMultibase = _multibaseEncode(\n        MULTICODEC_X25519_PUB_HEADER, base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(publicKeyBase58));\n    }\n    if(privateKeyBase58) {\n      // prefix with `z` to indicate multi-base base58btc encoding\n      privateKeyMultibase = _multibaseEncode(\n        MULTICODEC_X25519_PRIV_HEADER, base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(privateKeyBase58));\n    }\n    return new X25519KeyAgreementKey2020({\n      publicKeyMultibase, privateKeyMultibase, ...keyPairOptions\n    });\n  }\n\n  /**\n   * Converts a keypair instance of type Ed25519VerificationKey2020 to an\n   * instance of this class.\n   *\n   * @see https://github.com/digitalbazaar/ed25519-verification-key-2020\n   *\n   * @param {object} [options={}] - Options hashmap.\n   *\n   * @typedef {object} Ed25519VerificationKey2020\n   * @param {Ed25519VerificationKey2020} options.keyPair - Source key pair.\n   *\n   * @returns {X25519KeyAgreementKey2020} A derived/converted key agreement\n   *   key pair.\n   */\n  static fromEd25519VerificationKey2020({keyPair} = {}) {\n    if(!keyPair.publicKeyMultibase) {\n      throw new Error('Source public key is required to convert.');\n    }\n\n    if(!keyPair.publicKeyMultibase.startsWith(MULTIBASE_BASE58BTC_HEADER)) {\n      throw new TypeError(\n        'Expecting \"publicKeyMultibase\" value to be multibase base58btc ' +\n        'encoded (must start with \"z\").'\n      );\n    }\n\n    const xKey = new X25519KeyAgreementKey2020({\n      controller: keyPair.controller,\n      publicKeyMultibase: X25519KeyAgreementKey2020\n        .convertFromEdPublicKey(keyPair)\n    });\n\n    if(keyPair.privateKeyMultibase) {\n      if(!keyPair.privateKeyMultibase.startsWith(MULTIBASE_BASE58BTC_HEADER)) {\n        throw new TypeError(\n          'Expecting \"privateKeyMultibase\" value to be multibase base58btc ' +\n          'encoded (must start with \"z\").'\n        );\n      }\n\n      xKey.privateKeyMultibase = X25519KeyAgreementKey2020\n        .convertFromEdPrivateKey(keyPair);\n    }\n\n    return xKey;\n  }\n\n  /**\n   * @param {object} [options={}] - Options hashmap.\n   * @param {string} options.publicKeyMultibase - Multibase encoded Ed25519\n   *   public key.\n   *\n   * @returns {string} Multibase encoded converted X25519 Public key.\n   */\n  static convertFromEdPublicKey({publicKeyMultibase} = {}) {\n    if(!publicKeyMultibase) {\n      throw new Error('Source public key is required to convert.');\n    }\n\n    const edPubkeyBytes =\n      _multibaseDecode(MULTICODEC_ED25519_PUB_HEADER, publicKeyMultibase);\n\n    // Converts a 32-byte Ed25519 public key into a 32-byte Curve25519 key\n    // Returns null if the given public key in not a valid Ed25519 public key.\n    const dhPubkeyBytes = _noble_ed25519__WEBPACK_IMPORTED_MODULE_2__.Point.fromHex(edPubkeyBytes).toX25519();\n    if(!dhPubkeyBytes) {\n      throw new Error(\n        'Error converting to X25519; Invalid Ed25519 public key.');\n    }\n    return _multibaseEncode(MULTICODEC_X25519_PUB_HEADER, dhPubkeyBytes);\n  }\n\n  /**\n   * @param {object} [options={}] - Options hashmap.\n   * @param {string} options.privateKeyMultibase - Multibase encoded Ed25519\n   *   private key.\n   *\n   * @returns {string} Multibase encoded converted X25519 Private key.\n   */\n  static convertFromEdPrivateKey({privateKeyMultibase} = {}) {\n    if(!privateKeyMultibase) {\n      throw new Error('Source private key is required to convert.');\n    }\n\n    const edPrivkeyBytes =\n      _multibaseDecode(MULTICODEC_ED25519_PRIV_HEADER, privateKeyMultibase);\n    // Converts a 64-byte Ed25519 secret key (or just the first 32-byte part of\n    // it, which is the secret value) into a 32-byte Curve25519 secret key\n    const dhPrivkeyBytes = (0,_crypto_js__WEBPACK_IMPORTED_MODULE_3__.ed25519SecretKeyToX25519)(edPrivkeyBytes);\n    // note: a future version should make this method async to allow use of\n    // noble to convert private keys -- but the tweetnacl version used\n    // internally is much faster (~ x100):\n    // const {head: dhPrivkeyBytes} = await utils.getExtendedPublicKey(\n    //   edPrivkeyBytes.slice(0, 32));\n    if(!dhPrivkeyBytes) {\n      throw new Error(\n        'Error converting to X25519; Invalid Ed25519 private key.');\n    }\n    return _multibaseEncode(MULTICODEC_X25519_PRIV_HEADER, dhPrivkeyBytes);\n  }\n\n  /**\n   * Exports the serialized representation of the KeyPair.\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {boolean} [options.publicKey] - Export public key material?\n   * @param {boolean} [options.privateKey] - Export private key material?\n   * @param {boolean} [options.includeContext] - Include JSON-LD context?\n   *\n   * @returns {object} A plain js object that's ready for serialization\n   *   (to JSON, etc), for use in DIDs etc.\n   */\n  export({publicKey = false, privateKey = false, includeContext = false} = {}) {\n    if(!(publicKey || privateKey)) {\n      throw new TypeError(\n        'Export requires specifying either \"publicKey\" or \"privateKey\".');\n    }\n    const exportedKey = {\n      id: this.id,\n      type: this.type\n    };\n    if(includeContext) {\n      exportedKey['@context'] = X25519KeyAgreementKey2020.SUITE_CONTEXT;\n    }\n    if(this.controller) {\n      exportedKey.controller = this.controller;\n    }\n    if(publicKey) {\n      exportedKey.publicKeyMultibase = this.publicKeyMultibase;\n    }\n    if(privateKey) {\n      exportedKey.privateKeyMultibase = this.privateKeyMultibase;\n    }\n    if(this.revoked) {\n      exportedKey.revoked = this.revoked;\n    }\n    return exportedKey;\n  }\n\n  /**\n   * Generates and returns a base58btc multibase encoded value of a multicodec\n   * X25519 public key fingerprint (for use with cryptonyms, for example).\n   *\n   * @see https://github.com/multiformats/multicodec\n   * @see https://github.com/multiformats/multibase\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {string} options.publicKeyMultibase - Multibase encoded public key.\n   *\n   * @returns {string} The fingerprint.\n   */\n  static fingerprintFromPublicKey({publicKeyMultibase} = {}) {\n    if(!publicKeyMultibase) {\n      throw new Error('Source public key is required.');\n    }\n\n    return publicKeyMultibase;\n  }\n\n  /**\n   * Creates an instance of X25519KeyAgreementKey2020 from a key fingerprint.\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {string} options.fingerprint - Public key fingerprint.\n   *\n   * @returns {X25519KeyAgreementKey2020} Key pair instance (public key material\n   *   only) created from the fingerprint.\n   */\n  static fromFingerprint({fingerprint} = {}) {\n    return new X25519KeyAgreementKey2020({\n      publicKeyMultibase: fingerprint\n    });\n  }\n\n  /**\n   * Derives a shared secret via a given public key, typically for use\n   * as one parameter for computing a shared key. It should not be used as\n   * a shared key itself, but rather as an input into a key derivation function\n   * (KDF) to produce a shared key.\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {LDKeyPair} options.publicKey - Remote key pair.\n   *\n   * @returns {Promise<Uint8Array>} Derived secret.\n   */\n  async deriveSecret({publicKey}) {\n    const remotePublicKey = _multibaseDecode(\n      MULTICODEC_X25519_PUB_HEADER, publicKey.publicKeyMultibase);\n    const privateKey = _multibaseDecode(\n      MULTICODEC_X25519_PRIV_HEADER, this.privateKeyMultibase);\n\n    return (0,_crypto_js__WEBPACK_IMPORTED_MODULE_3__.deriveSecret)({privateKey, remotePublicKey});\n  }\n\n  /**\n   * Generates and returns a multiformats encoded\n   * X25519 public key fingerprint (for use with cryptonyms, for example).\n   *\n   * @see https://github.com/multiformats/multicodec\n   *\n   * @returns {string} The fingerprint.\n   */\n  fingerprint() {\n    return this.publicKeyMultibase;\n  }\n\n  /**\n   * Tests whether the fingerprint was generated from a given key pair.\n   *\n   * @example\n   * xKeyPair.verifyFingerprint('...');\n   * // {valid: true};\n   *\n   * @param {object} [options={}] - Options hashmap.\n   * @param {string} options.fingerprint - An x25519 key fingerprint (typically\n   *   from a key id).\n   *\n   * @returns {object} An object indicating valid is true or false.\n   */\n  verifyFingerprint({fingerprint} = {}) {\n    // fingerprint should have `z` prefix indicating\n    // that it's base58btc multibase encoded\n    if(!_isValidKeyHeader(fingerprint, MULTICODEC_X25519_PUB_HEADER)) {\n      throw new Error(\n        `\"fingerprint\" has invalid header bytes: \"${fingerprint}\".`);\n    }\n\n    return {valid: true};\n  }\n}\n\n// Used by CryptoLD harness for dispatching.\nX25519KeyAgreementKey2020.suite = SUITE_ID;\n// Used by CryptoLD harness's fromKeyId() method.\nX25519KeyAgreementKey2020.SUITE_CONTEXT =\n  'https://w3id.org/security/suites/x25519-2020/v1';\n\n/**\n * Checks to see if the given value is a valid multibase encoded key.\n *\n * @param {Uint8Array} multibaseKey - The multibase-encoded key value.\n * @param {Uint8Array} expectedHeader - The expected header for the key value.\n * @returns {boolean} Returns true if the header is valid, false otherwise.\n */\nfunction _isValidKeyHeader(multibaseKey, expectedHeader) {\n  if(!(typeof multibaseKey === 'string' &&\n    multibaseKey[0] === MULTIBASE_BASE58BTC_HEADER)) {\n    return false;\n  }\n\n  const keyBytes = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(multibaseKey.slice(1));\n  return expectedHeader.every((val, i) => keyBytes[i] === val);\n}\n\n/**\n * Encodes a given Uint8Array to multibase-encoded string.\n *\n * @param {Uint8Array} header - Multicodec header to prepend to the bytes.\n * @param {Uint8Array} bytes - Bytes to encode.\n * @returns {string} Multibase-encoded string.\n */\nfunction _multibaseEncode(header, bytes) {\n  const mcBytes = new Uint8Array(header.length + bytes.length);\n\n  mcBytes.set(header);\n  mcBytes.set(bytes, header.length);\n\n  return MULTIBASE_BASE58BTC_HEADER + base58_universal__WEBPACK_IMPORTED_MODULE_0__.encode(mcBytes);\n}\n\n/**\n * Decodes a given string as a multibase-encoded multicodec value.\n *\n * @param {Uint8Array} header - Expected header bytes for the multicodec value.\n * @param {string} text - Multibase encoded string to decode.\n * @returns {Uint8Array} Decoded bytes.\n */\nfunction _multibaseDecode(header, text) {\n  const mcValue = base58_universal__WEBPACK_IMPORTED_MODULE_0__.decode(text.substr(1));\n\n  if(!header.every((val, i) => mcValue[i] === val)) {\n    throw new Error('Multibase value does not have expected header.');\n  }\n\n  return mcValue.slice(header.length);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAvbGliL1gyNTUxOUtleUFncmVlbWVudEtleTIwMjAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDOEM7QUFDVjtBQUNDOztBQUloQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTyx3Q0FBd0MsZ0RBQVM7QUFDeEQ7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLFdBQVcseUNBQXlDOztBQUVwRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsZ0JBQWdCLEdBQUcsbUJBQW1CO0FBQ3pEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRLFdBQVc7QUFDaEM7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBLG9DQUFvQztBQUNwQyxXQUFXLHVCQUF1QixRQUFRLDJEQUFlOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQztBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRLFdBQVc7QUFDaEMsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLG9DQUFvQztBQUNuRDtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxvREFBZ0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsb0RBQWdCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQztBQUNBLGVBQWUsUUFBUTtBQUN2QixhQUFhLDRCQUE0QjtBQUN6QztBQUNBLGVBQWUsMkJBQTJCO0FBQzFDO0FBQ0E7QUFDQSx5Q0FBeUMsU0FBUyxJQUFJO0FBQ3REO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxRQUFRLFdBQVc7QUFDaEMsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQ0FBaUMsb0JBQW9CLElBQUk7QUFDekQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQixpREFBSztBQUMvQjtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0Esa0NBQWtDLHFCQUFxQixJQUFJO0FBQzNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvRUFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQyxhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUztBQUN0QjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsVUFBVSwrREFBK0QsSUFBSTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG1DQUFtQyxvQkFBb0IsSUFBSTtBQUMzRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVEsV0FBVztBQUNoQyxhQUFhLFFBQVE7QUFDckI7QUFDQSxlQUFlLDJCQUEyQjtBQUMxQztBQUNBO0FBQ0EsMEJBQTBCLGFBQWEsSUFBSTtBQUMzQztBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsV0FBVztBQUN4QjtBQUNBLGVBQWUscUJBQXFCO0FBQ3BDO0FBQ0Esc0JBQXNCLFVBQVU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsV0FBVyx3REFBWSxFQUFFLDRCQUE0QjtBQUNyRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGFBQWEsUUFBUSxXQUFXO0FBQ2hDLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EscUJBQXFCLGFBQWEsSUFBSTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxZQUFZO0FBQ2hFOztBQUVBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxZQUFZO0FBQ3ZCLFdBQVcsWUFBWTtBQUN2QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixvREFBZ0I7QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxZQUFZO0FBQ3ZCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxzQ0FBc0Msb0RBQWdCO0FBQ3REOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixXQUFXLFFBQVE7QUFDbkIsYUFBYSxZQUFZO0FBQ3pCO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWdCOztBQUVsQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy8uL25vZGVfbW9kdWxlcy9AZGlnaXRhbGJhemFhci94MjU1MTkta2V5LWFncmVlbWVudC1rZXktMjAyMC9saWIvWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMC5qcz8xZWI4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIxLTIwMjIgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0ICogYXMgYmFzZTU4YnRjIGZyb20gJ2Jhc2U1OC11bml2ZXJzYWwnO1xuaW1wb3J0IHtMREtleVBhaXJ9IGZyb20gJ2NyeXB0by1sZCc7XG5pbXBvcnQge1BvaW50fSBmcm9tICdAbm9ibGUvZWQyNTUxOSc7XG5cbmltcG9ydCB7XG4gIGRlcml2ZVNlY3JldCwgZWQyNTUxOVNlY3JldEtleVRvWDI1NTE5LCBnZW5lcmF0ZUtleVBhaXJcbn0gZnJvbSAnLi9jcnlwdG8uanMnO1xuXG5jb25zdCBTVUlURV9JRCA9ICdYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwJztcbi8vIG11bHRpYmFzZSBiYXNlNTgtYnRjIGhlYWRlclxuY29uc3QgTVVMVElCQVNFX0JBU0U1OEJUQ19IRUFERVIgPSAneic7XG4vLyBtdWx0aWNvZGVjIGVkMjU1MTktcHViIGhlYWRlciBhcyB2YXJpbnRcbmNvbnN0IE1VTFRJQ09ERUNfRUQyNTUxOV9QVUJfSEVBREVSID0gbmV3IFVpbnQ4QXJyYXkoWzB4ZWQsIDB4MDFdKTtcbi8vIG11bHRpY29kZWMgZWQyNTUxOS1wcml2IGhlYWRlciBhcyB2YXJpbnRcbmNvbnN0IE1VTFRJQ09ERUNfRUQyNTUxOV9QUklWX0hFQURFUiA9IG5ldyBVaW50OEFycmF5KFsweDgwLCAweDI2XSk7XG4vLyBtdWx0aWNvZGVjIHgyNTUxOS1wdWIgaGVhZGVyIGFzIHZhcmludFxuY29uc3QgTVVMVElDT0RFQ19YMjU1MTlfUFVCX0hFQURFUiA9IG5ldyBVaW50OEFycmF5KFsweGVjLCAweDAxXSk7XG4vLyBtdWx0aWNvZGVjIHgyNTUxOS1wcml2IGhlYWRlciBhcyB2YXJpbnRcbmNvbnN0IE1VTFRJQ09ERUNfWDI1NTE5X1BSSVZfSEVBREVSID0gbmV3IFVpbnQ4QXJyYXkoWzB4ODIsIDB4MjZdKTtcblxuZXhwb3J0IGNsYXNzIFgyNTUxOUtleUFncmVlbWVudEtleTIwMjAgZXh0ZW5kcyBMREtleVBhaXIge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmNvbnRyb2xsZXIgLSBDb250cm9sbGVyIERJRCBvciBkb2N1bWVudCB1cmwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5pZF0gLSBLZXkgSUQsIHR5cGljYWxseSBjb21wb3NlZCBvZiBjb250cm9sbGVyXG4gICAqICAgVVJMIGFuZCBrZXkgZmluZ2VycHJpbnQgYXMgaGFzaCBmcmFnbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucHVibGljS2V5TXVsdGliYXNlIC0gTXVsdGliYXNlIGVuY29kZWQgcHVibGljIGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnByaXZhdGVLZXlNdWx0aWJhc2VdIC0gTXVsdGliYXNlIHByaXZhdGUga2V5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMucmV2b2tlZF0gLSBUaW1lc3RhbXAgb2Ygd2hlbiB0aGUga2V5IGhhcyBiZWVuXG4gICAqICAgcmV2b2tlZCwgaW4gUkZDMzMzOSBmb3JtYXQuIElmIG5vdCBwcmVzZW50LCB0aGUga2V5IGl0c2VsZiBpcyBjb25zaWRlcmVkXG4gICAqICAgbm90IHJldm9rZWQuIE5vdGUgdGhhdCB0aGlzIG1lY2hhbmlzbSBpcyBzbGlnaHRseSBkaWZmZXJlbnQgdGhhbiBESURcbiAgICogICBEb2N1bWVudCBrZXkgcmV2b2NhdGlvbiwgd2hlcmUgYSBESUQgY29udHJvbGxlciBjYW4gcmV2b2tlIGEga2V5IGZyb21cbiAgICogICB0aGF0IERJRCBieSByZW1vdmluZyBpdCBmcm9tIHRoZSBESUQgRG9jdW1lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihvcHRpb25zKTtcbiAgICB0aGlzLnR5cGUgPSBTVUlURV9JRDtcbiAgICBjb25zdCB7cHVibGljS2V5TXVsdGliYXNlLCBwcml2YXRlS2V5TXVsdGliYXNlfSA9IG9wdGlvbnM7XG5cbiAgICBpZighcHVibGljS2V5TXVsdGliYXNlKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJwdWJsaWNLZXlNdWx0aWJhc2VcIiBwcm9wZXJ0eSBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG5cbiAgICBpZighcHVibGljS2V5TXVsdGliYXNlIHx8ICFfaXNWYWxpZEtleUhlYWRlcihcbiAgICAgIHB1YmxpY0tleU11bHRpYmFzZSwgTVVMVElDT0RFQ19YMjU1MTlfUFVCX0hFQURFUikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1wicHVibGljS2V5TXVsdGliYXNlXCIgaGFzIGludmFsaWQgaGVhZGVyIGJ5dGVzOiAnICtcbiAgICAgICAgYFwiJHtwdWJsaWNLZXlNdWx0aWJhc2V9XCIuYCk7XG4gICAgfVxuXG4gICAgaWYocHJpdmF0ZUtleU11bHRpYmFzZSAmJiAhX2lzVmFsaWRLZXlIZWFkZXIoXG4gICAgICBwcml2YXRlS2V5TXVsdGliYXNlLCBNVUxUSUNPREVDX1gyNTUxOV9QUklWX0hFQURFUikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignXCJwcml2YXRlS2V5TXVsdGliYXNlXCIgaGFzIGludmFsaWQgaGVhZGVyIGJ5dGVzLicpO1xuICAgIH1cblxuICAgIC8vIGFzc2lnbiB2YWxpZCBrZXkgdmFsdWVzXG4gICAgdGhpcy5wdWJsaWNLZXlNdWx0aWJhc2UgPSBwdWJsaWNLZXlNdWx0aWJhc2U7XG4gICAgdGhpcy5wcml2YXRlS2V5TXVsdGliYXNlID0gcHJpdmF0ZUtleU11bHRpYmFzZTtcblxuICAgIGlmKHRoaXMuY29udHJvbGxlciAmJiAhdGhpcy5pZCkge1xuICAgICAgdGhpcy5pZCA9IGAke3RoaXMuY29udHJvbGxlcn0jJHt0aGlzLmZpbmdlcnByaW50KCl9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgbmV3IHB1YmxpYy9wcml2YXRlIFgyNTUxOSBLZXkgUGFpci5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIEtleXBhaXIgb3B0aW9ucyAoc2VlIGNvbnRyb2xsZXIgZG9jc3RyaW5nKS5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8WDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMD59IEdlbmVyYXRlZCBrZXkgcGFpci5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZW5lcmF0ZShvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7cHVibGljS2V5LCBwcml2YXRlS2V5fSA9IGF3YWl0IGdlbmVyYXRlS2V5UGFpcigpO1xuXG4gICAgcmV0dXJuIG5ldyBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwKHtcbiAgICAgIHB1YmxpY0tleU11bHRpYmFzZTpcbiAgICAgICAgX211bHRpYmFzZUVuY29kZShNVUxUSUNPREVDX1gyNTUxOV9QVUJfSEVBREVSLCBwdWJsaWNLZXkpLFxuICAgICAgcHJpdmF0ZUtleU11bHRpYmFzZTpcbiAgICAgICAgX211bHRpYmFzZUVuY29kZShNVUxUSUNPREVDX1gyNTUxOV9QUklWX0hFQURFUiwgcHJpdmF0ZUtleSksXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwIEtleSBQYWlyIGZyb20gYW4gZXhpc3Rpbmcga2V5XG4gICAqIChjb25zdHJ1Y3RvciBtZXRob2QpLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gS2V5cGFpciBvcHRpb25zIChzZWUgY29udHJvbGxlciBkb2NzdHJpbmcpLlxuICAgKlxuICAgKiBAcmV0dXJucyB7WDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMH0gQW4gWDI1NTE5IEtleSBQYWlyLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb20ob3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgaXMgYW4gWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAxOVxuICAgIGlmKG9wdGlvbnMucHVibGljS2V5QmFzZTU4KSB7XG4gICAgICAvLyBDb252ZXJ0IGl0IHRvIGEgMjAyMCBrZXkgcGFpciBpbnN0YW5jZVxuICAgICAgcmV0dXJuIHRoaXMuZnJvbVgyNTUxOUtleUFncmVlbWVudEtleTIwMTkob3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMChvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIFgyNTUxOUtleUFncmVlbWVudEtleTIwMjAgS2V5IFBhaXIgZnJvbSBhbiBleGlzdGluZyAyMDE5IGtleVxuICAgKiAoYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgbWV0aG9kKS5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucHVibGljS2V5QmFzZTU4IC0gQmFzZTU4YnRjIGVuY29kZWQgcHVibGljIGtleS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnByaXZhdGVLZXlCYXNlNThdIC0gQmFzZTU4YnRjIGVuY29kZWQgcHJpdmF0ZSBrZXkuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5rZXlQYWlyT3B0aW9uc10gLSBPdGhlciBvcHRpb25zLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwPn0gMjAyMCBDcnlwdG8gc3VpdGUga2V5IHBhaXIuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbVgyNTUxOUtleUFncmVlbWVudEtleTIwMTkoe1xuICAgIHB1YmxpY0tleUJhc2U1OCwgcHJpdmF0ZUtleUJhc2U1OCwgLi4ua2V5UGFpck9wdGlvbnNcbiAgfSA9IHt9KSB7XG4gICAgbGV0IHB1YmxpY0tleU11bHRpYmFzZTtcbiAgICBsZXQgcHJpdmF0ZUtleU11bHRpYmFzZTtcblxuICAgIGlmKHB1YmxpY0tleUJhc2U1OCkge1xuICAgICAgLy8gcHJlZml4IHdpdGggYHpgIHRvIGluZGljYXRlIG11bHRpLWJhc2UgYmFzZTU4YnRjIGVuY29kaW5nXG4gICAgICBwdWJsaWNLZXlNdWx0aWJhc2UgPSBfbXVsdGliYXNlRW5jb2RlKFxuICAgICAgICBNVUxUSUNPREVDX1gyNTUxOV9QVUJfSEVBREVSLCBiYXNlNThidGMuZGVjb2RlKHB1YmxpY0tleUJhc2U1OCkpO1xuICAgIH1cbiAgICBpZihwcml2YXRlS2V5QmFzZTU4KSB7XG4gICAgICAvLyBwcmVmaXggd2l0aCBgemAgdG8gaW5kaWNhdGUgbXVsdGktYmFzZSBiYXNlNThidGMgZW5jb2RpbmdcbiAgICAgIHByaXZhdGVLZXlNdWx0aWJhc2UgPSBfbXVsdGliYXNlRW5jb2RlKFxuICAgICAgICBNVUxUSUNPREVDX1gyNTUxOV9QUklWX0hFQURFUiwgYmFzZTU4YnRjLmRlY29kZShwcml2YXRlS2V5QmFzZTU4KSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMCh7XG4gICAgICBwdWJsaWNLZXlNdWx0aWJhc2UsIHByaXZhdGVLZXlNdWx0aWJhc2UsIC4uLmtleVBhaXJPcHRpb25zXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSBrZXlwYWlyIGluc3RhbmNlIG9mIHR5cGUgRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAgdG8gYW5cbiAgICogaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGlnaXRhbGJhemFhci9lZDI1NTE5LXZlcmlmaWNhdGlvbi1rZXktMjAyMFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKlxuICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBFZDI1NTE5VmVyaWZpY2F0aW9uS2V5MjAyMFxuICAgKiBAcGFyYW0ge0VkMjU1MTlWZXJpZmljYXRpb25LZXkyMDIwfSBvcHRpb25zLmtleVBhaXIgLSBTb3VyY2Uga2V5IHBhaXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwfSBBIGRlcml2ZWQvY29udmVydGVkIGtleSBhZ3JlZW1lbnRcbiAgICogICBrZXkgcGFpci5cbiAgICovXG4gIHN0YXRpYyBmcm9tRWQyNTUxOVZlcmlmaWNhdGlvbktleTIwMjAoe2tleVBhaXJ9ID0ge30pIHtcbiAgICBpZigha2V5UGFpci5wdWJsaWNLZXlNdWx0aWJhc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU291cmNlIHB1YmxpYyBrZXkgaXMgcmVxdWlyZWQgdG8gY29udmVydC4nKTtcbiAgICB9XG5cbiAgICBpZigha2V5UGFpci5wdWJsaWNLZXlNdWx0aWJhc2Uuc3RhcnRzV2l0aChNVUxUSUJBU0VfQkFTRTU4QlRDX0hFQURFUikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdFeHBlY3RpbmcgXCJwdWJsaWNLZXlNdWx0aWJhc2VcIiB2YWx1ZSB0byBiZSBtdWx0aWJhc2UgYmFzZTU4YnRjICcgK1xuICAgICAgICAnZW5jb2RlZCAobXVzdCBzdGFydCB3aXRoIFwielwiKS4nXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHhLZXkgPSBuZXcgWDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMCh7XG4gICAgICBjb250cm9sbGVyOiBrZXlQYWlyLmNvbnRyb2xsZXIsXG4gICAgICBwdWJsaWNLZXlNdWx0aWJhc2U6IFgyNTUxOUtleUFncmVlbWVudEtleTIwMjBcbiAgICAgICAgLmNvbnZlcnRGcm9tRWRQdWJsaWNLZXkoa2V5UGFpcilcbiAgICB9KTtcblxuICAgIGlmKGtleVBhaXIucHJpdmF0ZUtleU11bHRpYmFzZSkge1xuICAgICAgaWYoIWtleVBhaXIucHJpdmF0ZUtleU11bHRpYmFzZS5zdGFydHNXaXRoKE1VTFRJQkFTRV9CQVNFNThCVENfSEVBREVSKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICdFeHBlY3RpbmcgXCJwcml2YXRlS2V5TXVsdGliYXNlXCIgdmFsdWUgdG8gYmUgbXVsdGliYXNlIGJhc2U1OGJ0YyAnICtcbiAgICAgICAgICAnZW5jb2RlZCAobXVzdCBzdGFydCB3aXRoIFwielwiKS4nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHhLZXkucHJpdmF0ZUtleU11bHRpYmFzZSA9IFgyNTUxOUtleUFncmVlbWVudEtleTIwMjBcbiAgICAgICAgLmNvbnZlcnRGcm9tRWRQcml2YXRlS2V5KGtleVBhaXIpO1xuICAgIH1cblxuICAgIHJldHVybiB4S2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnB1YmxpY0tleU11bHRpYmFzZSAtIE11bHRpYmFzZSBlbmNvZGVkIEVkMjU1MTlcbiAgICogICBwdWJsaWMga2V5LlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBNdWx0aWJhc2UgZW5jb2RlZCBjb252ZXJ0ZWQgWDI1NTE5IFB1YmxpYyBrZXkuXG4gICAqL1xuICBzdGF0aWMgY29udmVydEZyb21FZFB1YmxpY0tleSh7cHVibGljS2V5TXVsdGliYXNlfSA9IHt9KSB7XG4gICAgaWYoIXB1YmxpY0tleU11bHRpYmFzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb3VyY2UgcHVibGljIGtleSBpcyByZXF1aXJlZCB0byBjb252ZXJ0LicpO1xuICAgIH1cblxuICAgIGNvbnN0IGVkUHVia2V5Qnl0ZXMgPVxuICAgICAgX211bHRpYmFzZURlY29kZShNVUxUSUNPREVDX0VEMjU1MTlfUFVCX0hFQURFUiwgcHVibGljS2V5TXVsdGliYXNlKTtcblxuICAgIC8vIENvbnZlcnRzIGEgMzItYnl0ZSBFZDI1NTE5IHB1YmxpYyBrZXkgaW50byBhIDMyLWJ5dGUgQ3VydmUyNTUxOSBrZXlcbiAgICAvLyBSZXR1cm5zIG51bGwgaWYgdGhlIGdpdmVuIHB1YmxpYyBrZXkgaW4gbm90IGEgdmFsaWQgRWQyNTUxOSBwdWJsaWMga2V5LlxuICAgIGNvbnN0IGRoUHVia2V5Qnl0ZXMgPSBQb2ludC5mcm9tSGV4KGVkUHVia2V5Qnl0ZXMpLnRvWDI1NTE5KCk7XG4gICAgaWYoIWRoUHVia2V5Qnl0ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0Vycm9yIGNvbnZlcnRpbmcgdG8gWDI1NTE5OyBJbnZhbGlkIEVkMjU1MTkgcHVibGljIGtleS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIF9tdWx0aWJhc2VFbmNvZGUoTVVMVElDT0RFQ19YMjU1MTlfUFVCX0hFQURFUiwgZGhQdWJrZXlCeXRlcyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIE9wdGlvbnMgaGFzaG1hcC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMucHJpdmF0ZUtleU11bHRpYmFzZSAtIE11bHRpYmFzZSBlbmNvZGVkIEVkMjU1MTlcbiAgICogICBwcml2YXRlIGtleS5cbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gTXVsdGliYXNlIGVuY29kZWQgY29udmVydGVkIFgyNTUxOSBQcml2YXRlIGtleS5cbiAgICovXG4gIHN0YXRpYyBjb252ZXJ0RnJvbUVkUHJpdmF0ZUtleSh7cHJpdmF0ZUtleU11bHRpYmFzZX0gPSB7fSkge1xuICAgIGlmKCFwcml2YXRlS2V5TXVsdGliYXNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvdXJjZSBwcml2YXRlIGtleSBpcyByZXF1aXJlZCB0byBjb252ZXJ0LicpO1xuICAgIH1cblxuICAgIGNvbnN0IGVkUHJpdmtleUJ5dGVzID1cbiAgICAgIF9tdWx0aWJhc2VEZWNvZGUoTVVMVElDT0RFQ19FRDI1NTE5X1BSSVZfSEVBREVSLCBwcml2YXRlS2V5TXVsdGliYXNlKTtcbiAgICAvLyBDb252ZXJ0cyBhIDY0LWJ5dGUgRWQyNTUxOSBzZWNyZXQga2V5IChvciBqdXN0IHRoZSBmaXJzdCAzMi1ieXRlIHBhcnQgb2ZcbiAgICAvLyBpdCwgd2hpY2ggaXMgdGhlIHNlY3JldCB2YWx1ZSkgaW50byBhIDMyLWJ5dGUgQ3VydmUyNTUxOSBzZWNyZXQga2V5XG4gICAgY29uc3QgZGhQcml2a2V5Qnl0ZXMgPSBlZDI1NTE5U2VjcmV0S2V5VG9YMjU1MTkoZWRQcml2a2V5Qnl0ZXMpO1xuICAgIC8vIG5vdGU6IGEgZnV0dXJlIHZlcnNpb24gc2hvdWxkIG1ha2UgdGhpcyBtZXRob2QgYXN5bmMgdG8gYWxsb3cgdXNlIG9mXG4gICAgLy8gbm9ibGUgdG8gY29udmVydCBwcml2YXRlIGtleXMgLS0gYnV0IHRoZSB0d2VldG5hY2wgdmVyc2lvbiB1c2VkXG4gICAgLy8gaW50ZXJuYWxseSBpcyBtdWNoIGZhc3RlciAofiB4MTAwKTpcbiAgICAvLyBjb25zdCB7aGVhZDogZGhQcml2a2V5Qnl0ZXN9ID0gYXdhaXQgdXRpbHMuZ2V0RXh0ZW5kZWRQdWJsaWNLZXkoXG4gICAgLy8gICBlZFByaXZrZXlCeXRlcy5zbGljZSgwLCAzMikpO1xuICAgIGlmKCFkaFByaXZrZXlCeXRlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnRXJyb3IgY29udmVydGluZyB0byBYMjU1MTk7IEludmFsaWQgRWQyNTUxOSBwcml2YXRlIGtleS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIF9tdWx0aWJhc2VFbmNvZGUoTVVMVElDT0RFQ19YMjU1MTlfUFJJVl9IRUFERVIsIGRoUHJpdmtleUJ5dGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvcnRzIHRoZSBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBLZXlQYWlyLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnB1YmxpY0tleV0gLSBFeHBvcnQgcHVibGljIGtleSBtYXRlcmlhbD9cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5wcml2YXRlS2V5XSAtIEV4cG9ydCBwcml2YXRlIGtleSBtYXRlcmlhbD9cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pbmNsdWRlQ29udGV4dF0gLSBJbmNsdWRlIEpTT04tTEQgY29udGV4dD9cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gQSBwbGFpbiBqcyBvYmplY3QgdGhhdCdzIHJlYWR5IGZvciBzZXJpYWxpemF0aW9uXG4gICAqICAgKHRvIEpTT04sIGV0YyksIGZvciB1c2UgaW4gRElEcyBldGMuXG4gICAqL1xuICBleHBvcnQoe3B1YmxpY0tleSA9IGZhbHNlLCBwcml2YXRlS2V5ID0gZmFsc2UsIGluY2x1ZGVDb250ZXh0ID0gZmFsc2V9ID0ge30pIHtcbiAgICBpZighKHB1YmxpY0tleSB8fCBwcml2YXRlS2V5KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0V4cG9ydCByZXF1aXJlcyBzcGVjaWZ5aW5nIGVpdGhlciBcInB1YmxpY0tleVwiIG9yIFwicHJpdmF0ZUtleVwiLicpO1xuICAgIH1cbiAgICBjb25zdCBleHBvcnRlZEtleSA9IHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdHlwZTogdGhpcy50eXBlXG4gICAgfTtcbiAgICBpZihpbmNsdWRlQ29udGV4dCkge1xuICAgICAgZXhwb3J0ZWRLZXlbJ0Bjb250ZXh0J10gPSBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwLlNVSVRFX0NPTlRFWFQ7XG4gICAgfVxuICAgIGlmKHRoaXMuY29udHJvbGxlcikge1xuICAgICAgZXhwb3J0ZWRLZXkuY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlcjtcbiAgICB9XG4gICAgaWYocHVibGljS2V5KSB7XG4gICAgICBleHBvcnRlZEtleS5wdWJsaWNLZXlNdWx0aWJhc2UgPSB0aGlzLnB1YmxpY0tleU11bHRpYmFzZTtcbiAgICB9XG4gICAgaWYocHJpdmF0ZUtleSkge1xuICAgICAgZXhwb3J0ZWRLZXkucHJpdmF0ZUtleU11bHRpYmFzZSA9IHRoaXMucHJpdmF0ZUtleU11bHRpYmFzZTtcbiAgICB9XG4gICAgaWYodGhpcy5yZXZva2VkKSB7XG4gICAgICBleHBvcnRlZEtleS5yZXZva2VkID0gdGhpcy5yZXZva2VkO1xuICAgIH1cbiAgICByZXR1cm4gZXhwb3J0ZWRLZXk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgYmFzZTU4YnRjIG11bHRpYmFzZSBlbmNvZGVkIHZhbHVlIG9mIGEgbXVsdGljb2RlY1xuICAgKiBYMjU1MTkgcHVibGljIGtleSBmaW5nZXJwcmludCAoZm9yIHVzZSB3aXRoIGNyeXB0b255bXMsIGZvciBleGFtcGxlKS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbXVsdGlmb3JtYXRzL211bHRpY29kZWNcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbXVsdGlmb3JtYXRzL211bHRpYmFzZVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9ucyBoYXNobWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5wdWJsaWNLZXlNdWx0aWJhc2UgLSBNdWx0aWJhc2UgZW5jb2RlZCBwdWJsaWMga2V5LlxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZmluZ2VycHJpbnQuXG4gICAqL1xuICBzdGF0aWMgZmluZ2VycHJpbnRGcm9tUHVibGljS2V5KHtwdWJsaWNLZXlNdWx0aWJhc2V9ID0ge30pIHtcbiAgICBpZighcHVibGljS2V5TXVsdGliYXNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvdXJjZSBwdWJsaWMga2V5IGlzIHJlcXVpcmVkLicpO1xuICAgIH1cblxuICAgIHJldHVybiBwdWJsaWNLZXlNdWx0aWJhc2U7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwIGZyb20gYSBrZXkgZmluZ2VycHJpbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmZpbmdlcnByaW50IC0gUHVibGljIGtleSBmaW5nZXJwcmludC5cbiAgICpcbiAgICogQHJldHVybnMge1gyNTUxOUtleUFncmVlbWVudEtleTIwMjB9IEtleSBwYWlyIGluc3RhbmNlIChwdWJsaWMga2V5IG1hdGVyaWFsXG4gICAqICAgb25seSkgY3JlYXRlZCBmcm9tIHRoZSBmaW5nZXJwcmludC5cbiAgICovXG4gIHN0YXRpYyBmcm9tRmluZ2VycHJpbnQoe2ZpbmdlcnByaW50fSA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBYMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwKHtcbiAgICAgIHB1YmxpY0tleU11bHRpYmFzZTogZmluZ2VycHJpbnRcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXJpdmVzIGEgc2hhcmVkIHNlY3JldCB2aWEgYSBnaXZlbiBwdWJsaWMga2V5LCB0eXBpY2FsbHkgZm9yIHVzZVxuICAgKiBhcyBvbmUgcGFyYW1ldGVyIGZvciBjb21wdXRpbmcgYSBzaGFyZWQga2V5LiBJdCBzaG91bGQgbm90IGJlIHVzZWQgYXNcbiAgICogYSBzaGFyZWQga2V5IGl0c2VsZiwgYnV0IHJhdGhlciBhcyBhbiBpbnB1dCBpbnRvIGEga2V5IGRlcml2YXRpb24gZnVuY3Rpb25cbiAgICogKEtERikgdG8gcHJvZHVjZSBhIHNoYXJlZCBrZXkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7TERLZXlQYWlyfSBvcHRpb25zLnB1YmxpY0tleSAtIFJlbW90ZSBrZXkgcGFpci5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8VWludDhBcnJheT59IERlcml2ZWQgc2VjcmV0LlxuICAgKi9cbiAgYXN5bmMgZGVyaXZlU2VjcmV0KHtwdWJsaWNLZXl9KSB7XG4gICAgY29uc3QgcmVtb3RlUHVibGljS2V5ID0gX211bHRpYmFzZURlY29kZShcbiAgICAgIE1VTFRJQ09ERUNfWDI1NTE5X1BVQl9IRUFERVIsIHB1YmxpY0tleS5wdWJsaWNLZXlNdWx0aWJhc2UpO1xuICAgIGNvbnN0IHByaXZhdGVLZXkgPSBfbXVsdGliYXNlRGVjb2RlKFxuICAgICAgTVVMVElDT0RFQ19YMjU1MTlfUFJJVl9IRUFERVIsIHRoaXMucHJpdmF0ZUtleU11bHRpYmFzZSk7XG5cbiAgICByZXR1cm4gZGVyaXZlU2VjcmV0KHtwcml2YXRlS2V5LCByZW1vdGVQdWJsaWNLZXl9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSBtdWx0aWZvcm1hdHMgZW5jb2RlZFxuICAgKiBYMjU1MTkgcHVibGljIGtleSBmaW5nZXJwcmludCAoZm9yIHVzZSB3aXRoIGNyeXB0b255bXMsIGZvciBleGFtcGxlKS5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbXVsdGlmb3JtYXRzL211bHRpY29kZWNcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGZpbmdlcnByaW50LlxuICAgKi9cbiAgZmluZ2VycHJpbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHVibGljS2V5TXVsdGliYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3RzIHdoZXRoZXIgdGhlIGZpbmdlcnByaW50IHdhcyBnZW5lcmF0ZWQgZnJvbSBhIGdpdmVuIGtleSBwYWlyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB4S2V5UGFpci52ZXJpZnlGaW5nZXJwcmludCgnLi4uJyk7XG4gICAqIC8vIHt2YWxpZDogdHJ1ZX07XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBPcHRpb25zIGhhc2htYXAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmZpbmdlcnByaW50IC0gQW4geDI1NTE5IGtleSBmaW5nZXJwcmludCAodHlwaWNhbGx5XG4gICAqICAgZnJvbSBhIGtleSBpZCkuXG4gICAqXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IEFuIG9iamVjdCBpbmRpY2F0aW5nIHZhbGlkIGlzIHRydWUgb3IgZmFsc2UuXG4gICAqL1xuICB2ZXJpZnlGaW5nZXJwcmludCh7ZmluZ2VycHJpbnR9ID0ge30pIHtcbiAgICAvLyBmaW5nZXJwcmludCBzaG91bGQgaGF2ZSBgemAgcHJlZml4IGluZGljYXRpbmdcbiAgICAvLyB0aGF0IGl0J3MgYmFzZTU4YnRjIG11bHRpYmFzZSBlbmNvZGVkXG4gICAgaWYoIV9pc1ZhbGlkS2V5SGVhZGVyKGZpbmdlcnByaW50LCBNVUxUSUNPREVDX1gyNTUxOV9QVUJfSEVBREVSKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgXCJmaW5nZXJwcmludFwiIGhhcyBpbnZhbGlkIGhlYWRlciBieXRlczogXCIke2ZpbmdlcnByaW50fVwiLmApO1xuICAgIH1cblxuICAgIHJldHVybiB7dmFsaWQ6IHRydWV9O1xuICB9XG59XG5cbi8vIFVzZWQgYnkgQ3J5cHRvTEQgaGFybmVzcyBmb3IgZGlzcGF0Y2hpbmcuXG5YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwLnN1aXRlID0gU1VJVEVfSUQ7XG4vLyBVc2VkIGJ5IENyeXB0b0xEIGhhcm5lc3MncyBmcm9tS2V5SWQoKSBtZXRob2QuXG5YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwLlNVSVRFX0NPTlRFWFQgPVxuICAnaHR0cHM6Ly93M2lkLm9yZy9zZWN1cml0eS9zdWl0ZXMveDI1NTE5LTIwMjAvdjEnO1xuXG4vKipcbiAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgdmFsaWQgbXVsdGliYXNlIGVuY29kZWQga2V5LlxuICpcbiAqIEBwYXJhbSB7VWludDhBcnJheX0gbXVsdGliYXNlS2V5IC0gVGhlIG11bHRpYmFzZS1lbmNvZGVkIGtleSB2YWx1ZS5cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gZXhwZWN0ZWRIZWFkZXIgLSBUaGUgZXhwZWN0ZWQgaGVhZGVyIGZvciB0aGUga2V5IHZhbHVlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgaGVhZGVyIGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIF9pc1ZhbGlkS2V5SGVhZGVyKG11bHRpYmFzZUtleSwgZXhwZWN0ZWRIZWFkZXIpIHtcbiAgaWYoISh0eXBlb2YgbXVsdGliYXNlS2V5ID09PSAnc3RyaW5nJyAmJlxuICAgIG11bHRpYmFzZUtleVswXSA9PT0gTVVMVElCQVNFX0JBU0U1OEJUQ19IRUFERVIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qga2V5Qnl0ZXMgPSBiYXNlNThidGMuZGVjb2RlKG11bHRpYmFzZUtleS5zbGljZSgxKSk7XG4gIHJldHVybiBleHBlY3RlZEhlYWRlci5ldmVyeSgodmFsLCBpKSA9PiBrZXlCeXRlc1tpXSA9PT0gdmFsKTtcbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgZ2l2ZW4gVWludDhBcnJheSB0byBtdWx0aWJhc2UtZW5jb2RlZCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtVaW50OEFycmF5fSBoZWFkZXIgLSBNdWx0aWNvZGVjIGhlYWRlciB0byBwcmVwZW5kIHRvIHRoZSBieXRlcy5cbiAqIEBwYXJhbSB7VWludDhBcnJheX0gYnl0ZXMgLSBCeXRlcyB0byBlbmNvZGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBNdWx0aWJhc2UtZW5jb2RlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIF9tdWx0aWJhc2VFbmNvZGUoaGVhZGVyLCBieXRlcykge1xuICBjb25zdCBtY0J5dGVzID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLmxlbmd0aCArIGJ5dGVzLmxlbmd0aCk7XG5cbiAgbWNCeXRlcy5zZXQoaGVhZGVyKTtcbiAgbWNCeXRlcy5zZXQoYnl0ZXMsIGhlYWRlci5sZW5ndGgpO1xuXG4gIHJldHVybiBNVUxUSUJBU0VfQkFTRTU4QlRDX0hFQURFUiArIGJhc2U1OGJ0Yy5lbmNvZGUobWNCeXRlcyk7XG59XG5cbi8qKlxuICogRGVjb2RlcyBhIGdpdmVuIHN0cmluZyBhcyBhIG11bHRpYmFzZS1lbmNvZGVkIG11bHRpY29kZWMgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtVaW50OEFycmF5fSBoZWFkZXIgLSBFeHBlY3RlZCBoZWFkZXIgYnl0ZXMgZm9yIHRoZSBtdWx0aWNvZGVjIHZhbHVlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBNdWx0aWJhc2UgZW5jb2RlZCBzdHJpbmcgdG8gZGVjb2RlLlxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IERlY29kZWQgYnl0ZXMuXG4gKi9cbmZ1bmN0aW9uIF9tdWx0aWJhc2VEZWNvZGUoaGVhZGVyLCB0ZXh0KSB7XG4gIGNvbnN0IG1jVmFsdWUgPSBiYXNlNThidGMuZGVjb2RlKHRleHQuc3Vic3RyKDEpKTtcblxuICBpZighaGVhZGVyLmV2ZXJ5KCh2YWwsIGkpID0+IG1jVmFsdWVbaV0gPT09IHZhbCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ011bHRpYmFzZSB2YWx1ZSBkb2VzIG5vdCBoYXZlIGV4cGVjdGVkIGhlYWRlci4nKTtcbiAgfVxuXG4gIHJldHVybiBtY1ZhbHVlLnNsaWNlKGhlYWRlci5sZW5ndGgpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/X25519KeyAgreementKey2020.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto-nacl.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto-nacl.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deriveSecret: () => (/* binding */ deriveSecret),\n/* harmony export */   ed25519SecretKeyToX25519: () => (/* binding */ ed25519SecretKeyToX25519),\n/* harmony export */   generateKeyPair: () => (/* binding */ generateKeyPair)\n/* harmony export */ });\n/* harmony import */ var tweetnacl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tweetnacl */ \"(ssr)/./node_modules/tweetnacl/nacl-fast.js\");\n/*!\n * Copyright (c) 2021-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n/**\n * Note: The following two functions are async to match the signature of\n * their native Node.js counterparts (see './crypto.js').\n */\n\nasync function deriveSecret({privateKey, remotePublicKey}) {\n  return tweetnacl__WEBPACK_IMPORTED_MODULE_0__.scalarMult(privateKey, remotePublicKey);\n}\n\nasync function generateKeyPair() {\n  // Each is a Uint8Array with 32-byte key\n  const {publicKey, secretKey: privateKey} = tweetnacl__WEBPACK_IMPORTED_MODULE_0__.box.keyPair();\n  return {publicKey, privateKey};\n}\n\nfunction ed25519SecretKeyToX25519(secretKey) {\n  const hash = new Uint8Array(64);\n  // X25519 secret key is the first 32 bytes of the hash with clamped values\n  tweetnacl__WEBPACK_IMPORTED_MODULE_0__.lowlevel.crypto_hash(hash, secretKey, 32);\n  hash[0] &= 248;\n  hash[31] &= 127;\n  hash[31] |= 64;\n  const x25519SecretKey = hash.slice(0, 32);\n  // zero-fill remainder of hash before returning\n  hash.fill(0, 32);\n  return x25519SecretKey;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAvbGliL2NyeXB0by1uYWNsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBOztBQUVPLDZCQUE2Qiw0QkFBNEI7QUFDaEUsU0FBUyxpREFBZTtBQUN4Qjs7QUFFTztBQUNQO0FBQ0EsU0FBUyxrQ0FBa0MsRUFBRSwwQ0FBUTtBQUNyRCxVQUFVO0FBQ1Y7O0FBRU87QUFDUDtBQUNBO0FBQ0EsRUFBRSwrQ0FBYTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAvbGliL2NyeXB0by1uYWNsLmpzP2ZkZTMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyMiBEaWdpdGFsIEJhemFhciwgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5pbXBvcnQgbmFjbCBmcm9tICd0d2VldG5hY2wnO1xuXG4vKipcbiAqIE5vdGU6IFRoZSBmb2xsb3dpbmcgdHdvIGZ1bmN0aW9ucyBhcmUgYXN5bmMgdG8gbWF0Y2ggdGhlIHNpZ25hdHVyZSBvZlxuICogdGhlaXIgbmF0aXZlIE5vZGUuanMgY291bnRlcnBhcnRzIChzZWUgJy4vY3J5cHRvLmpzJykuXG4gKi9cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcml2ZVNlY3JldCh7cHJpdmF0ZUtleSwgcmVtb3RlUHVibGljS2V5fSkge1xuICByZXR1cm4gbmFjbC5zY2FsYXJNdWx0KHByaXZhdGVLZXksIHJlbW90ZVB1YmxpY0tleSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUtleVBhaXIoKSB7XG4gIC8vIEVhY2ggaXMgYSBVaW50OEFycmF5IHdpdGggMzItYnl0ZSBrZXlcbiAgY29uc3Qge3B1YmxpY0tleSwgc2VjcmV0S2V5OiBwcml2YXRlS2V5fSA9IG5hY2wuYm94LmtleVBhaXIoKTtcbiAgcmV0dXJuIHtwdWJsaWNLZXksIHByaXZhdGVLZXl9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZWQyNTUxOVNlY3JldEtleVRvWDI1NTE5KHNlY3JldEtleSkge1xuICBjb25zdCBoYXNoID0gbmV3IFVpbnQ4QXJyYXkoNjQpO1xuICAvLyBYMjU1MTkgc2VjcmV0IGtleSBpcyB0aGUgZmlyc3QgMzIgYnl0ZXMgb2YgdGhlIGhhc2ggd2l0aCBjbGFtcGVkIHZhbHVlc1xuICBuYWNsLmxvd2xldmVsLmNyeXB0b19oYXNoKGhhc2gsIHNlY3JldEtleSwgMzIpO1xuICBoYXNoWzBdICY9IDI0ODtcbiAgaGFzaFszMV0gJj0gMTI3O1xuICBoYXNoWzMxXSB8PSA2NDtcbiAgY29uc3QgeDI1NTE5U2VjcmV0S2V5ID0gaGFzaC5zbGljZSgwLCAzMik7XG4gIC8vIHplcm8tZmlsbCByZW1haW5kZXIgb2YgaGFzaCBiZWZvcmUgcmV0dXJuaW5nXG4gIGhhc2guZmlsbCgwLCAzMik7XG4gIHJldHVybiB4MjU1MTlTZWNyZXRLZXk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto-nacl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deriveSecret: () => (/* binding */ deriveSecret),\n/* harmony export */   ed25519SecretKeyToX25519: () => (/* binding */ ed25519SecretKeyToX25519),\n/* harmony export */   generateKeyPair: () => (/* binding */ generateKeyPair)\n/* harmony export */ });\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n/* harmony import */ var _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto-nacl.js */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto-nacl.js\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:util */ \"node:util\");\n/*!\n * Copyright (c) 2021-2022 Digital Bazaar, Inc. All rights reserved.\n */\n\n\n\n\nconst PUBLIC_KEY_DER_PREFIX = new Uint8Array([\n  48, 42, 48, 5, 6, 3, 43, 101, 110, 3, 33, 0\n]);\n\nconst PRIVATE_KEY_DER_PREFIX = new Uint8Array([\n  48, 46, 2, 1, 0, 48, 5, 6, 3, 43, 101, 110, 4, 34, 4, 32\n]);\n\nasync function deriveSecretNative({privateKey, remotePublicKey}) {\n  const nodePrivateKey = node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPrivateKey({\n    key: Buffer.concat([PRIVATE_KEY_DER_PREFIX, privateKey]),\n    format: 'der',\n    type: 'pkcs8'\n  });\n  const nodePublicKey = node_crypto__WEBPACK_IMPORTED_MODULE_0__.createPublicKey({\n    key: Buffer.concat([PUBLIC_KEY_DER_PREFIX, remotePublicKey]),\n    format: 'der',\n    type: 'spki'\n  });\n  return node_crypto__WEBPACK_IMPORTED_MODULE_0__.diffieHellman({\n    privateKey: nodePrivateKey,\n    publicKey: nodePublicKey,\n  });\n}\n\nasync function generateKeyPairNative() {\n  const generateKeyPairAsync = (0,node_util__WEBPACK_IMPORTED_MODULE_2__.promisify)(node_crypto__WEBPACK_IMPORTED_MODULE_0__.generateKeyPair);\n  const publicKeyEncoding = {format: 'der', type: 'spki'};\n  const privateKeyEncoding = {format: 'der', type: 'pkcs8'};\n  const {publicKey: publicDerBytes, privateKey: privateDerBytes} =\n    await generateKeyPairAsync('x25519', {\n      publicKeyEncoding, privateKeyEncoding\n    });\n  const publicKey = publicDerBytes.slice(12, 12 + 32);\n  const privateKey = privateDerBytes.slice(16, 16 + 32);\n  return {publicKey, privateKey};\n}\n\nlet deriveSecret;\nlet generateKeyPair;\nif(node_crypto__WEBPACK_IMPORTED_MODULE_0__.diffieHellman) {\n  deriveSecret = deriveSecretNative;\n  generateKeyPair = generateKeyPairNative;\n} else {\n  deriveSecret = _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_1__.deriveSecret;\n  generateKeyPair = _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_1__.generateKeyPair;\n}\n\n\n\nconst {ed25519SecretKeyToX25519} = _crypto_nacl_js__WEBPACK_IMPORTED_MODULE_1__;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAvbGliL2NyeXB0by5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDc0M7QUFDUztBQUNYOztBQUVwQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1DQUFtQyw0QkFBNEI7QUFDL0QseUJBQXlCLHlEQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0JBQXdCLHdEQUFzQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUyxzREFBb0I7QUFDN0I7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBLCtCQUErQixvREFBUyxDQUFDLHdEQUFzQjtBQUMvRCw2QkFBNkI7QUFDN0IsOEJBQThCO0FBQzlCLFNBQVMsd0RBQXdEO0FBQ2pFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0EsR0FBRyxzREFBb0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRixpQkFBaUIseURBQXVCO0FBQ3hDLG9CQUFvQiw0REFBMEI7QUFDOUM7O0FBRXVDOztBQUV2QyxPQUFPLDBCQUEwQixFQUFFLDRDQUFVO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAvbGliL2NyeXB0by5qcz9lZjA0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIxLTIwMjIgRGlnaXRhbCBCYXphYXIsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ25vZGU6Y3J5cHRvJztcbmltcG9ydCAqIGFzIGNyeXB0b05hY2wgZnJvbSAnLi9jcnlwdG8tbmFjbC5qcyc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnbm9kZTp1dGlsJztcblxuY29uc3QgUFVCTElDX0tFWV9ERVJfUFJFRklYID0gbmV3IFVpbnQ4QXJyYXkoW1xuICA0OCwgNDIsIDQ4LCA1LCA2LCAzLCA0MywgMTAxLCAxMTAsIDMsIDMzLCAwXG5dKTtcblxuY29uc3QgUFJJVkFURV9LRVlfREVSX1BSRUZJWCA9IG5ldyBVaW50OEFycmF5KFtcbiAgNDgsIDQ2LCAyLCAxLCAwLCA0OCwgNSwgNiwgMywgNDMsIDEwMSwgMTEwLCA0LCAzNCwgNCwgMzJcbl0pO1xuXG5hc3luYyBmdW5jdGlvbiBkZXJpdmVTZWNyZXROYXRpdmUoe3ByaXZhdGVLZXksIHJlbW90ZVB1YmxpY0tleX0pIHtcbiAgY29uc3Qgbm9kZVByaXZhdGVLZXkgPSBjcnlwdG8uY3JlYXRlUHJpdmF0ZUtleSh7XG4gICAga2V5OiBCdWZmZXIuY29uY2F0KFtQUklWQVRFX0tFWV9ERVJfUFJFRklYLCBwcml2YXRlS2V5XSksXG4gICAgZm9ybWF0OiAnZGVyJyxcbiAgICB0eXBlOiAncGtjczgnXG4gIH0pO1xuICBjb25zdCBub2RlUHVibGljS2V5ID0gY3J5cHRvLmNyZWF0ZVB1YmxpY0tleSh7XG4gICAga2V5OiBCdWZmZXIuY29uY2F0KFtQVUJMSUNfS0VZX0RFUl9QUkVGSVgsIHJlbW90ZVB1YmxpY0tleV0pLFxuICAgIGZvcm1hdDogJ2RlcicsXG4gICAgdHlwZTogJ3Nwa2knXG4gIH0pO1xuICByZXR1cm4gY3J5cHRvLmRpZmZpZUhlbGxtYW4oe1xuICAgIHByaXZhdGVLZXk6IG5vZGVQcml2YXRlS2V5LFxuICAgIHB1YmxpY0tleTogbm9kZVB1YmxpY0tleSxcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5UGFpck5hdGl2ZSgpIHtcbiAgY29uc3QgZ2VuZXJhdGVLZXlQYWlyQXN5bmMgPSBwcm9taXNpZnkoY3J5cHRvLmdlbmVyYXRlS2V5UGFpcik7XG4gIGNvbnN0IHB1YmxpY0tleUVuY29kaW5nID0ge2Zvcm1hdDogJ2RlcicsIHR5cGU6ICdzcGtpJ307XG4gIGNvbnN0IHByaXZhdGVLZXlFbmNvZGluZyA9IHtmb3JtYXQ6ICdkZXInLCB0eXBlOiAncGtjczgnfTtcbiAgY29uc3Qge3B1YmxpY0tleTogcHVibGljRGVyQnl0ZXMsIHByaXZhdGVLZXk6IHByaXZhdGVEZXJCeXRlc30gPVxuICAgIGF3YWl0IGdlbmVyYXRlS2V5UGFpckFzeW5jKCd4MjU1MTknLCB7XG4gICAgICBwdWJsaWNLZXlFbmNvZGluZywgcHJpdmF0ZUtleUVuY29kaW5nXG4gICAgfSk7XG4gIGNvbnN0IHB1YmxpY0tleSA9IHB1YmxpY0RlckJ5dGVzLnNsaWNlKDEyLCAxMiArIDMyKTtcbiAgY29uc3QgcHJpdmF0ZUtleSA9IHByaXZhdGVEZXJCeXRlcy5zbGljZSgxNiwgMTYgKyAzMik7XG4gIHJldHVybiB7cHVibGljS2V5LCBwcml2YXRlS2V5fTtcbn1cblxubGV0IGRlcml2ZVNlY3JldDtcbmxldCBnZW5lcmF0ZUtleVBhaXI7XG5pZihjcnlwdG8uZGlmZmllSGVsbG1hbikge1xuICBkZXJpdmVTZWNyZXQgPSBkZXJpdmVTZWNyZXROYXRpdmU7XG4gIGdlbmVyYXRlS2V5UGFpciA9IGdlbmVyYXRlS2V5UGFpck5hdGl2ZTtcbn0gZWxzZSB7XG4gIGRlcml2ZVNlY3JldCA9IGNyeXB0b05hY2wuZGVyaXZlU2VjcmV0O1xuICBnZW5lcmF0ZUtleVBhaXIgPSBjcnlwdG9OYWNsLmdlbmVyYXRlS2V5UGFpcjtcbn1cblxuZXhwb3J0IHtkZXJpdmVTZWNyZXQsIGdlbmVyYXRlS2V5UGFpcn07XG5cbmNvbnN0IHtlZDI1NTE5U2VjcmV0S2V5VG9YMjU1MTl9ID0gY3J5cHRvTmFjbDtcbmV4cG9ydCB7ZWQyNTUxOVNlY3JldEtleVRvWDI1NTE5fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/crypto.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   X25519KeyAgreementKey2020: () => (/* reexport safe */ _X25519KeyAgreementKey2020_js__WEBPACK_IMPORTED_MODULE_0__.X25519KeyAgreementKey2020)\n/* harmony export */ });\n/* harmony import */ var _X25519KeyAgreementKey2020_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./X25519KeyAgreementKey2020.js */ \"(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/X25519KeyAgreementKey2020.js\");\n/*!\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRpZ2l0YWxiYXphYXIveDI1NTE5LWtleS1hZ3JlZW1lbnQta2V5LTIwMjAvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ3lFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL0BkaWdpdGFsYmF6YWFyL3gyNTUxOS1rZXktYWdyZWVtZW50LWtleS0yMDIwL2xpYi9pbmRleC5qcz8wZGYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDIxIERpZ2l0YWwgQmF6YWFyLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cbmV4cG9ydCB7WDI1NTE5S2V5QWdyZWVtZW50S2V5MjAyMH0gZnJvbSAnLi9YMjU1MTlLZXlBZ3JlZW1lbnRLZXkyMDIwLmpzJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@digitalbazaar/x25519-key-agreement-key-2020/lib/index.js\n");

/***/ })

};
;